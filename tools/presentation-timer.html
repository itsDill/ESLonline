<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <meta name="google-adsense-account" content="ca-pub-2456627863532019" />
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9G9RD6BHLN");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Professional presentation timer with visual countdown, progress indicators, and speaker notes. Perfect for managing presentation time effectively."
    />
    <meta
      name="keywords"
      content="presentation timer, countdown timer, speaker timer, presentation countdown, time management, public speaking"
    />
    <meta name="author" content="ESL Fun Online" />
    <title>
      Presentation Timer | ESL Fun Online - Manage Your Presentation Time
    </title>
        <!-- Favicon and Icons - Optimized for Google Search -->
    <link rel="icon" href="../favicon.ico" sizes="any" />
    <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="../images/favicon-48x48.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="../images/1.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="../images/favicon-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="../images/favicon-512x512.png" />

    <!-- Header -->
        <!-- Scroll Progress Indicator -->
    <div class="scroll-progress" id="scrollProgress"></div>
    <!-- Header & Navigation -->
    <header>
      <div class="container">
        <nav class="navbar">
          <a href="../index.html" class="logo-container">
            <img
              src="../images/1.png"
              alt="ESL Fun Online Logo"
              class="logo-image"
              width="40"
              height="40"
            />
            <span class="logo-text">ESL Fun Online</span>
          </a>

          <ul
            class="nav-links"
            id="navLinks"
            role="menubar"
            aria-label="Main navigation"
          >
            <li class="nav-item" role="none">
              <a href="../index.html" class="nav-link" role="menuitem">
                <i class="fas fa-home"></i>
                Home
              </a>
            </li>
            <li class="nav-item" role="none">
              <a
                href="#"
                class="nav-link"
                role="menuitem"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <i class="fas fa-book"></i>
                English
                <i class="fas fa-chevron-down"></i>
              </a>
              <div class="dropdown" role="menu" aria-label="English submenu">
                <a href="../english/grammar.html" class="dropdown-item">
                  <i class="fas fa-spell-check"></i>
                  Grammar Guides
                </a>
                <a href="../english/vocabguide.html" class="dropdown-item">
                  <i class="fas fa-book-open"></i>
                  Vocabulary Building
                </a>
                <a href="../english/worksheets.html" class="dropdown-item">
                  <i class="fas fa-file-alt"></i>
                  Worksheets
                </a>
                <a href="../english/writingf.html" class="dropdown-item">
                  <i class="fas fa-pen"></i>
                  Writing for Success
                </a>
                <a href="../english/business.html" class="dropdown-item">
                  <i class="fas fa-briefcase"></i>
                  Business English
                </a>
                <a href="../english/test.html" class="dropdown-item">
                  <i class="fas fa-graduation-cap"></i>
                  Test Preparation
                </a>
              </div>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="fas fa-code"></i>
                Coding
                <i class="fas fa-chevron-down"></i>
              </a>
              <div class="dropdown">
                <a href="../coding/computerbasics.html" class="dropdown-item">
                  <i class="fas fa-desktop"></i>
                  Computer Basics
                </a>
                <a href="../coding/ai.html" class="dropdown-item">
                  <i class="fas fa-robot"></i>
                  AI Basics
                </a>
                <a href="../coding/codingresources.html" class="dropdown-item">
                  <i class="fas fa-code"></i>
                  Coding Basics
                </a>
              </div>
            </li>

            <li class="nav-item">
              <a href="../games/games.html" class="nav-link">
                <i class="fas fa-dice"></i>
                Games
              </a>
            </li>
            <li class="nav-item">
              <a href="../tools/tools.html" class="nav-link">
                <i class="fas fa-tools"></i>
                Toolkit
              </a>
            </li>
            <li class="nav-item">
              <a href="../blog/blog.html" class="nav-link">
                <i class="fas fa-book-open"></i>
                Blog
              </a>
            </li>
          </ul>

          <div class="controls">
            <button
              class="control-btn theme-toggle"
              id="themeToggle"
              aria-label="Toggle dark mode"
            >
              <i class="fas fa-moon"></i>
            </button>
            <a
              class="control-btn admin-toggle"
              id="adminToggle"
              aria-label="Admin"
              href="../login.html"
            >
              <i class="fas fa-user-shield"></i>
            </a>
          </div>
          <button
            class="control-btn mobile-toggle"
            id="mobileToggle"
            aria-label="Toggle mobile menu"
          >
            <i class="fas fa-bars"></i>
          </button>
        </nav>
      </div>
    </header>

    
    <!-- Immediate Mobile Menu Script - Inline for guaranteed execution -->
    <script>
      (function () {
        "use strict";

        function initMobileMenu() {
          const mobileToggle = document.getElementById("mobileToggle");
          const navLinks = document.getElementById("navLinks");
          const body = document.body;

          if (!mobileToggle || !navLinks) {
            console.warn("Mobile menu elements not found");
            return;
          }

          console.log("Immediate mobile menu initialized");

          let isMenuOpen = false;

          function toggleMenu(e) {
            if (e && e.preventDefault) e.preventDefault();
            if (e && e.stopPropagation) e.stopPropagation();

            isMenuOpen = !isMenuOpen;
            const icon = mobileToggle.querySelector("i");

            if (isMenuOpen) {
              navLinks.classList.add("active");
              body.classList.add("mobile-menu-open");
              body.style.overflow = "hidden";
              if (icon) icon.className = "fas fa-times";
              console.log("Menu opened");
            } else {
              navLinks.classList.remove("active");
              body.classList.remove("mobile-menu-open");
              body.style.overflow = "";
              if (icon) icon.className = "fas fa-bars";
              console.log("Menu closed");

              // Close all dropdowns
              document.querySelectorAll(".nav-item").forEach((item) => {
                item.classList.remove("mobile-open", "mobile-dropdown-open");
                const chevron = item.querySelector(".fa-chevron-down");
                if (chevron) chevron.style.transform = "rotate(0deg)";
              });
            }
          }

          // Simple unified handler - works for both touch and click
          let lastToggleTime = 0;

          function handleToggleClick(e) {
            const now = Date.now();
            // Prevent double-firing within 300ms
            if (now - lastToggleTime < 300) {
              console.log("Toggle ignored - too fast");
              return;
            }
            lastToggleTime = now;

            e.preventDefault();
            e.stopPropagation();
            console.log("Hamburger clicked/tapped");
            toggleMenu(e);
          }

          mobileToggle.addEventListener("click", handleToggleClick);
          mobileToggle.addEventListener("touchend", handleToggleClick);

          // Handle dropdown toggles on mobile
          document.querySelectorAll(".nav-item").forEach((item) => {
            const link = item.querySelector(".nav-link");
            const dropdown = item.querySelector(".dropdown");
            const chevron = link?.querySelector(".fa-chevron-down");

            // Only add special handling for links WITH dropdowns
            if (link && dropdown && chevron) {
              // Simple unified dropdown handler
              let lastDropdownToggle = 0;

              function handleDropdownClick(e) {
                if (window.innerWidth > 768) return; // Only on mobile

                // Don't interfere with dropdown item clicks
                if (
                  e.target.closest(".dropdown-item") ||
                  e.target.closest(".dropdown a")
                ) {
                  console.log("Dropdown item clicked - allowing navigation");
                  return; // Let the link work normally
                }

                const now = Date.now();
                // Prevent double-firing within 300ms
                if (now - lastDropdownToggle < 300) {
                  console.log("Dropdown toggle ignored - too fast");
                  return;
                }
                lastDropdownToggle = now;

                e.preventDefault();
                e.stopPropagation();

                const isOpen = item.classList.contains("mobile-open");
                console.log(
                  "Dropdown clicked:",
                  isOpen ? "closing" : "opening"
                );

                // Close other dropdowns
                document.querySelectorAll(".nav-item").forEach((otherItem) => {
                  if (otherItem !== item) {
                    otherItem.classList.remove(
                      "mobile-open",
                      "mobile-dropdown-open"
                    );
                    const otherChevron =
                      otherItem.querySelector(".fa-chevron-down");
                    if (otherChevron)
                      otherChevron.style.transform = "rotate(0deg)";
                  }
                });

                // Toggle current dropdown
                if (isOpen) {
                  item.classList.remove("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(0deg)";
                  link.setAttribute("aria-expanded", "false");
                } else {
                  item.classList.add("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(180deg)";
                  link.setAttribute("aria-expanded", "true");
                }
              }

              // Remove href="#" behavior on mobile
              if (link.getAttribute("href") === "#") {
                link.style.cursor = "pointer";
              }

              // Attach handlers for both click and touch
              link.addEventListener("click", handleDropdownClick);
              link.addEventListener("touchend", handleDropdownClick);
            }
          });

          // Close menu when clicking outside
          document.addEventListener("click", function (e) {
            if (window.innerWidth <= 768 && isMenuOpen) {
              if (
                !mobileToggle.contains(e.target) &&
                !navLinks.contains(e.target)
              ) {
                toggleMenu(null);
              }
            }
          });

          // Close menu on escape key
          document.addEventListener("keydown", function (e) {
            if (e.key === "Escape" && isMenuOpen) {
              toggleMenu(null);
              mobileToggle.focus();
            }
          });

          // Close menu on window resize to desktop
          window.addEventListener("resize", function () {
            if (window.innerWidth > 768 && isMenuOpen) {
              toggleMenu(null);
            }
          });

          // Close menu after dropdown link click
          document.querySelectorAll(".dropdown a").forEach((link) => {
            link.addEventListener("click", function () {
              if (window.innerWidth <= 768 && isMenuOpen) {
                setTimeout(() => {
                  toggleMenu(null);
                }, 100);
              }
            });
          });
        }

        // Initialize immediately if DOM is ready, otherwise wait
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initMobileMenu);
        } else {
          initMobileMenu();
        }
      })();
    </script>

    <!-- Additional Mobile Dropdown Fixes -->
    <style>
      /* Ensure mobile dropdowns work properly */
      @media (max-width: 768px) {
        /* FORCE mobile menu to display full width */
        .nav-links,
        #navLinks,
        ul.nav-links {
          display: flex !important;
          position: fixed !important;
          top: 70px !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          width: 100vw !important;
          height: auto !important;
          min-height: calc(100vh - 70px) !important;
        }

        .nav-links.active,
        #navLinks.active,
        ul.nav-links.active {
          display: flex !important;
          max-height: calc(100vh - 70px) !important;
          height: auto !important;
        }

        /* Make sure nav links with dropdowns are clearly tappable */
        .nav-item .nav-link {
          position: relative;
          user-select: none;
          -webkit-user-select: none;
          -webkit-tap-highlight-color: rgba(70, 187, 229, 0.2);
          cursor: pointer;
        }

        /* Ensure chevron is visible and clickable */
        .nav-link .fa-chevron-down {
          transition: transform 0.3s ease !important;
          opacity: 1 !important;
          pointer-events: none; /* Let clicks go through to parent link */
        }

        /* Visual feedback when dropdown is open */
        .nav-item.mobile-open > .nav-link,
        .nav-item.mobile-dropdown-open > .nav-link {
          background: rgba(70, 187, 229, 0.15) !important;
          border-color: var(--primary-color, #46bbe5) !important;
        }

        /* Make dropdowns smoother */
        .dropdown {
          transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
            padding 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        /* Ensure dropdown items are visible when parent is open */
        .nav-item.mobile-open .dropdown,
        .nav-item.mobile-dropdown-open .dropdown {
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
          pointer-events: auto !important;
        }

        /* Ensure dropdown items are clickable */
        .dropdown-item,
        .dropdown > a {
          pointer-events: auto !important;
          touch-action: manipulation !important;
          user-select: none;
          -webkit-user-select: none;
        }
      }
    </style>

    <main>
      <div class="container">
        <div style="text-align: center; margin: 2rem 0">
          <h1
            style="
              font-size: 3rem;
              font-weight: 700;
              color: var(--text-primary);
              margin-bottom: 1rem;
            "
          >
            ‚è±Ô∏è Presentation Timer
          </h1>
          <p style="font-size: 1.2rem; color: var(--text-secondary)">
            Professional timer for presentations, speeches, and talks. Visual
            cues help you stay on track and manage your time effectively.
          </p>
        </div>

        <div class="setup-section">
          <h3
            style="
              text-align: center;
              margin-bottom: 2rem;
              color: var(--text-primary);
            "
          >
            Setup Your Presentation
          </h3>
          <div class="setup-grid">
            <div class="setup-item">
              <h4><i class="fas fa-clock"></i> Total Duration</h4>
              <input
                type="number"
                class="time-input"
                id="totalMinutes"
                value="20"
                min="1"
                max="180"
              />
              <label style="font-size: 0.9rem; color: var(--text-secondary)"
                >Minutes</label
              >
              <div class="preset-buttons">
                <button class="preset-btn" data-minutes="5">5 min</button>
                <button class="preset-btn" data-minutes="10">10 min</button>
                <button class="preset-btn" data-minutes="15">15 min</button>
                <button class="preset-btn" data-minutes="20">20 min</button>
                <button class="preset-btn" data-minutes="30">30 min</button>
                <button class="preset-btn" data-minutes="45">45 min</button>
              </div>
            </div>

            <div class="setup-item">
              <h4><i class="fas fa-exclamation-triangle"></i> Warning Times</h4>
              <div
                style="
                  display: grid;
                  grid-template-columns: 1fr 1fr;
                  gap: 0.5rem;
                "
              >
                <div>
                  <input
                    type="number"
                    class="time-input"
                    id="warningMinutes"
                    value="5"
                    min="1"
                  />
                  <label style="font-size: 0.9rem; color: var(--text-secondary)"
                    >Warning (min)</label
                  >
                </div>
                <div>
                  <input
                    type="number"
                    class="time-input"
                    id="dangerMinutes"
                    value="2"
                    min="1"
                  />
                  <label style="font-size: 0.9rem; color: var(--text-secondary)"
                    >Final (min)</label
                  >
                </div>
              </div>
            </div>

            <div class="setup-item">
              <h4><i class="fas fa-list"></i> Sections (Optional)</h4>
              <input
                type="number"
                class="time-input"
                id="sectionsCount"
                value="3"
                min="1"
                max="10"
              />
              <label style="font-size: 0.9rem; color: var(--text-secondary)"
                >Number of sections</label
              >
              <div class="preset-buttons">
                <button class="preset-btn" data-sections="1">1 section</button>
                <button class="preset-btn" data-sections="3">3 sections</button>
                <button class="preset-btn" data-sections="5">5 sections</button>
              </div>
            </div>
          </div>
        </div>

        <div class="timer-container">
          <div class="status-indicator status-ready" id="statusIndicator">
            Ready
          </div>

          <div class="main-timer" id="mainTimer">20:00</div>

          <div class="progress-circle">
            <svg viewBox="0 0 200 200">
              <circle
                class="progress-circle-bg"
                cx="100"
                cy="100"
                r="90"
              ></circle>
              <circle
                class="progress-circle-fill"
                cx="100"
                cy="100"
                r="90"
                id="progressCircle"
              ></circle>
            </svg>
          </div>

          <div class="time-sections" id="timeSections" style="display: none">
            <!-- Sections will be populated here -->
          </div>

          <div class="controls">
            <button class="btn btn-primary" id="startBtn">
              <i class="fas fa-play"></i> Start
            </button>
            <button class="btn btn-warning" id="pauseBtn" style="display: none">
              <i class="fas fa-pause"></i> Pause
            </button>
            <button class="btn btn-secondary" id="resetBtn">
              <i class="fas fa-redo"></i> Reset
            </button>
            <button class="btn btn-secondary" id="fullscreenBtn">
              <i class="fas fa-expand"></i> Fullscreen
            </button>
            <a href="tools.html" class="btn btn-secondary">
              <i class="fas fa-arrow-left"></i> Back to Tools
            </a>
          </div>
        </div>

        <div class="notes-section">
          <h3 style="margin-bottom: 1rem; color: var(--text-primary)">
            <i class="fas fa-sticky-note"></i> Speaker Notes
          </h3>
          <textarea
            class="notes-input"
            id="speakerNotes"
            placeholder="Add your presentation notes, key points, or reminders here..."
          ></textarea>
        </div>
      </div>
    </main>

    <!-- Fullscreen Timer -->
    <div class="fullscreen-mode" id="fullscreenTimer" style="display: none">
      <div class="main-timer" id="fullscreenMainTimer">20:00</div>
      <div style="font-size: 1.5rem; margin-top: 2rem; opacity: 0.8">
        Press <strong>ESC</strong> to exit fullscreen
      </div>
    </div>

    <script>
      let totalTime = 20 * 60; // in seconds
      let currentTime = totalTime;
      let warningTime = 5 * 60;
      let dangerTime = 2 * 60;
      let sectionsCount = 3;
      let sections = [];
      let currentSection = 0;
      let timerInterval = null;
      let isRunning = false;
      let isPaused = false;
      let isFullscreen = false;

      // DOM elements
      const mainTimer = document.getElementById("mainTimer");
      const fullscreenMainTimer = document.getElementById(
        "fullscreenMainTimer"
      );
      const statusIndicator = document.getElementById("statusIndicator");
      const progressCircle = document.getElementById("progressCircle");
      const startBtn = document.getElementById("startBtn");
      const pauseBtn = document.getElementById("pauseBtn");
      const resetBtn = document.getElementById("resetBtn");
      const fullscreenBtn = document.getElementById("fullscreenBtn");
      const fullscreenTimer = document.getElementById("fullscreenTimer");
      const timeSections = document.getElementById("timeSections");
      const totalMinutesInput = document.getElementById("totalMinutes");
      const warningMinutesInput = document.getElementById("warningMinutes");
      const dangerMinutesInput = document.getElementById("dangerMinutes");
      const sectionsCountInput = document.getElementById("sectionsCount");

      // Event listeners
      document.querySelectorAll(".preset-btn[data-minutes]").forEach((btn) => {
        btn.addEventListener("click", () => {
          totalMinutesInput.value = btn.dataset.minutes;
          updateSettings();
        });
      });

      document.querySelectorAll(".preset-btn[data-sections]").forEach((btn) => {
        btn.addEventListener("click", () => {
          sectionsCountInput.value = btn.dataset.sections;
          updateSettings();
        });
      });

      [
        totalMinutesInput,
        warningMinutesInput,
        dangerMinutesInput,
        sectionsCountInput,
      ].forEach((input) => {
        input.addEventListener("change", updateSettings);
      });

      startBtn.addEventListener("click", startTimer);
      pauseBtn.addEventListener("click", pauseTimer);
      resetBtn.addEventListener("click", resetTimer);
      fullscreenBtn.addEventListener("click", toggleFullscreen);

      // Keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        if (e.code === "Space" && !e.target.matches("input, textarea")) {
          e.preventDefault();
          if (isRunning) {
            pauseTimer();
          } else {
            startTimer();
          }
        } else if (e.code === "Escape") {
          if (isFullscreen) {
            exitFullscreen();
          }
        } else if (e.code === "KeyR" && e.ctrlKey) {
          e.preventDefault();
          resetTimer();
        } else if (e.code === "KeyF" && e.ctrlKey) {
          e.preventDefault();
          toggleFullscreen();
        }
      });

      function updateSettings() {
        if (isRunning) return;

        totalTime = parseInt(totalMinutesInput.value) * 60;
        warningTime = parseInt(warningMinutesInput.value) * 60;
        dangerTime = parseInt(dangerMinutesInput.value) * 60;
        sectionsCount = parseInt(sectionsCountInput.value);

        currentTime = totalTime;
        updateDisplay();
        generateSections();
      }

      function generateSections() {
        sections = [];
        const sectionTime = Math.floor(totalTime / sectionsCount);

        for (let i = 0; i < sectionsCount; i++) {
          sections.push({
            title: `Section ${i + 1}`,
            duration: sectionTime,
            elapsed: 0,
            active: i === 0,
          });
        }

        renderSections();
      }

      function renderSections() {
        if (sectionsCount <= 1) {
          timeSections.style.display = "none";
          return;
        }

        timeSections.style.display = "grid";
        timeSections.innerHTML = "";

        sections.forEach((section, index) => {
          const sectionDiv = document.createElement("div");
          sectionDiv.className = `time-section ${
            section.active ? "active" : ""
          }`;
          sectionDiv.innerHTML = `
                    <div class="section-title">${section.title}</div>
                    <div class="section-time">${formatTime(
                      section.duration - section.elapsed
                    )}</div>
                `;
          timeSections.appendChild(sectionDiv);
        });
      }

      function startTimer() {
        if (isPaused) {
          // Resume
          isRunning = true;
          isPaused = false;
        } else {
          // Fresh start
          isRunning = true;
          currentSection = 0;
          if (sections.length > 0) {
            sections.forEach((section, index) => {
              section.active = index === 0;
              section.elapsed = 0;
            });
          }
        }

        startBtn.style.display = "none";
        pauseBtn.style.display = "inline-flex";
        statusIndicator.textContent = "Running";
        statusIndicator.className = "status-indicator status-running";

        timerInterval = setInterval(updateTimer, 1000);
      }

      function pauseTimer() {
        isRunning = false;
        isPaused = true;
        clearInterval(timerInterval);

        startBtn.style.display = "inline-flex";
        startBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
        pauseBtn.style.display = "none";
        statusIndicator.textContent = "Paused";
        statusIndicator.className = "status-indicator status-paused";
      }

      function resetTimer() {
        isRunning = false;
        isPaused = false;
        clearInterval(timerInterval);
        currentTime = totalTime;
        currentSection = 0;

        startBtn.style.display = "inline-flex";
        startBtn.innerHTML = '<i class="fas fa-play"></i> Start';
        pauseBtn.style.display = "none";
        statusIndicator.textContent = "Ready";
        statusIndicator.className = "status-indicator status-ready";

        // Reset sections
        if (sections.length > 0) {
          sections.forEach((section, index) => {
            section.active = index === 0;
            section.elapsed = 0;
          });
        }

        updateDisplay();
        renderSections();
      }

      function updateTimer() {
        currentTime--;

        // Update sections
        if (sections.length > 0 && currentSection < sections.length) {
          sections[currentSection].elapsed++;

          if (
            sections[currentSection].elapsed >=
              sections[currentSection].duration &&
            currentSection < sections.length - 1
          ) {
            sections[currentSection].active = false;
            currentSection++;
            if (currentSection < sections.length) {
              sections[currentSection].active = true;
            }
          }
        }

        updateDisplay();
        renderSections();

        if (currentTime <= 0) {
          finishTimer();
        }
      }

      function finishTimer() {
        isRunning = false;
        clearInterval(timerInterval);

        startBtn.style.display = "inline-flex";
        startBtn.innerHTML = '<i class="fas fa-play"></i> Start';
        pauseBtn.style.display = "none";
        statusIndicator.textContent = "Finished";
        statusIndicator.className = "status-indicator status-finished";

        // Play completion sound
        try {
          const audio = new Audio(
            "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmAeBj+R2+zAcCEDKHp"
          );
          audio.play().catch(() => {});
        } catch (e) {}

        alert("üéâ Presentation time complete! Great job!");
      }

      function updateDisplay() {
        const timeStr = formatTime(currentTime);
        mainTimer.textContent = timeStr;
        fullscreenMainTimer.textContent = timeStr;

        // Update timer color based on remaining time
        const timerElements = [mainTimer, fullscreenMainTimer];
        timerElements.forEach((timer) => {
          timer.classList.remove("warning", "danger");
          if (currentTime <= dangerTime) {
            timer.classList.add("danger");
          } else if (currentTime <= warningTime) {
            timer.classList.add("warning");
          }
        });

        // Update progress circle
        const progress = (totalTime - currentTime) / totalTime;
        const circumference = 2 * Math.PI * 90;
        const offset = circumference * (1 - progress);
        progressCircle.style.strokeDashoffset = offset;

        // Update progress circle color
        if (currentTime <= dangerTime) {
          progressCircle.style.stroke = "var(--error-color)";
        } else if (currentTime <= warningTime) {
          progressCircle.style.stroke = "var(--warning-color)";
        } else {
          progressCircle.style.stroke = "var(--primary-color)";
        }
      }

      function formatTime(seconds) {
        const mins = Math.floor(Math.abs(seconds) / 60);
        const secs = Math.abs(seconds) % 60;
        const sign = seconds < 0 ? "-" : "";
        return `${sign}${mins.toString().padStart(2, "0")}:${secs
          .toString()
          .padStart(2, "0")}`;
      }

      function toggleFullscreen() {
        if (isFullscreen) {
          exitFullscreen();
        } else {
          enterFullscreen();
        }
      }

      function enterFullscreen() {
        isFullscreen = true;
        fullscreenTimer.style.display = "flex";
        fullscreenBtn.innerHTML =
          '<i class="fas fa-compress"></i> Exit Fullscreen';

        // Request fullscreen API if available
        if (document.documentElement.requestFullscreen) {
          document.documentElement.requestFullscreen().catch(() => {});
        }
      }

      function exitFullscreen() {
        isFullscreen = false;
        fullscreenTimer.style.display = "none";
        fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i> Fullscreen';

        // Exit fullscreen API if available
        if (document.exitFullscreen) {
          document.exitFullscreen().catch(() => {});
        }
      }

      // Initialize
      updateSettings();
      generateSections();
      updateDisplay();

      // Auto-save notes
      const speakerNotes = document.getElementById("speakerNotes");
      speakerNotes.addEventListener("input", () => {
        localStorage.setItem("presentationNotes", speakerNotes.value);
      });

      // Load saved notes
      const savedNotes = localStorage.getItem("presentationNotes");
      if (savedNotes) {
        speakerNotes.value = savedNotes;
      }
    </script>

    <script src="../js/navigation.js"></script>
  </body>
</html>
