<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9G9RD6BHLN");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Test your typing speed and accuracy with our interactive typing speed test. Improve your WPM and typing skills with real-time feedback."
    />
    <meta
      name="keywords"
      content="typing test, typing speed, WPM, words per minute, typing skills, keyboard practice"
    />
    <meta name="author" content="ESL Fun Online" />
    <title>
      Typing Speed Test | ESL Fun Online - Improve Your Typing Skills
    </title>
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="../images/1.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../images/1.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="../images/1.png" />
    <link rel="shortcut icon" href="../images/1.png" />
    <link rel="icon" href="../images/1.png" />



    <link
      rel="canonical"
      href="https://eslfunonline.com/tools/typing-test.html"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/mobile-optimized.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/layout-fixes.css" />
    <link rel="stylesheet" href="../css/mobile-footer.css" />

    <style>
      :root {
        --primary-color: #46bbe5;
        --primary-hover: #05425c;
        --secondary-color: #f59e0b;
        --accent-color: #10b981;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --border-color: #e5e7eb;
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        --error-color: #ef4444;
        --success-color: #10b981;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 2rem 1rem;
      }

      .typing-container {
        background: var(--bg-primary);
        border-radius: 16px;
        padding: 2rem;
        margin: 2rem 0;
        box-shadow: var(--shadow-md);
      }

      .typing-text {
        background: var(--bg-secondary);
        border: 2px solid var(--border-color);
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        font-size: 1.2rem;
        line-height: 1.8;
        font-family: "Georgia", serif;
        position: relative;
      }

      .typing-text .correct {
        background-color: #dcfce7;
        color: var(--success-color);
      }

      .typing-text .incorrect {
        background-color: #fecaca;
        color: var(--error-color);
      }

      .typing-text .current {
        background-color: var(--primary-color);
        color: white;
        animation: blink 1s infinite;
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0.3;
        }
      }

      .typing-input {
        width: 100%;
        padding: 1.5rem;
        border: 2px solid var(--border-color);
        border-radius: 12px;
        font-size: 1.1rem;
        font-family: "Inter", sans-serif;
        margin-bottom: 2rem;
        transition: border-color 0.3s ease;
      }

      .typing-input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .typing-input:disabled {
        background-color: var(--bg-secondary);
        opacity: 0.6;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .stat-card {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--primary-hover)
        );
        color: white;
        padding: 1.5rem;
        border-radius: 12px;
        text-align: center;
        box-shadow: var(--shadow-md);
      }

      .stat-value {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .stat-label {
        font-size: 0.9rem;
        opacity: 0.9;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .controls {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: var(--primary-color);
        color: white;
      }

      .btn-primary:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
      }

      .btn-secondary {
        background: transparent;
        color: var(--primary-color);
        border: 2px solid var(--primary-color);
      }

      .btn-secondary:hover {
        background: var(--primary-color);
        color: white;
      }

      .difficulty-selector {
        text-align: center;
        margin-bottom: 2rem;
      }

      .difficulty-btn {
        padding: 0.5rem 1rem;
        margin: 0 0.5rem;
        background: var(--bg-secondary);
        border: 2px solid var(--border-color);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .difficulty-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .results-container {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 2rem;
        border-radius: 16px;
        text-align: center;
        margin-top: 2rem;
        display: none;
      }

      .results-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 1rem;
      }

      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }

      .result-item {
        background: rgba(255, 255, 255, 0.1);
        padding: 1.5rem;
        border-radius: 12px;
        backdrop-filter: blur(10px);
      }

      .progress-bar {
        background: var(--bg-secondary);
        height: 8px;
        border-radius: 4px;
        margin: 1rem 0;
        overflow: hidden;
      }

      .progress-fill {
        background: var(--primary-color);
        height: 100%;
        width: 0%;
        transition: width 0.3s ease;
        border-radius: 4px;
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }

        .typing-container {
          padding: 1rem;
        }

        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .controls {
          flex-direction: column;
          align-items: center;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <nav class="navbar">
          <a href="../index.html" class="logo-container">
            <img
              src="../images/1.png"
              alt="ESL Fun Online Logo"
              class="logo-image"
              width="40"
              height="40"
            />
            <span class="logo-text">ESL Fun Online</span>
          </a>
          <ul class="nav-links" id="navLinks">
            <li>
              <a href="../index.html" class="nav-link"
                ><i class="fas fa-home"></i> Home</a
              >
            </li>
            <li>
              <a href="../tools/tools.html" class="nav-link"
                ><i class="fas fa-tools"></i> Tools</a
              >
            </li>
            <li>
              <a href="../games/games.html" class="nav-link"
                ><i class="fas fa-gamepad"></i> Games</a
              >
            </li>
          </ul>
          <div class="controls">
            <button class="control-btn theme-toggle" id="themeToggle">
              <i class="fas fa-moon"></i>
            </button>
          </div>
        </nav>
      </div>
    </header>

    <!-- Immediate Mobile Menu Script - Inline for guaranteed execution -->
    <script>
      (function () {
        "use strict";

        function initMobileMenu() {
          const mobileToggle = document.getElementById("mobileToggle");
          const navLinks = document.getElementById("navLinks");
          const body = document.body;

          if (!mobileToggle || !navLinks) {
            console.warn("Mobile menu elements not found");
            return;
          }

          console.log("Immediate mobile menu initialized");

          let isMenuOpen = false;

          function toggleMenu(e) {
            if (e && e.preventDefault) e.preventDefault();
            if (e && e.stopPropagation) e.stopPropagation();

            isMenuOpen = !isMenuOpen;
            const icon = mobileToggle.querySelector("i");

            if (isMenuOpen) {
              navLinks.classList.add("active");
              body.classList.add("mobile-menu-open");
              body.style.overflow = "hidden";
              if (icon) icon.className = "fas fa-times";
              console.log("Menu opened");
            } else {
              navLinks.classList.remove("active");
              body.classList.remove("mobile-menu-open");
              body.style.overflow = "";
              if (icon) icon.className = "fas fa-bars";
              console.log("Menu closed");

              // Close all dropdowns
              document.querySelectorAll(".nav-item").forEach((item) => {
                item.classList.remove("mobile-open", "mobile-dropdown-open");
                const chevron = item.querySelector(".fa-chevron-down");
                if (chevron) chevron.style.transform = "rotate(0deg)";
              });
            }
          }

          // Simple unified handler - works for both touch and click
          let lastToggleTime = 0;
          
          function handleToggleClick(e) {
            const now = Date.now();
            // Prevent double-firing within 300ms
            if (now - lastToggleTime < 300) {
              console.log("Toggle ignored - too fast");
              return;
            }
            lastToggleTime = now;
            
            e.preventDefault();
            e.stopPropagation();
            console.log("Hamburger clicked/tapped");
            toggleMenu(e);
          }

          mobileToggle.addEventListener("click", handleToggleClick);
          mobileToggle.addEventListener("touchend", handleToggleClick);

          // Handle dropdown toggles on mobile
          document.querySelectorAll(".nav-item").forEach((item) => {
            const link = item.querySelector(".nav-link");
            const dropdown = item.querySelector(".dropdown");
            const chevron = link?.querySelector(".fa-chevron-down");

            // Only add special handling for links WITH dropdowns
            if (link && dropdown && chevron) {
              // Simple unified dropdown handler
              let lastDropdownToggle = 0;
              
              function handleDropdownClick(e) {
                if (window.innerWidth > 768) return; // Only on mobile
                
                const now = Date.now();
                // Prevent double-firing within 300ms
                if (now - lastDropdownToggle < 300) {
                  console.log("Dropdown toggle ignored - too fast");
                  return;
                }
                lastDropdownToggle = now;
                
                e.preventDefault();
                e.stopPropagation();

                const isOpen = item.classList.contains("mobile-open");
                console.log("Dropdown clicked:", isOpen ? "closing" : "opening");

                // Close other dropdowns
                document.querySelectorAll(".nav-item").forEach((otherItem) => {
                  if (otherItem !== item) {
                    otherItem.classList.remove("mobile-open", "mobile-dropdown-open");
                    const otherChevron = otherItem.querySelector(".fa-chevron-down");
                    if (otherChevron) otherChevron.style.transform = "rotate(0deg)";
                  }
                });

                // Toggle current dropdown
                if (isOpen) {
                  item.classList.remove("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(0deg)";
                  link.setAttribute("aria-expanded", "false");
                } else {
                  item.classList.add("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(180deg)";
                  link.setAttribute("aria-expanded", "true");
                }
              }

              // Remove href="#" behavior on mobile
              if (link.getAttribute("href") === "#") {
                link.style.cursor = "pointer";
              }

              // Attach handlers for both click and touch
              link.addEventListener("click", handleDropdownClick);
              link.addEventListener("touchend", handleDropdownClick);
            }
          });

          // Close menu when clicking outside
          document.addEventListener("click", function (e) {
            if (window.innerWidth <= 768 && isMenuOpen) {
              if (
                !mobileToggle.contains(e.target) &&
                !navLinks.contains(e.target)
              ) {
                toggleMenu(null);
              }
            }
          });

          // Close menu on escape key
          document.addEventListener("keydown", function (e) {
            if (e.key === "Escape" && isMenuOpen) {
              toggleMenu(null);
              mobileToggle.focus();
            }
          });

          // Close menu on window resize to desktop
          window.addEventListener("resize", function () {
            if (window.innerWidth > 768 && isMenuOpen) {
              toggleMenu(null);
            }
          });

          // Close menu after dropdown link click
          document.querySelectorAll(".dropdown a").forEach((link) => {
            link.addEventListener("click", function () {
              if (window.innerWidth <= 768 && isMenuOpen) {
                setTimeout(() => {
                  toggleMenu(null);
                }, 100);
              }
            });
          });
        }

        // Initialize immediately if DOM is ready, otherwise wait
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initMobileMenu);
        } else {
          initMobileMenu();
        }
      })();
    </script>

    <!-- Additional Mobile Dropdown Fixes -->
    <style>
      /* Ensure mobile dropdowns work properly */
      @media (max-width: 768px) {
        /* FORCE mobile menu to display full width */
        .nav-links,
        #navLinks,
        ul.nav-links {
          display: flex !important;
          position: fixed !important;
          top: 70px !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          width: 100vw !important;
          height: auto !important;
          min-height: calc(100vh - 70px) !important;
        }

        .nav-links.active,
        #navLinks.active,
        ul.nav-links.active {
          display: flex !important;
          max-height: calc(100vh - 70px) !important;
          height: auto !important;
        }

        /* Make sure nav links with dropdowns are clearly tappable */
        .nav-item .nav-link {
          position: relative;
          user-select: none;
          -webkit-user-select: none;
          -webkit-tap-highlight-color: rgba(70, 187, 229, 0.2);
          cursor: pointer;
        }

        /* Ensure chevron is visible and clickable */
        .nav-link .fa-chevron-down {
          transition: transform 0.3s ease !important;
          opacity: 1 !important;
          pointer-events: none; /* Let clicks go through to parent link */
        }

        /* Visual feedback when dropdown is open */
        .nav-item.mobile-open > .nav-link,
        .nav-item.mobile-dropdown-open > .nav-link {
          background: rgba(70, 187, 229, 0.15) !important;
          border-color: var(--primary-color, #46bbe5) !important;
        }

        /* Make dropdowns smoother */
        .dropdown {
          transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
            padding 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        /* Ensure dropdown items are visible when parent is open */
        .nav-item.mobile-open .dropdown,
        .nav-item.mobile-dropdown-open .dropdown {
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
        }

        /* Override any conflicting hover states */
        .nav-item:hover .dropdown {
          max-height: 0 !important;
          padding: 0 !important;
        }

        .nav-item.mobile-open:hover .dropdown,
        .nav-item.mobile-dropdown-open:hover .dropdown {
          max-height: 600px !important;
          padding: 0.75rem 0.5rem !important;
        }
      }
    </style>



    <main>
      <div class="container">
        <div style="text-align: center; margin: 2rem 0">
          <h1
            style="
              font-size: 3rem;
              font-weight: 700;
              color: var(--text-primary);
              margin-bottom: 1rem;
            "
          >
            <i class="fas fa-keyboard"></i> Typing Speed Test
          </h1>
          <p style="font-size: 1.2rem; color: var(--text-secondary)">
            Test your typing speed and accuracy. Challenge yourself to type
            faster and more accurately!
          </p>
        </div>

        <div class="difficulty-selector">
          <h3>Choose Difficulty:</h3>
          <button class="difficulty-btn active" data-difficulty="easy">
            Easy
          </button>
          <button class="difficulty-btn" data-difficulty="medium">
            Medium
          </button>
          <button class="difficulty-btn" data-difficulty="hard">Hard</button>
        </div>

        <div class="typing-container">
          <div class="typing-text" id="typingText">
            Click "Start Test" to begin your typing challenge!
          </div>

          <div
            style="
              width: 100%;
              height: 150px;
              background: #f8f9fa;
              border: 2px dashed #dee2e6;
              border-radius: 8px;
              display: flex;
              align-items: center;
              justify-content: center;
              color: #6c757d;
              font-style: italic;
            "
          >
            Typing input temporarily disabled
          </div>

          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="wpmStat">0</div>
              <div class="stat-label">WPM</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="accuracyStat">100</div>
              <div class="stat-label">Accuracy %</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="timeStat">60</div>
              <div class="stat-label">Time Left</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="errorsStat">0</div>
              <div class="stat-label">Errors</div>
            </div>
          </div>

          <div class="controls">
            <button class="btn btn-primary" id="startBtn">
              <i class="fas fa-play"></i> Start Test
            </button>
            <button class="btn btn-secondary" id="resetBtn">
              <i class="fas fa-redo"></i> Reset
            </button>
            <a href="tools.html" class="btn btn-secondary">
              <i class="fas fa-arrow-left"></i> Back to Tools
            </a>
          </div>

          <div class="results-container" id="resultsContainer">
            <div class="results-title">ðŸŽ‰ Test Complete!</div>
            <div class="results-grid">
              <div class="result-item">
                <h3>Final WPM</h3>
                <div id="finalWPM" style="font-size: 2rem; font-weight: bold">
                  0
                </div>
              </div>
              <div class="result-item">
                <h3>Accuracy</h3>
                <div
                  id="finalAccuracy"
                  style="font-size: 2rem; font-weight: bold"
                >
                  0%
                </div>
              </div>
              <div class="result-item">
                <h3>Total Errors</h3>
                <div
                  id="finalErrors"
                  style="font-size: 2rem; font-weight: bold"
                >
                  0
                </div>
              </div>
              <div class="result-item">
                <h3>Performance</h3>
                <div
                  id="performanceRating"
                  style="font-size: 2rem; font-weight: bold"
                >
                  Great!
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      // Typing test texts for different difficulties
      const texts = {
        easy: [
          "The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet and is perfect for typing practice.",
          "Learning to type fast is a valuable skill. With practice and patience, anyone can improve their typing speed and accuracy.",
          "Technology has changed the way we communicate. Typing quickly helps us express our thoughts more efficiently in the digital age.",
        ],
        medium: [
          "Proficient typing skills are essential in today's digital workplace. Whether you're writing emails, creating documents, or coding, faster typing improves productivity and reduces fatigue during long work sessions.",
          "The art of touch typing involves muscle memory and proper finger placement. By positioning your fingers correctly on the home row keys, you can achieve remarkable speed improvements.",
          "Regular practice with challenging texts helps develop both speed and accuracy. Focus on maintaining consistent rhythm rather than rushing, as smooth typing often leads to better overall performance.",
        ],
        hard: [
          "Sophisticated algorithms and complex data structures require meticulous implementation. Professional programmers must balance efficiency with readability, ensuring their code remains maintainable while optimizing performance.",
          "Entrepreneurial ventures necessitate comprehensive market analysis, strategic planning, and exceptional execution capabilities. Successful organizations demonstrate adaptability, innovation, and unwavering commitment to excellence.",
          "Pharmaceutical research involves intricate molecular interactions, rigorous clinical trials, and extensive regulatory compliance. Scientists meticulously analyze experimental data to develop breakthrough treatments.",
        ],
      };

      let currentText = "";
      let currentDifficulty = "easy";
      let startTime = null;
      let endTime = null;
      let timer = null;
      let timeLimit = 60;
      let timeLeft = timeLimit;
      let isTestActive = false;
      let currentPosition = 0;
      let errors = 0;
      let correctChars = 0;

      // DOM elements
      const typingText = document.getElementById("typingText");
      const typingInput = document.getElementById("typingInput");
      const startBtn = document.getElementById("startBtn");
      const resetBtn = document.getElementById("resetBtn");
      const progressFill = document.getElementById("progressFill");
      const resultsContainer = document.getElementById("resultsContainer");

      // Stat elements
      const wpmStat = document.getElementById("wpmStat");
      const accuracyStat = document.getElementById("accuracyStat");
      const timeStat = document.getElementById("timeStat");
      const errorsStat = document.getElementById("errorsStat");

      // Difficulty selector
      document.querySelectorAll(".difficulty-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          document
            .querySelectorAll(".difficulty-btn")
            .forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          currentDifficulty = btn.dataset.difficulty;
          if (!isTestActive) {
            loadNewText();
          }
        });
      });

      function loadNewText() {
        const textArray = texts[currentDifficulty];
        currentText = textArray[Math.floor(Math.random() * textArray.length)];
        displayText();
      }

      function displayText() {
        let displayHTML = "";
        for (let i = 0; i < currentText.length; i++) {
          let charClass = "";
          if (i < currentPosition) {
            charClass =
              typingInput.value[i] === currentText[i] ? "correct" : "incorrect";
          } else if (i === currentPosition) {
            charClass = "current";
          }
          displayHTML += `<span class="${charClass}">${currentText[i]}</span>`;
        }
        typingText.innerHTML = displayHTML;
      }

      function startTest() {
        if (isTestActive) return;

        isTestActive = true;
        startTime = Date.now();
        timeLeft = timeLimit;
        currentPosition = 0;
        errors = 0;
        correctChars = 0;

        loadNewText();
        typingInput.value = "";
        typingInput.disabled = false;
        typingInput.focus();

        startBtn.innerHTML = '<i class="fas fa-pause"></i> Test Running...';
        startBtn.disabled = true;

        resultsContainer.style.display = "none";

        timer = setInterval(updateTimer, 1000);
      }

      function updateTimer() {
        timeLeft--;
        timeStat.textContent = timeLeft;

        if (timeLeft <= 0) {
          endTest();
        }
      }

      function endTest() {
        isTestActive = false;
        endTime = Date.now();
        clearInterval(timer);

        typingInput.disabled = true;
        startBtn.innerHTML = '<i class="fas fa-play"></i> Start Test';
        startBtn.disabled = false;

        calculateResults();
        showResults();
      }

      function calculateResults() {
        const timeElapsed = (endTime - startTime) / 1000 / 60; // in minutes
        const wordsTyped = correctChars / 5; // Standard: 5 characters = 1 word
        const wpm = Math.round(wordsTyped / timeElapsed);
        const accuracy =
          Math.round((correctChars / (correctChars + errors)) * 100) || 0;

        wpmStat.textContent = wpm;
        accuracyStat.textContent = accuracy;
        errorsStat.textContent = errors;

        // Update final results
        document.getElementById("finalWPM").textContent = wpm;
        document.getElementById("finalAccuracy").textContent = accuracy + "%";
        document.getElementById("finalErrors").textContent = errors;

        // Performance rating
        let rating = "Needs Practice";
        if (wpm >= 80 && accuracy >= 95) rating = "Excellent!";
        else if (wpm >= 60 && accuracy >= 90) rating = "Very Good!";
        else if (wpm >= 40 && accuracy >= 85) rating = "Good!";
        else if (wpm >= 25 && accuracy >= 80) rating = "Fair";

        document.getElementById("performanceRating").textContent = rating;
      }

      function showResults() {
        resultsContainer.style.display = "block";
        resultsContainer.scrollIntoView({ behavior: "smooth" });
      }

      function resetTest() {
        isTestActive = false;
        clearInterval(timer);

        currentPosition = 0;
        errors = 0;
        correctChars = 0;
        timeLeft = timeLimit;

        typingInput.value = "";
        typingInput.disabled = true;

        startBtn.innerHTML = '<i class="fas fa-play"></i> Start Test';
        startBtn.disabled = false;

        resultsContainer.style.display = "none";

        // Reset stats
        wpmStat.textContent = "0";
        accuracyStat.textContent = "100";
        timeStat.textContent = timeLimit;
        errorsStat.textContent = "0";
        progressFill.style.width = "0%";

        loadNewText();
      }

      // Event listeners
      startBtn.addEventListener("click", startTest);
      resetBtn.addEventListener("click", resetTest);

      typingInput.addEventListener("input", (e) => {
        if (!isTestActive) return;

        const typedText = e.target.value;
        currentPosition = typedText.length;

        // Count errors and correct characters
        errors = 0;
        correctChars = 0;

        for (let i = 0; i < typedText.length; i++) {
          if (i < currentText.length) {
            if (typedText[i] === currentText[i]) {
              correctChars++;
            } else {
              errors++;
            }
          }
        }

        // Update progress
        const progress = (currentPosition / currentText.length) * 100;
        progressFill.style.width = Math.min(progress, 100) + "%";

        // Update real-time stats
        const timeElapsed = (Date.now() - startTime) / 1000 / 60;
        if (timeElapsed > 0) {
          const wpm = Math.round(correctChars / 5 / timeElapsed);
          wpmStat.textContent = wpm;
        }

        const accuracy =
          Math.round((correctChars / (correctChars + errors)) * 100) || 100;
        accuracyStat.textContent = accuracy;
        errorsStat.textContent = errors;

        displayText();

        // Check if text is completed
        if (currentPosition >= currentText.length) {
          endTest();
        }
      });

      // Prevent paste
      typingInput.addEventListener("paste", (e) => {
        e.preventDefault();
      });

      // Initialize
      loadNewText();
    </script>

    <script src="../js/navigation.js"></script>
  </body>
</html>
