<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Create beautiful word clouds from your text. Visualize word frequency and importance with our interactive word cloud generator tool."
    />
    <meta
      name="keywords"
      content="word cloud, word cloud generator, text visualization, word frequency, text analysis, visual word map"
    />
    <meta name="author" content="ESL Fun Online" />
    <title>Word Cloud Generator | ESL Fun Online - Visualize Your Text</title>
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="../images/1.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../images/1.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="../images/1.png" />
    <link rel="shortcut icon" href="../images/1.png" />
    <link rel="icon" href="../images/1.png" />



    <link
      rel="canonical"
      href="https://eslfunonline.com/tools/word-cloud.html"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/mobile-optimized.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/layout-fixes.css" />
    <link rel="stylesheet" href="../css/mobile-footer.css" />

    <style>
      :root {
        --primary-color: #46bbe5;
        --primary-hover: #05425c;
        --secondary-color: #f59e0b;
        --accent-color: #10b981;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --border-color: #e5e7eb;
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem 1rem;
      }

      .word-cloud-container {
        background: var(--bg-primary);
        border-radius: 16px;
        padding: 2rem;
        margin: 2rem 0;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--border-color);
      }

      .input-section {
        margin-bottom: 2rem;
      }

      .text-input {
        width: 100%;
        min-height: 200px;
        padding: 1.5rem;
        border: 2px solid var(--border-color);
        border-radius: 12px;
        font-size: 1rem;
        font-family: "Inter", sans-serif;
        resize: vertical;
        transition: border-color 0.3s ease;
      }

      .text-input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .controls-section {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .control-group {
        background: var(--bg-secondary);
        padding: 1.5rem;
        border-radius: 12px;
        border: 1px solid var(--border-color);
      }

      .control-group h3 {
        margin-bottom: 1rem;
        color: var(--text-primary);
        font-size: 1.1rem;
      }

      .control-item {
        margin-bottom: 1rem;
      }

      .control-item label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .control-input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        font-size: 0.95rem;
      }

      .color-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 0.5rem;
      }

      .color-option {
        width: 40px;
        height: 40px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .color-option.active {
        border-color: var(--primary-color);
        transform: scale(1.1);
      }

      .word-cloud-canvas {
        width: 100%;
        height: 500px;
        border: 2px solid var(--border-color);
        border-radius: 12px;
        background: var(--bg-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }

      .word-cloud-word {
        position: absolute;
        font-family: "Poppins", sans-serif;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }

      .word-cloud-word:hover {
        transform: scale(1.1);
        z-index: 10;
      }

      .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1rem;
      }

      .btn-primary {
        background: var(--primary-color);
        color: white;
      }

      .btn-primary:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
      }

      .btn-secondary {
        background: transparent;
        color: var(--primary-color);
        border: 2px solid var(--primary-color);
      }

      .btn-secondary:hover {
        background: var(--primary-color);
        color: white;
      }

      .action-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin: 2rem 0;
        flex-wrap: wrap;
      }

      .stats-section {
        background: var(--bg-secondary);
        padding: 1.5rem;
        border-radius: 12px;
        margin: 2rem 0;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
      }

      .stat-item {
        text-align: center;
        padding: 1rem;
        background: var(--bg-primary);
        border-radius: 8px;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
      }

      .stat-label {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .word-list {
        background: var(--bg-secondary);
        padding: 1.5rem;
        border-radius: 12px;
        margin: 2rem 0;
        max-height: 300px;
        overflow-y: auto;
      }

      .word-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--border-color);
      }

      .word-item:last-child {
        border-bottom: none;
      }

      .word-frequency {
        background: var(--primary-color);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
      }

      .preset-buttons {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        margin-bottom: 1rem;
      }

      .preset-btn {
        padding: 0.5rem 1rem;
        background: var(--bg-primary);
        border: 1px solid var(--border-color);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
      }

      .preset-btn:hover {
        background: var(--primary-color);
        color: white;
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }

        .controls-section {
          grid-template-columns: 1fr;
        }

        .action-buttons {
          flex-direction: column;
          align-items: center;
        }

        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <nav class="navbar">
          <a href="../index.html" class="logo-container">
            <img
              src="../images/1.png"
              alt="ESL Fun Online Logo"
              class="logo-image"
              width="40"
              height="40"
            />
            <span class="logo-text">ESL Fun Online</span>
          </a>
          <ul class="nav-links" id="navLinks">
            <li>
              <a href="../index.html" class="nav-link"
                ><i class="fas fa-home"></i> Home</a
              >
            </li>
            <li>
              <a href="../tools/tools.html" class="nav-link"
                ><i class="fas fa-tools"></i> Tools</a
              >
            </li>
            <li>
              <a href="../games/games.html" class="nav-link"
                ><i class="fas fa-gamepad"></i> Games</a
              >
            </li>
          </ul>
          <div class="controls">
            <button class="control-btn theme-toggle" id="themeToggle">
              <i class="fas fa-moon"></i>
            </button>
          </div>
        </nav>
      </div>
    </header>

    <!-- Immediate Mobile Menu Script - Inline for guaranteed execution -->
    <script>
      (function () {
        "use strict";

        function initMobileMenu() {
          const mobileToggle = document.getElementById("mobileToggle");
          const navLinks = document.getElementById("navLinks");
          const body = document.body;

          if (!mobileToggle || !navLinks) {
            console.warn("Mobile menu elements not found");
            return;
          }

          console.log("Immediate mobile menu initialized");

          let isMenuOpen = false;

          function toggleMenu(e) {
            if (e && e.preventDefault) e.preventDefault();
            if (e && e.stopPropagation) e.stopPropagation();

            isMenuOpen = !isMenuOpen;
            const icon = mobileToggle.querySelector("i");

            if (isMenuOpen) {
              navLinks.classList.add("active");
              body.classList.add("mobile-menu-open");
              body.style.overflow = "hidden";
              if (icon) icon.className = "fas fa-times";
              console.log("Menu opened");
            } else {
              navLinks.classList.remove("active");
              body.classList.remove("mobile-menu-open");
              body.style.overflow = "";
              if (icon) icon.className = "fas fa-bars";
              console.log("Menu closed");

              // Close all dropdowns
              document.querySelectorAll(".nav-item").forEach((item) => {
                item.classList.remove("mobile-open", "mobile-dropdown-open");
                const chevron = item.querySelector(".fa-chevron-down");
                if (chevron) chevron.style.transform = "rotate(0deg)";
              });
            }
          }

          // Simple unified handler - works for both touch and click
          let lastToggleTime = 0;
          
          function handleToggleClick(e) {
            const now = Date.now();
            // Prevent double-firing within 300ms
            if (now - lastToggleTime < 300) {
              console.log("Toggle ignored - too fast");
              return;
            }
            lastToggleTime = now;
            
            e.preventDefault();
            e.stopPropagation();
            console.log("Hamburger clicked/tapped");
            toggleMenu(e);
          }

          mobileToggle.addEventListener("click", handleToggleClick);
          mobileToggle.addEventListener("touchend", handleToggleClick);

          // Handle dropdown toggles on mobile
          document.querySelectorAll(".nav-item").forEach((item) => {
            const link = item.querySelector(".nav-link");
            const dropdown = item.querySelector(".dropdown");
            const chevron = link?.querySelector(".fa-chevron-down");

            // Only add special handling for links WITH dropdowns
            if (link && dropdown && chevron) {
              // Simple unified dropdown handler
              let lastDropdownToggle = 0;
              
              function handleDropdownClick(e) {
                if (window.innerWidth > 768) return; // Only on mobile
                
                const now = Date.now();
                // Prevent double-firing within 300ms
                if (now - lastDropdownToggle < 300) {
                  console.log("Dropdown toggle ignored - too fast");
                  return;
                }
                lastDropdownToggle = now;
                
                e.preventDefault();
                e.stopPropagation();

                const isOpen = item.classList.contains("mobile-open");
                console.log("Dropdown clicked:", isOpen ? "closing" : "opening");

                // Close other dropdowns
                document.querySelectorAll(".nav-item").forEach((otherItem) => {
                  if (otherItem !== item) {
                    otherItem.classList.remove("mobile-open", "mobile-dropdown-open");
                    const otherChevron = otherItem.querySelector(".fa-chevron-down");
                    if (otherChevron) otherChevron.style.transform = "rotate(0deg)";
                  }
                });

                // Toggle current dropdown
                if (isOpen) {
                  item.classList.remove("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(0deg)";
                  link.setAttribute("aria-expanded", "false");
                } else {
                  item.classList.add("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(180deg)";
                  link.setAttribute("aria-expanded", "true");
                }
              }

              // Remove href="#" behavior on mobile
              if (link.getAttribute("href") === "#") {
                link.style.cursor = "pointer";
              }

              // Attach handlers for both click and touch
              link.addEventListener("click", handleDropdownClick);
              link.addEventListener("touchend", handleDropdownClick);
            }
          });

          // Close menu when clicking outside
          document.addEventListener("click", function (e) {
            if (window.innerWidth <= 768 && isMenuOpen) {
              if (
                !mobileToggle.contains(e.target) &&
                !navLinks.contains(e.target)
              ) {
                toggleMenu(null);
              }
            }
          });

          // Close menu on escape key
          document.addEventListener("keydown", function (e) {
            if (e.key === "Escape" && isMenuOpen) {
              toggleMenu(null);
              mobileToggle.focus();
            }
          });

          // Close menu on window resize to desktop
          window.addEventListener("resize", function () {
            if (window.innerWidth > 768 && isMenuOpen) {
              toggleMenu(null);
            }
          });

          // Close menu after dropdown link click
          document.querySelectorAll(".dropdown a").forEach((link) => {
            link.addEventListener("click", function () {
              if (window.innerWidth <= 768 && isMenuOpen) {
                setTimeout(() => {
                  toggleMenu(null);
                }, 100);
              }
            });
          });
        }

        // Initialize immediately if DOM is ready, otherwise wait
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initMobileMenu);
        } else {
          initMobileMenu();
        }
      })();
    </script>

    <!-- Additional Mobile Dropdown Fixes -->
    <style>
      /* Ensure mobile dropdowns work properly */
      @media (max-width: 768px) {
        /* FORCE mobile menu to display full width */
        .nav-links,
        #navLinks,
        ul.nav-links {
          display: flex !important;
          position: fixed !important;
          top: 70px !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          width: 100vw !important;
          height: auto !important;
          min-height: calc(100vh - 70px) !important;
        }

        .nav-links.active,
        #navLinks.active,
        ul.nav-links.active {
          display: flex !important;
          max-height: calc(100vh - 70px) !important;
          height: auto !important;
        }

        /* Make sure nav links with dropdowns are clearly tappable */
        .nav-item .nav-link {
          position: relative;
          user-select: none;
          -webkit-user-select: none;
          -webkit-tap-highlight-color: rgba(70, 187, 229, 0.2);
          cursor: pointer;
        }

        /* Ensure chevron is visible and clickable */
        .nav-link .fa-chevron-down {
          transition: transform 0.3s ease !important;
          opacity: 1 !important;
          pointer-events: none; /* Let clicks go through to parent link */
        }

        /* Visual feedback when dropdown is open */
        .nav-item.mobile-open > .nav-link,
        .nav-item.mobile-dropdown-open > .nav-link {
          background: rgba(70, 187, 229, 0.15) !important;
          border-color: var(--primary-color, #46bbe5) !important;
        }

        /* Make dropdowns smoother */
        .dropdown {
          transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
            padding 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        /* Ensure dropdown items are visible when parent is open */
        .nav-item.mobile-open .dropdown,
        .nav-item.mobile-dropdown-open .dropdown {
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
        }

        /* Override any conflicting hover states */
        .nav-item:hover .dropdown {
          max-height: 0 !important;
          padding: 0 !important;
        }

        .nav-item.mobile-open:hover .dropdown,
        .nav-item.mobile-dropdown-open:hover .dropdown {
          max-height: 600px !important;
          padding: 0.75rem 0.5rem !important;
        }
      }
    </style>



    <main>
      <div class="container">
        <div style="text-align: center; margin: 2rem 0">
          <h1
            style="
              font-size: 3rem;
              font-weight: 700;
              color: var(--text-primary);
              margin-bottom: 1rem;
            "
          >
            ☁️ Word Cloud Generator
          </h1>
          <p style="font-size: 1.2rem; color: var(--text-secondary)">
            Transform your text into beautiful visual word clouds. Perfect for
            analyzing themes, keywords, and word frequency.
          </p>
        </div>

        <div class="word-cloud-container">
          <div class="input-section">
            <h3 style="margin-bottom: 1rem; color: var(--text-primary)">
              Enter Your Text
            </h3>
            <div class="preset-buttons">
              <button class="preset-btn" data-preset="shakespeare">
                Shakespeare Sample
              </button>
              <button class="preset-btn" data-preset="technology">
                Technology Text
              </button>
              <button class="preset-btn" data-preset="nature">
                Nature Description
              </button>
              <button class="preset-btn" data-preset="business">
                Business Terms
              </button>
            </div>
            <div
              style="
                width: 100%;
                height: 150px;
                background: #f8f9fa;
                border: 2px dashed #dee2e6;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #6c757d;
                font-style: italic;
              "
            >
              Text input temporarily disabled
            </div>
          </div>

          <div class="controls-section">
            <div class="control-group">
              <h3><i class="fas fa-palette"></i> Appearance</h3>
              <div class="control-item">
                <label>Color Scheme:</label>
                <div class="color-grid">
                  <div
                    class="color-option active"
                    data-scheme="blue"
                    style="background: linear-gradient(45deg, #3b82f6, #1e40af)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="green"
                    style="background: linear-gradient(45deg, #10b981, #047857)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="purple"
                    style="background: linear-gradient(45deg, #8b5cf6, #6d28d9)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="orange"
                    style="background: linear-gradient(45deg, #f59e0b, #d97706)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="pink"
                    style="background: linear-gradient(45deg, #ec4899, #be185d)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="red"
                    style="background: linear-gradient(45deg, #ef4444, #dc2626)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="indigo"
                    style="background: linear-gradient(45deg, #6366f1, #4f46e5)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="teal"
                    style="background: linear-gradient(45deg, #14b8a6, #0d9488)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="yellow"
                    style="background: linear-gradient(45deg, #eab308, #ca8a04)"
                  ></div>
                  <div
                    class="color-option"
                    data-scheme="rainbow"
                    style="
                      background: linear-gradient(
                        45deg,
                        #ff0000,
                        #ff8000,
                        #ffff00,
                        #80ff00,
                        #00ff00,
                        #00ff80,
                        #00ffff,
                        #0080ff,
                        #0000ff,
                        #8000ff,
                        #ff00ff,
                        #ff0080
                      );
                    "
                  ></div>
                </div>
              </div>
            </div>

            <div class="control-group">
              <h3><i class="fas fa-cog"></i> Settings</h3>
              <div class="control-item">
                <label>Maximum Words:</label>
                <input
                  type="range"
                  class="control-input"
                  id="maxWords"
                  min="10"
                  max="100"
                  value="50"
                />
                <span id="maxWordsValue">50</span>
              </div>
              <div class="control-item">
                <label>Minimum Word Length:</label>
                <input
                  type="range"
                  class="control-input"
                  id="minLength"
                  min="2"
                  max="8"
                  value="3"
                />
                <span id="minLengthValue">3</span>
              </div>
            </div>

            <div class="control-group">
              <h3><i class="fas fa-filter"></i> Filters</h3>
              <div class="control-item">
                <label>
                  <input type="checkbox" id="removeCommon" checked /> Remove
                  common words (the, and, of, etc.)
                </label>
              </div>
              <div class="control-item">
                <label>
                  <input type="checkbox" id="caseSensitive" /> Case sensitive
                </label>
              </div>
            </div>
          </div>

          <div class="word-cloud-canvas" id="wordCloudCanvas">
            <div style="text-align: center; color: var(--text-secondary)">
              <i
                class="fas fa-cloud"
                style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5"
              ></i>
              <p>Your word cloud will appear here after generating</p>
            </div>
          </div>

          <div class="action-buttons">
            <button class="btn btn-primary" id="generateBtn">
              <i class="fas fa-magic"></i> Generate Word Cloud
            </button>
            <button
              class="btn btn-secondary"
              id="downloadBtn"
              style="display: none"
            >
              <i class="fas fa-download"></i> Download PNG
            </button>
            <button class="btn btn-secondary" id="clearBtn">
              <i class="fas fa-trash"></i> Clear
            </button>
            <a href="tools.html" class="btn btn-secondary">
              <i class="fas fa-arrow-left"></i> Back to Tools
            </a>
          </div>

          <div class="stats-section" id="statsSection" style="display: none">
            <h3 style="margin-bottom: 1rem; color: var(--text-primary)">
              Text Analysis
            </h3>
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-value" id="totalWords">0</div>
                <div class="stat-label">Total Words</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="uniqueWords">0</div>
                <div class="stat-label">Unique Words</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="averageLength">0</div>
                <div class="stat-label">Avg Length</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="longestWord">-</div>
                <div class="stat-label">Longest Word</div>
              </div>
            </div>
          </div>

          <div class="word-list" id="wordList" style="display: none">
            <h3 style="margin-bottom: 1rem; color: var(--text-primary)">
              Word Frequency
            </h3>
            <div id="wordListContent"></div>
          </div>
        </div>
      </div>
    </main>

    <script>
      // Sample texts for presets
      const presetTexts = {
        shakespeare:
          "To be or not to be, that is the question. Whether 'tis nobler in the mind to suffer the slings and arrows of outrageous fortune, or to take arms against a sea of troubles and by opposing end them. To die, to sleep, no more, and by a sleep to say we end the heartache and the thousand natural shocks that flesh is heir to.",
        technology:
          "Artificial intelligence and machine learning are transforming the digital landscape. Cloud computing, big data analytics, and cybersecurity are essential components of modern technology infrastructure. Software development, user experience design, and digital transformation drive innovation in today's interconnected world.",
        nature:
          "The serene forest was filled with towering trees, their leaves rustling gently in the breeze. Sunlight filtered through the canopy, creating dappled patterns on the forest floor. Birds chirped melodiously while squirrels scampered among the branches. A babbling brook meandered through the peaceful woodland.",
        business:
          "Strategic planning, market research, and competitive analysis drive successful business growth. Customer satisfaction, brand development, and digital marketing are crucial for sustainable profitability. Leadership, teamwork, and innovation create organizational excellence in today's dynamic marketplace.",
      };

      // Common words to filter out
      const commonWords = new Set([
        "the",
        "and",
        "or",
        "but",
        "in",
        "on",
        "at",
        "to",
        "for",
        "of",
        "with",
        "by",
        "a",
        "an",
        "is",
        "are",
        "was",
        "were",
        "be",
        "been",
        "have",
        "has",
        "had",
        "do",
        "does",
        "did",
        "will",
        "would",
        "could",
        "should",
        "may",
        "might",
        "must",
        "can",
        "this",
        "that",
        "these",
        "those",
        "i",
        "you",
        "he",
        "she",
        "it",
        "we",
        "they",
        "me",
        "him",
        "her",
        "us",
        "them",
        "my",
        "your",
        "his",
        "its",
        "our",
        "their",
      ]);

      // Color schemes
      const colorSchemes = {
        blue: ["#3b82f6", "#1e40af", "#60a5fa", "#2563eb", "#1d4ed8"],
        green: ["#10b981", "#047857", "#34d399", "#059669", "#065f46"],
        purple: ["#8b5cf6", "#6d28d9", "#a78bfa", "#7c3aed", "#5b21b6"],
        orange: ["#f59e0b", "#d97706", "#fbbf24", "#f59e0b", "#b45309"],
        pink: ["#ec4899", "#be185d", "#f472b6", "#db2777", "#9d174d"],
        red: ["#ef4444", "#dc2626", "#f87171", "#e11d48", "#b91c1c"],
        indigo: ["#6366f1", "#4f46e5", "#818cf8", "#6366f1", "#3730a3"],
        teal: ["#14b8a6", "#0d9488", "#5eead4", "#14b8a6", "#0f766e"],
        yellow: ["#eab308", "#ca8a04", "#facc15", "#eab308", "#a16207"],
        rainbow: [
          "#ff6b6b",
          "#4ecdc4",
          "#45b7d1",
          "#96ceb4",
          "#feca57",
          "#ff9ff3",
          "#54a0ff",
          "#5f27cd",
          "#00d2d3",
          "#ff9f43",
        ],
      };

      let currentWords = [];
      let currentColorScheme = "blue";

      // DOM elements
      const textInput = document.getElementById("textInput");
      const wordCloudCanvas = document.getElementById("wordCloudCanvas");
      const generateBtn = document.getElementById("generateBtn");
      const downloadBtn = document.getElementById("downloadBtn");
      const clearBtn = document.getElementById("clearBtn");
      const maxWordsSlider = document.getElementById("maxWords");
      const minLengthSlider = document.getElementById("minLength");
      const maxWordsValue = document.getElementById("maxWordsValue");
      const minLengthValue = document.getElementById("minLengthValue");
      const removeCommonCheckbox = document.getElementById("removeCommon");
      const caseSensitiveCheckbox = document.getElementById("caseSensitive");
      const statsSection = document.getElementById("statsSection");
      const wordList = document.getElementById("wordList");

      // Event listeners
      document.querySelectorAll(".preset-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          textInput.value = presetTexts[btn.dataset.preset];
        });
      });

      document.querySelectorAll(".color-option").forEach((option) => {
        option.addEventListener("click", () => {
          document
            .querySelectorAll(".color-option")
            .forEach((o) => o.classList.remove("active"));
          option.classList.add("active");
          currentColorScheme = option.dataset.scheme;
          if (currentWords.length > 0) {
            generateWordCloud();
          }
        });
      });

      maxWordsSlider.addEventListener("input", () => {
        maxWordsValue.textContent = maxWordsSlider.value;
      });

      minLengthSlider.addEventListener("input", () => {
        minLengthValue.textContent = minLengthSlider.value;
      });

      generateBtn.addEventListener("click", generateWordCloud);
      clearBtn.addEventListener("click", clearWordCloud);
      downloadBtn.addEventListener("click", downloadWordCloud);

      function processText(text) {
        // Clean and split text
        let words = text
          .toLowerCase()
          .replace(/[^\w\s]/g, " ")
          .split(/\s+/)
          .filter((word) => word.length >= parseInt(minLengthSlider.value));

        // Remove common words if enabled
        if (removeCommonCheckbox.checked) {
          words = words.filter((word) => !commonWords.has(word));
        }

        // Case sensitivity
        if (!caseSensitiveCheckbox.checked) {
          words = words.map((word) => word.toLowerCase());
        }

        // Count word frequency
        const wordCount = {};
        words.forEach((word) => {
          wordCount[word] = (wordCount[word] || 0) + 1;
        });

        // Sort by frequency and limit
        const sortedWords = Object.entries(wordCount)
          .sort(([, a], [, b]) => b - a)
          .slice(0, parseInt(maxWordsSlider.value));

        return sortedWords.map(([word, count]) => ({ word, count }));
      }

      function generateWordCloud() {
        const text = textInput.value.trim();
        if (!text) {
          alert("Please enter some text first!");
          return;
        }

        currentWords = processText(text);
        if (currentWords.length === 0) {
          alert(
            "No words found with current settings. Try adjusting your filters."
          );
          return;
        }

        displayWordCloud();
        updateStats();
        downloadBtn.style.display = "inline-flex";
        statsSection.style.display = "block";
        wordList.style.display = "block";
      }

      function displayWordCloud() {
        const canvas = wordCloudCanvas;
        canvas.innerHTML = "";

        const maxCount = Math.max(...currentWords.map((w) => w.count));
        const minCount = Math.min(...currentWords.map((w) => w.count));
        const colors = colorSchemes[currentColorScheme];

        currentWords.forEach((wordData, index) => {
          const wordElement = document.createElement("div");
          wordElement.className = "word-cloud-word";
          wordElement.textContent = wordData.word;

          // Calculate font size based on frequency
          const fontSize = Math.max(
            12,
            Math.min(48, 12 + (wordData.count / maxCount) * 36)
          );

          // Position randomly with collision detection
          const maxAttempts = 50;
          let positioned = false;
          let attempts = 0;

          while (!positioned && attempts < maxAttempts) {
            const x =
              Math.random() *
              (canvas.offsetWidth - wordData.word.length * fontSize * 0.6);
            const y = Math.random() * (canvas.offsetHeight - fontSize);

            wordElement.style.left = x + "px";
            wordElement.style.top = y + "px";
            wordElement.style.fontSize = fontSize + "px";
            wordElement.style.color = colors[index % colors.length];

            canvas.appendChild(wordElement);

            // Simple collision detection
            const rect1 = wordElement.getBoundingClientRect();
            let collision = false;

            const existingWords = canvas.querySelectorAll(".word-cloud-word");
            for (let i = 0; i < existingWords.length - 1; i++) {
              const rect2 = existingWords[i].getBoundingClientRect();
              if (
                !(
                  rect1.right < rect2.left ||
                  rect1.left > rect2.right ||
                  rect1.bottom < rect2.top ||
                  rect1.top > rect2.bottom
                )
              ) {
                collision = true;
                break;
              }
            }

            if (!collision) {
              positioned = true;
            } else {
              canvas.removeChild(wordElement);
            }

            attempts++;
          }

          if (!positioned) {
            // Fallback positioning
            wordElement.style.left =
              (index % 10) * (canvas.offsetWidth / 10) + "px";
            wordElement.style.top = Math.floor(index / 10) * 40 + "px";
            canvas.appendChild(wordElement);
          }

          // Add click interaction
          wordElement.addEventListener("click", () => {
            alert(
              `"${wordData.word}" appears ${wordData.count} time(s) in your text.`
            );
          });
        });
      }

      function updateStats() {
        const totalWords = currentWords.reduce((sum, w) => sum + w.count, 0);
        const uniqueWords = currentWords.length;
        const averageLength = (
          currentWords.reduce((sum, w) => sum + w.word.length, 0) / uniqueWords
        ).toFixed(1);
        const longestWord = currentWords.reduce(
          (longest, w) => (w.word.length > longest.length ? w.word : longest),
          ""
        );

        document.getElementById("totalWords").textContent = totalWords;
        document.getElementById("uniqueWords").textContent = uniqueWords;
        document.getElementById("averageLength").textContent = averageLength;
        document.getElementById("longestWord").textContent = longestWord;

        // Update word list
        const wordListContent = document.getElementById("wordListContent");
        wordListContent.innerHTML = "";
        currentWords.slice(0, 20).forEach((wordData) => {
          const wordItem = document.createElement("div");
          wordItem.className = "word-item";
          wordItem.innerHTML = `
                    <span style="font-weight: 600;">${wordData.word}</span>
                    <span class="word-frequency">${wordData.count}</span>
                `;
          wordListContent.appendChild(wordItem);
        });
      }

      function clearWordCloud() {
        textInput.value = "";
        wordCloudCanvas.innerHTML = `
                <div style="text-align: center; color: var(--text-secondary);">
                    <i class="fas fa-cloud" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                    <p>Your word cloud will appear here after generating</p>
                </div>
            `;
        currentWords = [];
        downloadBtn.style.display = "none";
        statsSection.style.display = "none";
        wordList.style.display = "none";
      }

      function downloadWordCloud() {
        // Create a temporary canvas for export
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        const cloudElement = wordCloudCanvas;

        canvas.width = cloudElement.offsetWidth;
        canvas.height = cloudElement.offsetHeight;

        // Fill background
        ctx.fillStyle = "#ffffff";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Draw words
        const words = cloudElement.querySelectorAll(".word-cloud-word");
        words.forEach((word) => {
          const style = window.getComputedStyle(word);
          const fontSize = parseInt(style.fontSize);
          const color = style.color;
          const left = parseInt(style.left);
          const top = parseInt(style.top) + fontSize;

          ctx.font = `${fontSize}px Poppins, sans-serif`;
          ctx.fillStyle = color;
          ctx.fillText(word.textContent, left, top);
        });

        // Download
        const link = document.createElement("a");
        link.download = "word-cloud.png";
        link.href = canvas.toDataURL();
        link.click();
      }

      // Initialize with sample text
      textInput.value =
        "Welcome to our interactive word cloud generator! This powerful tool helps you visualize text data by creating beautiful word clouds. Simply enter your text, customize the appearance, and generate stunning visualizations that highlight the most important words in your content.";
    </script>

    <script src="../js/navigation.js"></script>
  </body>
</html>
