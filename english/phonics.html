<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Interactive Phonics Learning Center - Master English pronunciation with fun games, audio exercises, and comprehensive phonics resources."
    />
    <title>Interactive Phonics Learning Center | ESL Fun Online</title>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-9G9RD6BHLN");
    </script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/header.css" />
    <style>
      /* CSS Variables for Design System */
      :root {
        --primary-color: #4f46e5;
        --primary-hover: #4338ca;
        --secondary-color: #f59e0b;
        --accent-color: #10b981;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --text-light: #9ca3af;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --bg-tertiary: #f3f4f6;
        --border-color: #e5e7eb;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1),
          0 4px 6px -4px rgb(0 0 0 / 0.1);
        --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1),
          0 8px 10px -6px rgb(0 0 0 / 0.1);
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --gradient-hero: linear-gradient(
          135deg,
          #4f46e5 0%,
          #7c3aed 50%,
          #ec4899 100%
        );
        --success-color: #10b981;
        --error-color: #ef4444;
        --warning-color: #f59e0b;
        /* Keep some phonics-specific colors for content */
        --yellow-bright: #ffd93d;
        --green-fresh: #26de81;
        --purple-bright: #a29bfe;
        --orange-warm: #fd79a8;
        --gradient-rainbow: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 25%,
          #f093fb 50%,
          #f5576c 75%,
          #4facfe 100%
        );
      }

      /* Dark Mode Variables */
      .dark-mode {
        --text-primary: #f9fafb;
        --text-secondary: #d1d5db;
        --text-light: #9ca3af;
        --bg-primary: #111827;
        --bg-secondary: #1f2937;
        --bg-tertiary: #374151;
        --border-color: #374151;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", "Nunito", sans-serif;
        line-height: 1.6;
        color: var(--text-primary);
        background: var(--bg-primary);
        padding-top: 100px;
        overflow-x: hidden;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      /* Hero Section */
      .hero {
        background: var(--gradient-rainbow);
        color: white;
        padding: 4rem 0;
        text-align: center;
        border-radius: 25px;
        margin-bottom: 3rem;
        position: relative;
        overflow: hidden;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="white" opacity="0.1"/></svg>')
          repeat;
        animation: float 20s linear infinite;
      }

      .hero-content {
        position: relative;
        z-index: 2;
      }

      .hero h1 {
        font-family: "Poppins", cursive;
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 700;
        margin-bottom: 1rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .hero p {
        font-size: 1.3rem;
        opacity: 0.95;
        font-weight: 500;
        max-width: 600px;
        margin: 0 auto;
      }

      /* Learning Mode Tabs */
      .mode-selector {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .mode-tab {
        background: white;
        border: 3px solid var(--bg-secondary);
        padding: 1rem 2rem;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .mode-tab:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-md);
      }

      .mode-tab.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
      }

      .mode-tab i {
        font-size: 1.2rem;
      }

      /* Progress Dashboard */
      .progress-dashboard {
        background: white;
        padding: 2rem;
        border-radius: 20px;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-md);
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
      }

      .stat-card {
        text-align: center;
        padding: 1rem;
        border-radius: 15px;
        background: var(--bg-tertiary);
        transition: transform 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-5px);
      }

      .stat-number {
        font-family: "Poppins", sans-serif;
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        display: block;
      }

      .stat-label {
        color: var(--text-secondary);
        font-weight: 500;
        margin-top: 0.5rem;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: var(--bg-secondary);
        border-radius: 4px;
        margin-top: 1rem;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: var(--gradient-success);
        border-radius: 4px;
        transition: width 0.8s ease;
      }

      /* Learning Content Area */
      .learning-content {
        background: white;
        border-radius: 25px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-md);
        min-height: 600px;
      }

      /* Alphabet Mode */
      .alphabet-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
      }

      .letter-card {
        background: white;
        border-radius: 20px;
        padding: 2rem 1rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.4s ease;
        box-shadow: var(--shadow-sm);
        border: 3px solid transparent;
        position: relative;
        overflow: hidden;
      }

      .letter-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        transition: left 0.6s ease;
      }

      .letter-card:hover::before {
        left: 100%;
      }

      .letter-card:hover {
        transform: translateY(-10px) scale(1.05);
        box-shadow: var(--shadow-xl);
        border-color: var(--primary-color);
      }

      .letter-display {
        font-family: "Poppins", sans-serif;
        font-size: 3.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .letter-info {
        margin-top: 1rem;
      }

      .letter-word {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.3rem;
      }

      .letter-sound {
        font-size: 1rem;
        color: var(--text-secondary);
        font-style: italic;
        margin-bottom: 0.8rem;
      }

      .letter-examples {
        font-size: 0.9rem;
        color: var(--accent-color);
        font-weight: 500;
      }

      .audio-btn {
        background: var(--gradient-success);
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 0.5rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .audio-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(38, 222, 129, 0.4);
      }

      /* Phonics Matching Game */
      .matching-game {
        display: none;
      }

      .matching-game.active {
        display: block;
      }

      .matching-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 3rem;
        margin-top: 2rem;
      }

      .matching-column {
        background: var(--bg-tertiary);
        padding: 2rem;
        border-radius: 20px;
      }

      .matching-column h3 {
        text-align: center;
        margin-bottom: 2rem;
        color: var(--primary-color);
        font-size: 1.5rem;
      }

      .matching-item {
        background: white;
        padding: 1.5rem;
        margin-bottom: 1rem;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        text-align: center;
        font-weight: 600;
        font-size: 1.2rem;
      }

      .matching-item:hover {
        transform: translateX(10px);
        box-shadow: var(--shadow-md);
      }

      .matching-item.selected {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
      }

      .matching-item.correct {
        border-color: var(--green-fresh);
        background: var(--green-fresh);
        color: white;
        animation: success-pulse 0.6s ease;
      }

      .matching-item.incorrect {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
        animation: error-shake 0.5s ease;
      }

      /* Word Building Game */
      .word-builder {
        display: none;
      }

      .word-builder.active {
        display: block;
      }

      .target-word-display {
        text-align: center;
        margin-bottom: 2rem;
      }

      .target-word {
        font-size: 3rem;
        font-weight: 700;
        color: var(--primary-color);
        font-family: "Poppins", sans-serif;
      }

      .word-hint {
        font-size: 1.2rem;
        color: var(--text-secondary);
        margin-top: 0.5rem;
      }

      .letter-bank {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .bank-letter {
        background: var(--yellow-bright);
        width: 60px;
        height: 60px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .bank-letter:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-md);
      }

      .bank-letter.used {
        opacity: 0.3;
        cursor: not-allowed;
      }

      .word-construction {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .letter-slot {
        width: 80px;
        height: 80px;
        border: 3px dashed var(--text-secondary);
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-color);
        transition: all 0.3s ease;
      }

      .letter-slot.filled {
        border-color: var(--green-fresh);
        background: var(--green-fresh);
        color: white;
      }

      /* Achievement System */
      .achievement-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        background: white;
        padding: 2rem;
        border-radius: 20px;
        box-shadow: var(--shadow-xl);
        text-align: center;
        z-index: 9999;
        transition: transform 0.4s ease;
      }

      .achievement-popup.show {
        transform: translate(-50%, -50%) scale(1);
      }

      .achievement-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
      }

      .achievement-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
      }

      /* Control Buttons */
      .game-controls {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin: 2rem 0;
        flex-wrap: wrap;
      }

      .btn {
        background: var(--gradient-success);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 15px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(38, 222, 129, 0.4);
      }

      .btn-primary {
        background: var(--gradient-rainbow);
      }

      .btn-secondary {
        background: var(--gradient-warning);
        color: var(--text-primary);
      }

      .btn-danger {
        background: linear-gradient(135deg, var(--primary-color), #e17055);
      }

      /* Phonics Rules Section */
      .phonics-rules {
        background: var(--bg-tertiary);
        padding: 2rem;
        border-radius: 20px;
        margin: 2rem 0;
      }

      .phonics-rules h3 {
        color: var(--primary-color);
        margin-bottom: 1.5rem;
        font-size: 1.8rem;
      }

      .rules-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
      }

      .rule-card {
        background: white;
        padding: 1.5rem;
        border-radius: 15px;
        box-shadow: var(--shadow-sm);
      }

      .rule-title {
        font-weight: 700;
        color: var(--accent-color);
        margin-bottom: 0.5rem;
      }

      .rule-examples {
        color: var(--text-secondary);
        font-style: italic;
      }

      /* Animations */
      @keyframes float {
        0%,
        100% {
          transform: translate(0, 0) rotate(0deg);
        }
        33% {
          transform: translate(30px, -30px) rotate(120deg);
        }
        66% {
          transform: translate(-20px, 20px) rotate(240deg);
        }
      }

      @keyframes success-pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes error-shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-10px);
        }
        75% {
          transform: translateX(10px);
        }
      }

      @keyframes celebration {
        0% {
          transform: scale(0) rotate(0deg);
          opacity: 0;
        }
        50% {
          transform: scale(1.2) rotate(180deg);
          opacity: 1;
        }
        100% {
          transform: scale(1) rotate(360deg);
          opacity: 0;
        }
      }

      .celebration-effect {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 5rem;
        animation: celebration 2s ease-in-out;
        pointer-events: none;
        z-index: 9999;
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        .container {
          padding: 0 1rem;
        }

        .hero {
          margin-bottom: 2rem;
          padding: 2rem 0;
        }

        .hero h1 {
          font-size: 2.5rem;
        }

        .mode-selector {
          gap: 0.5rem;
        }

        .mode-tab {
          padding: 0.8rem 1.5rem;
          font-size: 0.9rem;
        }

        .progress-dashboard {
          grid-template-columns: repeat(2, 1fr);
          padding: 1.5rem;
          gap: 1rem;
        }

        .alphabet-grid {
          grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
          gap: 1rem;
        }

        .letter-card {
          padding: 1.5rem 0.5rem;
        }

        .letter-display {
          font-size: 2.8rem;
        }

        .matching-container {
          grid-template-columns: 1fr;
          gap: 2rem;
        }

        .letter-bank {
          gap: 0.5rem;
        }

        .bank-letter {
          width: 50px;
          height: 50px;
          font-size: 1.5rem;
        }

        .letter-slot {
          width: 60px;
          height: 60px;
          font-size: 1.5rem;
        }

        .game-controls {
          flex-direction: column;
          align-items: center;
        }

        .btn {
          width: 100%;
          max-width: 250px;
          justify-content: center;
        }
      }

      /* Loading Animation */
      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 200px;
      }

      .loading-spinner {
        width: 50px;
        height: 50px;
        border: 4px solid var(--bg-secondary);
        border-top: 4px solid var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <!-- Header & Navigation -->
    <header>
      <div class="container">
        <nav class="navbar">
          <a href="../index.html" class="logo-container">
            <img
              src="../images/1.png"
              alt="ESL Fun Online Logo"
              class="logo-image"
            />
            <span class="logo-text">ESL Fun Online</span>
          </a>

          <ul class="nav-links" id="navLinks">
            <li class="nav-item">
              <a href="../index.html" class="nav-link">
                <i class="fas fa-home"></i>
                Home
              </a>
            </li>
            <li class="nav-item">
              <a href="../english/eslresources.html" class="nav-link">
                <i class="fas fa-book"></i>
                English
                <i class="fas fa-chevron-down"></i>
              </a>
              <div class="dropdown">
                <a href="../english/grammar.html" class="dropdown-item">
                  <i class="fas fa-spell-check"></i>
                  Grammar Guides
                </a>
                <a href="../english/vocabguide.html" class="dropdown-item">
                  <i class="fas fa-book-open"></i>
                  Vocabulary Building
                </a>
                <a href="../english/writingf.html" class="dropdown-item">
                  <i class="fas fa-pen"></i>
                  Writing for Success
                </a>
                <a href="../english/phonics.html" class="dropdown-item">
                  <i class="fas fa-microphone"></i>
                  Phonics Fun
                </a>
                <a href="../english/business.html" class="dropdown-item">
                  <i class="fas fa-briefcase"></i>
                  Business English
                </a>
                <a href="../english/test.html" class="dropdown-item">
                  <i class="fas fa-graduation-cap"></i>
                  Test Preparation
                </a>
              </div>
            </li>
            <li class="nav-item">
              <a href="../coding/codingresources.html" class="nav-link">
                <i class="fas fa-code"></i>
                Coding
                <i class="fas fa-chevron-down"></i>
              </a>
              <div class="dropdown">
                <a href="../coding/computerbasics.html" class="dropdown-item">
                  <i class="fas fa-desktop"></i>
                  Computer Basics
                </a>
                <a href="../coding/htmlcss.html" class="dropdown-item">
                  <i class="fab fa-html5"></i>
                  Web Development
                </a>
                <a href="../coding/javascript.html" class="dropdown-item">
                  <i class="fab fa-js"></i>
                  JavaScript
                </a>
                <a href="../coding/python.html" class="dropdown-item">
                  <i class="fab fa-python"></i>
                  Python
                </a>
              </div>
            </li>
            <li class="nav-item">
              <a href="../games/games.html" class="nav-link">
                <i class="fas fa-dice"></i>
                Games
              </a>
            </li>
            <li class="nav-item">
              <a href="../tools/tools.html" class="nav-link">
                <i class="fas fa-tools"></i>
                Toolkit
              </a>
            </li>
            <li class="nav-item">
              <a href="../blog/blog.html" class="nav-link">
                <i class="fas fa-book-open"></i>
                Blog
              </a>
            </li>
          </ul>

          <div class="controls">
            <button
              class="control-btn theme-toggle"
              id="themeToggle"
              aria-label="Toggle dark mode"
            >
              <i class="fas fa-moon"></i>
            </button>
            <a
              class="control-btn admin-toggle"
              id="adminToggle"
              aria-label="Admin"
              href="../login.html"
            >
              <i class="fas fa-user-shield"></i>
            </a>
          </div>
          <button
            class="control-btn mobile-toggle"
            id="mobileToggle"
            aria-label="Toggle mobile menu"
          >
            <i class="fas fa-bars"></i>
          </button>
        </nav>
      </div>
    </header>

    <div class="container">
      <!-- Hero Section -->
      <div class="hero">
        <div class="hero-content">
          <h1>🎵 Interactive Phonics Learning Center 🎵</h1>
          <p>
            Master English pronunciation with interactive games, audio
            exercises, and comprehensive phonics resources!
          </p>
        </div>
      </div>

      <!-- Learning Mode Selector -->
      <div class="mode-selector">
        <div class="mode-tab active" data-mode="alphabet">
          <i class="fas fa-font"></i>
          Alphabet Explorer
        </div>
        <div class="mode-tab" data-mode="matching">
          <i class="fas fa-puzzle-piece"></i>
          Phonics Matching
        </div>
        <div class="mode-tab" data-mode="building">
          <i class="fas fa-cubes"></i>
          Word Builder
        </div>
        <div class="mode-tab" data-mode="rules">
          <i class="fas fa-book-open"></i>
          Phonics Rules
        </div>
      </div>

      <!-- Progress Dashboard -->
      <div class="progress-dashboard">
        <div class="stat-card">
          <span class="stat-number" id="totalScore">0</span>
          <div class="stat-label">Total Score</div>
          <div class="progress-bar">
            <div
              class="progress-fill"
              id="scoreProgress"
              style="width: 0%"
            ></div>
          </div>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="currentStreak">0</span>
          <div class="stat-label">Current Streak</div>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="lettersLearned">0</span>
          <div class="stat-label">Letters Mastered</div>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="currentLevel">1</span>
          <div class="stat-label">Learning Level</div>
        </div>
      </div>

      <!-- Main Learning Content -->
      <div class="learning-content">
        <!-- Alphabet Explorer Mode -->
        <div class="alphabet-mode active" id="alphabetMode">
          <div class="game-controls">
            <button class="btn btn-primary" onclick="startAlphabetGame()">
              <i class="fas fa-play"></i>
              Start Alphabet Game
            </button>
            <button class="btn btn-secondary" onclick="speakAll()">
              <i class="fas fa-volume-up"></i>
              Pronounce All
            </button>
            <button class="btn" onclick="shuffleLetters()">
              <i class="fas fa-random"></i>
              Shuffle Letters
            </button>
          </div>

          <div class="game-info" id="alphabetGameInfo" style="display: none">
            <div class="target-letter" id="targetLetter">
              Find the letter: A
            </div>
            <div class="feedback" id="alphabetFeedback"></div>
          </div>

          <div class="alphabet-grid" id="alphabetGrid">
            <!-- Letters will be generated by JavaScript -->
          </div>
        </div>

        <!-- Phonics Matching Mode -->
        <div class="matching-game" id="matchingMode">
          <h2
            style="
              text-align: center;
              margin-bottom: 2rem;
              color: var(--primary-color);
            "
          >
            🎯 Match Letters with Their Sounds
          </h2>
          <div class="game-controls">
            <button class="btn btn-primary" onclick="startMatchingGame()">
              <i class="fas fa-play"></i>
              New Matching Game
            </button>
            <button class="btn" onclick="resetMatching()">
              <i class="fas fa-redo"></i>
              Reset
            </button>
          </div>
          <div class="matching-container" id="matchingContainer">
            <!-- Matching items will be generated -->
          </div>
        </div>

        <!-- Word Building Mode -->
        <div class="word-builder" id="buildingMode">
          <h2
            style="
              text-align: center;
              margin-bottom: 2rem;
              color: var(--primary-color);
            "
          >
            🏗️ Build Words with Phonics
          </h2>
          <div class="game-controls">
            <button class="btn btn-primary" onclick="startWordBuilding()">
              <i class="fas fa-play"></i>
              New Word Challenge
            </button>
            <button class="btn" onclick="resetWordBuilding()">
              <i class="fas fa-redo"></i>
              Reset
            </button>
            <button class="btn btn-secondary" onclick="giveHint()">
              <i class="fas fa-lightbulb"></i>
              Hint
            </button>
          </div>

          <div class="target-word-display">
            <div class="target-word" id="targetWord">CAT</div>
            <div class="word-hint" id="wordHint">
              A furry pet that says meow
            </div>
          </div>

          <div class="word-construction" id="wordConstruction">
            <!-- Letter slots will be generated -->
          </div>

          <div class="letter-bank" id="letterBank">
            <!-- Available letters will be generated -->
          </div>
        </div>

        <!-- Phonics Rules Mode -->
        <div class="phonics-rules" id="rulesMode" style="display: none">
          <h2
            style="
              text-align: center;
              margin-bottom: 2rem;
              color: var(--primary-color);
            "
          >
            📚 Essential Phonics Rules & Patterns
          </h2>
          <div class="rules-grid" id="rulesGrid">
            <!-- Rules will be generated -->
          </div>
        </div>
      </div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
      <div class="achievement-icon" id="achievementIcon">🏆</div>
      <div class="achievement-title" id="achievementTitle">
        Achievement Unlocked!
      </div>
      <div id="achievementDescription">You're doing great!</div>
    </div>

    <script>
      // Enhanced Game State Management
      class PhonicsLearningCenter {
        constructor() {
          this.gameState = {
            score: parseInt(localStorage.getItem("phonics_score")) || 0,
            streak: 0,
            level:
              Math.floor(
                (parseInt(localStorage.getItem("phonics_score")) || 0) / 100
              ) + 1,
            lettersLearned:
              JSON.parse(localStorage.getItem("phonics_letters_learned")) || [],
            currentMode: "alphabet",
            gameActive: false,
            currentTarget: null,
            achievements:
              JSON.parse(localStorage.getItem("phonics_achievements")) || [],
          };

          this.currentMatchingPairs = [];
          this.selectedMatchingItems = [];
          this.currentWord = "";
          this.currentWordSlots = [];
          this.availableLetters = [];

          this.initializeApp();
        }

        // Enhanced alphabet data with more examples and pronunciation guides
        alphabetData = {
          A: {
            sound: "/eɪ/ or /æ/",
            word: "Apple",
            examples: ["ant", "ate", "apple"],
            category: "vowel",
            difficulty: 1,
          },
          B: {
            sound: "/b/",
            word: "Ball",
            examples: ["bat", "book", "baby"],
            category: "consonant",
            difficulty: 1,
          },
          C: {
            sound: "/k/ or /s/",
            word: "Cat",
            examples: ["cat", "city", "cake"],
            category: "consonant",
            difficulty: 2,
          },
          D: {
            sound: "/d/",
            word: "Dog",
            examples: ["dog", "duck", "door"],
            category: "consonant",
            difficulty: 1,
          },
          E: {
            sound: "/iː/ or /ɛ/",
            word: "Elephant",
            examples: ["egg", "eat", "end"],
            category: "vowel",
            difficulty: 2,
          },
          F: {
            sound: "/f/",
            word: "Fish",
            examples: ["fish", "fox", "fun"],
            category: "consonant",
            difficulty: 1,
          },
          G: {
            sound: "/g/ or /dʒ/",
            word: "Girl",
            examples: ["goat", "gem", "game"],
            category: "consonant",
            difficulty: 2,
          },
          H: {
            sound: "/h/",
            word: "Hat",
            examples: ["hat", "house", "happy"],
            category: "consonant",
            difficulty: 1,
          },
          I: {
            sound: "/aɪ/ or /ɪ/",
            word: "Ice",
            examples: ["ice", "in", "it"],
            category: "vowel",
            difficulty: 2,
          },
          J: {
            sound: "/dʒ/",
            word: "Jump",
            examples: ["jump", "jam", "joy"],
            category: "consonant",
            difficulty: 2,
          },
          K: {
            sound: "/k/",
            word: "Key",
            examples: ["key", "kite", "kind"],
            category: "consonant",
            difficulty: 1,
          },
          L: {
            sound: "/l/",
            word: "Lion",
            examples: ["lion", "lamp", "love"],
            category: "consonant",
            difficulty: 1,
          },
          M: {
            sound: "/m/",
            word: "Mouse",
            examples: ["mouse", "moon", "make"],
            category: "consonant",
            difficulty: 1,
          },
          N: {
            sound: "/n/",
            word: "Nose",
            examples: ["nose", "net", "nice"],
            category: "consonant",
            difficulty: 1,
          },
          O: {
            sound: "/oʊ/ or /ɒ/",
            word: "Orange",
            examples: ["orange", "old", "on"],
            category: "vowel",
            difficulty: 2,
          },
          P: {
            sound: "/p/",
            word: "Pig",
            examples: ["pig", "pen", "play"],
            category: "consonant",
            difficulty: 1,
          },
          Q: {
            sound: "/kw/",
            word: "Queen",
            examples: ["queen", "quick", "quiet"],
            category: "consonant",
            difficulty: 3,
          },
          R: {
            sound: "/r/",
            word: "Rainbow",
            examples: ["red", "run", "rain"],
            category: "consonant",
            difficulty: 2,
          },
          S: {
            sound: "/s/ or /z/",
            word: "Sun",
            examples: ["sun", "snake", "is"],
            category: "consonant",
            difficulty: 2,
          },
          T: {
            sound: "/t/",
            word: "Tree",
            examples: ["tree", "top", "time"],
            category: "consonant",
            difficulty: 1,
          },
          U: {
            sound: "/juː/ or /ʌ/",
            word: "Umbrella",
            examples: ["up", "use", "under"],
            category: "vowel",
            difficulty: 2,
          },
          V: {
            sound: "/v/",
            word: "Van",
            examples: ["van", "very", "voice"],
            category: "consonant",
            difficulty: 2,
          },
          W: {
            sound: "/w/",
            word: "Water",
            examples: ["water", "win", "way"],
            category: "consonant",
            difficulty: 2,
          },
          X: {
            sound: "/ks/ or /z/",
            word: "X-ray",
            examples: ["fox", "box", "exam"],
            category: "consonant",
            difficulty: 3,
          },
          Y: {
            sound: "/j/ or /aɪ/",
            word: "Yellow",
            examples: ["yes", "sky", "my"],
            category: "consonant",
            difficulty: 3,
          },
          Z: {
            sound: "/z/",
            word: "Zebra",
            examples: ["zebra", "zoo", "buzz"],
            category: "consonant",
            difficulty: 2,
          },
        };

        // Word building challenges with progressive difficulty
        wordChallenges = [
          { word: "CAT", hint: "A furry pet that says meow", difficulty: 1 },
          { word: "DOG", hint: "A loyal pet that barks", difficulty: 1 },
          { word: "SUN", hint: "A bright star in our sky", difficulty: 1 },
          { word: "FISH", hint: "Lives in water and swims", difficulty: 2 },
          { word: "TREE", hint: "Tall plant with leaves", difficulty: 2 },
          { word: "BOOK", hint: "You read this to learn", difficulty: 2 },
          { word: "HOUSE", hint: "A place where people live", difficulty: 3 },
          { word: "SCHOOL", hint: "A place where you learn", difficulty: 3 },
          {
            word: "FRIEND",
            hint: "Someone you like to play with",
            difficulty: 3,
          },
        ];

        // Phonics rules and patterns
        phonicsRules = [
          {
            title: "Silent E Rule",
            description:
              "When 'e' comes at the end of a word, it often makes the vowel say its name",
            examples: [
              "cake (not cak)",
              "bike (not bik)",
              "hope (not hop)",
              "cute (not cut)",
            ],
          },
          {
            title: "Double Consonant Rule",
            description:
              "When a word has double consonants, the vowel before them is usually short",
            examples: ["happy", "rabbit", "letter", "butter"],
          },
          {
            title: "Vowel Teams",
            description: "Two vowels together often make one sound",
            examples: [
              "rain (ai = /eɪ/)",
              "boat (oa = /oʊ/)",
              "team (ea = /iː/)",
              "coin (oi = /ɔɪ/)",
            ],
          },
          {
            title: "C and G Rules",
            description:
              "C and G can be soft (before e, i, y) or hard (before a, o, u)",
            examples: [
              "Hard: cat, go",
              "Soft: city, gem",
              "Hard: cup, gum",
              "Soft: cycle, gym",
            ],
          },
          {
            title: "Y as a Vowel",
            description:
              "Y can act like 'i' or 'e' when it's not at the beginning of a word",
            examples: [
              "gym (y = /ɪ/)",
              "my (y = /aɪ/)",
              "happy (y = /iː/)",
              "fly (y = /aɪ/)",
            ],
          },
          {
            title: "R-Controlled Vowels",
            description: "When 'r' follows a vowel, it changes the vowel sound",
            examples: ["car (/ɑr/)", "her (/ɜr/)", "bird (/ɜr/)", "for (/ɔr/)"],
          },
        ];

        initializeApp() {
          this.updateProgressDisplay();
          this.generateAlphabet();
          this.setupModeSelector();
          this.generatePhonicsRules();

          // Check for speech synthesis support
          if ("speechSynthesis" in window) {
            this.speechSupported = true;
          } else {
            console.log("Speech synthesis not supported");
            this.speechSupported = false;
          }

          // Auto-save progress periodically
          setInterval(() => this.saveProgress(), 30000);
        }

        setupModeSelector() {
          const modeTabs = document.querySelectorAll(".mode-tab");
          modeTabs.forEach((tab) => {
            tab.addEventListener("click", () => {
              const mode = tab.dataset.mode;
              this.switchMode(mode);

              // Update active tab
              modeTabs.forEach((t) => t.classList.remove("active"));
              tab.classList.add("active");
            });
          });
        }

        switchMode(mode) {
          // Hide all modes
          document
            .querySelectorAll(
              "#alphabetMode, #matchingMode, #buildingMode, #rulesMode"
            )
            .forEach((el) => {
              el.classList.remove("active");
              el.style.display = "none";
            });

          // Show selected mode
          this.gameState.currentMode = mode;
          switch (mode) {
            case "alphabet":
              document.getElementById("alphabetMode").classList.add("active");
              document.getElementById("alphabetMode").style.display = "block";
              break;
            case "matching":
              document.getElementById("matchingMode").classList.add("active");
              document.getElementById("matchingMode").style.display = "block";
              break;
            case "building":
              document.getElementById("buildingMode").classList.add("active");
              document.getElementById("buildingMode").style.display = "block";
              break;
            case "rules":
              document.getElementById("rulesMode").style.display = "block";
              break;
          }
        }

        generateAlphabet() {
          const grid = document.getElementById("alphabetGrid");
          grid.innerHTML = "";

          Object.keys(this.alphabetData).forEach((letter) => {
            const letterData = this.alphabetData[letter];
            const card = document.createElement("div");
            card.className = "letter-card";
            card.onclick = () => this.selectLetter(letter, card);

            // Add mastery indicator
            const isMastered = this.gameState.lettersLearned.includes(letter);

            card.innerHTML = `
              <div class="letter-display">${letter}</div>
              <div class="letter-info">
                <div class="letter-word">${letterData.word}</div>
                <div class="letter-sound">${letterData.sound}</div>
                <div class="letter-examples">${letterData.examples
                  .slice(0, 3)
                  .join(", ")}</div>
                <button class="audio-btn" onclick="event.stopPropagation(); phonicsApp.speakLetter('${letter}')">
                  <i class="fas fa-volume-up"></i>
                </button>
                ${
                  isMastered
                    ? '<div style="color: var(--green-fresh); margin-top: 0.5rem;"><i class="fas fa-star"></i> Mastered!</div>'
                    : ""
                }
              </div>
            `;

            if (isMastered) {
              card.style.border = "3px solid var(--green-fresh)";
            }

            grid.appendChild(card);
          });
        }

        speakLetter(letter) {
          if (!this.speechSupported) return;

          const letterData = this.alphabetData[letter];
          const utterance = new SpeechSynthesisUtterance(
            `${letter}. ${
              letterData.word
            }. The sound is ${letterData.sound.replace(/[\/\[\]]/g, "")}`
          );
          utterance.rate = 0.8;
          utterance.pitch = 1.1;
          speechSynthesis.speak(utterance);
        }

        speakAll() {
          if (!this.speechSupported) return;

          const letters = Object.keys(this.alphabetData);
          let index = 0;

          const speakNext = () => {
            if (index < letters.length) {
              this.speakLetter(letters[index]);
              index++;
              setTimeout(speakNext, 3000);
            }
          };

          speakNext();
        }

        shuffleLetters() {
          const grid = document.getElementById("alphabetGrid");
          const cards = Array.from(grid.children);

          // Fisher-Yates shuffle
          for (let i = cards.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [cards[i], cards[j]] = [cards[j], cards[i]];
          }

          grid.innerHTML = "";
          cards.forEach((card) => {
            card.style.animation = "none";
            setTimeout(() => {
              card.style.animation = "float 3s ease-in-out";
              grid.appendChild(card);
            }, Math.random() * 1000);
          });
        }

        startAlphabetGame() {
          const letters = Object.keys(this.alphabetData);
          const randomLetter =
            letters[Math.floor(Math.random() * letters.length)];
          this.gameState.currentTarget = randomLetter;
          this.gameState.gameActive = true;

          document.getElementById("alphabetGameInfo").style.display = "block";
          document.getElementById(
            "targetLetter"
          ).textContent = `🎯 Find and click: ${randomLetter}`;
          document.getElementById("alphabetFeedback").textContent = "";

          // Reset all cards
          document.querySelectorAll(".letter-card").forEach((card) => {
            card.classList.remove("correct", "incorrect");
          });

          // Speak the target letter
          this.speakLetter(randomLetter);
        }

        selectLetter(letter, card) {
          if (!this.gameState.gameActive) {
            // If game not active, just show the letter info and speak it
            this.speakLetter(letter);
            this.showCelebrationEffect("✨");
            return;
          }

          const feedback = document.getElementById("alphabetFeedback");

          if (letter === this.gameState.currentTarget) {
            // Correct answer
            card.classList.add("correct");
            feedback.textContent = "🎉 Excellent! Well done!";
            feedback.className = "feedback correct";

            this.updateScore(15);
            this.addToLearnedLetters(letter);
            this.showCelebrationEffect("🎉");

            // Speak encouragement
            if (this.speechSupported) {
              const utterance = new SpeechSynthesisUtterance(
                "Correct! Great job!"
              );
              speechSynthesis.speak(utterance);
            }

            setTimeout(() => {
              this.startAlphabetGame();
            }, 2000);
          } else {
            // Wrong answer
            card.classList.add("incorrect");
            feedback.textContent = `❌ Try again! Look for "${this.gameState.currentTarget}"`;
            feedback.className = "feedback incorrect";

            this.resetStreak();

            setTimeout(() => {
              card.classList.remove("incorrect");
            }, 1500);
          }
        }

        startMatchingGame() {
          const letters = Object.keys(this.alphabetData);
          // Select 6 random letters for matching
          const selectedLetters = letters
            .sort(() => 0.5 - Math.random())
            .slice(0, 6);

          this.currentMatchingPairs = selectedLetters.map((letter) => ({
            letter: letter,
            sound: this.alphabetData[letter].sound,
            matched: false,
          }));

          this.selectedMatchingItems = [];
          this.renderMatchingGame();
        }

        renderMatchingGame() {
          const container = document.getElementById("matchingContainer");
          container.innerHTML = `
            <div class="matching-column">
              <h3>📝 Letters</h3>
              ${this.currentMatchingPairs
                .map(
                  (pair, index) => `
                <div class="matching-item" data-type="letter" data-index="${index}">
                  ${pair.letter}
                </div>
              `
                )
                .join("")}
            </div>
            <div class="matching-column">
              <h3>🔊 Sounds</h3>
              ${this.shuffleArray([...this.currentMatchingPairs])
                .map((pair, index) => {
                  const originalIndex = this.currentMatchingPairs.findIndex(
                    (p) => p.letter === pair.letter
                  );
                  return `
                  <div class="matching-item" data-type="sound" data-index="${originalIndex}">
                    ${pair.sound}
                    <button class="audio-btn" onclick="event.stopPropagation(); phonicsApp.speakSound('${pair.letter}')" style="margin-left: 10px;">
                      <i class="fas fa-volume-up"></i>
                    </button>
                  </div>
                `;
                })
                .join("")}
            </div>
          `;

          // Add click handlers
          container.querySelectorAll(".matching-item").forEach((item) => {
            item.addEventListener("click", () =>
              this.handleMatchingClick(item)
            );
          });
        }

        handleMatchingClick(item) {
          const type = item.dataset.type;
          const index = parseInt(item.dataset.index);

          if (this.currentMatchingPairs[index].matched) return;

          // Toggle selection
          if (item.classList.contains("selected")) {
            item.classList.remove("selected");
            this.selectedMatchingItems = this.selectedMatchingItems.filter(
              (s) => !(s.type === type && s.index === index)
            );
          } else {
            item.classList.add("selected");
            this.selectedMatchingItems.push({ type, index, element: item });
          }

          // Check for matches
          if (this.selectedMatchingItems.length === 2) {
            const [first, second] = this.selectedMatchingItems;

            if (first.type !== second.type && first.index === second.index) {
              // Correct match!
              first.element.classList.remove("selected");
              second.element.classList.remove("selected");
              first.element.classList.add("correct");
              second.element.classList.add("correct");

              this.currentMatchingPairs[first.index].matched = true;
              this.updateScore(20);
              this.showCelebrationEffect("🎯");

              // Check if all matched
              if (this.currentMatchingPairs.every((pair) => pair.matched)) {
                setTimeout(() => {
                  this.showAchievement(
                    "🏆",
                    "Matching Master!",
                    "You matched all the phonics pairs!"
                  );
                  this.updateScore(50); // Bonus points
                }, 1000);
              }
            } else {
              // Incorrect match
              first.element.classList.add("incorrect");
              second.element.classList.add("incorrect");

              setTimeout(() => {
                first.element.classList.remove("selected", "incorrect");
                second.element.classList.remove("selected", "incorrect");
              }, 1000);
            }

            this.selectedMatchingItems = [];
          }
        }

        speakSound(letter) {
          if (!this.speechSupported) return;

          const sound = this.alphabetData[letter].sound.replace(
            /[\/\[\]]/g,
            ""
          );
          const utterance = new SpeechSynthesisUtterance(sound);
          utterance.rate = 0.7;
          utterance.pitch = 1.2;
          speechSynthesis.speak(utterance);
        }

        resetMatching() {
          this.selectedMatchingItems = [];
          this.startMatchingGame();
        }

        startWordBuilding() {
          // Select a word based on current level
          const availableWords = this.wordChallenges.filter(
            (w) => w.difficulty <= this.gameState.level
          );
          const wordChallenge =
            availableWords[Math.floor(Math.random() * availableWords.length)];

          this.currentWord = wordChallenge.word;
          document.getElementById("targetWord").textContent =
            wordChallenge.word;
          document.getElementById("wordHint").textContent = wordChallenge.hint;

          // Create letter slots
          this.currentWordSlots = new Array(wordChallenge.word.length).fill("");

          // Generate available letters (correct letters + some random ones)
          const wordLetters = wordChallenge.word.split("");
          const extraLetters = ["B", "X", "Z", "Q", "J"]
            .filter((l) => !wordLetters.includes(l))
            .slice(0, 3);
          this.availableLetters = [...wordLetters, ...extraLetters].sort(
            () => Math.random() - 0.5
          );

          this.renderWordBuilding();
        }

        renderWordBuilding() {
          const constructionDiv = document.getElementById("wordConstruction");
          const bankDiv = document.getElementById("letterBank");

          // Render letter slots
          constructionDiv.innerHTML = this.currentWordSlots
            .map(
              (letter, index) => `
            <div class="letter-slot ${
              letter ? "filled" : ""
            }" data-slot="${index}">
              ${letter}
            </div>
          `
            )
            .join("");

          // Render letter bank
          bankDiv.innerHTML = this.availableLetters
            .map(
              (letter, index) => `
            <div class="bank-letter ${
              this.currentWordSlots.includes(letter) ? "used" : ""
            }" 
                 data-letter="${letter}" data-bank-index="${index}">
              ${letter}
            </div>
          `
            )
            .join("");

          // Add click handlers
          bankDiv.querySelectorAll(".bank-letter").forEach((letterEl) => {
            letterEl.addEventListener("click", () =>
              this.handleLetterBankClick(letterEl)
            );
          });

          constructionDiv.querySelectorAll(".letter-slot").forEach((slot) => {
            slot.addEventListener("click", () => this.handleSlotClick(slot));
          });
        }

        handleLetterBankClick(letterEl) {
          if (letterEl.classList.contains("used")) return;

          const letter = letterEl.dataset.letter;
          const bankIndex = parseInt(letterEl.dataset.bankIndex);

          // Find next empty slot
          const emptySlotIndex = this.currentWordSlots.findIndex(
            (slot) => slot === ""
          );
          if (emptySlotIndex === -1) return;

          // Place letter in slot
          this.currentWordSlots[emptySlotIndex] = letter;
          letterEl.classList.add("used");

          this.renderWordBuilding();
          this.checkWordCompletion();
        }

        handleSlotClick(slot) {
          const slotIndex = parseInt(slot.dataset.slot);
          const letter = this.currentWordSlots[slotIndex];

          if (letter) {
            // Remove letter from slot
            this.currentWordSlots[slotIndex] = "";

            // Return letter to bank
            const bankLetter = document.querySelector(
              `[data-letter="${letter}"]`
            );
            if (bankLetter) {
              bankLetter.classList.remove("used");
            }

            this.renderWordBuilding();
          }
        }

        checkWordCompletion() {
          const constructedWord = this.currentWordSlots.join("");

          if (constructedWord === this.currentWord) {
            // Word completed correctly!
            this.updateScore(30);
            this.showCelebrationEffect("🎉");
            this.showAchievement(
              "🏗️",
              "Word Builder!",
              `You built "${this.currentWord}" correctly!`
            );

            // Speak the word
            if (this.speechSupported) {
              const utterance = new SpeechSynthesisUtterance(
                `Excellent! You built the word ${this.currentWord}`
              );
              speechSynthesis.speak(utterance);
            }

            setTimeout(() => {
              this.startWordBuilding();
            }, 3000);
          }
        }

        resetWordBuilding() {
          this.currentWordSlots = new Array(this.currentWord.length).fill("");
          this.renderWordBuilding();
        }

        giveHint() {
          // Fill in the first empty slot
          const emptySlotIndex = this.currentWordSlots.findIndex(
            (slot) => slot === ""
          );
          if (emptySlotIndex === -1) return;

          const correctLetter = this.currentWord[emptySlotIndex];
          this.currentWordSlots[emptySlotIndex] = correctLetter;

          // Mark letter as used in bank
          const bankLetter = document.querySelector(
            `[data-letter="${correctLetter}"]:not(.used)`
          );
          if (bankLetter) {
            bankLetter.classList.add("used");
          }

          this.renderWordBuilding();
          this.checkWordCompletion();
        }

        generatePhonicsRules() {
          const rulesGrid = document.getElementById("rulesGrid");
          rulesGrid.innerHTML = this.phonicsRules
            .map(
              (rule) => `
            <div class="rule-card">
              <div class="rule-title">${rule.title}</div>
              <p>${rule.description}</p>
              <div class="rule-examples">
                <strong>Examples:</strong> ${rule.examples.join(" • ")}
              </div>
            </div>
          `
            )
            .join("");
        }

        updateScore(points) {
          this.gameState.score += points;
          this.gameState.streak++;

          // Check for level up
          const newLevel = Math.floor(this.gameState.score / 100) + 1;
          if (newLevel > this.gameState.level) {
            this.gameState.level = newLevel;
            this.showAchievement(
              "📈",
              "Level Up!",
              `Welcome to Level ${newLevel}!`
            );
          }

          this.updateProgressDisplay();
          this.saveProgress();
        }

        resetStreak() {
          this.gameState.streak = 0;
          this.updateProgressDisplay();
        }

        addToLearnedLetters(letter) {
          if (!this.gameState.lettersLearned.includes(letter)) {
            this.gameState.lettersLearned.push(letter);

            // Check for milestones
            if (this.gameState.lettersLearned.length === 26) {
              this.showAchievement(
                "🎓",
                "Alphabet Master!",
                "You have mastered all 26 letters!"
              );
            } else if (this.gameState.lettersLearned.length % 5 === 0) {
              this.showAchievement(
                "⭐",
                "Learning Progress!",
                `${this.gameState.lettersLearned.length} letters mastered!`
              );
            }
          }
        }

        updateProgressDisplay() {
          document.getElementById("totalScore").textContent =
            this.gameState.score;
          document.getElementById("currentStreak").textContent =
            this.gameState.streak;
          document.getElementById("lettersLearned").textContent =
            this.gameState.lettersLearned.length;
          document.getElementById("currentLevel").textContent =
            this.gameState.level;

          // Update progress bar
          const maxScore = this.gameState.level * 100;
          const currentLevelScore = this.gameState.score % 100;
          const progressPercent = (currentLevelScore / 100) * 100;
          document.getElementById(
            "scoreProgress"
          ).style.width = `${progressPercent}%`;
        }

        showCelebrationEffect(emoji) {
          const celebration = document.createElement("div");
          celebration.className = "celebration-effect";
          celebration.textContent = emoji;
          document.body.appendChild(celebration);

          setTimeout(() => {
            if (document.body.contains(celebration)) {
              document.body.removeChild(celebration);
            }
          }, 2000);
        }

        showAchievement(icon, title, description) {
          const popup = document.getElementById("achievementPopup");
          document.getElementById("achievementIcon").textContent = icon;
          document.getElementById("achievementTitle").textContent = title;
          document.getElementById("achievementDescription").textContent =
            description;

          popup.classList.add("show");

          setTimeout(() => {
            popup.classList.remove("show");
          }, 3000);
        }

        shuffleArray(array) {
          const shuffled = [...array];
          for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
          }
          return shuffled;
        }

        saveProgress() {
          localStorage.setItem(
            "phonics_score",
            this.gameState.score.toString()
          );
          localStorage.setItem(
            "phonics_letters_learned",
            JSON.stringify(this.gameState.lettersLearned)
          );
          localStorage.setItem(
            "phonics_achievements",
            JSON.stringify(this.gameState.achievements)
          );
        }
      }

      // Initialize the app
      let phonicsApp;

      document.addEventListener("DOMContentLoaded", () => {
        phonicsApp = new PhonicsLearningCenter();

        // Keyboard support
        document.addEventListener("keydown", (e) => {
          const letter = e.key.toUpperCase();
          if (
            phonicsApp.alphabetData[letter] &&
            phonicsApp.gameState.currentMode === "alphabet"
          ) {
            const cards = document.querySelectorAll(".letter-card");
            const targetCard = Array.from(cards).find(
              (card) =>
                card.querySelector(".letter-display").textContent === letter
            );
            if (targetCard) {
              phonicsApp.selectLetter(letter, targetCard);
            }
          }
        });
      });

      // Global functions for HTML onclick handlers
      function startAlphabetGame() {
        phonicsApp.startAlphabetGame();
      }

      function speakAll() {
        phonicsApp.speakAll();
      }

      function shuffleLetters() {
        phonicsApp.shuffleLetters();
      }

      function startMatchingGame() {
        phonicsApp.startMatchingGame();
      }

      function resetMatching() {
        phonicsApp.resetMatching();
      }

      function startWordBuilding() {
        phonicsApp.startWordBuilding();
      }

      function resetWordBuilding() {
        phonicsApp.resetWordBuilding();
      }

      function giveHint() {
        phonicsApp.giveHint();
      }
    </script>
  </body>
</html>
