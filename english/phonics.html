<!DOCTYPE html>
<html lang="en">
  <head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
     crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-2456627863532019" />
    
    <!-- ENHANCED SECURITY CONFIGURATION -->
    <!-- Comprehensive Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      script-src 'self' 'unsafe-inline' 'strict-dynamic' 'nonce-${Math.random().toString(36).substring(2)}' 
        https://www.googletagmanager.com 
        https://pagead2.googlesyndication.com 
        https://tpc.googlesyndication.com 
        https://googleads.g.doubleclick.net
        https://www.google-analytics.com;
      style-src 'self' 'unsafe-inline' 
        https://fonts.googleapis.com 
        https://cdnjs.cloudflare.com;
      font-src 'self' 
        https://fonts.gstatic.com 
        https://cdnjs.cloudflare.com;
      img-src 'self' data: https: blob:;
      connect-src 'self' 
        https://www.google-analytics.com 
        https://googleads.g.doubleclick.net
        https://www.googletagmanager.com
        https://ep1.adtrafficquality.google;
      frame-src 'self' 
        https://googleads.g.doubleclick.net 
        https://tpc.googlesyndication.com;
      object-src 'none';
      base-uri 'self';
      form-action 'self';
      frame-ancestors 'none';
      require-trusted-types-for 'script';
      trusted-types default;
      upgrade-insecure-requests;
    " />
    
    <!-- Additional Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    <meta http-equiv="Permissions-Policy" content="
      camera=(), 
      microphone=(), 
      geolocation=(), 
      interest-cohort=(),
      web-share=(),
      usb=(),
      serial=(),
      bluetooth=(),
      payment=()
    " />
    
    <!-- Security Enhancements - Load early to prevent issues -->
    <script src="../js/security-enhancements.js"></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9G9RD6BHLN");
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Master English phonics and pronunciation with interactive exercises, sound recognition, and IPA symbol learning."
    />
    <title>Phonics & Pronunciation | ESL Fun Online</title>

    <!-- iOS App Settings -->
    <link rel="apple-touch-icon" sizes="180x180" href="../images/Online.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="ESL Fun Online" />

    <!-- Standard Favicon -->
    <link rel="icon" type="image/png" href="../images/Online.png" />

    <!-- External Resources -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="canonical" href="https://eslfunonline.com/english/phonics.html" />
                  <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/main.css?v=1763019900" />
    <link rel="stylesheet" href="../css/header.css?v=1763019900" />
    <link rel="stylesheet" href="../css/hero-unified.css?v=1763019900" />
    <link rel="stylesheet" href="../css/index-page.css?v=1763019900" />
    <link rel="stylesheet" href="../css/phonics-page.css?v=1763019900" />
    <link rel="stylesheet" href="../css/mobile-optimized.css?v=1763019900" />
    <link rel="stylesheet" href="../css/mobile-menu.css?v=1763019900" />
    <link rel="stylesheet" href="../css/layout-fixes.css?v=1763019900" />
    </head>
  <body>
    <!-- Scroll Progress Indicator -->
    <div class="scroll-progress" id="scrollProgress"></div>
    <!-- Header & Navigation -->
    <header>
      <div class="container">
        <nav class="navbar">
          <a href="../index.html" class="logo-container">
            <img
              src="../images/1.png"
              alt="ESL Fun Online Logo"
              class="logo-image"
              width="40"
              height="40"
            />
            <span class="logo-text">ESL Fun Online</span>
          </a>

          <ul
            class="nav-links"
            id="navLinks"
            role="menubar"
            aria-label="Main navigation"
          >
            <li class="nav-item" role="none">
              <a href="../index.html" class="nav-link" role="menuitem">
                <i class="fas fa-home"></i>
                Home
              </a>
            </li>
            <li class="nav-item" role="none">
              <a
                href="#"
                class="nav-link"
                role="menuitem"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <i class="fas fa-book"></i>
                English
                <i class="fas fa-chevron-down"></i>
              </a>
              <div class="dropdown" role="menu" aria-label="English submenu">
                <a href="../english/grammar.html" class="dropdown-item">
                  <i class="fas fa-spell-check"></i>
                  Grammar Guides
                </a>
                <a href="../english/vocabguide.html" class="dropdown-item">
                  <i class="fas fa-book-open"></i>
                  Vocabulary Building
                </a>
                <a href="../english/worksheets.html" class="dropdown-item">
                  <i class="fas fa-file-alt"></i>
                  Worksheets
                </a>
                <a href="../english/writingf.html" class="dropdown-item">
                  <i class="fas fa-pen"></i>
                  Writing for Success
                </a>
                <a href="../english/business.html" class="dropdown-item">
                  <i class="fas fa-briefcase"></i>
                  Business English
                </a>
                <a href="../english/test.html" class="dropdown-item">
                  <i class="fas fa-graduation-cap"></i>
                  Test Preparation
                </a>
              </div>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="fas fa-code"></i>
                Coding
                <i class="fas fa-chevron-down"></i>
              </a>
              <div class="dropdown">
                <a href="../coding/computerbasics.html" class="dropdown-item">
                  <i class="fas fa-desktop"></i>
                  Computer Basics
                </a>
                <a href="../coding/ai.html" class="dropdown-item">
                  <i class="fas fa-robot"></i>
                  AI Basics
                </a>
                <a href="../coding/codingresources.html" class="dropdown-item">
                  <i class="fas fa-code"></i>
                  Coding Basics
                </a>
              </div>
            </li>

            <li class="nav-item">
              <a href="../games/games.html" class="nav-link">
                <i class="fas fa-dice"></i>
                Games
              </a>
            </li>
            <li class="nav-item">
              <a href="../tools/tools.html" class="nav-link">
                <i class="fas fa-tools"></i>
                Toolkit
              </a>
            </li>
            <li class="nav-item">
              <a href="../blog/blog.html" class="nav-link">
                <i class="fas fa-book-open"></i>
                Blog
              </a>
            </li>
          </ul>

          <div class="controls">
            <button
              class="control-btn theme-toggle"
              id="themeToggle"
              aria-label="Toggle dark mode"
            >
              <i class="fas fa-moon"></i>
            </button>
            <a
              class="control-btn admin-toggle"
              id="adminToggle"
              aria-label="Admin"
              href="../login.html"
            >
              <i class="fas fa-user-shield"></i>
            </a>
          </div>
          <button
            class="control-btn mobile-toggle"
            id="mobileToggle"
            aria-label="Toggle mobile menu"
          >
            <i class="fas fa-bars"></i>
          </button>
        </nav>
      </div>
    </header>

    
    <!-- Immediate Mobile Menu Script - Inline for guaranteed execution -->
    <script>
      (function () {
        "use strict";

        function initMobileMenu() {
          const mobileToggle = document.getElementById("mobileToggle");
          const navLinks = document.getElementById("navLinks");
          const body = document.body;

          if (!mobileToggle || !navLinks) {
            console.warn("Mobile menu elements not found");
            return;
          }

          console.log("Immediate mobile menu initialized");

          let isMenuOpen = false;

          function toggleMenu(e) {
            if (e && e.preventDefault) e.preventDefault();
            if (e && e.stopPropagation) e.stopPropagation();

            isMenuOpen = !isMenuOpen;
            const icon = mobileToggle.querySelector("i");

            if (isMenuOpen) {
              navLinks.classList.add("active");
              body.classList.add("mobile-menu-open");
              body.style.overflow = "hidden";
              if (icon) icon.className = "fas fa-times";
              console.log("Menu opened");
            } else {
              navLinks.classList.remove("active");
              body.classList.remove("mobile-menu-open");
              body.style.overflow = "";
              if (icon) icon.className = "fas fa-bars";
              console.log("Menu closed");

              // Close all dropdowns
              document.querySelectorAll(".nav-item").forEach((item) => {
                item.classList.remove("mobile-open", "mobile-dropdown-open");
                const chevron = item.querySelector(".fa-chevron-down");
                if (chevron) chevron.style.transform = "rotate(0deg)";
              });
            }
          }

          // Simple unified handler - works for both touch and click
          let lastToggleTime = 0;

          function handleToggleClick(e) {
            const now = Date.now();
            // Prevent double-firing within 300ms
            if (now - lastToggleTime < 300) {
              console.log("Toggle ignored - too fast");
              return;
            }
            lastToggleTime = now;

            e.preventDefault();
            e.stopPropagation();
            console.log("Hamburger clicked/tapped");
            toggleMenu(e);
          }

          mobileToggle.addEventListener("click", handleToggleClick);
          mobileToggle.addEventListener("touchend", handleToggleClick);

          // Handle dropdown toggles on mobile
          document.querySelectorAll(".nav-item").forEach((item) => {
            const link = item.querySelector(".nav-link");
            const dropdown = item.querySelector(".dropdown");
            const chevron = link?.querySelector(".fa-chevron-down");

            // Only add special handling for links WITH dropdowns
            if (link && dropdown && chevron) {
              // Simple unified dropdown handler
              let lastDropdownToggle = 0;

              function handleDropdownClick(e) {
                if (window.innerWidth > 768) return; // Only on mobile

                // Don't interfere with dropdown item clicks
                if (
                  e.target.closest(".dropdown-item") ||
                  e.target.closest(".dropdown a")
                ) {
                  console.log("Dropdown item clicked - allowing navigation");
                  return; // Let the link work normally
                }

                const now = Date.now();
                // Prevent double-firing within 300ms
                if (now - lastDropdownToggle < 300) {
                  console.log("Dropdown toggle ignored - too fast");
                  return;
                }
                lastDropdownToggle = now;

                e.preventDefault();
                e.stopPropagation();

                const isOpen = item.classList.contains("mobile-open");
                console.log(
                  "Dropdown clicked:",
                  isOpen ? "closing" : "opening"
                );

                // Close other dropdowns
                document.querySelectorAll(".nav-item").forEach((otherItem) => {
                  if (otherItem !== item) {
                    otherItem.classList.remove(
                      "mobile-open",
                      "mobile-dropdown-open"
                    );
                    const otherChevron =
                      otherItem.querySelector(".fa-chevron-down");
                    if (otherChevron)
                      otherChevron.style.transform = "rotate(0deg)";
                  }
                });

                // Toggle current dropdown
                if (isOpen) {
                  item.classList.remove("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(0deg)";
                  link.setAttribute("aria-expanded", "false");
                } else {
                  item.classList.add("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(180deg)";
                  link.setAttribute("aria-expanded", "true");
                }
              }

              // Remove href="#" behavior on mobile
              if (link.getAttribute("href") === "#") {
                link.style.cursor = "pointer";
              }

              // Attach handlers for both click and touch
              link.addEventListener("click", handleDropdownClick);
              link.addEventListener("touchend", handleDropdownClick);
            }
          });

          // Close menu when clicking outside
          document.addEventListener("click", function (e) {
            if (window.innerWidth <= 768 && isMenuOpen) {
              if (
                !mobileToggle.contains(e.target) &&
                !navLinks.contains(e.target)
              ) {
                toggleMenu(null);
              }
            }
          });

          // Close menu on escape key
          document.addEventListener("keydown", function (e) {
            if (e.key === "Escape" && isMenuOpen) {
              toggleMenu(null);
              mobileToggle.focus();
            }
          });

          // Close menu on window resize to desktop
          window.addEventListener("resize", function () {
            if (window.innerWidth > 768 && isMenuOpen) {
              toggleMenu(null);
            }
          });

          // Close menu after dropdown link click
          document.querySelectorAll(".dropdown a").forEach((link) => {
            link.addEventListener("click", function () {
              if (window.innerWidth <= 768 && isMenuOpen) {
                setTimeout(() => {
                  toggleMenu(null);
                }, 100);
              }
            });
          });
        }

        // Initialize immediately if DOM is ready, otherwise wait
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initMobileMenu);
        } else {
          initMobileMenu();
        }
      })();
    </script>

    <!-- Additional Mobile Dropdown Fixes -->
    

    <!-- Hero Section -->
    <section class="hero" id="top">
      <img
        src="../images/hero.webp"
        alt="Phonics Learning Background"
        class="hero-bg"
      />
      <div class="hero-content">
        <h1 class="hero-title">Master English Phonics & Pronunciation</h1>
        <p class="hero-subtitle">
          Discover the sounds of English with interactive exercises, IPA
          symbols, and pronunciation practice designed to improve your speaking
          confidence.
        </p>
      </div>
    </section>

    <!-- Value Proposition Section -->
    <section style="padding: 4rem 0; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
      <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; text-align: center;">
          <div style="background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <div style="font-size: 3rem; margin-bottom: 1rem;">üéØ</div>
            <h3 style="font-size: 1.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 0.75rem;">Interactive Learning</h3>
            <p style="color: #5a6c7d; line-height: 1.6;">Engage with dynamic exercises and real-time feedback</p>
          </div>
          <div style="background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <div style="font-size: 3rem; margin-bottom: 1rem;">‚ö°</div>
            <h3 style="font-size: 1.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 0.75rem;">Quick Results</h3>
            <p style="color: #5a6c7d; line-height: 1.6;">See improvement in your skills within days</p>
          </div>
          <div style="background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <div style="font-size: 3rem; margin-bottom: 1rem;">üéì</div>
            <h3 style="font-size: 1.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 0.75rem;">Expert Content</h3>
            <p style="color: #5a6c7d; line-height: 1.6;">Curated by experienced educators and professionals</p>
          </div>
          <div style="background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <div style="font-size: 3rem; margin-bottom: 1rem;">üåç</div>
            <h3 style="font-size: 1.5rem; font-weight: 700; color: #2c3e50; margin-bottom: 0.75rem;">Learn Anywhere</h3>
            <p style="color: #5a6c7d; line-height: 1.6;">Access from any device, anytime, anywhere</p>
          </div>
        </div>
      </div>
    </section>

        <!-- Google AdSense Example (fixed) -->
    <!-- Progress Dashboard -->
    <section class="section">
      <div class="container">
        <div class="stats-container">
          <div class="stat-card">
            <div class="stat-number" id="phonemesLearned">0</div>
            <div class="stat-label">Phonemes Learned</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="wordsStudied">0</div>
            <div class="stat-label">Words Studied</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="accuracyScore">0%</div>
            <div class="stat-label">Pronunciation Accuracy</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="practiceStreak">0</div>
            <div class="stat-label">Day Practice Streak</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Learning Path -->
    <section class="section">
      <div class="container">
        <h2 class="section-title">Choose Your Learning Path</h2>
        <div class="learning-path">
          <div class="level-card" onclick="scrollToSection('vowel-sounds')">
            <div class="level-icon">üÖ∞Ô∏è</div>
            <h3>Vowel Sounds</h3>
            <p>
              Master the 20 vowel sounds of English including short, long, and
              diphthongs.
            </p>
            <div class="btn btn-small">Start Learning</div>
          </div>
          <div class="level-card" onclick="scrollToSection('consonant-sounds')">
            <div class="level-icon">üÑ±</div>
            <h3>Consonant Sounds</h3>
            <p>
              Practice the 24 consonant sounds with detailed mouth position
              guidance.
            </p>
            <div class="btn btn-small">Start Learning</div>
          </div>
          <div class="level-card" onclick="scrollToSection('word-stress')">
            <div class="level-icon">üîä</div>
            <h3>Word Stress</h3>
            <p>
              Learn stress patterns in multi-syllable words to sound more
              natural.
            </p>
            <div class="btn btn-small">Start Learning</div>
          </div>
          <div class="level-card" onclick="scrollToSection('minimal-pairs')">
            <div class="level-icon">‚öñÔ∏è</div>
            <h3>Minimal Pairs</h3>
            <p>Distinguish between similar sounds that change word meanings.</p>
            <div class="btn btn-small">Start Learning</div>
          </div>
        </div>

        <!-- Pronunciation Plan Generator -->
        <div class="pronunciation-plan-generator">
          <h3>Create Your Pronunciation Improvement Plan</h3>
          <div class="plan-inputs">
            <div class="input-group">
              <label for="currentLevel">Current Level:</label>
              <select id="currentLevel">
                <option value="beginner">Beginner</option>
                <option value="intermediate" selected>Intermediate</option>
                <option value="advanced">Advanced</option>
              </select>
            </div>
            <div class="input-group">
              <label for="focusArea">Focus Area:</label>
              <select id="focusArea">
                <option value="vowels">Vowel Sounds</option>
                <option value="consonants">Consonant Sounds</option>
                <option value="stress" selected>Word Stress</option>
                <option value="intonation">Intonation</option>
              </select>
            </div>
            <div class="input-group">
              <label for="practiceTime">Daily Practice:</label>
              <select id="practiceTime">
                <option value="10">10 minutes</option>
                <option value="20" selected>20 minutes</option>
                <option value="30">30 minutes</option>
                <option value="45">45 minutes</option>
              </select>
            </div>
            <div class="input-group">
              <label for="nativeLanguage">Native Language:</label>
              <select id="nativeLanguage">
                <option value="spanish">Spanish</option>
                <option value="chinese">Chinese</option>
                <option value="japanese">Japanese</option>
                <option value="korean">Korean</option>
                <option value="arabic">Arabic</option>
                <option value="other" selected>Other</option>
              </select>
            </div>
          </div>
          <button class="btn" onclick="generatePronunciationPlan()">
            <i class="fas fa-microphone"></i>
            Generate My Plan
          </button>
          <div class="pronunciation-plan-result" id="pronunciationPlanResult" style="display: none;">
            <!-- Pronunciation plan will be generated here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Interactive Phonics Tools -->
    <section class="section phonics-interactive" id="interactive-tools">
      <div class="container">
        <h2 class="section-title">Interactive Phonics Tools</h2>
        <div class="phonics-tools">
          <!-- IPA Chart Interactive -->
          <div class="phonics-tool">
            <div class="tool-header">
              <div class="tool-icon">
                <i class="fas fa-chart-bar"></i>
              </div>
              <h3>International Phonetic Alphabet</h3>
            </div>
            <p>
              Click on any IPA symbol to hear its pronunciation and see example
              words.
            </p>
            <div class="ipa-chart">
              <!-- Vowels -->
              <div
                class="ipa-symbol vowel"
                data-sound="/iÀê/"
                onclick="playSound(this)"
              >
                iÀê
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/…™/"
                onclick="playSound(this)"
              >
                …™
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/e/"
                onclick="playSound(this)"
              >
                e
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/√¶/"
                onclick="playSound(this)"
              >
                √¶
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/…ëÀê/"
                onclick="playSound(this)"
              >
                …ëÀê
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/…í/"
                onclick="playSound(this)"
              >
                …í
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/…îÀê/"
                onclick="playSound(this)"
              >
                …îÀê
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/ ä/"
                onclick="playSound(this)"
              >
                 ä
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/uÀê/"
                onclick="playSound(this)"
              >
                uÀê
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/ å/"
                onclick="playSound(this)"
              >
                 å
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/…úÀê/"
                onclick="playSound(this)"
              >
                …úÀê
              </div>
              <div
                class="ipa-symbol vowel"
                data-sound="/…ô/"
                onclick="playSound(this)"
              >
                …ô
              </div>
              <!-- Diphthongs -->
              <div
                class="ipa-symbol diphthong"
                data-sound="/e…™/"
                onclick="playSound(this)"
              >
                e…™
              </div>
              <div
                class="ipa-symbol diphthong"
                data-sound="/a…™/"
                onclick="playSound(this)"
              >
                a…™
              </div>
              <div
                class="ipa-symbol diphthong"
                data-sound="/…î…™/"
                onclick="playSound(this)"
              >
                …î…™
              </div>
              <div
                class="ipa-symbol diphthong"
                data-sound="/a ä/"
                onclick="playSound(this)"
              >
                a ä
              </div>
              <div
                class="ipa-symbol diphthong"
                data-sound="/…ô ä/"
                onclick="playSound(this)"
              >
                …ô ä
              </div>
              <div
                class="ipa-symbol diphthong"
                data-sound="/…™…ô/"
                onclick="playSound(this)"
              >
                …™…ô
              </div>
              <div
                class="ipa-symbol diphthong"
                data-sound="/e…ô/"
                onclick="playSound(this)"
              >
                e…ô
              </div>
              <div
                class="ipa-symbol diphthong"
                data-sound="/ ä…ô/"
                onclick="playSound(this)"
              >
                 ä…ô
              </div>
              <!-- Consonants -->
              <div
                class="ipa-symbol consonant"
                data-sound="/p/"
                onclick="playSound(this)"
              >
                p
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/b/"
                onclick="playSound(this)"
              >
                b
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/t/"
                onclick="playSound(this)"
              >
                t
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/d/"
                onclick="playSound(this)"
              >
                d
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/k/"
                onclick="playSound(this)"
              >
                k
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/g/"
                onclick="playSound(this)"
              >
                g
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/f/"
                onclick="playSound(this)"
              >
                f
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/v/"
                onclick="playSound(this)"
              >
                v
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/Œ∏/"
                onclick="playSound(this)"
              >
                Œ∏
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/√∞/"
                onclick="playSound(this)"
              >
                √∞
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/s/"
                onclick="playSound(this)"
              >
                s
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/z/"
                onclick="playSound(this)"
              >
                z
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/ É/"
                onclick="playSound(this)"
              >
                 É
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/ í/"
                onclick="playSound(this)"
              >
                 í
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/t É/"
                onclick="playSound(this)"
              >
                t É
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/d í/"
                onclick="playSound(this)"
              >
                d í
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/m/"
                onclick="playSound(this)"
              >
                m
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/n/"
                onclick="playSound(this)"
              >
                n
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/≈ã/"
                onclick="playSound(this)"
              >
                ≈ã
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/l/"
                onclick="playSound(this)"
              >
                l
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/r/"
                onclick="playSound(this)"
              >
                r
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/j/"
                onclick="playSound(this)"
              >
                j
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/w/"
                onclick="playSound(this)"
              >
                w
              </div>
              <div
                class="ipa-symbol consonant"
                data-sound="/h/"
                onclick="playSound(this)"
              >
                h
              </div>
            </div>
            <div class="sound-info" id="soundInfo" style="display: none">
              <h4 id="soundTitle"></h4>
              <p id="soundDescription"></p>
              <div id="soundExamples"></div>
            </div>
          </div>

          <!-- Word Breakdown Tool -->
          <div class="phonics-tool">
            <div class="tool-header">
              <div class="tool-icon">
                <i class="fas fa-cut"></i>
              </div>
              <h3>Word Sound Breakdown</h3>
            </div>
            <p>
              Enter a word to see its phonemic breakdown and practice each
              sound.
            </p>
            <div class="word-input-container">
              <input
                type="text"
                id="wordInput"
                placeholder="Enter a word..."
                class="word-input"
              />
              <button onclick="breakdownWord()" class="btn btn-small">
                Analyze
              </button>
            </div>
            <div
              class="word-breakdown"
              id="wordBreakdown"
              style="display: none"
            >
              <div class="breakdown-word" id="breakdownWord"></div>
              <div class="phoneme-breakdown" id="phonemeBreakdown"></div>
              <button onclick="playWordSound()" class="btn btn-secondary">
                <i class="fas fa-play"></i> Play Full Word
              </button>
            </div>
          </div>

          <!-- Pronunciation Practice -->
          <div class="phonics-tool">
            <div class="tool-header">
              <div class="tool-icon">
                <i class="fas fa-microphone"></i>
              </div>
              <h3>Pronunciation Practice</h3>
            </div>
            <p>
              Practice your pronunciation with real-time feedback using speech
              recognition.
            </p>
            <div class="pronunciation-practice">
              <div class="practice-word">
                <h3 id="practiceWord">pronunciation</h3>
                <div class="ipa" id="practiceIPA">/pr…ôÀån ånsiÀàe…™ É…ôn/</div>
                <div class="syllables" id="practiceSyllables">
                  pro-nun-ci-a-tion
                </div>
              </div>
              <div class="recording-controls">
                <button
                  class="record-btn"
                  id="recordBtn"
                  onclick="toggleRecording()"
                >
                  <i class="fas fa-microphone"></i>
                </button>
                <button class="btn btn-secondary" onclick="playTargetWord()">
                  <i class="fas fa-play"></i> Listen
                </button>
                <button class="btn btn-small" onclick="getNewWord()">
                  <i class="fas fa-refresh"></i> New Word
                </button>
              </div>
              <div class="progress-text" id="feedbackText">
                Click the microphone to start recording
              </div>
              <div class="progress-container">
                <div
                  class="progress-bar"
                  id="accuracyBar"
                  style="width: 0%"
                ></div>
              </div>
            </div>
          </div>

          <!-- Accent Training -->
          <div class="phonics-tool">
            <div class="tool-header">
              <div class="tool-icon">
                <i class="fas fa-globe"></i>
              </div>
              <h3>Accent Training</h3>
            </div>
            <p>
              Choose an accent to practice and compare different pronunciations.
            </p>
            <div class="accent-selector">
              <button
                class="accent-btn active"
                data-accent="american"
                onclick="selectAccent('american')"
              >
                American
              </button>
              <button
                class="accent-btn"
                data-accent="british"
                onclick="selectAccent('british')"
              >
                British
              </button>
              <button
                class="accent-btn"
                data-accent="australian"
                onclick="selectAccent('australian')"
              >
                Australian
              </button>
              <button
                class="accent-btn"
                data-accent="canadian"
                onclick="selectAccent('canadian')"
              >
                Canadian
              </button>
            </div>
            <div class="accent-comparison" id="accentComparison">
              <div class="accent-example">
                <h4>Example Word: "Water"</h4>
                <div class="accent-variants">
                  <div class="variant">
                    <strong>American:</strong> /Ààw…ëÀêt…ôr/
                    <button
                      onclick="playAccentSound('water', 'american')"
                      class="play-btn"
                    >
                      <i class="fas fa-play"></i>
                    </button>
                  </div>
                  <div class="variant">
                    <strong>British:</strong> /Ààw…îÀêt…ô(r)/
                    <button
                      onclick="playAccentSound('water', 'british')"
                      class="play-btn"
                    >
                      <i class="fas fa-play"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Vowel Sounds Section -->
    <section class="section" id="vowel-sounds">
      <div class="container">
        <h2 class="section-title">Vowel Sounds Practice</h2>
        <div class="sound-categories">
          <div class="category-card" onclick="loadVowelCategory('short')">
            <div class="category-emoji">üî¥</div>
            <h4>Short Vowels</h4>
            <p>Practice /…™/, /e/, /√¶/, /…í/, / ä/, / å/, /…ô/</p>
          </div>
          <div class="category-card" onclick="loadVowelCategory('long')">
            <div class="category-emoji">üîµ</div>
            <h4>Long Vowels</h4>
            <p>Practice /iÀê/, /…ëÀê/, /…îÀê/, /uÀê/, /…úÀê/</p>
          </div>
          <div class="category-card" onclick="loadVowelCategory('diphthongs')">
            <div class="category-emoji">üî∂</div>
            <h4>Diphthongs</h4>
            <p>Practice /e…™/, /a…™/, /…î…™/, /a ä/, /…ô ä/, /…™…ô/, /e…ô/, / ä…ô/</p>
          </div>
        </div>
        <div class="vowel-practice" id="vowelPractice">
          <!-- Dynamic content loaded here -->
        </div>
      </div>
    </section>

    <!-- Consonant Sounds Section -->
    <section class="section" id="consonant-sounds">
      <div class="container">
        <h2 class="section-title">Consonant Sounds Practice</h2>
        <div class="sound-categories">
          <div class="category-card" onclick="loadConsonantCategory('stops')">
            <div class="category-emoji">üõë</div>
            <h4>Stops</h4>
            <p>Practice /p/, /b/, /t/, /d/, /k/, /g/</p>
          </div>
          <div
            class="category-card"
            onclick="loadConsonantCategory('fricatives')"
          >
            <div class="category-emoji">üå™Ô∏è</div>
            <h4>Fricatives</h4>
            <p>Practice /f/, /v/, /Œ∏/, /√∞/, /s/, /z/, / É/, / í/, /h/</p>
          </div>
          <div class="category-card" onclick="loadConsonantCategory('nasals')">
            <div class="category-emoji">üëÉ</div>
            <h4>Nasals</h4>
            <p>Practice /m/, /n/, /≈ã/</p>
          </div>
          <div class="category-card" onclick="loadConsonantCategory('liquids')">
            <div class="category-emoji">üíß</div>
            <h4>Liquids & Glides</h4>
            <p>Practice /l/, /r/, /j/, /w/</p>
          </div>
        </div>
        <div class="consonant-practice" id="consonantPractice">
          <!-- Dynamic content loaded here -->
        </div>
      </div>
    </section>

    <!-- Minimal Pairs Section -->
    <section class="section" id="minimal-pairs">
      <div class="container">
        <h2 class="section-title">Minimal Pairs Practice</h2>
        <p
          style="
            text-align: center;
            margin-bottom: 3rem;
            color: var(--text-secondary);
          "
        >
          Train your ear to distinguish between similar sounds that can change
          word meanings.
        </p>
        <div class="minimal-pairs">
          <div class="pair-container">
            <div class="pair-word" onclick="playPairSound('ship', '/ É…™p/')">
              <div class="word">ship</div>
              <div class="phonetic">/ É…™p/</div>
            </div>
            <div class="vs-divider">VS</div>
            <div class="pair-word" onclick="playPairSound('sheep', '/ ÉiÀêp/')">
              <div class="word">sheep</div>
              <div class="phonetic">/ ÉiÀêp/</div>
            </div>
          </div>
          <div class="pair-container">
            <div class="pair-word" onclick="playPairSound('bit', '/b…™t/')">
              <div class="word">bit</div>
              <div class="phonetic">/b…™t/</div>
            </div>
            <div class="vs-divider">VS</div>
            <div class="pair-word" onclick="playPairSound('beat', '/biÀêt/')">
              <div class="word">beat</div>
              <div class="phonetic">/biÀêt/</div>
            </div>
          </div>
          <div class="pair-container">
            <div class="pair-word" onclick="playPairSound('cat', '/k√¶t/')">
              <div class="word">cat</div>
              <div class="phonetic">/k√¶t/</div>
            </div>
            <div class="vs-divider">VS</div>
            <div class="pair-word" onclick="playPairSound('cut', '/k åt/')">
              <div class="word">cut</div>
              <div class="phonetic">/k åt/</div>
            </div>
          </div>
          <div class="pair-container">
            <div class="pair-word" onclick="playPairSound('thin', '/Œ∏…™n/')">
              <div class="word">thin</div>
              <div class="phonetic">/Œ∏…™n/</div>
            </div>
            <div class="vs-divider">VS</div>
            <div class="pair-word" onclick="playPairSound('sin', '/s…™n/')">
              <div class="word">sin</div>
              <div class="phonetic">/s…™n/</div>
            </div>
          </div>
        </div>
        <div class="btn-container" style="text-align: center; margin-top: 2rem">
          <button class="btn" onclick="startMinimalPairTest()">
            <i class="fas fa-play"></i>
            Start Listening Test
          </button>
        </div>
      </div>
    </section>

    <!-- Word Stress Section -->
    <section class="section" id="word-stress">
      <div class="container">
        <h2 class="section-title">Word Stress Patterns</h2>
        <p
          style="
            text-align: center;
            margin-bottom: 3rem;
            color: var(--text-secondary);
          "
        >
          Learn where to place stress in English words to sound more natural.
        </p>

        <div class="stress-examples">
          <div class="word-breakdown">
            <div class="breakdown-word">photograph</div>
            <div class="stress-pattern">
              <div class="syllable primary-stress">PHO</div>
              <div class="syllable">to</div>
              <div class="syllable">graph</div>
            </div>
            <p style="text-align: center; color: var(--text-secondary)">
              <strong>Rule:</strong> Three-syllable nouns often have stress on
              the first syllable
            </p>
          </div>

          <div class="word-breakdown">
            <div class="breakdown-word">photographer</div>
            <div class="stress-pattern">
              <div class="syllable">pho</div>
              <div class="syllable primary-stress">TOG</div>
              <div class="syllable">ra</div>
              <div class="syllable">pher</div>
            </div>
            <p style="text-align: center; color: var(--text-secondary)">
              <strong>Rule:</strong> Words ending in -er often have stress on
              the syllable before -er
            </p>
          </div>

          <div class="word-breakdown">
            <div class="breakdown-word">university</div>
            <div class="stress-pattern">
              <div class="syllable">u</div>
              <div class="syllable">ni</div>
              <div class="syllable primary-stress">VER</div>
              <div class="syllable">si</div>
              <div class="syllable">ty</div>
            </div>
            <p style="text-align: center; color: var(--text-secondary)">
              <strong>Rule:</strong> Words ending in -ty have stress on the
              syllable before -ty
            </p>
          </div>
        </div>

        <div class="btn-container" style="text-align: center; margin-top: 2rem">
          <button class="btn" onclick="startStressTest()">
            <i class="fas fa-headphones"></i>
            Practice Stress Patterns
          </button>
        </div>
      </div>
    </section>

    <!-- Rhyme Recognition Section -->
    <section class="section">
      <div class="container">
        <h2 class="section-title">Rhyme Recognition</h2>
        <p
          style="
            text-align: center;
            margin-bottom: 3rem;
            color: var(--text-secondary);
          "
        >
          Improve your phonemic awareness by identifying words that rhyme.
        </p>

        <div class="rhyme-exercise">
          <h3 style="text-align: center; margin-bottom: 2rem">
            Which words rhyme with "CAT"?
          </h3>
          <div class="rhyme-words">
            <div class="rhyme-word" onclick="selectRhymeWord(this, true)">
              bat
            </div>
            <div class="rhyme-word" onclick="selectRhymeWord(this, false)">
              car
            </div>
            <div class="rhyme-word" onclick="selectRhymeWord(this, true)">
              hat
            </div>
            <div class="rhyme-word" onclick="selectRhymeWord(this, false)">
              cut
            </div>
            <div class="rhyme-word" onclick="selectRhymeWord(this, true)">
              mat
            </div>
            <div class="rhyme-word" onclick="selectRhymeWord(this, false)">
              cot
            </div>
            <div class="rhyme-word" onclick="selectRhymeWord(this, true)">
              rat
            </div>
            <div class="rhyme-word" onclick="selectRhymeWord(this, false)">
              kit
            </div>
          </div>
          <div
            class="btn-container"
            style="text-align: center; margin-top: 1rem"
          >
            <button class="btn btn-secondary" onclick="checkRhymeAnswers()">
              Check Answers
            </button>
            <button class="btn" onclick="newRhymeExercise()">
              New Exercise
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Progress Tracking -->
    <section class="section" style="background: var(--bg-secondary)">
      <div class="container">
        <h2 class="section-title">Your Progress</h2>
        <div class="progress-dashboard">
          <div class="progress-card">
            <h3>Phonemes Mastered</h3>
            <div class="progress-text">32 out of 44</div>
            <div class="progress-container">
              <div class="progress-bar" style="width: 73%"></div>
            </div>
          </div>
          <div class="progress-card">
            <h3>Pronunciation Accuracy</h3>
            <div class="progress-text">85% Average</div>
            <div class="progress-container">
              <div class="progress-bar" style="width: 85%"></div>
            </div>
          </div>
          <div class="progress-card">
            <h3>Words Practiced</h3>
            <div class="progress-text">247 words</div>
            <div class="progress-container">
              <div class="progress-bar" style="width: 60%"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Pronunciation Tips Section -->
    <section class="section">
      <div class="container">
        <h2 class="section-title">Master Pronunciation Techniques</h2>
        <div class="tips-grid">
          <div class="tip-card">
            <div class="tip-icon">
              <i class="fas fa-mouth-open"></i>
            </div>
            <h4>Mirror Practice</h4>
            <p>Practice in front of a mirror to see your mouth positions. Visual feedback helps you correct tongue and lip placement for accurate sounds.</p>
            <div class="tip-action">
              <button class="btn-tip" onclick="startMirrorChallenge()">
                <i class="fas fa-video"></i>
                Try Challenge
              </button>
            </div>
          </div>

          <div class="tip-card">
            <div class="tip-icon">
              <i class="fas fa-volume-up"></i>
            </div>
            <h4>Record & Compare</h4>
            <p>Record yourself speaking and compare with native speakers. This helps identify specific sounds that need improvement.</p>
            <div class="tip-action">
              <button class="btn-tip" onclick="startRecordingExercise()">
                <i class="fas fa-microphone"></i>
                Start Recording
              </button>
            </div>
          </div>

          <div class="tip-card">
            <div class="tip-icon">
              <i class="fas fa-heartbeat"></i>
            </div>
            <h4>Rhythm & Stress</h4>
            <p>English has a natural rhythm. Practice with a metronome to master the stress-timed pattern of English speech.</p>
            <div class="tip-action">
              <button class="btn-tip" onclick="practiceRhythm()">
                <i class="fas fa-music"></i>
                Practice Rhythm
              </button>
            </div>
          </div>

          <div class="tip-card">
            <div class="tip-icon">
              <i class="fas fa-brain"></i>
            </div>
            <h4>Minimal Pairs</h4>
            <p>Focus on sound pairs that are difficult for your native language (like /l/ and /r/ for Japanese speakers).</p>
            <div class="tip-action">
              <button class="btn-tip" onclick="openMinimalPairs()">
                <i class="fas fa-exchange-alt"></i>
                Practice Pairs
              </button>
            </div>
          </div>
        </div>

        <!-- Quick Resources -->
        <div class="quick-resources">
          <h3>Pronunciation Resources</h3>
          <div class="resource-buttons">
            <a href="../games/games.html" class="resource-btn">
              <i class="fas fa-gamepad"></i>
              Speaking Games
            </a>
            <a href="../english/vocabguide.html" class="resource-btn">
              <i class="fas fa-book"></i>
              Vocabulary Guide
            </a>
            <a href="../tools/tools.html" class="resource-btn">
              <i class="fas fa-tools"></i>
              Study Tools
            </a>
            <a href="../english/test.html" class="resource-btn">
              <i class="fas fa-certificate"></i>
              Test Preparation
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Google AdSense - Bottom Content Ad (Centered) -->
    <!-- Enhanced Professional Footer -->
    <footer>

      <div class="container">
        <div class="footer-content">
          <!-- Brand Section -->
          <div class="footer-section footer-brand">
            <div class="brand-header">
              <img src="../images/1.png" alt="ESL Fun Online" class="footer-logo">
              <h3>ESL Fun Online</h3>
            </div>
            <p>
              Transform your English and coding skills with our premium interactive resources.
            </p>
          </div>

          <!-- English Learning Section -->
          <div class="footer-section">
            <h3><i class="fas fa-graduation-cap"></i> English</h3>
            <ul>
              <li><a href="../english/grammar.html"><i class="fas fa-spell-check"></i><span>Grammar</span></a></li>
              <li><a href="../english/vocabguide.html"><i class="fas fa-book-open"></i><span>Vocabulary</span></a></li>
              <li><a href="../english/business.html"><i class="fas fa-handshake"></i><span>Business</span></a></li>
            </ul>
          </div>

          <!-- Programming Section -->
          <div class="footer-section">
            <h3><i class="fas fa-code"></i> Coding</h3>
            <ul>
              <li><a href="../coding/computerbasics.html"><i class="fas fa-desktop"></i><span>Basics</span></a></li>
              <li><a href="../coding/ai.html"><i class="fas fa-robot"></i><span>AI</span></a></li>
              <li><a href="../coding/codingresources.html"><i class="fas fa-terminal"></i><span>Resources</span></a></li>
            </ul>
          </div>

          <!-- Quick Links Section -->
          <div class="footer-section">
            <h3><i class="fas fa-link"></i> Quick Links</h3>
            <ul>
              <li><a href="lessons.html"><i class="fas fa-chalkboard-teacher"></i><span>Lessons</span></a></li>
              <li><a href="../games/games.html"><i class="fas fa-gamepad"></i><span>Games</span></a></li>
              <li><a href="../tools/tools.html"><i class="fas fa-tools"></i><span>Tools</span></a></li>
            </ul>
          </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
          <div class="footer-bottom-center">
            <div class="footer-links">
              <a href="privacy.html"><i class="fas fa-shield-alt"></i>Privacy</a>
              <a href="terms.html"><i class="fas fa-file-contract"></i>Terms</a>
              <a href="cookies.html"><i class="fas fa-cookie-bite"></i>Cookies</a>
            </div>
          </div>
          
          <div class="footer-bottom-left">
            <p>&copy; 2025 <strong>ESL Fun Online</strong>. All rights reserved.</p>
            <p class="footer-subtitle">Empowering learners worldwide</p>
          </div>

          <div class="footer-bottom-right">
            <div class="footer-badges">
              <div class="badge"><i class="fas fa-award"></i><span>Certified</span></div>
              <div class="badge"><i class="fas fa-lock"></i><span>Secure</span></div>
            </div>
          </div>

    <!-- Back to Top Button -->
    <a href="#top" class="back-to-top" id="backToTop">
      <i class="fas fa-arrow-up"></i>
    </a>

    <!-- Notification Container -->
    <div id="notifications"></div>

    <!-- JavaScript Libraries -->
    <script src="../js/navigation.js"></script>
    <script src="../js/footer-component.js"></script>

    <script>
      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        // Load footer
        FooterComponent.init("../");

        // Initialize progress stats
        updateProgressStats();

        // Initialize back to top button
        initBackToTop();

        // Load practice data
        loadPhonicsData();

        // Initialize speech recognition if available
        initSpeechRecognition();
      });

      // Phonics data structure
      const phonicsData = {
        vowels: {
          short: [
            {
              symbol: "…™",
              examples: ["bit", "sit", "hit"],
              description: "Short I sound",
            },
            {
              symbol: "e",
              examples: ["bet", "set", "net"],
              description: "Short E sound",
            },
            {
              symbol: "√¶",
              examples: ["bat", "sat", "hat"],
              description: "Short A sound",
            },
            {
              symbol: "…í",
              examples: ["hot", "pot", "not"],
              description: "Short O sound",
            },
            {
              symbol: " ä",
              examples: ["put", "book", "look"],
              description: "Short U sound",
            },
            {
              symbol: " å",
              examples: ["but", "cut", "run"],
              description: "Schwa sound",
            },
          ],
          long: [
            {
              symbol: "iÀê",
              examples: ["beat", "seat", "neat"],
              description: "Long E sound",
            },
            {
              symbol: "…ëÀê",
              examples: ["car", "far", "star"],
              description: "Long A sound",
            },
            {
              symbol: "…îÀê",
              examples: ["saw", "law", "raw"],
              description: "Long O sound",
            },
            {
              symbol: "uÀê",
              examples: ["boot", "root", "shoot"],
              description: "Long U sound",
            },
            {
              symbol: "…úÀê",
              examples: ["bird", "heard", "word"],
              description: "ER sound",
            },
          ],
          diphthongs: [
            {
              symbol: "e…™",
              examples: ["day", "say", "play"],
              description: "Long A diphthong",
            },
            {
              symbol: "a…™",
              examples: ["my", "fly", "cry"],
              description: "Long I diphthong",
            },
            {
              symbol: "…î…™",
              examples: ["boy", "joy", "toy"],
              description: "OI diphthong",
            },
            {
              symbol: "a ä",
              examples: ["how", "now", "cow"],
              description: "OW diphthong",
            },
            {
              symbol: "…ô ä",
              examples: ["go", "so", "know"],
              description: "Long O diphthong",
            },
          ],
        },
        consonants: {
          stops: [
            {
              symbol: "p",
              examples: ["pat", "top", "cup"],
              description: "Voiceless P",
            },
            {
              symbol: "b",
              examples: ["bat", "tab", "cub"],
              description: "Voiced B",
            },
            {
              symbol: "t",
              examples: ["tap", "sit", "cat"],
              description: "Voiceless T",
            },
            {
              symbol: "d",
              examples: ["dog", "sad", "red"],
              description: "Voiced D",
            },
            {
              symbol: "k",
              examples: ["cat", "back", "kick"],
              description: "Voiceless K",
            },
            {
              symbol: "g",
              examples: ["go", "bag", "big"],
              description: "Voiced G",
            },
          ],
          fricatives: [
            {
              symbol: "f",
              examples: ["fat", "if", "off"],
              description: "Voiceless F",
            },
            {
              symbol: "v",
              examples: ["van", "have", "love"],
              description: "Voiced V",
            },
            {
              symbol: "Œ∏",
              examples: ["think", "math", "tooth"],
              description: "Voiceless TH",
            },
            {
              symbol: "√∞",
              examples: ["this", "that", "mother"],
              description: "Voiced TH",
            },
            {
              symbol: "s",
              examples: ["sit", "bus", "kiss"],
              description: "Voiceless S",
            },
            {
              symbol: "z",
              examples: ["zoo", "buzz", "is"],
              description: "Voiced Z",
            },
          ],
        },
      };

      // Practice words for different exercises
      const practiceWords = [
        {
          word: "pronunciation",
          ipa: "/pr…ôÀån ånsiÀàe…™ É…ôn/",
          syllables: "pro-nun-ci-a-tion",
        },
        { word: "beautiful", ipa: "/ÀàbjuÀêt…™f…ôl/", syllables: "beau-ti-ful" },
        {
          word: "comfortable",
          ipa: "/Ààk åmft…ôb…ôl/",
          syllables: "com-fort-a-ble",
        },
        {
          word: "interesting",
          ipa: "/Àà…™ntr…ôst…™≈ã/",
          syllables: "in-ter-est-ing",
        },
        { word: "necessary", ipa: "/Àànes…ôs…ôri/", syllables: "nec-es-sar-y" },
        {
          word: "development",
          ipa: "/d…™Ààvel…ôpm…ônt/",
          syllables: "de-vel-op-ment",
        },
        {
          word: "opportunity",
          ipa: "/Àå…íp…ôÀàtun…ôti/",
          syllables: "op-por-tu-ni-ty",
        },
        {
          word: "responsibility",
          ipa: "/r…™Àåsp…íns…ôÀàb…™l…ôti/",
          syllables: "re-spon-si-bil-i-ty",
        },
      ];

      let currentWord = 0;
      let isRecording = false;
      let recognition = null;

      // Initialize speech recognition
      function initSpeechRecognition() {
        if ("webkitSpeechRecognition" in window) {
          recognition = new webkitSpeechRecognition();
          recognition.continuous = false;
          recognition.interimResults = false;
          recognition.lang = "en-US";

          recognition.onresult = function (event) {
            const result = event.results[0][0].transcript.toLowerCase();
            const target = practiceWords[currentWord].word.toLowerCase();
            const accuracy = calculateAccuracy(result, target);
            showPronunciationFeedback(accuracy, result, target);
          };

          recognition.onerror = function (event) {
            showNotification(
              "Speech recognition error: " + event.error,
              "error"
            );
            stopRecording();
          };

          recognition.onend = function () {
            stopRecording();
          };
        }
      }

      // Update progress statistics
      function updateProgressStats() {
        const stats = getProgressStats();
        document.getElementById("phonemesLearned").textContent = stats.phonemes;
        document.getElementById("wordsStudied").textContent = stats.words;
        document.getElementById("accuracyScore").textContent =
          stats.accuracy + "%";
        document.getElementById("practiceStreak").textContent = stats.streak;
      }

      // Get progress statistics (would normally come from user data)
      function getProgressStats() {
        return {
          phonemes: Math.floor(Math.random() * 44),
          words: Math.floor(Math.random() * 500),
          accuracy: Math.floor(Math.random() * 30) + 70,
          streak: Math.floor(Math.random() * 30) + 1,
        };
      }

      // Play sound for phoneme
      function playSound(element) {
        const sound = element.dataset.sound;
        element.classList.add("selected");

        // Show sound information
        showSoundInfo(sound);

        // Simulate sound playing (replace with actual audio)
        setTimeout(() => {
          element.classList.remove("selected");
        }, 1000);

        showNotification(`Playing sound: ${sound}`, "info");
      }

      // Show information about selected sound
      function showSoundInfo(sound) {
        const soundInfo = document.getElementById("soundInfo");
        const soundTitle = document.getElementById("soundTitle");
        const soundDescription = document.getElementById("soundDescription");
        const soundExamples = document.getElementById("soundExamples");

        // Find sound data
        const soundData = findSoundData(sound);
        if (soundData) {
          soundTitle.textContent = sound;
          soundDescription.textContent = soundData.description;
          soundExamples.innerHTML = soundData.examples
            .map((word) => `<span class="example-word">${word}</span>`)
            .join("");
          soundInfo.style.display = "block";
        }
      }

      // Find sound data from phonics data
      function findSoundData(sound) {
        // Search through all phonics data
        for (const category in phonicsData.vowels) {
          const found = phonicsData.vowels[category].find(
            (item) => item.symbol === sound.replace(/[\/]/g, "")
          );
          if (found) return found;
        }
        for (const category in phonicsData.consonants) {
          const found = phonicsData.consonants[category].find(
            (item) => item.symbol === sound.replace(/[\/]/g, "")
          );
          if (found) return found;
        }
        return null;
      }

      // Word breakdown functionality
      function breakdownWord() {
        const word = document
          .getElementById("wordInput")
          .value.toLowerCase()
          .trim();
        if (!word) {
          showNotification("Please enter a word", "error");
          return;
        }

        // Simple breakdown (in real app, use phonetic dictionary)
        const breakdown = getWordBreakdown(word);
        displayWordBreakdown(word, breakdown);
      }

      // Get phonetic breakdown of word
      function getWordBreakdown(word) {
        // Simplified breakdown - in real app, use comprehensive phonetic dictionary
        const breakdowns = {
          cat: ["k", "√¶", "t"],
          dog: ["d", "…í", "g"],
          house: ["h", "a ä", "s"],
          water: ["w", "…îÀê", "t", "…ô"],
          beautiful: ["b", "juÀê", "t", "…™", "f", "…ôl"],
          pronunciation: [
            "p",
            "r",
            "…ô",
            "n",
            " å",
            "n",
            "s",
            "i",
            "e…™",
            " É",
            "…ô",
            "n",
          ],
        };

        return breakdowns[word] || word.split("");
      }

      // Display word breakdown
      function displayWordBreakdown(word, breakdown) {
        document.getElementById("breakdownWord").textContent = word;
        document.getElementById("phonemeBreakdown").innerHTML = breakdown
          .map((phoneme) => {
            const isVowel = /[aeiou√¶…™…í ä å…úÀê…ôe…™a…™…î…™a ä…ô ä…™…ôe…ô ä…ô]/.test(phoneme);
            return `<div class="phoneme-box ${
              isVowel ? "vowel" : "consonant"
            }">${phoneme}</div>`;
          })
          .join("");

        document.getElementById("wordBreakdown").style.display = "block";
      }

      // Toggle recording for pronunciation practice
      function toggleRecording() {
        if (!recognition) {
          showNotification("Speech recognition not supported", "error");
          return;
        }

        if (isRecording) {
          recognition.stop();
        } else {
          recognition.start();
          startRecording();
        }
      }

      // Start recording
      function startRecording() {
        isRecording = true;
        const btn = document.getElementById("recordBtn");
        btn.classList.add("recording");
        btn.innerHTML = '<i class="fas fa-stop"></i>';
        document.getElementById("feedbackText").textContent =
          "Listening... Say the word now";
      }

      // Stop recording
      function stopRecording() {
        isRecording = false;
        const btn = document.getElementById("recordBtn");
        btn.classList.remove("recording");
        btn.innerHTML = '<i class="fas fa-microphone"></i>';
        document.getElementById("feedbackText").textContent =
          "Click the microphone to start recording";
      }

      // Calculate pronunciation accuracy
      function calculateAccuracy(spoken, target) {
        // Simple similarity calculation (in real app, use phonetic comparison)
        const similarity = stringSimilarity(spoken, target);
        return Math.round(similarity * 100);
      }

      // String similarity function
      function stringSimilarity(str1, str2) {
        const longer = str1.length > str2.length ? str1 : str2;
        const shorter = str1.length > str2.length ? str2 : str1;

        if (longer.length === 0) return 1.0;

        const editDistance = levenshteinDistance(longer, shorter);
        return (longer.length - editDistance) / longer.length;
      }

      // Levenshtein distance calculation
      function levenshteinDistance(str1, str2) {
        const matrix = [];

        for (let i = 0; i <= str2.length; i++) {
          matrix[i] = [i];
        }

        for (let j = 0; j <= str1.length; j++) {
          matrix[0][j] = j;
        }

        for (let i = 1; i <= str2.length; i++) {
          for (let j = 1; j <= str1.length; j++) {
            if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
              matrix[i][j] = matrix[i - 1][j - 1];
            } else {
              matrix[i][j] = Math.min(
                matrix[i - 1][j - 1] + 1,
                matrix[i][j - 1] + 1,
                matrix[i - 1][j] + 1
              );
            }
          }
        }

        return matrix[str2.length][str1.length];
      }

      // Show pronunciation feedback
      function showPronunciationFeedback(accuracy, spoken, target) {
        const accuracyBar = document.getElementById("accuracyBar");
        const feedbackText = document.getElementById("feedbackText");

        accuracyBar.style.width = accuracy + "%";

        if (accuracy >= 80) {
          feedbackText.textContent = `Excellent! ${accuracy}% accuracy`;
          showNotification("Great pronunciation!", "success");
        } else if (accuracy >= 60) {
          feedbackText.textContent = `Good try! ${accuracy}% accuracy. You said "${spoken}"`;
          showNotification("Keep practicing!", "info");
        } else {
          feedbackText.textContent = `Try again. ${accuracy}% accuracy. You said "${spoken}"`;
          showNotification("Practice makes perfect!", "error");
        }
      }

      // Get new practice word
      function getNewWord() {
        currentWord = (currentWord + 1) % practiceWords.length;
        const word = practiceWords[currentWord];
        document.getElementById("practiceWord").textContent = word.word;
        document.getElementById("practiceIPA").textContent = word.ipa;
        document.getElementById("practiceSyllables").textContent =
          word.syllables;

        // Reset feedback
        document.getElementById("accuracyBar").style.width = "0%";
        document.getElementById("feedbackText").textContent =
          "Click the microphone to start recording";
      }

      // Play target word sound
      function playTargetWord() {
        const word = practiceWords[currentWord].word;
        showNotification(`Playing: ${word}`, "info");
        // In real app, play actual audio
      }

      // Scroll to section
      function scrollToSection(sectionId) {
        document
          .getElementById(sectionId)
          .scrollIntoView({ behavior: "smooth" });
      }

      // Show notification
      function showNotification(message, type = "info") {
        const notification = document.createElement("div");
        notification.className = `notification ${type}`;
        notification.textContent = message;

        document.getElementById("notifications").appendChild(notification);

        // Show notification
        setTimeout(() => notification.classList.add("show"), 100);

        // Hide and remove notification
        setTimeout(() => {
          notification.classList.remove("show");
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }

      // Initialize back to top button
      function initBackToTop() {
        const backToTop = document.getElementById("backToTop");

        window.addEventListener("scroll", () => {
          if (window.pageYOffset > 300) {
            backToTop.classList.add("show");
          } else {
            backToTop.classList.remove("show");
          }
        });
      }

      // Load phonics data and initialize interactive elements
      function loadPhonicsData() {
        // This would load from external phonics database in real app
        console.log("Phonics data loaded");
      }

      // Placeholder functions for interactive exercises
      function loadVowelCategory(category) {
        showNotification(`Loading ${category} vowels...`, "info");
        // Load and display vowel exercises
      }

      function loadConsonantCategory(category) {
        showNotification(`Loading ${category} consonants...`, "info");
        // Load and display consonant exercises
      }

      function selectAccent(accent) {
        // Update active accent button
        document
          .querySelectorAll(".accent-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document
          .querySelector(`[data-accent="${accent}"]`)
          .classList.add("active");
        showNotification(`Switched to ${accent} accent`, "info");
      }

      function playAccentSound(word, accent) {
        showNotification(`Playing ${word} in ${accent} accent`, "info");
        // Play accent-specific pronunciation
      }

      function playPairSound(word, phonetic) {
        showNotification(`Playing: ${word} ${phonetic}`, "info");
        // Play word pronunciation
      }

      function startMinimalPairTest() {
        showNotification("Starting minimal pair listening test...", "info");
        // Initialize minimal pair test
      }

      function startStressTest() {
        showNotification("Starting word stress practice...", "info");
        // Initialize stress pattern test
      }

      function selectRhymeWord(element, isCorrect) {
        element.classList.toggle("selected");
        element.dataset.correct = isCorrect;
      }

      function checkRhymeAnswers() {
        const words = document.querySelectorAll(".rhyme-word");
        let correct = 0;
        let total = 0;

        words.forEach((word) => {
          if (word.classList.contains("selected")) {
            total++;
            const isCorrect = word.dataset.correct === "true";
            if (isCorrect) {
              word.classList.add("correct");
              correct++;
            } else {
              word.classList.add("incorrect");
            }
          }
        });

        showNotification(`You got ${correct} out of ${total} correct!`, "info");
      }

      function newRhymeExercise() {
        // Reset current exercise
        document.querySelectorAll(".rhyme-word").forEach((word) => {
          word.classList.remove("selected", "correct", "incorrect");
        });

        // In real app, load new rhyme exercise
        showNotification("Loading new rhyme exercise...", "info");
      }

      // New functions for enhanced features
      function generatePronunciationPlan() {
        const currentLevel = document.getElementById('currentLevel').value;
        const focusArea = document.getElementById('focusArea').value;
        const practiceTime = document.getElementById('practiceTime').value;
        const nativeLanguage = document.getElementById('nativeLanguage').value;
        
        const resultDiv = document.getElementById('pronunciationPlanResult');
        
        // Generate recommendations based on native language
        const languageSpecificTips = {
          spanish: "Focus on /v/ vs /b/ sounds and final consonants",
          chinese: "Practice /l/ vs /r/ distinction and consonant clusters",
          japanese: "Work on /l/, /r/, /Œ∏/, /√∞/ sounds and syllable timing",
          korean: "Focus on /f/, /v/, /z/ sounds and initial consonant clusters",
          arabic: "Practice /p/ vs /b/ and vowel length distinctions"
        };
        
        const focusAreaDescriptions = {
          vowels: "Master the 20 English vowel sounds with mouth position exercises",
          consonants: "Perfect challenging consonant sounds with articulation practice", 
          stress: "Learn English rhythm and word stress patterns",
          intonation: "Practice rising and falling speech patterns"
        };
        
        resultDiv.innerHTML = `
          <div class="pronunciation-plan-card">
            <h4><i class="fas fa-microphone"></i> Your Pronunciation Plan</h4>
            <div class="plan-details">
              <div class="plan-item">
                <strong>Current Level:</strong> ${currentLevel.charAt(0).toUpperCase() + currentLevel.slice(1)}
              </div>
              <div class="plan-item">
                <strong>Focus Area:</strong> ${focusAreaDescriptions[focusArea]}
              </div>
              <div class="plan-item">
                <strong>Daily Practice:</strong> ${practiceTime} minutes
              </div>
              ${nativeLanguage !== 'other' ? `
              <div class="plan-item">
                <strong>Special Focus:</strong> ${languageSpecificTips[nativeLanguage] || 'General pronunciation improvement'}
              </div>` : ''}
              <div class="plan-item">
                <strong>Weekly Schedule:</strong>
                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                  <li>Day 1-2: IPA symbols and mouth positions</li>
                  <li>Day 3-4: Minimal pairs practice</li>
                  <li>Day 5-6: Connected speech and rhythm</li>
                  <li>Day 7: Review and self-assessment</li>
                </ul>
              </div>
            </div>
            <button class="btn" onclick="startPronunciationPlan()" style="margin-top: 1rem;">
              <i class="fas fa-play"></i>
              Start This Plan
            </button>
          </div>
        `;
        
        resultDiv.style.display = 'block';
        showNotification('Pronunciation plan generated! üéØ', 'success');
      }
      
      function startPronunciationPlan() {
        localStorage.setItem('activePronunciationPlan', JSON.stringify({
          currentLevel: document.getElementById('currentLevel').value,
          focusArea: document.getElementById('focusArea').value,
          practiceTime: document.getElementById('practiceTime').value,
          nativeLanguage: document.getElementById('nativeLanguage').value,
          startDate: new Date().toISOString(),
          progress: 0
        }));
        
        showNotification('Pronunciation plan activated! Let\'s improve your speaking! üó£Ô∏è', 'success');
        scrollToSection('interactive-tools');
      }
      
      function startMirrorChallenge() {
        showNotification('Mirror Challenge: Practice these sounds while watching your mouth: /Œ∏/, /√∞/, /w/, /v/ ü™û', 'info');
      }
      
      function startRecordingExercise() {
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
          showNotification('Click the IPA symbols above and record yourself repeating the sounds! üé§', 'info');
        } else {
          showNotification('Recording not available. Use your phone\'s voice recorder instead! üì±', 'info');
        }
      }
      
      function practiceRhythm() {
        const rhythmPatterns = [
          'DA-da-da (TEM-pe-ra-ture)',
          'da-DA-da (to-MA-to)', 
          'DA-da-da-da (U-ni-ver-si-ty)',
          'da-da-DA-da (un-der-STAND-ing)'
        ];
        
        const randomPattern = rhythmPatterns[Math.floor(Math.random() * rhythmPatterns.length)];
        showNotification(`Practice this rhythm pattern: ${randomPattern} üéµ`, 'info');
      }
      
      function openMinimalPairs() {
        scrollToSection('minimal-pairs');
        showNotification('Practice these sound pairs below! Focus on the differences. üëÇ', 'info');
      }
      
      function subscribeNewsletter() {
        const emailInput = document.getElementById('newsletterEmail');
        const email = emailInput.value.trim();
        const button = document.querySelector('.btn-newsletter');
        
        if (!email) {
          showNotification('Please enter your email address', 'error');
          return;
        }
        
        if (!isValidEmail(email)) {
          showNotification('Please enter a valid email address', 'error');
          return;
        }
        
        // Show loading state
        const originalText = button.innerHTML;
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Subscribing...';
        button.disabled = true;
        
        // Simulate subscription (replace with actual API call)
        setTimeout(() => {
          showNotification('Successfully subscribed! Check your email for confirmation.', 'success');
          emailInput.value = '';
          button.innerHTML = originalText;
          button.disabled = false;
        }, 1500);
      }
      
      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }
    </script>
  </body>
</html>
