<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thai Language Flashcards - Learn Thai Vocabulary</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #667eea;
        --primary-dark: #5a67d8;
        --secondary: #764ba2;
        --accent: #ff6b6b;
        --accent-light: #feca57;
        --light: #f8f9fa;
        --dark: #343a40;
        --success: #28a745;
        --danger: #dc3545;
        --warning: #ffc107;
        --info: #17a2b8;
        --gray: #6c757d;
        --border-radius: 15px;
        --box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        --transition: all 0.3s ease;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--secondary) 100%
        );
        min-height: 100vh;
        padding-bottom: 2rem;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      /* Header & Navigation */
      header {
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 700;
        font-size: 1.5rem;
        color: var(--primary);
      }

      .nav-links {
        display: flex;
        gap: 1.5rem;
      }

      .nav-links a {
        text-decoration: none;
        color: var(--dark);
        font-weight: 500;
        transition: var(--transition);
        padding: 0.5rem 1rem;
        border-radius: 50px;
      }

      .nav-links a:hover,
      .nav-links a.active {
        background: var(--primary);
        color: white;
      }

      /* Hero Section */
      .hero {
        text-align: center;
        padding: 5rem 2rem;
        background: linear-gradient(
          135deg,
          var(--accent) 0%,
          var(--accent-light) 50%,
          var(--primary) 100%
        );
        color: white;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        border-radius: 0 0 var(--border-radius) var(--border-radius);
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
      }

      .hero h1 {
        font-size: 3rem;
        margin-bottom: 1rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .hero p {
        font-size: 1.2rem;
        margin-bottom: 2rem;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        line-height: 1.6;
        opacity: 0.95;
      }

      .hero-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 2rem;
      }

      .btn {
        padding: 0.8rem 1.8rem;
        border: none;
        border-radius: 50px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
        min-width: 140px;
        justify-content: center;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
      }

      .btn-outline {
        background: transparent;
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
      }

      .btn-outline:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.5);
        transform: translateY(-2px);
      }

      .btn-success {
        background: linear-gradient(135deg, var(--success), #20c997);
        color: white;
      }

      .btn-warning {
        background: linear-gradient(135deg, var(--warning), #f39c12);
        color: white;
      }

      .btn-danger {
        background: linear-gradient(135deg, var(--danger), #e74c3c);
        color: white;
      }

      .btn-sm {
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
        min-width: 100px;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='20' cy='20' r='2' fill='rgba(255,255,255,0.1)'/><circle cx='80' cy='40' r='1' fill='rgba(255,255,255,0.1)'/><circle cx='40' cy='80' r='1.5' fill='rgba(255,255,255,0.1)'/></svg>");
        animation: float 20s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      /* Mode selector */
      .mode-selector {
        display: flex;
        justify-content: center;
        margin: 2rem 0;
        background: white;
        border-radius: 50px;
        padding: 0.5rem;
        box-shadow: var(--box-shadow);
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
      }

      .mode-btn {
        flex: 1;
        padding: 0.8rem 1.5rem;
        border: none;
        background: transparent;
        color: var(--gray);
        border-radius: 50px;
        cursor: pointer;
        transition: var(--transition);
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .mode-btn.active {
        background: var(--primary);
        color: white;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      }

      /* Enhanced flashcard design */
      .flashcard {
        perspective: 1000px;
        width: 100%;
        max-width: 420px;
        height: 300px;
        margin: 1.5rem 0;
        cursor: pointer;
        position: relative;
      }

      .flashcard-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
      }

      .flashcard.flipped .flashcard-inner {
        transform: rotateY(180deg);
      }

      .flashcard-front,
      .flashcard-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 20px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 2rem;
        box-shadow: 0 12px 40px rgba(102, 126, 234, 0.2);
        border: 3px solid rgba(255, 255, 255, 0.2);
      }

      .flashcard-front {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--secondary) 50%,
          #8b5fbf 100%
        );
        color: white;
        position: relative;
      }

      .flashcard-front::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
          circle at 30% 20%,
          rgba(255, 255, 255, 0.2) 0%,
          transparent 50%
        );
        border-radius: 20px;
      }

      .flashcard-back {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
        color: var(--dark);
        transform: rotateY(180deg);
        border: 3px solid var(--accent-light);
      }

      .difficulty-indicator {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.2);
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
      }

      /* Enhanced progress section */
      .progress-section {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
        border: 1px solid rgba(102, 126, 234, 0.1);
        border-radius: var(--border-radius);
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--box-shadow);
        opacity: 0;
        animation: slideInUp 0.6s ease forwards;
        animation-delay: 0.2s;
      }

      .progress-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }

      .progress-header h2 {
        color: var(--primary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .progress-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .stat-card {
        background: linear-gradient(135deg, var(--light) 0%, #ffffff 100%);
        border: 1px solid rgba(102, 126, 234, 0.1);
        border-radius: var(--border-radius);
        padding: 1.5rem;
        text-align: center;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(102, 126, 234, 0.1),
          transparent
        );
        transition: left 0.5s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
      }

      .stat-card:hover::before {
        left: 100%;
      }

      .stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 0.5rem;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }

      .stat-label {
        color: var(--gray);
        font-size: 0.9rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .progress-bar {
        height: 12px;
        background: var(--light);
        border-radius: 6px;
        overflow: hidden;
        margin: 1rem 0;
        position: relative;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--accent),
          var(--accent-light),
          var(--primary)
        );
        border-radius: 6px;
        width: 65%;
        transition: width 0.8s ease;
        position: relative;
        overflow: hidden;
      }

      .progress-fill::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      /* Flashcard Carousel */
      #flashcard-carousel {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 2rem;
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: var(--box-shadow);
        position: relative;
        overflow: hidden;
      }

      #flashcard-carousel::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          rgba(102, 126, 234, 0.02) 0%,
          rgba(118, 75, 162, 0.02) 50%,
          rgba(255, 107, 107, 0.02) 100%
        );
        pointer-events: none;
      }

      .flashcard-progress {
        font-size: 1.2rem;
        color: var(--primary);
        font-weight: 600;
        margin-bottom: 2rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        position: relative;
        z-index: 1;
      }

      .study-stats {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .study-stat {
        text-align: center;
        background: linear-gradient(135deg, var(--light), white);
        padding: 1rem 1.5rem;
        border-radius: var(--border-radius);
        border: 1px solid rgba(102, 126, 234, 0.1);
        min-width: 80px;
        transition: var(--transition);
      }

      .study-stat:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
      }

      .study-stat-number {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 0.3rem;
      }

      .study-stat-label {
        font-size: 0.8rem;
        color: var(--gray);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
      }

      /* Flashcards */
      .flashcard {
        perspective: 1000px;
        width: 100%;
        max-width: 400px;
        height: 280px;
        margin: 1rem 0;
        cursor: pointer;
      }

      .flashcard-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
      }

      .flashcard.flipped .flashcard-inner {
        transform: rotateY(180deg);
      }

      .flashcard-front,
      .flashcard-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 20px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 2rem;
        box-shadow: 0 8px 32px rgba(102, 126, 234, 0.15);
        transition: box-shadow 0.3s ease;
      }

      .flashcard-front {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
      }

      .flashcard-back {
        background: linear-gradient(135deg, #fff 60%, var(--accent-light) 100%);
        color: var(--dark);
        transform: rotateY(180deg);
      }

      .flashcard:hover .flashcard-front,
      .flashcard:hover .flashcard-back {
        box-shadow: 0 16px 48px rgba(102, 126, 234, 0.25);
      }

      .thai-text {
        font-size: 2.5rem;
        color: inherit;
        font-weight: 700;
        margin: 0.5rem 0;
        text-align: center;
      }

      .phonetic {
        font-style: italic;
        color: rgba(255, 255, 255, 0.8);
        font-size: 1.1rem;
        margin-bottom: 1rem;
        text-align: center;
      }

      .flashcard-back .phonetic {
        color: var(--gray);
      }

      .answer {
        font-size: 1.8rem;
        font-weight: 600;
        color: var(--primary);
        text-align: center;
        margin: 1rem 0;
      }

      .action-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-top: 2rem;
        flex-wrap: wrap;
      }

      .action-buttons button {
        min-width: 120px;
      }

      /* Quiz Mode Enhancements */
      .quiz-mode {
        display: none;
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: var(--box-shadow);
        margin-top: 2rem;
        position: relative;
        overflow: hidden;
      }

      .quiz-mode::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          rgba(255, 107, 107, 0.02) 0%,
          rgba(254, 202, 87, 0.02) 50%,
          rgba(102, 126, 234, 0.02) 100%
        );
        pointer-events: none;
      }

      .quiz-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        position: relative;
        z-index: 1;
      }

      .quiz-header h2 {
        color: var(--primary);
        margin: 0;
      }

      .quiz-progress {
        background: var(--light);
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-weight: 600;
        color: var(--primary);
      }

      .quiz-question {
        text-align: center;
        margin-bottom: 2rem;
        padding: 2rem;
        background: linear-gradient(135deg, var(--light), white);
        border-radius: var(--border-radius);
        border: 2px solid rgba(102, 126, 234, 0.1);
        position: relative;
        z-index: 1;
      }

      .quiz-question .question {
        font-size: 1.3rem;
        color: var(--dark);
        margin-bottom: 1rem;
        font-weight: 600;
      }

      .quiz-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
        position: relative;
        z-index: 1;
      }

      .quiz-option {
        padding: 1.2rem;
        background: linear-gradient(135deg, white, var(--light));
        border: 2px solid rgba(102, 126, 234, 0.1);
        border-radius: var(--border-radius);
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
        font-weight: 500;
        position: relative;
        overflow: hidden;
      }

      .quiz-option::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(102, 126, 234, 0.1),
          transparent
        );
        transition: left 0.3s ease;
      }

      .quiz-option:hover {
        transform: translateY(-2px);
        border-color: var(--primary);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
      }

      .quiz-option:hover::before {
        left: 100%;
      }

      .quiz-option.selected {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        border-color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      .quiz-option.correct {
        background: linear-gradient(135deg, var(--success), #20c997);
        color: white;
        border-color: var(--success);
        animation: pulse-success 0.6s ease;
      }

      .quiz-option.incorrect {
        background: linear-gradient(135deg, var(--danger), #e74c3c);
        color: white;
        border-color: var(--danger);
        animation: shake 0.5s ease;
      }

      @keyframes pulse-success {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }

      /* Settings Panel Enhancement */
      .settings-toggle {
        position: fixed;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        transition: all 0.3s ease;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
      }

      .settings-toggle:hover {
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
      }

      .settings-panel {
        position: fixed;
        top: 0;
        right: -300px;
        width: 300px;
        height: 100vh;
        background: linear-gradient(135deg, white 0%, #f8f9ff 100%);
        box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
        transition: right 0.3s ease;
        z-index: 999;
        padding: 2rem;
        overflow-y: auto;
        border-left: 3px solid var(--primary);
      }

      .settings-panel.open {
        right: 0;
      }

      .settings-panel h3 {
        color: var(--primary);
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1.4rem;
      }

      .settings-panel label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--dark);
      }

      .settings-panel input,
      .settings-panel select {
        width: 100%;
        padding: 0.8rem;
        border: 2px solid rgba(102, 126, 234, 0.2);
        border-radius: var(--border-radius);
        font-size: 1rem;
        transition: all 0.3s ease;
        margin-bottom: 1rem;
      }

      .settings-panel input:focus,
      .settings-panel select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .settings-panel input[type="checkbox"] {
        width: auto;
        margin-right: 0.5rem;
        transform: scale(1.2);
      }

      /* Dark mode toggle */
      .dark-mode-toggle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem;
        background: var(--light);
        border-radius: var(--border-radius);
        margin: 1rem 0;
        border: 2px solid rgba(102, 126, 234, 0.1);
      }

      /* Audio controls */
      .audio-controls {
        background: var(--light);
        padding: 1rem;
        border-radius: var(--border-radius);
        margin: 1rem 0;
        border: 2px solid rgba(102, 126, 234, 0.1);
      }

      .volume-control {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }

      .volume-slider {
        flex: 1;
        height: 4px;
        background: rgba(102, 126, 234, 0.2);
        border-radius: 2px;
        outline: none;
        -webkit-appearance: none;
        appearance: none;
      }

      .volume-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        background: var(--primary);
        border-radius: 50%;
        cursor: pointer;
      }

      /* Footer */
      footer {
        text-align: center;
        padding: 2rem;
        margin-top: 3rem;
        color: white;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease;
      }

      .slide-in-up {
        animation: slideInUp 0.5s ease;
      }

      /* Enhanced responsive design */
      @media (max-width: 768px) {
        .hero h1 {
          font-size: 2rem;
        }

        .nav-container {
          flex-direction: column;
          gap: 1rem;
        }

        .nav-links {
          flex-wrap: wrap;
          justify-content: center;
        }

        .hero-buttons {
          flex-direction: column;
          align-items: center;
        }

        .progress-stats {
          grid-template-columns: 1fr;
        }

        .flashcard {
          max-width: 320px;
          height: 240px;
        }

        .thai-text {
          font-size: 2rem;
        }

        .answer {
          font-size: 1.4rem;
        }

        .action-buttons {
          flex-direction: column;
          align-items: center;
        }

        .action-buttons button {
          width: 100%;
          max-width: 200px;
        }

        /* Mode selector */
        .mode-selector {
          flex-direction: column;
          border-radius: var(--border-radius);
          padding: 1rem;
        }

        .mode-btn {
          margin-bottom: 0.5rem;
          border-radius: var(--border-radius);
        }

        .settings-panel {
          width: 100%;
          right: -100%;
          border-radius: 0;
        }

        .settings-toggle {
          right: 10px;
        }

        .quiz-options {
          grid-template-columns: 1fr;
        }
      }

      /* Loading animation */
      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        60%,
        100% {
          transform: translate(-50%, -50%) translateY(0);
        }
        40% {
          transform: translate(-50%, -50%) translateY(-30px);
        }
        80% {
          transform: translate(-50%, -50%) translateY(-15px);
        }
      }

      /* Notification styles */
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 1rem 1.5rem;
        border-radius: var(--border-radius);
        color: white;
        font-weight: 600;
        z-index: 2000;
        animation: slideInRight 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        max-width: 300px;
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      /* Theme enhancements */
      .theme-dark {
        filter: invert(1) hue-rotate(180deg);
      }

      .theme-dark img,
      .theme-dark video {
        filter: invert(1) hue-rotate(180deg);
      }

      /* Print styles */
      @media print {
        .settings-toggle,
        .settings-panel,
        .action-buttons,
        .mode-selector,
        .hero-buttons {
          display: none !important;
        }

        .flashcard {
          box-shadow: none !important;
          border: 2px solid #333 !important;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="nav-container">
        <div class="logo">
          <i class="fas fa-dragon"></i>
          <span>Thai Mastery</span>
        </div>
        <nav class="nav-links">
          <a href="#" class="active">Home</a>
          <a href="#">Practice</a>
          <a href="#">Progress</a>
          <a href="#">Resources</a>
        </nav>
      </div>
    </header>

    <div class="container">
      <div class="hero">
        <h1>🇹🇭 Thai Flashcards</h1>
        <p>
          Flip through interactive Thai flashcards to master vocabulary,
          grammar, and sentences. Mark cards you know or need more practice!
        </p>
        <div class="hero-buttons">
          <button class="btn btn-primary" onclick="startFlashcards()">
            <i class="fas fa-fire"></i> Start Flashcards
          </button>
          <button class="btn btn-outline">
            <i class="fas fa-chart-line"></i> Track Progress
          </button>
        </div>
      </div>

      <!-- Mode Selector -->
      <div class="mode-selector">
        <button class="mode-btn active" onclick="switchMode('flashcards')">
          <i class="fas fa-layer-group"></i>
          Flashcards
        </button>
        <button class="mode-btn" onclick="switchMode('quiz')">
          <i class="fas fa-question-circle"></i>
          Quiz
        </button>
        <button class="mode-btn" onclick="switchMode('study')">
          <i class="fas fa-book-open"></i>
          Study
        </button>
      </div>

      <!-- User Progress Section -->
      <section class="progress-section">
        <div class="progress-header">
          <h2>Your Learning Progress</h2>
          <button class="btn btn-primary btn-sm" onclick="updateProgress()">
            <i class="fas fa-sync-alt"></i> Update
          </button>
        </div>

        <div class="progress-stats">
          <div class="stat-card">
            <div class="stat-number" id="words-mastered">42</div>
            <div class="stat-label">Words Mastered</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="cards-practiced">15</div>
            <div class="stat-label">Cards Practiced</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="accuracy">87%</div>
            <div class="stat-label">Accuracy</div>
          </div>
        </div>

        <div>
          <div class="progress-header">
            <span>Overall Progress</span>
            <span id="overall-progress">65%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
        </div>
      </section>

      <!-- Enhanced Flashcard Section -->
      <section id="flashcard-mode">
        <div id="flashcard-carousel">
          <div class="flashcard-progress">
            <span id="flashcard-current">1</span> /
            <span id="flashcard-total">15</span>
            <div class="difficulty-indicator" id="difficulty-indicator">
              Beginner
            </div>
          </div>

          <div class="study-stats">
            <div class="study-stat">
              <div class="study-stat-number" id="session-correct">0</div>
              <div class="study-stat-label">Correct</div>
            </div>
            <div class="study-stat">
              <div class="study-stat-number" id="session-incorrect">0</div>
              <div class="study-stat-label">Needs Practice</div>
            </div>
            <div class="study-stat">
              <div class="study-stat-number" id="session-streak">0</div>
              <div class="study-stat-label">Streak</div>
            </div>
          </div>

          <div class="flashcard" onclick="flipCard(this)">
            <div class="flashcard-inner">
              <div class="flashcard-front">
                <div class="thai-text" id="flashcard-thai">สวัสดี</div>
                <div class="phonetic" id="flashcard-phonetic">sà-wàt-dii</div>
                <p>
                  <small
                    ><i class="fas fa-hand-pointer"></i> Click to flip</small
                  >
                </p>
              </div>
              <div class="flashcard-back">
                <div class="answer" id="flashcard-answer">Hello/Goodbye</div>
                <div class="phonetic" id="flashcard-phonetic-back">
                  sà-wàt-dii
                </div>
                <p>
                  <small><i class="fas fa-undo"></i> Click to flip back</small>
                </p>
              </div>
            </div>
          </div>

          <div class="action-buttons">
            <button class="btn btn-danger btn-sm" onclick="markCard(false)">
              <i class="fas fa-times"></i> Hard
            </button>
            <button class="btn btn-warning btn-sm" onclick="markCard('medium')">
              <i class="fas fa-minus"></i> Good
            </button>
            <button class="btn btn-success btn-sm" onclick="markCard(true)">
              <i class="fas fa-check"></i> Easy
            </button>
          </div>
        </div>
      </section>

      <!-- Quiz Mode -->
      <section id="quiz-mode" class="quiz-mode">
        <div class="quiz-header">
          <h2><i class="fas fa-brain"></i> Thai Vocabulary Quiz</h2>
          <div class="quiz-progress">
            Question <span id="quiz-current">1</span> of
            <span id="quiz-total">5</span>
          </div>
        </div>

        <div class="quiz-question">
          <div class="question" id="quiz-question">
            What does this word mean?
          </div>
          <div class="thai-text" id="quiz-thai">สวัสดี</div>
          <div class="phonetic" id="quiz-phonetic">sà-wàt-dii</div>
        </div>

        <div class="quiz-options" id="quiz-options">
          <!-- Options will be generated dynamically -->
        </div>

        <div class="action-buttons">
          <button
            class="btn btn-primary"
            id="quiz-submit"
            onclick="submitQuizAnswer()"
          >
            <i class="fas fa-check"></i> Submit Answer
          </button>
          <button
            class="btn btn-primary"
            id="quiz-next"
            onclick="nextQuizQuestion()"
            style="display: none"
          >
            <i class="fas fa-arrow-right"></i> Next Question
          </button>
        </div>
      </section>
    </div>

    <!-- Enhanced Settings Panel -->
    <button class="settings-toggle" onclick="toggleSettings()">
      <i class="fas fa-cog"></i>
    </button>

    <div class="settings-panel" id="settings-panel">
      <h3><i class="fas fa-sliders-h"></i> Learning Settings</h3>

      <div class="dark-mode-toggle">
        <label for="auto-advance">Auto-advance cards</label>
        <input type="checkbox" id="auto-advance" checked />
      </div>

      <div class="dark-mode-toggle">
        <label for="show-phonetics">Show phonetics</label>
        <input type="checkbox" id="show-phonetics" checked />
      </div>

      <div style="margin-top: 1rem">
        <label for="difficulty-level">Difficulty Level</label>
        <select id="difficulty-level" onchange="changeDifficulty()">
          <option value="beginner">Beginner (Basic words)</option>
          <option value="intermediate">
            Intermediate (Daily conversation)
          </option>
          <option value="advanced">Advanced (Complex concepts)</option>
        </select>
      </div>

      <div class="audio-controls">
        <h4><i class="fas fa-volume-up"></i> Audio Settings</h4>
        <div class="dark-mode-toggle">
          <label for="audio-enabled">Thai pronunciation</label>
          <input
            type="checkbox"
            id="audio-enabled"
            checked
            onchange="toggleAudio()"
          />
        </div>
        <div class="volume-control">
          <i class="fas fa-volume-down"></i>
          <input
            type="range"
            class="volume-slider"
            id="volume-slider"
            min="0"
            max="1"
            step="0.1"
            value="0.8"
            onchange="adjustVolume()"
          />
          <i class="fas fa-volume-up"></i>
        </div>
      </div>

      <div style="margin-top: 1.5rem">
        <h4><i class="fas fa-chart-line"></i> Study Analytics</h4>
        <div class="stat-card">
          <div class="stat-number" id="session-duration">0:00</div>
          <div class="stat-label">Session Time</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="streak-record">0</div>
          <div class="stat-label">Best Streak</div>
        </div>
      </div>

      <button
        class="btn btn-warning btn-sm"
        style="margin-top: 1rem; width: 100%"
        onclick="exportProgress()"
      >
        <i class="fas fa-download"></i> Export Progress
      </button>

      <button
        class="btn btn-danger btn-sm"
        style="margin-top: 0.5rem; width: 100%"
        onclick="resetProgress()"
      >
        <i class="fas fa-refresh"></i> Reset All Progress
      </button>
    </div>

    <footer>
      <p>Made with ❤️ for Thai language learners | © 2023 Thai Mastery</p>
    </footer>

    <script>
      // Enhanced flashcard data with difficulty levels and audio
      const flashcardData = {
        beginner: [
          {
            thai: "สวัสดี",
            phonetic: "sà-wàt-dii",
            answer: "Hello/Goodbye",
            category: "greetings",
          },
          {
            thai: "ขอบคุณ",
            phonetic: "kòp-kun",
            answer: "Thank you",
            category: "greetings",
          },
          {
            thai: "ขอโทษ",
            phonetic: "kǒr-tôot",
            answer: "Sorry/Excuse me",
            category: "greetings",
          },
          {
            thai: "ไม่เป็นไร",
            phonetic: "mâi bpen rai",
            answer: "It's okay/No problem",
            category: "greetings",
          },
          { thai: "น้ำ", phonetic: "náam", answer: "Water", category: "food" },
          {
            thai: "ข้าว",
            phonetic: "kâao",
            answer: "Rice/Food",
            category: "food",
          },
          { thai: "กิน", phonetic: "gin", answer: "To eat", category: "food" },
          {
            thai: "ดื่ม",
            phonetic: "dùum",
            answer: "To drink",
            category: "food",
          },
          { thai: "ใช่", phonetic: "châi", answer: "Yes", category: "basic" },
          { thai: "ไม่", phonetic: "mâi", answer: "No", category: "basic" },
          {
            thai: "บ้าน",
            phonetic: "bâan",
            answer: "House/Home",
            category: "places",
          },
          { thai: "คน", phonetic: "kon", answer: "Person", category: "people" },
          {
            thai: "เงิน",
            phonetic: "ngən",
            answer: "Money",
            category: "basic",
          },
          {
            thai: "เวลา",
            phonetic: "wee-laa",
            answer: "Time",
            category: "basic",
          },
          {
            thai: "ดี",
            phonetic: "dii",
            answer: "Good",
            category: "adjectives",
          },
          {
            thai: "ไม่ดี",
            phonetic: "mâi dii",
            answer: "Bad/Not good",
            category: "adjectives",
          },
          {
            thai: "ใหญ่",
            phonetic: "yài",
            answer: "Big",
            category: "adjectives",
          },
          {
            thai: "เล็ก",
            phonetic: "lék",
            answer: "Small",
            category: "adjectives",
          },
          { thai: "มา", phonetic: "maa", answer: "To come", category: "verbs" },
          { thai: "ไป", phonetic: "bpai", answer: "To go", category: "verbs" },
        ],
        intermediate: [
          {
            thai: "คนไทย",
            phonetic: "kon tai",
            answer: "Thai person",
            category: "people",
          },
          {
            thai: "ร้อน",
            phonetic: "róon",
            answer: "Hot",
            category: "weather",
          },
          {
            thai: "เย็น",
            phonetic: "yen",
            answer: "Cold",
            category: "weather",
          },
          {
            thai: "ฝน",
            phonetic: "fǒn",
            answer: "Rain",
            category: "weather",
          },
          {
            thai: "แดด",
            phonetic: "dàet",
            answer: "Sun/Sunshine",
            category: "weather",
          },
          {
            thai: "อร่อย",
            phonetic: "à-ròoi",
            answer: "Delicious",
            category: "food",
          },
          {
            thai: "เผ็ด",
            phonetic: "pèt",
            answer: "Spicy",
            category: "food",
          },
          {
            thai: "หวาน",
            phonetic: "wǎan",
            answer: "Sweet",
            category: "food",
          },
          {
            thai: "เปรี้ยว",
            phonetic: "bprîao",
            answer: "Sour",
            category: "food",
          },
          {
            thai: "ตลาด",
            phonetic: "dtà-làat",
            answer: "Market",
            category: "places",
          },
          {
            thai: "โรงเรียน",
            phonetic: "roong-rian",
            answer: "School",
            category: "places",
          },
          {
            thai: "โรงพยาบาล",
            phonetic: "roong-pá-yaa-baan",
            answer: "Hospital",
            category: "places",
          },
          {
            thai: "ธนาคาร",
            phonetic: "tá-naa-kaan",
            answer: "Bank",
            category: "places",
          },
          { thai: "หมอ", phonetic: "mǒr", answer: "Doctor", category: "jobs" },
          {
            thai: "ครู",
            phonetic: "kruu",
            answer: "Teacher",
            category: "jobs",
          },
          {
            thai: "ตำรวจ",
            phonetic: "dtam-rùat",
            answer: "Police",
            category: "jobs",
          },
          {
            thai: "นักเรียน",
            phonetic: "nák-rian",
            answer: "Student",
            category: "people",
          },
          {
            thai: "ครอบครัว",
            phonetic: "krɔ̂ɔp-kruaa",
            answer: "Family",
            category: "people",
          },
          {
            thai: "เพื่อน",
            phonetic: "pɯ̂an",
            answer: "Friend",
            category: "people",
          },
          {
            thai: "รถยนต์",
            phonetic: "rót-yon",
            answer: "Car",
            category: "transport",
          },
          {
            thai: "รถไฟ",
            phonetic: "rót-fai",
            answer: "Train",
            category: "transport",
          },
          {
            thai: "เครื่องบิน",
            phonetic: "krɯ̂aŋ-bin",
            answer: "Airplane",
            category: "transport",
          },
        ],
        advanced: [
          {
            thai: "การศึกษา",
            phonetic: "gaan-sʉ̀k-sǎa",
            answer: "Education",
            category: "concepts",
          },
          {
            thai: "เศรษฐกิจ",
            phonetic: "sèet-tà-gìt",
            answer: "Economy",
            category: "concepts",
          },
          {
            thai: "วัฒนธรรม",
            phonetic: "wát-tá-ná-tam",
            answer: "Culture",
            category: "concepts",
          },
          {
            thai: "ประชาธิปไตย",
            phonetic: "bprà-chaa-típ-bpai",
            answer: "Democracy",
            category: "politics",
          },
          {
            thai: "เทคโนโลยี",
            phonetic: "ték-noo-loo-yii",
            answer: "Technology",
            category: "concepts",
          },
          {
            thai: "สิ่งแวดล้อม",
            phonetic: "sìng-wàet-lóm",
            answer: "Environment",
            category: "concepts",
          },
          {
            thai: "การพัฒนา",
            phonetic: "gaan-pát-tá-naa",
            answer: "Development",
            category: "concepts",
          },
          {
            thai: "ความยุติธรรม",
            phonetic: "kwaam-yút-dtì-tam",
            answer: "Justice",
            category: "concepts",
          },
          {
            thai: "การเมือง",
            phonetic: "gaan-mɯaŋ",
            answer: "Politics",
            category: "politics",
          },
          {
            thai: "สังคม",
            phonetic: "sǎŋ-kom",
            answer: "Society",
            category: "concepts",
          },
          {
            thai: "ประวัติศาสตร์",
            phonetic: "bprà-wàt-sàat",
            answer: "History",
            category: "academics",
          },
          {
            thai: "ภูมิศาสตร์",
            phonetic: "puum-sàat",
            answer: "Geography",
            category: "academics",
          },
          {
            thai: "วิทยาศาสตร์",
            phonetic: "wít-tá-yaa-sàat",
            answer: "Science",
            category: "academics",
          },
          {
            thai: "คณิตศาสตร์",
            phonetic: "ká-nít-sàat",
            answer: "Mathematics",
            category: "academics",
          },
          {
            thai: "ปรัชญา",
            phonetic: "bpràt-yaa",
            answer: "Philosophy",
            category: "academics",
          },
          {
            thai: "จิตวิทยา",
            phonetic: "jìt-wít-tá-yaa",
            answer: "Psychology",
            category: "academics",
          },
          {
            thai: "นิติศาสตร์",
            phonetic: "ní-dtì-sàat",
            answer: "Law",
            category: "academics",
          },
          {
            thai: "แพทยศาสตร์",
            phonetic: "pâet-tá-yá-sàat",
            answer: "Medicine",
            category: "academics",
          },
          {
            thai: "วิศวกรรมศาสตร์",
            phonetic: "wí-sà-wá-gam-sàat",
            answer: "Engineering",
            category: "academics",
          },
          {
            thai: "บริหารธุรกิจ",
            phonetic: "bɔɔ-rí-hǎan-tú-rá-gìt",
            answer: "Business Administration",
            category: "academics",
          },
        ],
      };

      let currentDifficulty = "beginner";
      let flashcards = flashcardData[currentDifficulty];
      let flashcardIndex = 0;
      let sessionStats = {
        correct: 0,
        incorrect: 0,
        streak: 0,
        totalTime: 0,
        startTime: Date.now(),
        cardTimes: [],
      };
      let currentMode = "flashcards";
      let userProgress = JSON.parse(
        localStorage.getItem("thaiFlashcardProgress")
      ) || {
        wordsLearned: [],
        totalCardsStudied: 0,
        streakRecord: 0,
        studySessions: 0,
      };

      // Audio functionality
      let audioEnabled = true;
      let speechSynthesis = window.speechSynthesis;
      let voiceVolume = 0.8;

      function speakThai(text) {
        if (!audioEnabled || !speechSynthesis) return;

        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = "th-TH";
        utterance.volume = voiceVolume;
        utterance.rate = 0.8;
        utterance.pitch = 1;

        speechSynthesis.speak(utterance);
      }

      // Enhanced analytics and progress tracking
      function updateProgressAnalytics() {
        const totalCards = Object.values(flashcardData).flat().length;
        const learnedPercentage = Math.round(
          (userProgress.wordsLearned.length / totalCards) * 100
        );

        // Update streak record
        if (sessionStats.streak > userProgress.streakRecord) {
          userProgress.streakRecord = sessionStats.streak;
        }

        // Save progress
        localStorage.setItem(
          "thaiFlashcardProgress",
          JSON.stringify(userProgress)
        );

        // Update UI with enhanced stats
        updateProgressDisplay();
      }

      function updateProgressDisplay() {
        document.getElementById("words-mastered").textContent =
          userProgress.wordsLearned.length;
        document.getElementById("cards-practiced").textContent =
          userProgress.totalCardsStudied;

        if (userProgress.totalCardsStudied > 0) {
          const accuracy = Math.round(
            (userProgress.wordsLearned.length /
              userProgress.totalCardsStudied) *
              100
          );
          document.getElementById("accuracy").textContent = accuracy + "%";
        }

        const totalCards = Object.values(flashcardData).flat().length;
        const overallProgress = Math.round(
          (userProgress.wordsLearned.length / totalCards) * 100
        );
        document.getElementById("overall-progress").textContent =
          overallProgress + "%";
        document.getElementById("progress-fill").style.width =
          overallProgress + "%";
      }

      // Performance tracking
      function trackCardPerformance(cardId, timeSpent, wasCorrect) {
        const performanceData = {
          cardId,
          timeSpent,
          wasCorrect,
          timestamp: Date.now(),
          difficulty: currentDifficulty,
        };

        sessionStats.cardTimes.push(performanceData);

        // Update user progress
        if (wasCorrect && !userProgress.wordsLearned.includes(cardId)) {
          userProgress.wordsLearned.push(cardId);
        }

        userProgress.totalCardsStudied++;
        updateProgressAnalytics();
      }

      // Enhanced functions
      function switchMode(mode) {
        document
          .querySelectorAll(".mode-btn")
          .forEach((btn) => btn.classList.remove("active"));
        event.target.classList.add("active");

        document.getElementById("flashcard-mode").style.display =
          mode === "flashcards" ? "block" : "none";
        document.getElementById("quiz-mode").style.display =
          mode === "quiz" ? "block" : "none";

        currentMode = mode;

        if (mode === "quiz") {
          initQuiz();
        }
      }

      function markCard(difficulty) {
        const cardStartTime = sessionStats.cardStartTime || Date.now();
        const timeSpent = Date.now() - cardStartTime;
        const currentCard = flashcards[flashcardIndex];
        const cardId = `${currentDifficulty}-${flashcardIndex}`;

        const isCorrect = difficulty === true || difficulty === "medium";

        if (isCorrect) {
          sessionStats.correct++;
          sessionStats.streak++;
          showFeedback(
            difficulty === true ? "🎉 Easy! Well done!" : "👍 Good job!",
            "success"
          );

          // Add celebration effect for streaks
          if (sessionStats.streak > 0 && sessionStats.streak % 5 === 0) {
            showFeedback(
              `🔥 ${sessionStats.streak} streak! Amazing!`,
              "success"
            );
            celebrateStreak();
          }
        } else {
          sessionStats.incorrect++;
          sessionStats.streak = 0;
          showFeedback("📚 Marked for more practice!", "warning");
        }

        // Track performance
        trackCardPerformance(cardId, timeSpent, isCorrect);
        updateSessionStats();
        updateProgressStats();

        if (document.getElementById("auto-advance").checked) {
          setTimeout(() => nextFlashcard(), 1000);
        }
      }

      function celebrateStreak() {
        // Add confetti or celebration animation
        const celebration = document.createElement("div");
        celebration.innerHTML = "🎉";
        celebration.style.cssText = `
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: 3rem;
          z-index: 2000;
          animation: bounce 0.6s ease;
          pointer-events: none;
        `;
        document.body.appendChild(celebration);
        setTimeout(() => celebration.remove(), 600);
      }

      function updateSessionStats() {
        document.getElementById("session-correct").textContent =
          sessionStats.correct;
        document.getElementById("session-incorrect").textContent =
          sessionStats.incorrect;
        document.getElementById("session-streak").textContent =
          sessionStats.streak;

        // Update session time
        const sessionTime = Math.floor(
          (Date.now() - sessionStats.startTime) / 1000
        );
        const minutes = Math.floor(sessionTime / 60);
        const seconds = sessionTime % 60;
        document.getElementById(
          "session-duration"
        ).textContent = `${minutes}:${seconds.toString().padStart(2, "0")}`;

        // Update streak record
        document.getElementById("streak-record").textContent =
          userProgress.streakRecord;
      }

      function changeDifficulty() {
        currentDifficulty = document.getElementById("difficulty-level").value;
        flashcards = flashcardData[currentDifficulty];
        flashcardIndex = 0;
        updateFlashcard();
        document.getElementById("difficulty-indicator").textContent =
          currentDifficulty.charAt(0).toUpperCase() +
          currentDifficulty.slice(1);

        showFeedback(`Switched to ${currentDifficulty} level!`, "info");
      }

      function toggleSettings() {
        document.getElementById("settings-panel").classList.toggle("open");
      }

      function toggleAudio() {
        audioEnabled = document.getElementById("audio-enabled").checked;
        showFeedback(
          audioEnabled ? "Audio enabled 🔊" : "Audio disabled 🔇",
          "info"
        );
      }

      function adjustVolume() {
        voiceVolume = document.getElementById("volume-slider").value;
      }

      function exportProgress() {
        const exportData = {
          progress: userProgress,
          sessionStats: sessionStats,
          exportDate: new Date().toISOString(),
          version: "1.0",
        };

        const dataStr = JSON.stringify(exportData, null, 2);
        const dataUri =
          "data:application/json;charset=utf-8," + encodeURIComponent(dataStr);

        const exportFileDefaultName = `thai-flashcard-progress-${new Date()
          .toISOString()
          .slice(0, 10)}.json`;

        const linkElement = document.createElement("a");
        linkElement.setAttribute("href", dataUri);
        linkElement.setAttribute("download", exportFileDefaultName);
        linkElement.click();

        showFeedback("Progress exported! 📄", "success");
      }

      function resetProgress() {
        if (
          confirm(
            "Are you sure you want to reset all progress? This cannot be undone."
          )
        ) {
          localStorage.removeItem("thaiFlashcardProgress");
          userProgress = {
            wordsLearned: [],
            totalCardsStudied: 0,
            streakRecord: 0,
            studySessions: 0,
          };
          sessionStats = {
            correct: 0,
            incorrect: 0,
            streak: 0,
            totalTime: 0,
            startTime: Date.now(),
            cardTimes: [],
          };
          updateSessionStats();
          updateProgressDisplay();
          showFeedback("Progress reset! 🔄", "info");
        }
      }

      // Quiz functionality
      let currentQuizIndex = 0;
      let quizQuestions = [];

      function initQuiz() {
        quizQuestions = [...flashcards]
          .sort(() => Math.random() - 0.5)
          .slice(0, 5);
        currentQuizIndex = 0;
        loadQuizQuestion();
      }

      function loadQuizQuestion() {
        const question = quizQuestions[currentQuizIndex];
        document.getElementById("quiz-current").textContent =
          currentQuizIndex + 1;
        document.getElementById("quiz-total").textContent =
          quizQuestions.length;
        document.getElementById("quiz-thai").textContent = question.thai;
        document.getElementById("quiz-phonetic").textContent =
          question.phonetic;

        // Generate options
        const options = [question.answer];
        const otherAnswers = flashcards
          .filter((card) => card.answer !== question.answer)
          .sort(() => Math.random() - 0.5)
          .slice(0, 3)
          .map((card) => card.answer);

        options.push(...otherAnswers);
        options.sort(() => Math.random() - 0.5);

        const optionsContainer = document.getElementById("quiz-options");
        optionsContainer.innerHTML = "";

        options.forEach((option) => {
          const optionDiv = document.createElement("div");
          optionDiv.className = "quiz-option";
          optionDiv.textContent = option;
          optionDiv.onclick = () => selectQuizOption(optionDiv);
          optionsContainer.appendChild(optionDiv);
        });

        document.getElementById("quiz-submit").style.display = "inline-flex";
        document.getElementById("quiz-next").style.display = "none";
      }

      function selectQuizOption(element) {
        document
          .querySelectorAll(".quiz-option")
          .forEach((opt) => opt.classList.remove("selected"));
        element.classList.add("selected");
      }

      function submitQuizAnswer() {
        const selected = document.querySelector(".quiz-option.selected");
        if (!selected) return;

        const correctAnswer = quizQuestions[currentQuizIndex].answer;
        const isCorrect = selected.textContent === correctAnswer;

        document.querySelectorAll(".quiz-option").forEach((opt) => {
          if (opt.textContent === correctAnswer) {
            opt.classList.add("correct");
          } else if (opt.classList.contains("selected") && !isCorrect) {
            opt.classList.add("incorrect");
          }
        });

        showFeedback(
          isCorrect ? "Correct!" : "Try again next time!",
          isCorrect ? "success" : "danger"
        );

        document.getElementById("quiz-submit").style.display = "none";
        document.getElementById("quiz-next").style.display = "inline-flex";
      }

      function nextQuizQuestion() {
        currentQuizIndex++;
        if (currentQuizIndex < quizQuestions.length) {
          loadQuizQuestion();
        } else {
          showFeedback("Quiz completed!", "success");
          switchMode("flashcards");
        }
      }

      // Enhanced initialization
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize progress from localStorage
        updateProgressDisplay();
        updateSessionStats();
        updateFlashcard();
        changeDifficulty();

        // Load user preferences
        loadUserPreferences();

        // Set up session timer
        setInterval(updateSessionStats, 1000);

        // Add keyboard shortcuts help
        const hints = document.createElement("div");
        hints.innerHTML = `
          <small style="color: var(--gray); text-align: center; display: block; margin-top: 1rem;">
            <i class="fas fa-keyboard"></i> Shortcuts: 
            <strong>Space</strong> = Flip | 
            <strong>1,2,3</strong> = Mark difficulty | 
            <strong>→</strong> = Next | 
            <strong>S</strong> = Settings |
            <strong>P</strong> = Play audio
          </small>
        `;
        document.getElementById("flashcard-carousel").appendChild(hints);

        // Show welcome message for new users
        if (userProgress.studySessions === 0) {
          setTimeout(() => {
            showFeedback(
              "Welcome to Thai Flashcards! 🇹🇭 Start your learning journey!",
              "success"
            );
          }, 1000);
        }

        // Add smooth scrolling
        document.documentElement.style.scrollBehavior = "smooth";
      });

      function loadUserPreferences() {
        const preferences =
          JSON.parse(localStorage.getItem("thaiFlashcardPreferences")) || {};

        if (preferences.audioEnabled !== undefined) {
          audioEnabled = preferences.audioEnabled;
          document.getElementById("audio-enabled").checked = audioEnabled;
        }

        if (preferences.volume !== undefined) {
          voiceVolume = preferences.volume;
          document.getElementById("volume-slider").value = voiceVolume;
        }

        if (preferences.autoAdvance !== undefined) {
          document.getElementById("auto-advance").checked =
            preferences.autoAdvance;
        }

        if (preferences.showPhonetics !== undefined) {
          document.getElementById("show-phonetics").checked =
            preferences.showPhonetics;
        }

        if (preferences.difficulty !== undefined) {
          currentDifficulty = preferences.difficulty;
          document.getElementById("difficulty-level").value = currentDifficulty;
        }
      }

      function saveUserPreferences() {
        const preferences = {
          audioEnabled: document.getElementById("audio-enabled").checked,
          volume: document.getElementById("volume-slider").value,
          autoAdvance: document.getElementById("auto-advance").checked,
          showPhonetics: document.getElementById("show-phonetics").checked,
          difficulty: document.getElementById("difficulty-level").value,
        };

        localStorage.setItem(
          "thaiFlashcardPreferences",
          JSON.stringify(preferences)
        );
      }

      // Enhanced keyboard navigation
      document.addEventListener("keydown", function (event) {
        // Prevent shortcuts when typing in inputs
        if (
          event.target.tagName === "INPUT" ||
          event.target.tagName === "SELECT"
        ) {
          return;
        }

        if (event.code === "Space") {
          event.preventDefault();
          flipCard(document.querySelector(".flashcard"));
        } else if (event.code === "ArrowRight" || event.code === "ArrowDown") {
          event.preventDefault();
          nextFlashcard();
        } else if (event.code === "ArrowLeft" || event.code === "ArrowUp") {
          event.preventDefault();
          flashcardIndex =
            (flashcardIndex - 1 + flashcards.length) % flashcards.length;
          updateFlashcard();
        } else if (event.code === "Digit1") {
          event.preventDefault();
          markCard(false);
        } else if (event.code === "Digit2") {
          event.preventDefault();
          markCard("medium");
        } else if (event.code === "Digit3") {
          event.preventDefault();
          markCard(true);
        } else if (event.code === "KeyS") {
          event.preventDefault();
          toggleSettings();
        } else if (event.code === "KeyP") {
          event.preventDefault();
          const currentCard = flashcards[flashcardIndex];
          speakThai(currentCard.thai);
        } else if (event.code === "Escape") {
          document.getElementById("settings-panel").classList.remove("open");
        }
      });

      // Enhanced feedback system
      function showFeedback(message, type, duration = 2000) {
        // Remove existing notifications
        document.querySelectorAll(".notification").forEach((n) => n.remove());

        const notification = document.createElement("div");
        notification.className = `notification notification-${type}`;

        let icon = "";
        let bgColor = "";

        switch (type) {
          case "success":
            icon = '<i class="fas fa-check-circle"></i>';
            bgColor = "linear-gradient(135deg, var(--success), #20c997)";
            break;
          case "warning":
            icon = '<i class="fas fa-exclamation-triangle"></i>';
            bgColor = "linear-gradient(135deg, var(--warning), #f39c12)";
            break;
          case "danger":
            icon = '<i class="fas fa-times-circle"></i>';
            bgColor = "linear-gradient(135deg, var(--danger), #e74c3c)";
            break;
          case "info":
            icon = '<i class="fas fa-info-circle"></i>';
            bgColor = "linear-gradient(135deg, var(--info), #138496)";
            break;
        }

        notification.innerHTML = `${icon}<span>${message}</span>`;
        notification.style.background = bgColor;

        document.body.appendChild(notification);

        // Auto-remove notification
        setTimeout(() => {
          notification.style.animation = "slideInRight 0.3s ease reverse";
          setTimeout(() => notification.remove(), 300);
        }, duration);

        // Save preferences when settings change
        saveUserPreferences();
      }

      // Add service worker for offline functionality (if needed)
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          // Uncomment to enable offline functionality
          // navigator.serviceWorker.register('/sw.js');
        });
      }

      // Enhanced flashcard functions
      function updateFlashcard() {
        const card = flashcards[flashcardIndex];
        document.getElementById("flashcard-thai").textContent = card.thai;
        document.getElementById("flashcard-phonetic").textContent =
          card.phonetic;
        document.getElementById("flashcard-phonetic-back").textContent =
          card.phonetic;
        document.getElementById("flashcard-answer").textContent = card.answer;
        document.getElementById("flashcard-current").textContent =
          flashcardIndex + 1;
        document.getElementById("flashcard-total").textContent =
          flashcards.length;

        // Reset card state
        document.querySelector(".flashcard").classList.remove("flipped");
        document.querySelector("#flashcard-carousel").classList.add("fade-in");

        // Hide phonetics if setting is disabled
        const showPhonetics = document.getElementById("show-phonetics").checked;
        document.getElementById("flashcard-phonetic").style.display =
          showPhonetics ? "block" : "none";
        document.getElementById("flashcard-phonetic-back").style.display =
          showPhonetics ? "block" : "none";

        // Track card start time for performance analytics
        sessionStats.cardStartTime = Date.now();

        // Auto-play pronunciation if enabled
        if (audioEnabled) {
          setTimeout(() => speakThai(card.thai), 500);
        }

        // Add category indicator
        if (card.category) {
          const categoryElement = document.getElementById(
            "difficulty-indicator"
          );
          categoryElement.textContent = `${currentDifficulty} • ${card.category}`;
        }
      }

      function nextFlashcard() {
        flashcardIndex = (flashcardIndex + 1) % flashcards.length;
        updateFlashcard();

        // Add visual transition effect
        const carousel = document.getElementById("flashcard-carousel");
        carousel.style.transform = "translateX(-10px)";
        setTimeout(() => {
          carousel.style.transform = "translateX(0)";
        }, 100);
      }

      function flipCard(card) {
        card.classList.toggle("flipped");

        // Play audio when flipped to answer side
        if (card.classList.contains("flipped") && audioEnabled) {
          const currentCard = flashcards[flashcardIndex];
          setTimeout(() => speakThai(currentCard.thai), 200);
        }

        // Add haptic feedback on mobile
        if (navigator.vibrate) {
          navigator.vibrate(50);
        }
      }

      function startFlashcards() {
        document.getElementById("flashcard-carousel").scrollIntoView({
          behavior: "smooth",
        });

        // Start session timer
        sessionStats.startTime = Date.now();
        userProgress.studySessions++;

        showFeedback("Study session started! 📚", "success");
      }

      function updateProgressStats() {
        updateProgressDisplay();
      }

      function updateProgress() {
        showFeedback("Progress updated! 📊", "info");
        updateProgressDisplay();
      }
    </script>
  </body>
</html>
