<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESL Learning Hub - Interactive Games</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
        animation: fadeInDown 1s ease;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        color: #fff;
      }

      .header p {
        font-size: 1.2em;
        color: rgba(255, 255, 255, 0.9);
      }

      .game-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .game-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 20px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .game-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      }

      .game-title {
        font-size: 1.5em;
        margin-bottom: 15px;
        text-align: center;
        color: #667eea;
        font-weight: bold;
      }

      /* Vocabulary Quiz */
      .quiz-option {
        background: rgba(255, 255, 255, 0.8);
        border: 2px solid rgba(102, 126, 234, 0.3);
        border-radius: 8px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
        margin: 8px 0;
        font-size: 1em;
      }

      .quiz-option:hover {
        background: rgba(102, 126, 234, 0.1);
        transform: scale(1.02);
      }

      .quiz-option.correct {
        background: rgba(76, 175, 80, 0.3);
        border-color: #4caf50;
      }

      .quiz-option.wrong {
        background: rgba(244, 67, 54, 0.3);
        border-color: #f44336;
      }

      /* Story Builder */
      .story-part {
        background: linear-gradient(45deg, #a8caba, #5d4e75);
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        user-select: none;
        font-weight: bold;
        transition: all 0.3s ease;
        margin: 5px;
        display: inline-block;
      }

      .story-part:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .story-part.used {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Word Association */
      .word-bubble {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        padding: 12px 20px;
        border-radius: 25px;
        margin: 8px;
        display: inline-block;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
      }

      .word-bubble:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      /* Tic Tac Toe */
      .ttt-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 5px;
        margin: 20px auto;
        width: 200px;
      }

      .ttt-cell {
        width: 60px;
        height: 60px;
        background: rgba(255, 255, 255, 0.8);
        border: 2px solid rgba(102, 126, 234, 0.3);
        border-radius: 8px;
        font-size: 1.5em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #667eea;
      }

      .ttt-cell:hover {
        background: rgba(255, 255, 255, 0.9);
        transform: scale(1.05);
      }

      /* Memory Game */
      .memory-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin: 20px auto;
        width: 300px;
      }

      .memory-card {
        width: 65px;
        height: 65px;
        background: rgba(255, 255, 255, 0.8);
        border: 2px solid rgba(102, 126, 234, 0.3);
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.9em;
        text-align: center;
        line-height: 61px;
        transition: all 0.3s ease;
      }

      .memory-card.flipped {
        background: #667eea;
        color: white;
        transform: rotateY(180deg);
      }

      /* Sentence Builder */
      .word-chip {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: move;
        user-select: none;
        font-weight: bold;
        transition: all 0.3s ease;
        margin: 5px;
        display: inline-block;
      }

      .word-chip:hover {
        transform: scale(1.05);
      }

      .word-chip.used {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Input fields */
      .text-input {
        width: 100%;
        padding: 12px;
        border: 2px solid rgba(102, 126, 234, 0.3);
        border-radius: 8px;
        font-size: 1.1em;
        text-align: center;
        margin: 10px 0;
        background: rgba(255, 255, 255, 0.9);
        transition: all 0.3s ease;
      }

      .text-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
      }

      .textarea-input {
        width: 100%;
        height: 100px;
        padding: 12px;
        border: 2px solid rgba(102, 126, 234, 0.3);
        border-radius: 8px;
        font-size: 1em;
        margin: 10px 0;
        background: rgba(255, 255, 255, 0.9);
        resize: vertical;
        font-family: Arial, sans-serif;
      }

      .btn {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 5px;
      }

      .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .btn:active {
        transform: scale(0.98);
      }

      .score {
        text-align: center;
        font-size: 1.2em;
        margin: 10px 0;
        color: #667eea;
        font-weight: bold;
      }

      .hint-box {
        background: rgba(102, 126, 234, 0.1);
        border: 2px solid rgba(102, 126, 234, 0.3);
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        text-align: center;
        font-size: 1.1em;
      }

      .conversation-starter {
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid rgba(102, 126, 234, 0.3);
        border-radius: 15px;
        padding: 20px;
        margin: 20px 0;
        text-align: center;
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        overflow: hidden;
        margin: 10px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(45deg, #667eea, #764ba2);
        width: 0%;
        transition: width 0.5s ease;
      }

      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      .correct-answer {
        animation: bounce 0.6s ease;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .pulse {
        animation: pulse 0.5s ease;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üéÆ Kyoko üìö</h1>
        <p>Practice English with fun games and activities!</p>
      </div>

      <!-- Main Games Grid -->
      <div class="game-grid">
        <!-- Vocabulary Quiz -->
        <div class="game-card">
          <div class="game-title">üìñ Vocabulary Challenge</div>
          <div class="score" id="vocab-score">Score: 0</div>
          <div class="progress-bar">
            <div class="progress-fill" id="vocab-progress"></div>
          </div>
          <div id="vocab-question" class="hint-box">
            Click "New Question" to start!
          </div>
          <div id="vocab-options"></div>
          <div style="text-align: center">
            <button class="btn" onclick="newVocabQuestion()">
              New Question
            </button>
            <button class="btn" onclick="showHint()">Hint</button>
          </div>
        </div>

        <!-- Story Builder -->
        <div class="game-card">
          <div class="game-title">üìù Story Builder</div>
          <div class="score" id="story-score">Stories Created: 0</div>
          <div id="story-prompt" class="hint-box">
            Create a story using the story parts below!
          </div>
          <div
            id="story-parts"
            style="margin: 15px 0; text-align: center"
          ></div>
          <div
            id="story-area"
            style="
              min-height: 100px;
              background: rgba(255, 255, 255, 0.5);
              border-radius: 8px;
              padding: 15px;
              margin: 15px 0;
            "
          >
            Click story parts above to build your story...
          </div>
          <div style="text-align: center">
            <button class="btn" onclick="saveStory()">Save Story</button>
            <button class="btn" onclick="newStoryPrompt()">New Story</button>
            <button class="btn" onclick="clearStory()">Clear</button>
          </div>
        </div>

        <!-- Word Association Game -->
        <div class="game-card">
          <div class="game-title">üß† Word Association</div>
          <div class="score" id="association-score">Chains: 0</div>
          <div
            id="association-word"
            class="hint-box"
            style="font-size: 1.5em; font-weight: bold"
          >
            Click "Start" to begin!
          </div>
          <input
            type="text"
            class="text-input"
            id="association-input"
            placeholder="Type a related word..."
            maxlength="20"
          />
          <div id="word-chain" style="margin: 15px 0; min-height: 60px"></div>
          <div style="text-align: center">
            <button class="btn" onclick="checkAssociation()">Add Word</button>
            <button class="btn" onclick="startWordChain()">New Chain</button>
          </div>
        </div>

        <!-- Sentence Scramble -->
        <div class="game-card">
          <div class="game-title">üîÄ Sentence Scramble</div>
          <div class="score" id="scramble-score">Sentences Fixed: 0</div>
          <div class="hint-box" id="scramble-hint">
            Unscramble the words to make a sentence!
          </div>
          <div
            id="scrambled-words"
            style="margin: 15px 0; text-align: center"
          ></div>
          <input
            type="text"
            class="text-input"
            id="sentence-answer"
            placeholder="Type the correct sentence here..."
          />
          <div style="text-align: center">
            <button class="btn" onclick="checkSentence()">Check Answer</button>
            <button class="btn" onclick="newScramble()">New Sentence</button>
            <button class="btn" onclick="showSentenceHint()">Hint</button>
          </div>
        </div>

        <!-- Tic Tac Toe -->
        <div class="game-card">
          <div class="game-title">‚≠ï Tic Tac Toe</div>
          <div class="score" id="ttt-score">Player X: 0 | Player O: 0</div>
          <div class="ttt-grid" id="ttt-grid"></div>
          <div style="text-align: center">
            <button class="btn" onclick="resetTTT()">New Game</button>
            <p style="margin-top: 10px; font-size: 1em; color: #667eea">
              Current Player: <span id="current-player">X</span>
            </p>
          </div>
        </div>

        <!-- Memory Game -->
        <div class="game-card">
          <div class="game-title">üß© Memory Match</div>
          <div class="score" id="memory-score">Matches: 0/8</div>
          <div class="memory-grid" id="memory-grid"></div>
          <div style="text-align: center">
            <button class="btn" onclick="startMemoryGame()">New Game</button>
          </div>
        </div>
      </div>

      <!-- Conversation and Writing -->
      <div class="game-grid">
        <!-- Daily Writing Practice -->
        <div class="game-card">
          <div class="game-title">‚úèÔ∏è Writing Practice</div>
          <div class="score" id="writing-score">Entries: 0</div>
          <div id="writing-prompt" class="hint-box">
            Click "New Prompt" to get a writing topic!
          </div>
          <textarea
            class="textarea-input"
            id="writing-area"
            placeholder="Write your thoughts here..."
          ></textarea>
          <div style="text-align: center">
            <button class="btn" onclick="saveWriting()">Save Writing</button>
            <button class="btn" onclick="newWritingPrompt()">New Prompt</button>
          </div>
        </div>

        <!-- Conversation Topics -->
        <div class="game-card">
          <div class="game-title">üí¨ Discussion Topics</div>
          <div id="conversation-text" class="hint-box">
            Click the button below to get a conversation topic!
          </div>
          <button
            class="btn"
            onclick="getConversationTopic()"
            style="width: 100%; margin-top: 15px"
          >
            Get New Topic
          </button>
        </div>
      </div>

      <!-- Fun Facts Section -->
      <div class="conversation-starter">
        <h3>ü§î Learn Something New!</h3>
        <p id="fun-fact">Click below to discover an interesting fact!</p>
        <button class="btn" onclick="getFunFact()" style="margin-top: 15px">
          Show Me a Cool Fact!
        </button>
      </div>
    </div>

    <script>
      // Global Variables
      let vocabScore = 0,
        storyCount = 0,
        associationChains = 0;
      let scrambleScore = 0,
        writingEntries = 0;
      let currentVocabQuestion = null;
      let associationWords = [];

      // Vocabulary Quiz Data
      const vocabQuestions = [
        {
          question: "What does 'confident' mean?",
          options: [
            "Shy and quiet",
            "Sure of yourself",
            "Angry and upset",
            "Confused",
          ],
          correct: 1,
          hint: "Think about someone who believes in their abilities",
        },
        {
          question: "What is a 'challenge'?",
          options: [
            "Something easy",
            "A difficult task",
            "A type of food",
            "A place to visit",
          ],
          correct: 1,
          hint: "It's something that tests your skills",
        },
        {
          question: "If something is 'fascinating', it is:",
          options: ["Boring", "Very interesting", "Expensive", "Dangerous"],
          correct: 1,
          hint: "Think of something that captures your attention completely",
        },
        {
          question: "What does 'influence' mean?",
          options: [
            "To ignore",
            "To affect or change",
            "To copy",
            "To destroy",
          ],
          correct: 1,
          hint: "When one thing has an effect on another thing",
        },
        {
          question: "Someone who is 'ambitious' is:",
          options: ["Lazy", "Has big goals", "Confused", "Angry"],
          correct: 1,
          hint: "Think of someone who wants to achieve great things",
        },
      ];

      // Sentence Scramble Data
      const scrambleSentences = [
        {
          original: "I love learning new languages every day",
          scrambled: [
            "day",
            "every",
            "languages",
            "new",
            "learning",
            "love",
            "I",
          ],
          hint: "Start with 'I' and think about enjoying education",
        },
        {
          original: "Technology makes communication much easier today",
          scrambled: [
            "today",
            "easier",
            "much",
            "communication",
            "makes",
            "Technology",
          ],
          hint: "What makes talking to people simpler nowadays?",
        },
        {
          original: "Students should practice speaking English regularly",
          scrambled: [
            "regularly",
            "English",
            "speaking",
            "practice",
            "should",
            "Students",
          ],
          hint: "What should learners do often to improve?",
        },
        {
          original: "Reading books helps improve vocabulary skills",
          scrambled: [
            "skills",
            "vocabulary",
            "improve",
            "helps",
            "books",
            "Reading",
          ],
          hint: "How can you get better at using words?",
        },
      ];

      // Story Parts
      const storyParts = [
        ["Once upon a time", "Yesterday", "Last week", "In the future"],
        [
          "a brave student",
          "a curious teenager",
          "a smart girl",
          "a funny boy",
        ],
        ["discovered", "found", "learned", "realized"],
        ["a secret", "something amazing", "a new skill", "an opportunity"],
        ["that changed", "which helped", "that improved", "which transformed"],
        ["their life forever", "everything", "their future", "the world"],
      ];

      // Writing Prompts
      const writingPrompts = [
        "Describe your perfect weekend. What would you do and why?",
        "If you could have any superpower, what would it be and how would you use it?",
        "Write about a time when you helped someone. How did it make you feel?",
        "Describe your dream job. What would you do every day?",
        "If you could travel anywhere in the world, where would you go and what would you see?",
        "Write about your favorite hobby and why you enjoy it.",
        "Describe what you think the world will be like in 20 years.",
        "Write about a person who inspires you and explain why.",
        "If you could learn any new skill instantly, what would it be?",
        "Describe your ideal school. What would make it perfect?",
      ];

      // Conversation Topics
      const conversationTopics = [
        "What's the most interesting place you've ever visited or would like to visit?",
        "How do you think social media affects friendships?",
        "What's your opinion on online learning vs. traditional classroom learning?",
        "If you could solve one world problem, what would it be and how?",
        "What role should technology play in education?",
        "How important is it to learn about other cultures? Why?",
        "What makes a good friend? Describe the qualities you value most.",
        "Do you think it's important to follow your dreams even if they seem impossible?",
        "How has learning English changed your perspective on the world?",
        "What advice would you give to someone who's just starting to learn English?",
      ];

      // Fun Facts
      const funFacts = [
        "The word 'set' has over 400 different meanings in English!",
        "Shakespeare invented over 1,700 words that we still use today, including 'eyeball' and 'fashionable'.",
        "The most common letter in English is 'E' - it appears in about 11% of all words.",
        "The shortest complete sentence in English is 'Go!' (subject 'you' is implied).",
        "There are over 170,000 words currently in use in the English language.",
        "The word 'pronunciation' is often mispronounced - it's not 'pronounciation'!",
        "English is the official language of the sky - all pilots must speak English on international flights.",
        "The longest English word is 45 letters long: pneumonoultramicroscopicsilicovolcanocon.",
        "'I am' is the shortest complete sentence using a contraction in English.",
        "About 4,000 new words are added to English dictionaries every year!",
      ];

      // Vocabulary Quiz Functions
      function newVocabQuestion() {
        currentVocabQuestion =
          vocabQuestions[Math.floor(Math.random() * vocabQuestions.length)];
        document.getElementById("vocab-question").textContent =
          currentVocabQuestion.question;

        const optionsDiv = document.getElementById("vocab-options");
        optionsDiv.innerHTML = "";

        currentVocabQuestion.options.forEach((option, index) => {
          const optionDiv = document.createElement("div");
          optionDiv.className = "quiz-option";
          optionDiv.textContent = option;
          optionDiv.onclick = () => checkVocabAnswer(index, optionDiv);
          optionsDiv.appendChild(optionDiv);
        });
      }

      function checkVocabAnswer(selectedIndex, element) {
        const options = document.querySelectorAll(".quiz-option");
        options.forEach((opt) => (opt.style.pointerEvents = "none"));

        if (selectedIndex === currentVocabQuestion.correct) {
          element.classList.add("correct");
          vocabScore += 10;
          updateVocabScore();
          setTimeout(() => {
            alert("Correct! Well done!");
            newVocabQuestion();
          }, 1000);
        } else {
          element.classList.add("wrong");
          options[currentVocabQuestion.correct].classList.add("correct");
          setTimeout(() => {
            alert(
              `Not quite! The correct answer was: ${
                currentVocabQuestion.options[currentVocabQuestion.correct]
              }`
            );
            newVocabQuestion();
          }, 2000);
        }
      }

      function showHint() {
        if (currentVocabQuestion && currentVocabQuestion.hint) {
          alert(`Hint: ${currentVocabQuestion.hint}`);
        }
      }

      function updateVocabScore() {
        document.getElementById(
          "vocab-score"
        ).textContent = `Score: ${vocabScore}`;
        const progress = Math.min((vocabScore / 100) * 100, 100);
        document.getElementById("vocab-progress").style.width = `${progress}%`;
      }

      // Story Builder Functions
      let selectedStoryParts = [];
      let currentStorySet = 0;

      function newStoryPrompt() {
        selectedStoryParts = [];
        currentStorySet = 0;
        showNextStoryParts();
        document.getElementById("story-area").textContent =
          "Click story parts above to build your story...";
      }

      function showNextStoryParts() {
        const partsDiv = document.getElementById("story-parts");
        partsDiv.innerHTML = "";

        if (currentStorySet < storyParts.length) {
          const currentParts = storyParts[currentStorySet];
          currentParts.forEach((part) => {
            const partDiv = document.createElement("div");
            partDiv.className = "story-part";
            partDiv.textContent = part;
            partDiv.onclick = () => selectStoryPart(part, partDiv);
            partsDiv.appendChild(partDiv);
          });
        }
      }

      function selectStoryPart(part, element) {
        selectedStoryParts.push(part);
        element.style.opacity = "0.5";
        element.onclick = null;

        updateStoryArea();

        currentStorySet++;
        setTimeout(() => {
          if (currentStorySet < storyParts.length) {
            showNextStoryParts();
          }
        }, 500);
      }

      function updateStoryArea() {
        const area = document.getElementById("story-area");
        if (selectedStoryParts.length > 0) {
          area.innerHTML =
            selectedStoryParts.join(" ") +
            (currentStorySet < storyParts.length
              ? ' <span style="opacity: 0.5;">...</span>'
              : "");
        }
      }

      function saveStory() {
        if (selectedStoryParts.length >= 4) {
          storyCount++;
          document.getElementById(
            "story-score"
          ).textContent = `Stories Created: ${storyCount}`;
          alert("Great story! You're becoming a wonderful writer!");
          newStoryPrompt();
        } else {
          alert("Please build a longer story first!");
        }
      }

      function clearStory() {
        newStoryPrompt();
      }

      // Word Association Functions
      let currentAssociationWord = "";

      function startWordChain() {
        const startWords = [
          "happy",
          "school",
          "friend",
          "music",
          "travel",
          "food",
          "sport",
          "book",
        ];
        currentAssociationWord =
          startWords[Math.floor(Math.random() * startWords.length)];
        associationWords = [currentAssociationWord];

        document.getElementById("association-word").textContent =
          currentAssociationWord;
        document.getElementById("association-input").value = "";
        updateWordChain();
      }

      function checkAssociation() {
        const input = document
          .getElementById("association-input")
          .value.trim()
          .toLowerCase();
        if (input && !associationWords.includes(input)) {
          associationWords.push(input);
          currentAssociationWord = input;
          document.getElementById("association-word").textContent = input;
          document.getElementById("association-input").value = "";
          updateWordChain();

          if (associationWords.length >= 5) {
            associationChains++;
            document.getElementById(
              "association-score"
            ).textContent = `Chains: ${associationChains}`;
            alert("Great word chain! Starting a new one...");
            setTimeout(startWordChain, 1000);
          }
        } else if (associationWords.includes(input)) {
          alert("You already used that word! Try a different one.");
        } else {
          alert("Please enter a word!");
        }
      }

      function updateWordChain() {
        const chainDiv = document.getElementById("word-chain");
        chainDiv.innerHTML = "";
        associationWords.forEach((word, index) => {
          const bubble = document.createElement("span");
          bubble.className = "word-bubble";
          bubble.textContent = word;
          if (index === associationWords.length - 1) {
            bubble.style.background =
              "linear-gradient(45deg, #ff6b6b, #ee5a24)";
          }
          chainDiv.appendChild(bubble);
        });
      }

      // Sentence Scramble Functions
      let currentScramble = null;

      function newScramble() {
        currentScramble =
          scrambleSentences[
            Math.floor(Math.random() * scrambleSentences.length)
          ];
        const scrambledDiv = document.getElementById("scrambled-words");
        scrambledDiv.innerHTML = "";

        currentScramble.scrambled.forEach((word) => {
          const wordDiv = document.createElement("span");
          wordDiv.className = "word-bubble";
          wordDiv.textContent = word;
          scrambledDiv.appendChild(wordDiv);
        });

        document.getElementById("sentence-answer").value = "";
        document.getElementById("scramble-hint").textContent =
          "Unscramble the words to make a sentence!";
      }

      function checkSentence() {
        const answer = document.getElementById("sentence-answer").value.trim();
        if (answer.toLowerCase() === currentScramble.original.toLowerCase()) {
          scrambleScore++;
          document.getElementById(
            "scramble-score"
          ).textContent = `Sentences Fixed: ${scrambleScore}`;
          alert("Perfect! You unscrambled the sentence correctly!");
          newScramble();
        } else {
          alert(
            `Not quite right. Try again! The correct sentence was: "${currentScramble.original}"`
          );
        }
      }

      function showSentenceHint() {
        if (currentScramble && currentScramble.hint) {
          document.getElementById(
            "scramble-hint"
          ).textContent = `Hint: ${currentScramble.hint}`;
        }
      }

      // Tic Tac Toe Functions
      let tttBoard = Array(9).fill("");
      let currentPlayer = "X";
      let tttScores = { X: 0, O: 0 };

      function initTTT() {
        const grid = document.getElementById("ttt-grid");
        grid.innerHTML = "";
        for (let i = 0; i < 9; i++) {
          const cell = document.createElement("div");
          cell.className = "ttt-cell";
          cell.onclick = () => makeTTTMove(i, cell);
          grid.appendChild(cell);
        }
      }

      function makeTTTMove(index, cell) {
        if (tttBoard[index] === "") {
          tttBoard[index] = currentPlayer;
          cell.textContent = currentPlayer;
          cell.onclick = null;

          if (checkTTTWinner()) {
            tttScores[currentPlayer]++;
            updateTTTScore();
            alert(`Player ${currentPlayer} wins!`);
            setTimeout(resetTTT, 1000);
          } else if (tttBoard.every((cell) => cell !== "")) {
            alert("It's a tie!");
            setTimeout(resetTTT, 1000);
          } else {
            currentPlayer = currentPlayer === "X" ? "O" : "X";
            document.getElementById("current-player").textContent =
              currentPlayer;
          }
        }
      }

      function checkTTTWinner() {
        const winPatterns = [
          [0, 1, 2],
          [3, 4, 5],
          [6, 7, 8], // rows
          [0, 3, 6],
          [1, 4, 7],
          [2, 5, 8], // columns
          [0, 4, 8],
          [2, 4, 6], // diagonals
        ];

        return winPatterns.some((pattern) => {
          return pattern.every((index) => tttBoard[index] === currentPlayer);
        });
      }

      function resetTTT() {
        tttBoard = Array(9).fill("");
        currentPlayer = "X";
        document.getElementById("current-player").textContent = currentPlayer;
        initTTT();
      }

      function updateTTTScore() {
        document.getElementById(
          "ttt-score"
        ).textContent = `Player X: ${tttScores.X} | Player O: ${tttScores.O}`;
      }

      // Memory Game Functions
      let memoryCards = [];
      let flippedCards = [];
      let memoryMatches = 0;

      function startMemoryGame() {
        const words = [
          "cat",
          "dog",
          "sun",
          "moon",
          "star",
          "tree",
          "bird",
          "fish",
        ];
        memoryCards = [...words, ...words].sort(() => Math.random() - 0.5);
        flippedCards = [];
        memoryMatches = 0;

        const grid = document.getElementById("memory-grid");
        grid.innerHTML = "";

        memoryCards.forEach((word, index) => {
          const card = document.createElement("div");
          card.className = "memory-card";
          card.textContent = "?";
          card.onclick = () => flipCard(index, card, word);
          grid.appendChild(card);
        });

        updateMemoryScore();
      }

      function flipCard(index, card, word) {
        if (flippedCards.length < 2 && !card.classList.contains("flipped")) {
          card.textContent = word;
          card.classList.add("flipped");
          flippedCards.push({ index, card, word });

          if (flippedCards.length === 2) {
            setTimeout(checkMemoryMatch, 1000);
          }
        }
      }

      function checkMemoryMatch() {
        const [card1, card2] = flippedCards;

        if (card1.word === card2.word) {
          memoryMatches++;
          updateMemoryScore();
          if (memoryMatches === 8) {
            alert("Congratulations! You found all matches!");
          }
        } else {
          card1.card.textContent = "?";
          card1.card.classList.remove("flipped");
          card2.card.textContent = "?";
          card2.card.classList.remove("flipped");
        }

        flippedCards = [];
      }

      function updateMemoryScore() {
        document.getElementById(
          "memory-score"
        ).textContent = `Matches: ${memoryMatches}/8`;
      }

      // Writing Practice Functions
      function newWritingPrompt() {
        const prompt =
          writingPrompts[Math.floor(Math.random() * writingPrompts.length)];
        document.getElementById("writing-prompt").textContent = prompt;
        document.getElementById("writing-area").value = "";
      }

      function saveWriting() {
        const text = document.getElementById("writing-area").value.trim();
        if (text.length > 50) {
          writingEntries++;
          document.getElementById(
            "writing-score"
          ).textContent = `Entries: ${writingEntries}`;
          alert("Great writing! Keep practicing to improve your English!");
          newWritingPrompt();
        } else {
          alert("Please write at least 50 characters to save your entry.");
        }
      }

      // Conversation Topics Function
      function getConversationTopic() {
        const topic =
          conversationTopics[
            Math.floor(Math.random() * conversationTopics.length)
          ];
        document.getElementById("conversation-text").textContent = topic;
      }

      // Fun Facts Function
      function getFunFact() {
        const fact = funFacts[Math.floor(Math.random() * funFacts.length)];
        document.getElementById("fun-fact").textContent = fact;
      }

      // Initialize games when page loads
      window.onload = function () {
        newVocabQuestion();
        newStoryPrompt();
        startWordChain();
        newScramble();
        initTTT();
        startMemoryGame();
        newWritingPrompt();
      };
    </script>
  </body>
</html>
