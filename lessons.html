<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="ESL Fun Online - Premium online lessons for English and coding. Choose from kids or adult programs with flexible scheduling."
    />
    <title>Online Lessons | ESL Fun Online</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary-color: #4f46e5;
        --primary-hover: #4338ca;
        --secondary-color: #10b981;
        --accent-color: #f59e0b;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --text-light: #9ca3af;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --border-color: #e5e7eb;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --gradient-hero: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
      }

      .dark-mode {
        --text-primary: #f3f4f6;
        --text-secondary: #d1d5db;
        --text-light: #9ca3af;
        --bg-primary: #1f2937;
        --bg-secondary: #111827;
        --border-color: #374151;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont,
          "Helvetica Neue", Arial, sans-serif;
        line-height: 1.6;
        color: var(--text-primary);
        background: var(--bg-primary);
        transition: all 0.3s ease;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1.5rem;
      }

      /* Header Styles */
      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border-color);
        z-index: 1000;
        transition: all 0.3s ease;
      }

      .dark-mode header {
        background: rgba(17, 24, 39, 0.95);
      }

      .navbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 80px;
      }

      .logo-container {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        text-decoration: none;
      }

      .logo-text {
        font-family: "Poppins", sans-serif;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        text-decoration: none;
      }

      .nav-links {
        display: flex;
        align-items: center;
        gap: 2rem;
        list-style: none;
      }

      .nav-link {
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 500;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .nav-link:hover {
        color: var(--primary-color);
        background: rgba(79, 70, 229, 0.1);
      }

      .controls {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .control-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem;
        background: none;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .control-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      /* Page Header */
      .page-header {
        background: var(--gradient-hero);
        color: white;
        padding: 8rem 0 4rem;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .page-header h1 {
        font-family: "Poppins", sans-serif;
        font-size: clamp(2.5rem, 5vw, 3.5rem);
        font-weight: 800;
        margin-bottom: 1rem;
      }

      .page-header p {
        font-size: 1.25rem;
        margin-bottom: 2rem;
        opacity: 0.9;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      /* Main Content */
      .main-content {
        padding: 4rem 0;
      }

      /* Controls Section */
      .lesson-controls {
        background: var(--bg-secondary);
        padding: 2rem;
        border-radius: 16px;
        margin-bottom: 3rem;
        box-shadow: var(--shadow-sm);
      }

      .control-group {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        align-items: center;
        justify-content: center;
      }

      .toggle-group {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .toggle-label {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.9rem;
      }

      .toggle-switch {
        display: flex;
        background: var(--border-color);
        border-radius: 25px;
        padding: 4px;
        position: relative;
      }

      .toggle-option {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.875rem;
        font-weight: 500;
        white-space: nowrap;
      }

      .toggle-option.active {
        background: var(--primary-color);
        color: white;
        box-shadow: var(--shadow-sm);
      }

      .currency-selector {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .currency-dropdown {
        padding: 0.5rem 1rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-primary);
        color: var(--text-primary);
        font-weight: 500;
        cursor: pointer;
      }

      /* Lessons Grid */
      .lessons-section {
        margin-bottom: 4rem;
      }

      .section-title {
        font-family: "Poppins", sans-serif;
        font-size: 2rem;
        font-weight: 600;
        text-align: center;
        margin-bottom: 3rem;
        color: var(--text-primary);
      }

      .lessons-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
      }

      .lesson-card {
        background: var(--bg-primary);
        border: 2px solid var(--border-color);
        border-radius: 16px;
        padding: 2rem;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
        position: relative;
        overflow: hidden;
      }

      .lesson-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-primary);
      }

      .lesson-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-xl);
        border-color: var(--primary-color);
      }

      .lesson-icon {
        width: 60px;
        height: 60px;
        background: var(--gradient-primary);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
        margin-bottom: 1.5rem;
      }

      .lesson-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
      }

      .lesson-duration {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        background: var(--secondary-color);
        color: white;
        font-size: 0.75rem;
        font-weight: 600;
        border-radius: 12px;
        margin-bottom: 1rem;
      }

      .lesson-description {
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }

      .lesson-features {
        list-style: none;
        margin-bottom: 2rem;
      }

      .lesson-features li {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .lesson-features i {
        color: var(--secondary-color);
        width: 16px;
      }

      .lesson-price {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1.5rem;
      }

      .price-main {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-color);
      }

      .price-currency {
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .book-lesson-btn {
        width: 100%;
        padding: 1rem;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1rem;
      }

      .book-lesson-btn:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
      }

      /* Package Cards */
      .package-card {
        background: var(--gradient-primary);
        color: white;
        position: relative;
      }

      .package-card::before {
        background: linear-gradient(90deg, #ffd700, #ffed4e);
      }

      .package-badge {
        position: absolute;
        top: -10px;
        right: 20px;
        background: #ffd700;
        color: #1f2937;
        padding: 0.5rem 1rem;
        border-radius: 0 0 12px 12px;
        font-weight: 700;
        font-size: 0.8rem;
      }

      .package-card .lesson-icon {
        background: rgba(255, 255, 255, 0.2);
      }

      .package-card .lesson-title,
      .package-card .lesson-description {
        color: white;
      }

      .package-card .price-main {
        color: #ffd700;
      }

      .package-card .book-lesson-btn {
        background: white;
        color: var(--primary-color);
      }

      .package-card .book-lesson-btn:hover {
        background: #f3f4f6;
      }

      /* Payment Methods */
      .payment-section {
        background: var(--bg-secondary);
        padding: 3rem 0;
        margin-top: 4rem;
      }

      .payment-methods {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
        margin-top: 2rem;
      }

      .payment-method {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: var(--bg-primary);
        border: 2px solid var(--border-color);
        border-radius: 12px;
        transition: all 0.3s ease;
      }

      .payment-method:hover {
        border-color: var(--primary-color);
        transform: translateY(-2px);
      }

      .payment-method img {
        width: 24px;
        height: 24px;
      }

      /* Age Toggle Styles */
      .age-info {
        text-align: center;
        margin: 2rem 0;
        padding: 1.5rem;
        background: var(--bg-secondary);
        border-radius: 12px;
      }

      .age-info h3 {
        margin-bottom: 0.5rem;
        color: var(--primary-color);
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        .control-group {
          flex-direction: column;
          gap: 1.5rem;
        }

        .toggle-group {
          width: 100%;
        }

        .toggle-switch {
          width: 100%;
          justify-content: center;
        }

        .lessons-grid {
          grid-template-columns: 1fr;
        }

        .lesson-card {
          padding: 1.5rem;
        }

        .payment-methods {
          flex-direction: column;
          align-items: center;
        }

        .payment-method {
          width: 100%;
          max-width: 300px;
          justify-content: center;
        }
      }

      .hidden {
        display: none !important;
      }

      /* Booking Modal */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .modal.show {
        opacity: 1;
        visibility: visible;
      }

      .modal-content {
        background: var(--bg-primary);
        padding: 2rem;
        border-radius: 16px;
        max-width: 500px;
        width: 90%;
        position: relative;
        color: var(--text-primary);
      }

      .close-modal {
        position: absolute;
        top: 1rem;
        right: 1rem;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-secondary);
      }

      .modal h3 {
        margin-bottom: 1rem;
        color: var(--primary-color);
      }

      .booking-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .form-group label {
        font-weight: 500;
        color: var(--text-primary);
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        padding: 0.75rem;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-primary);
        color: var(--text-primary);
        font-size: 1rem;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .submit-booking {
        padding: 1rem;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1rem;
        margin-top: 1rem;
      }

      .submit-booking:hover {
        background: var(--primary-hover);
      }
    </style>
  </head>

  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <nav class="navbar">
          <a href="index.html" class="logo-container">
            <span class="logo-text">ESL Fun Online</span>
          </a>

          <ul class="nav-links">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="englishpillar.html" class="nav-link">English</a></li>
            <li><a href="games.html" class="nav-link">Games</a></li>
            <li><a href="store.html" class="nav-link">Store</a></li>
          </ul>

          <div class="controls">
            <button class="control-btn theme-toggle" id="themeToggle">
              <i class="fas fa-moon"></i>
            </button>
          </div>
        </nav>
      </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
      <div class="container">
        <h1>Online Lessons</h1>
        <p>
          Interactive live lessons with qualified instructors. Choose from
          English or coding programs tailored for different age groups.
        </p>
      </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <!-- Lesson Controls -->
        <div class="lesson-controls">
          <div class="control-group">
            <div class="toggle-group">
              <span class="toggle-label">Age Group</span>
              <div class="toggle-switch" id="ageToggle">
                <div class="toggle-option active" data-age="kids">
                  Kids (6-12)
                </div>
                <div class="toggle-option" data-age="adults">Adults (13+)</div>
              </div>
            </div>

            <div class="toggle-group">
              <span class="toggle-label">Program Type</span>
              <div class="toggle-switch" id="programToggle">
                <div class="toggle-option active" data-program="english">
                  English
                </div>
                <div class="toggle-option" data-program="coding">Coding</div>
                <div class="toggle-option" data-program="packages">
                  Packages
                </div>
              </div>
            </div>

            <div class="toggle-group">
              <span class="toggle-label">Currency</span>
              <select class="currency-dropdown" id="currencySelector">
                <option value="THB" data-country="TH">🇹🇭 Thai Baht (฿)</option>
                <option value="USD" data-country="US">🇺🇸 US Dollar ($)</option>
                <option value="EUR" data-country="EU">🇪🇺 Euro (€)</option>
                <option value="GBP" data-country="GB">
                  🇬🇧 British Pound (£)
                </option>
                <option value="JPY" data-country="JP">
                  🇯🇵 Japanese Yen (¥)
                </option>
              </select>
            </div>
          </div>
        </div>

        <!-- Age Info Display -->
        <div class="age-info" id="ageInfo">
          <h3>Kids Program (Ages 6-12)</h3>
          <p>
            Fun, interactive 40-minute lessons designed for young learners with
            engaging activities and games.
          </p>
        </div>

        <!-- English Lessons Section -->
        <section class="lessons-section" id="englishLessons">
          <h2 class="section-title">English Lessons</h2>
          <div class="lessons-grid" id="englishGrid">
            <!-- English lessons will be populated by JavaScript -->
          </div>
        </section>

        <!-- Coding Lessons Section -->
        <section class="lessons-section hidden" id="codingLessons">
          <h2 class="section-title">Coding Lessons</h2>
          <div class="lessons-grid" id="codingGrid">
            <!-- Coding lessons will be populated by JavaScript -->
          </div>
        </section>

        <!-- Package Lessons Section -->
        <section class="lessons-section hidden" id="packageLessons">
          <h2 class="section-title">Complete Packages</h2>
          <div class="lessons-grid" id="packageGrid">
            <!-- Package lessons will be populated by JavaScript -->
          </div>
        </section>

        <!-- Payment Methods Section -->
        <section class="payment-section">
          <div class="container">
            <h2 class="section-title">Accepted Payment Methods</h2>
            <div class="payment-methods" id="paymentMethods">
              <!-- Payment methods will be populated by JavaScript -->
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Booking Modal -->
    <div class="modal" id="bookingModal">
      <div class="modal-content">
        <span class="close-modal" id="closeModal">&times;</span>
        <h3 id="modalTitle">Book Your Lesson</h3>
        <form class="booking-form" id="bookingForm">
          <div class="form-group">
            <label for="studentName">Student Name</label>
            <input type="text" id="studentName" name="studentName" required />
          </div>
          <div class="form-group">
            <label for="parentEmail">Email</label>
            <input type="email" id="parentEmail" name="parentEmail" required />
          </div>
          <div class="form-group">
            <label for="studentAge">Age</label>
            <input
              type="number"
              id="studentAge"
              name="studentAge"
              min="6"
              max="99"
              required
            />
          </div>
          <div class="form-group">
            <label for="preferredTime">Preferred Time</label>
            <select id="preferredTime" name="preferredTime" required>
              <option value="">Select time slot</option>
              <option value="morning">Morning (9:00-12:00)</option>
              <option value="afternoon">Afternoon (13:00-17:00)</option>
              <option value="evening">Evening (18:00-21:00)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="message">Additional Notes</label>
            <textarea
              id="message"
              name="message"
              rows="3"
              placeholder="Any special requirements or questions..."
            ></textarea>
          </div>
          <button type="submit" class="submit-booking">Book Now</button>
        </form>
      </div>
    </div>

    <script>
      // Exchange rates (simplified - in real app, fetch from API)
      const exchangeRates = {
        THB: 1,
        USD: 0.028,
        EUR: 0.026,
        GBP: 0.022,
        JPY: 4.2,
      };

      // Payment methods by country
      const paymentMethods = {
        TH: [
          { name: "PromptPay", icon: "💳" },
          { name: "Thai QR Payment", icon: "📱" },
          { name: "Bank Transfer", icon: "🏦" },
          { name: "True Money", icon: "💰" },
          { name: "PayPal", icon: "💙" },
        ],
        default: [{ name: "PayPal", icon: "💙" }],
      };

      // Lesson data
      const lessons = {
        english: {
          kids: [
            {
              title: "Phonics Fundamentals",
              icon: "fa-music",
              duration: "40 minutes",
              price: 250,
              description:
                "Learn letter sounds, blending, and reading basics through fun songs and games.",
              features: [
                "Interactive phonics games",
                "Letter recognition activities",
                "Simple word building",
                "Pronunciation practice",
                "Digital worksheets included",
              ],
            },
            {
              title: "Vocabulary Building",
              icon: "fa-book",
              duration: "40 minutes",
              price: 250,
              description:
                "Expand vocabulary through themed lessons, stories, and interactive activities.",
              features: [
                "Theme-based word learning",
                "Picture vocabulary cards",
                "Story-based contexts",
                "Memory games",
                "Progress tracking",
              ],
            },
            {
              title: "Conversation Practice",
              icon: "fa-comments",
              duration: "40 minutes",
              price: 250,
              description:
                "Build confidence in speaking through guided conversations and role-play.",
              features: [
                "Role-play activities",
                "Show and tell sessions",
                "Question and answer games",
                "Confidence building exercises",
                "Speaking assessment",
              ],
            },
          ],
          adults: [
            {
              title: "Advanced Phonics",
              icon: "fa-graduation-cap",
              duration: "60 minutes",
              price: 250,
              description:
                "Master complex phonetic patterns and improve pronunciation for clear communication.",
              features: [
                "Advanced sound patterns",
                "Stress and intonation",
                "Connected speech",
                "Accent reduction techniques",
                "Recording analysis",
              ],
            },
            {
              title: "Professional Vocabulary",
              icon: "fa-briefcase",
              duration: "60 minutes",
              price: 250,
              description:
                "Build business and academic vocabulary for professional success.",
              features: [
                "Industry-specific terms",
                "Academic word lists",
                "Collocation practice",
                "Context usage",
                "Vocabulary tests",
              ],
            },
            {
              title: "Fluency & Conversation",
              icon: "fa-users",
              duration: "60 minutes",
              price: 250,
              description:
                "Develop natural conversation skills and fluency through intensive practice.",
              features: [
                "Discussion topics",
                "Debate practice",
                "Presentation skills",
                "Small talk mastery",
                "Fluency assessment",
              ],
            },
          ],
        },
        coding: {
          kids: [
            {
              title: "Coding Fundamentals",
              icon: "fa-code",
              duration: "40 minutes",
              price: 250,
              description:
                "Introduction to programming concepts through visual block-based coding.",
              features: [
                "Block-based programming",
                "Logic and problem solving",
                "Simple animations",
                "Interactive games",
                "Creative projects",
              ],
            },
            {
              title: "Web Development Basics",
              icon: "fa-globe",
              duration: "40 minutes",
              price: 250,
              description:
                "Create simple websites using HTML and CSS with fun, colorful designs.",
              features: [
                "HTML structure basics",
                "CSS styling fun",
                "Color and design",
                "Simple layouts",
                "Personal webpage project",
              ],
            },
          ],
          adults: [
            {
              title: "JavaScript Mastery",
              icon: "fab fa-js",
              duration: "60 minutes",
              price: 250,
              description:
                "Master JavaScript fundamentals and build interactive web applications.",
              features: [
                "ES6+ syntax",
                "DOM manipulation",
                "Event handling",
                "API integration",
                "Project-based learning",
              ],
            },
            {
              title: "Python Programming",
              icon: "fab fa-python",
              duration: "60 minutes",
              price: 250,
              description:
                "Learn Python programming from basics to advanced concepts.",
              features: [
                "Python syntax mastery",
                "Data structures",
                "Object-oriented programming",
                "Libraries and frameworks",
                "Real-world projects",
              ],
            },
            {
              title: "Full-Stack Development",
              icon: "fa-layer-group",
              duration: "60 minutes",
              price: 250,
              description:
                "Complete web development using modern frameworks and technologies.",
              features: [
                "Frontend frameworks",
                "Backend development",
                "Database integration",
                "Database integration",
                "API development",
                "Deployment strategies",
              ],
            },
          ],
        },
        packages: {
          kids: [
            {
              title: "Complete English Program",
              icon: "fa-star",
              duration: "12 sessions",
              price: 2800,
              description:
                "Comprehensive English program covering phonics, vocabulary, and conversation.",
              features: [
                "12 x 40-minute sessions",
                "All English fundamentals",
                "Progress assessments",
                "Certificate of completion",
                "Bonus practice materials",
                "Parent progress reports",
              ],
              badge: "BEST VALUE",
              isPackage: true,
            },
            {
              title: "Coding + English Combo",
              icon: "fa-rocket",
              duration: "16 sessions",
              price: 3600,
              description:
                "Perfect blend of coding and English lessons for complete skill development.",
              features: [
                "8 x English sessions",
                "8 x Coding sessions",
                "Integrated learning approach",
                "Creative project portfolio",
                "Dual skill certification",
                "Extended support",
              ],
              badge: "POPULAR",
              isPackage: true,
            },
          ],
          adults: [
            {
              title: "Professional English Mastery",
              icon: "fa-trophy",
              duration: "20 sessions",
              price: 4500,
              description:
                "Intensive English program for career advancement and fluency.",
              features: [
                "20 x 60-minute sessions",
                "Business English focus",
                "Presentation skills",
                "Interview preparation",
                "Professional certification",
                "Career guidance included",
              ],
              badge: "PREMIUM",
              isPackage: true,
            },
            {
              title: "Full-Stack Developer Path",
              icon: "fa-code-branch",
              duration: "24 sessions",
              price: 5400,
              description:
                "Complete journey from beginner to full-stack developer.",
              features: [
                "24 x 60-minute sessions",
                "Frontend & Backend",
                "Portfolio development",
                "Job placement assistance",
                "Industry mentorship",
                "Lifetime support access",
              ],
              badge: "CAREER BOOST",
              isPackage: true,
            },
          ],
        },
      };

      // Current selections
      let currentAge = "kids";
      let currentProgram = "english";
      let currentCurrency = "THB";

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        updatePaymentMethods("TH");
        renderLessons();

        // Event listeners for toggles
        document
          .getElementById("ageToggle")
          .addEventListener("click", handleAgeToggle);
        document
          .getElementById("programToggle")
          .addEventListener("click", handleProgramToggle);
        document
          .getElementById("currencySelector")
          .addEventListener("change", handleCurrencyChange);
        document
          .getElementById("themeToggle")
          .addEventListener("click", toggleTheme);

        // Modal events
        document
          .getElementById("closeModal")
          .addEventListener("click", closeModal);
        document
          .getElementById("bookingModal")
          .addEventListener("click", function (e) {
            if (e.target === this) closeModal();
          });
        document
          .getElementById("bookingForm")
          .addEventListener("submit", handleBookingSubmit);
      });

      function handleAgeToggle(e) {
        if (e.target.dataset.age) {
          document
            .querySelectorAll("#ageToggle .toggle-option")
            .forEach((opt) => opt.classList.remove("active"));
          e.target.classList.add("active");
          currentAge = e.target.dataset.age;
          updateAgeInfo();
          renderLessons();
        }
      }

      function handleProgramToggle(e) {
        if (e.target.dataset.program) {
          document
            .querySelectorAll("#programToggle .toggle-option")
            .forEach((opt) => opt.classList.remove("active"));
          e.target.classList.add("active");
          currentProgram = e.target.dataset.program;
          showCurrentSection();
          renderLessons();
        }
      }

      function handleCurrencyChange(e) {
        currentCurrency = e.target.value;
        const selectedOption = e.target.options[e.target.selectedIndex];
        const country = selectedOption.dataset.country;
        updatePaymentMethods(country);
        renderLessons();
      }

      function updateAgeInfo() {
        const ageInfo = document.getElementById("ageInfo");
        if (currentAge === "kids") {
          ageInfo.innerHTML = `
                    <h3>Kids Program (Ages 6-12)</h3>
                    <p>Fun, interactive 40-minute lessons designed for young learners with engaging activities and games.</p>
                `;
        } else {
          ageInfo.innerHTML = `
                    <h3>Adult Program (Ages 13+)</h3>
                    <p>Comprehensive 60-minute lessons focused on practical skills and real-world application.</p>
                `;
        }
      }

      function showCurrentSection() {
        // Hide all sections
        document
          .querySelectorAll(".lessons-section")
          .forEach((section) => section.classList.add("hidden"));

        // Show current section
        const sectionId = currentProgram + "Lessons";
        document.getElementById(sectionId).classList.remove("hidden");
      }

      function updatePaymentMethods(country) {
        const methodsContainer = document.getElementById("paymentMethods");
        const methods = paymentMethods[country] || paymentMethods.default;

        methodsContainer.innerHTML = methods
          .map(
            (method) => `
                <div class="payment-method">
                    <span>${method.icon}</span>
                    <span>${method.name}</span>
                </div>
            `
          )
          .join("");
      }

      function renderLessons() {
        const gridId = currentProgram + "Grid";
        const grid = document.getElementById(gridId);
        const lessonData = lessons[currentProgram][currentAge];

        grid.innerHTML = lessonData
          .map((lesson) => createLessonCard(lesson))
          .join("");

        // Add event listeners to booking buttons
        grid.querySelectorAll(".book-lesson-btn").forEach((btn) => {
          btn.addEventListener("click", () =>
            openBookingModal(btn.dataset.lesson)
          );
        });
      }

      function createLessonCard(lesson) {
        const convertedPrice = convertPrice(lesson.price);
        const currencySymbol = getCurrencySymbol(currentCurrency);
        const cardClass = lesson.isPackage
          ? "lesson-card package-card"
          : "lesson-card";

        return `
                <div class="${cardClass}">
                    ${
                      lesson.badge
                        ? `<div class="package-badge">${lesson.badge}</div>`
                        : ""
                    }
                    <div class="lesson-icon">
                        <i class="${lesson.icon}"></i>
                    </div>
                    <h3 class="lesson-title">${lesson.title}</h3>
                    <span class="lesson-duration">${lesson.duration}</span>
                    <p class="lesson-description">${lesson.description}</p>
                    <ul class="lesson-features">
                        ${lesson.features
                          .map(
                            (feature) => `
                            <li><i class="fas fa-check"></i> ${feature}</li>
                        `
                          )
                          .join("")}
                    </ul>
                    <div class="lesson-price">
                        <span class="price-main">${currencySymbol}${convertedPrice}</span>
                        <span class="price-currency">${currentCurrency}</span>
                    </div>
                    <button class="book-lesson-btn" data-lesson="${
                      lesson.title
                    }">
                        ${lesson.isPackage ? "Get Package" : "Book Lesson"}
                    </button>
                </div>
            `;
      }

      function convertPrice(price) {
        const rate = exchangeRates[currentCurrency];
        const converted = price * rate;

        if (currentCurrency === "JPY") {
          return Math.round(converted);
        }
        return converted.toFixed(2);
      }

      function getCurrencySymbol(currency) {
        const symbols = {
          THB: "฿",
          USD: "$",
          EUR: "€",
          GBP: "£",
          JPY: "¥",
        };
        return symbols[currency] || "";
      }

      function openBookingModal(lessonTitle) {
        document.getElementById(
          "modalTitle"
        ).textContent = `Book: ${lessonTitle}`;
        document.getElementById("bookingModal").classList.add("show");
      }

      function closeModal() {
        document.getElementById("bookingModal").classList.remove("show");
      }

      function handleBookingSubmit(e) {
        e.preventDefault();

        // Get form data
        const formData = new FormData(e.target);
        const bookingData = Object.fromEntries(formData);

        // Here you would typically send the data to your server
        console.log("Booking data:", bookingData);

        // Show success message (simplified)
        alert(
          "Thank you! Your booking request has been submitted. We will contact you within 24 hours to confirm your lesson."
        );

        // Close modal and reset form
        closeModal();
        e.target.reset();
      }

      function toggleTheme() {
        document.body.classList.toggle("dark-mode");
        const themeIcon = document.querySelector("#themeToggle i");

        if (document.body.classList.contains("dark-mode")) {
          themeIcon.className = "fas fa-sun";
          localStorage.setItem("theme", "dark");
        } else {
          themeIcon.className = "fas fa-moon";
          localStorage.setItem("theme", "light");
        }
      }

      // Initialize theme from localStorage
      if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark-mode");
        document.querySelector("#themeToggle i").className = "fas fa-sun";
      }
    </script>
  </body>
</html>
