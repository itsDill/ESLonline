<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Interactive ESL Lesson - Idioms, Phrasal Verbs & More"
    />
    <title>English Learning Hub | Interactive Idioms & Phrasal Verbs</title>
    <link rel="apple-touch-icon" href="images/Online.png" />
    <link rel="icon" type="image/png" href="images/Online.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-color: #4f46e5;
        --primary-hover: #4338ca;
        --secondary-color: #10b981;
        --accent-color: #f59e0b;
        --success-color: #10b981;
        --light-bg: #f9fafb;
        --light-card: #ffffff;
        --light-text: #1f2937;
        --light-border: #e5e7eb;
        --dark-bg: #111827;
        --dark-card: #1f2937;
        --dark-text: #f9fafb;
        --dark-border: #374151;
        --border-radius: 12px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        line-height: 1.6;
        color: var(--light-text);
        background-color: var(--light-bg);
        padding: 20px;
        transition: all 0.3s ease;
      }

      body.dark-mode {
        color: var(--dark-text);
        background-color: var(--dark-bg);
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--primary-color);
      }

      .logo {
        font-weight: 700;
        font-size: 1.5rem;
        color: var(--primary-color);
        text-decoration: none;
      }

      .dark-mode-toggle {
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
      }

      .dark-mode-toggle:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
      }

      h1 {
        color: var(--primary-color);
        margin-bottom: 20px;
        text-align: center;
      }

      body.dark-mode h1 {
        color: var(--accent-color);
      }

      h2 {
        color: var(--primary-color);
        margin: 25px 0 15px;
        padding-bottom: 8px;
        border-bottom: 2px dashed var(--light-border);
      }

      body.dark-mode h2 {
        color: var(--accent-color);
        border-color: var(--dark-border);
      }

      .language-section {
        background: var(--light-card);
        border-radius: var(--border-radius);
        padding: 20px;
        margin-bottom: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      body.dark-mode .language-section {
        background: var(--dark-card);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .example-item {
        margin: 15px 0;
        padding: 15px;
        border-left: 3px solid var(--primary-color);
        background: rgba(79, 70, 229, 0.05);
        border-radius: 0 8px 8px 0;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
      }

      .example-item:hover {
        transform: translateX(5px);
        box-shadow: 0 3px 10px rgba(79, 70, 229, 0.2);
      }

      body.dark-mode .example-item {
        background: rgba(79, 70, 229, 0.1);
      }

      .example {
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      body.dark-mode .example {
        color: var(--accent-color);
      }

      .click-hint {
        font-size: 0.8rem;
        color: #999;
        opacity: 0.7;
      }

      .meaning {
        font-style: italic;
        color: #666;
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .meaning.show {
        max-height: 200px;
        margin-top: 10px;
        margin-bottom: 10px;
      }

      body.dark-mode .meaning {
        color: #aaa;
      }

      .sentence {
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .sentence.show {
        max-height: 200px;
        margin-top: 5px;
      }

      .conversation-starters {
        background: rgba(16, 185, 129, 0.1);
        padding: 20px;
        border-radius: var(--border-radius);
        margin: 30px 0;
      }

      body.dark-mode .conversation-starters {
        background: rgba(16, 185, 129, 0.2);
      }

      .conversation-starters li {
        margin: 10px 0;
        padding: 10px 15px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .conversation-starters li:hover {
        background: rgba(255, 255, 255, 0.8);
        transform: translateX(5px);
      }

      body.dark-mode .conversation-starters li {
        background: rgba(255, 255, 255, 0.1);
      }

      body.dark-mode .conversation-starters li:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .game-section {
        background: linear-gradient(
          135deg,
          rgba(245, 158, 11, 0.1),
          rgba(245, 158, 11, 0.2)
        );
        padding: 25px;
        border-radius: var(--border-radius);
        margin-top: 30px;
        border: 2px solid var(--accent-color);
      }

      body.dark-mode .game-section {
        background: linear-gradient(
          135deg,
          rgba(245, 158, 11, 0.2),
          rgba(245, 158, 11, 0.3)
        );
      }

      .game-controls {
        display: flex;
        gap: 15px;
        margin: 20px 0;
        flex-wrap: wrap;
        justify-content: center;
      }

      .btn {
        display: inline-block;
        background: var(--primary-color);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
        font-size: 1rem;
      }

      .btn:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
      }

      .btn-secondary {
        background: var(--secondary-color);
      }

      .btn-secondary:hover {
        background: #0d9488;
      }

      .btn-accent {
        background: var(--accent-color);
      }

      .btn-accent:hover {
        background: #d97706;
      }

      .timer-display {
        font-size: 3rem;
        font-weight: 700;
        color: var(--accent-color);
        text-align: center;
        margin: 20px 0;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .current-topic {
        background: var(--light-card);
        padding: 20px;
        border-radius: var(--border-radius);
        margin: 20px 0;
        text-align: center;
        border: 2px solid var(--accent-color);
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      body.dark-mode .current-topic {
        background: var(--dark-card);
      }

      .current-topic h3 {
        color: var(--primary-color);
        margin-bottom: 10px;
      }

      body.dark-mode .current-topic h3 {
        color: var(--accent-color);
      }

      .topic-text {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--accent-color);
      }

      .score-display {
        text-align: center;
        margin: 20px 0;
        font-size: 1.1rem;
        font-weight: 600;
      }

      .progress-bar {
        width: 100%;
        height: 10px;
        background: var(--light-border);
        border-radius: 5px;
        overflow: hidden;
        margin: 20px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--success-color),
          var(--accent-color)
        );
        width: 0%;
        transition: all 0.3s ease;
      }

      body.dark-mode .progress-bar {
        background: var(--dark-border);
      }

      .quiz-mode {
        background: rgba(16, 185, 129, 0.1);
        padding: 20px;
        border-radius: var(--border-radius);
        margin: 20px 0;
        border: 2px solid var(--secondary-color);
      }

      body.dark-mode .quiz-mode {
        background: rgba(16, 185, 129, 0.2);
      }

      .quiz-question {
        font-size: 1.1rem;
        margin-bottom: 15px;
        font-weight: 500;
      }

      .quiz-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin: 15px 0;
      }

      .quiz-option {
        padding: 10px 15px;
        background: var(--light-card);
        border: 2px solid var(--light-border);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }

      .quiz-option:hover {
        border-color: var(--primary-color);
        background: rgba(79, 70, 229, 0.1);
      }

      body.dark-mode .quiz-option {
        background: var(--dark-card);
        border-color: var(--dark-border);
      }

      .quiz-option.correct {
        background: var(--success-color);
        color: white;
        border-color: var(--success-color);
      }

      .quiz-option.incorrect {
        background: #ef4444;
        color: white;
        border-color: #ef4444;
      }

      .celebration {
        text-align: center;
        padding: 20px;
        background: linear-gradient(
          135deg,
          var(--success-color),
          var(--secondary-color)
        );
        color: white;
        border-radius: var(--border-radius);
        margin: 20px 0;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease;
      }

      .celebration.show {
        opacity: 1;
        transform: translateY(0);
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .pulse {
        animation: pulse 0.6s ease-in-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease-out;
      }

      @media (max-width: 768px) {
        header {
          flex-direction: column;
          gap: 15px;
        }

        h1 {
          font-size: 1.5rem;
        }

        .game-controls {
          flex-direction: column;
          align-items: center;
        }

        .btn {
          width: 100%;
          max-width: 300px;
        }

        .timer-display {
          font-size: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <a href="#" class="logo">English Learning Hub</a>
        <button class="dark-mode-toggle" id="darkModeToggle">
          <i class="fas fa-moon"></i>
          Dark Mode
        </button>
      </header>

      <h1>Interactive ESL Lesson: Idioms, Phrasal Verbs & More</h1>

      <!-- Progress Bar -->
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>

      <!-- Idioms Section -->
      <div class="language-section">
        <h2><i class="fas fa-comment-dots"></i> Common Idioms</h2>
        <p>
          Idioms are phrases with meanings different from the literal words.
          <strong
            >Click on each idiom to reveal its meaning and example!</strong
          >
        </p>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Hit the sack"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: To go to bed or go to sleep</div>
          <div class="sentence">
            Example: "I'm exhausted, I'm going to hit the sack early tonight."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Bite the bullet"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">
            Meaning: To endure a painful or difficult situation bravely
          </div>
          <div class="sentence">
            Example: "I don't want to get the vaccine, but I'll bite the bullet
            and do it."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Break a leg"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">
            Meaning: Good luck (especially in performances)
          </div>
          <div class="sentence">
            Example: "Break a leg on your presentation today!"
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Let the cat out of the bag"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: To reveal a secret accidentally</div>
          <div class="sentence">
            Example: "I let the cat out of the bag about the surprise party."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Piece of cake"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: Something very easy to do</div>
          <div class="sentence">Example: "The test was a piece of cake!"</div>
        </div>
      </div>

      <!-- Phrasal Verbs Section -->
      <div class="language-section">
        <h2><i class="fas fa-language"></i> Useful Phrasal Verbs</h2>
        <p>
          Phrasal verbs combine verbs with prepositions/adverbs to create new
          meanings. <strong>Click to explore!</strong>
        </p>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Turn up"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: To arrive or appear</div>
          <div class="sentence">
            Example: "She turned up an hour late to the meeting."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Put off"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: To postpone or delay</div>
          <div class="sentence">
            Example: "We had to put off our vacation until next month."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Run out of"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: To have no more of something</div>
          <div class="sentence">
            Example: "We ran out of milk, so I need to go to the store."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Look forward to"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: To anticipate with pleasure</div>
          <div class="sentence">
            Example: "I'm looking forward to the weekend."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Get along with"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">
            Meaning: To have a good relationship with someone
          </div>
          <div class="sentence">
            Example: "I get along well with my coworkers."
          </div>
        </div>
      </div>

      <!-- Similes Section -->
      <div class="language-section">
        <h2><i class="fas fa-balance-scale"></i> Common Similes</h2>
        <p>
          Similes compare two things using "like" or "as".
          <strong>Click to discover!</strong>
        </p>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "As busy as a bee"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: Very busy or active</div>
          <div class="sentence">
            Example: "She's been as busy as a bee preparing for the event."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Like two peas in a pod"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: Very similar or always together</div>
          <div class="sentence">
            Example: "Those twins are like two peas in a pod."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "As light as a feather"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: Very lightweight</div>
          <div class="sentence">
            Example: "This package is as light as a feather."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "Like a fish out of water"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">
            Meaning: Uncomfortable in an unfamiliar situation
          </div>
          <div class="sentence">
            Example: "At the formal dinner, I felt like a fish out of water."
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "As cool as a cucumber"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: Very calm and composed</div>
          <div class="sentence">
            Example: "Even during the crisis, she remained as cool as a
            cucumber."
          </div>
        </div>
      </div>

      <!-- Hyperbole Section -->
      <div class="language-section">
        <h2><i class="fas fa-chart-line"></i> Everyday Hyperbole</h2>
        <p>
          Hyperbole is exaggerated statements not meant to be taken literally.
          <strong>Click to explore!</strong>
        </p>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "I'm so hungry I could eat a horse!"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: Extremely hungry</div>
          <div class="sentence">
            Example: "When's lunch? I'm so hungry I could eat a horse!"
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "I've told you a million times"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">
            Meaning: Repeated many times (not literally a million)
          </div>
          <div class="sentence">
            Example: "I've told you a million times to clean your room!"
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "This bag weighs a ton"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: Very heavy (not literally a ton)</div>
          <div class="sentence">
            Example: "What's in here? This bag weighs a ton!"
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "I nearly died laughing"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">Meaning: Laughed very hard</div>
          <div class="sentence">
            Example: "That joke was so funny, I nearly died laughing!"
          </div>
        </div>

        <div class="example-item" onclick="toggleExample(this)">
          <div class="example">
            "This is the worst day ever"
            <span class="click-hint">👆 Click to learn!</span>
          </div>
          <div class="meaning">
            Meaning: A very bad day (probably not literally the worst)
          </div>
          <div class="sentence">
            Example: "I missed the bus, forgot my lunch, and now it's raining -
            this is the worst day ever!"
          </div>
        </div>
      </div>

      <!-- Interactive Quiz -->
      <div class="quiz-mode" id="quizMode" style="display: none">
        <h2><i class="fas fa-question-circle"></i> Quick Quiz</h2>
        <div class="quiz-question" id="quizQuestion"></div>
        <div class="quiz-options" id="quizOptions"></div>
        <div class="score-display" id="quizScore">Score: 0/0</div>
        <button class="btn btn-secondary" onclick="nextQuizQuestion()">
          Next Question
        </button>
        <button class="btn" onclick="toggleQuiz()">Exit Quiz</button>
      </div>

      <!-- Conversation Starters -->
      <div class="conversation-starters">
        <h2>
          <i class="fas fa-comments"></i> Interactive Conversation Starters
        </h2>
        <p>
          Click on any question to highlight it and practice with a partner:
        </p>
        <ol>
          <li onclick="highlightQuestion(this)">
            What's your favorite idiom from today's lesson and why?
          </li>
          <li onclick="highlightQuestion(this)">
            Can you think of a time when you had to "bite the bullet"?
          </li>
          <li onclick="highlightQuestion(this)">
            Have you ever "let the cat out of the bag"? What happened?
          </li>
          <li onclick="highlightQuestion(this)">
            What's something you're "looking forward to" this week?
          </li>
          <li onclick="highlightQuestion(this)">
            When was the last time you felt "like a fish out of water"?
          </li>
          <li onclick="highlightQuestion(this)">
            What's something that's "a piece of cake" for you but difficult for
            others?
          </li>
          <li onclick="highlightQuestion(this)">
            Have you ever been "as busy as a bee"? What were you doing?
          </li>
        </ol>
      </div>

      <!-- Enhanced Game Section -->
      <div class="game-section">
        <h2><i class="fas fa-gamepad"></i> Interactive Charades Game</h2>

        <div class="current-topic" id="currentTopic">
          <div>
            <h3>Current Topic:</h3>
            <div class="topic-text" id="topicText">
              Click "Get Random Topic" to start!
            </div>
          </div>
        </div>

        <div class="timer-display" id="timerDisplay">30</div>

        <div class="game-controls">
          <button class="btn btn-accent" onclick="getRandomTopic()">
            <i class="fas fa-dice"></i> Get Random Topic
          </button>
          <button
            class="btn btn-secondary"
            onclick="startTimer()"
            id="startBtn"
          >
            <i class="fas fa-play"></i> Start Timer
          </button>
          <button class="btn" onclick="resetTimer()">
            <i class="fas fa-redo"></i> Reset
          </button>
          <button class="btn btn-secondary" onclick="toggleQuiz()">
            <i class="fas fa-brain"></i> Quick Quiz
          </button>
        </div>

        <div class="score-display" id="scoreDisplay">
          Correct: <span id="correctCount">0</span> | Skipped:
          <span id="skippedCount">0</span>
        </div>

        <div class="game-controls">
          <button
            class="btn btn-secondary"
            onclick="markCorrect()"
            id="correctBtn"
            disabled
          >
            <i class="fas fa-check"></i> Got It!
          </button>
          <button class="btn" onclick="skipTopic()" id="skipBtn" disabled>
            <i class="fas fa-forward"></i> Skip
          </button>
        </div>

        <div class="celebration" id="celebration">
          <h3>🎉 Great Job! 🎉</h3>
          <p>You're getting better at English expressions!</p>
        </div>

        <h3>Game Rules:</h3>
        <ul>
          <li>Click "Get Random Topic" to receive a random idiom or phrase</li>
          <li>Act out the phrase without speaking (30 seconds)</li>
          <li>Your team has to guess the expression</li>
          <li>Click "Got It!" if they guess correctly, or "Skip" to move on</li>
          <li>Try the interactive quiz to test your knowledge!</li>
        </ul>
      </div>
    </div>

    <script>
      // Game variables
      let gameTopics = [
        "Hit the sack",
        "Bite the bullet",
        "Break a leg",
        "Let the cat out of the bag",
        "Piece of cake",
        "Turn up",
        "Put off",
        "Run out of",
        "Look forward to",
        "Get along with",
        "As busy as a bee",
        "Like two peas in a pod",
        "As light as a feather",
        "Like a fish out of water",
        "As cool as a cucumber",
        "I'm so hungry I could eat a horse",
        "I've told you a million times",
        "This bag weighs a ton",
        "I nearly died laughing",
        "This is the worst day ever",
      ];

      let currentGameTopic = "";
      let timerInterval;
      let timeLeft = 30;
      let isTimerRunning = false;
      let correctCount = 0;
      let skippedCount = 0;
      let clickedItems = 0;
      let totalItems = document.querySelectorAll(".example-item").length;

      // Quiz variables
      let quizQuestions = [
        {
          question: "What does 'piece of cake' mean?",
          options: [
            "Very expensive",
            "Something easy",
            "A dessert",
            "Something broken",
          ],
          correct: 1,
        },
        {
          question: "If someone says 'break a leg', they mean:",
          options: ["Be careful", "Good luck", "Stop dancing", "Sit down"],
          correct: 1,
        },
        {
          question: "What does 'hit the sack' mean?",
          options: ["Go to bed", "Hit something", "Pack bags", "Exercise"],
          correct: 0,
        },
        {
          question: "'Like a fish out of water' means:",
          options: [
            "Very wet",
            "Good at swimming",
            "Uncomfortable in a situation",
            "Hungry",
          ],
          correct: 2,
        },
        {
          question: "If you 'let the cat out of the bag', you:",
          options: [
            "Free an animal",
            "Reveal a secret",
            "Go shopping",
            "Clean house",
          ],
          correct: 1,
        },
      ];

      let currentQuizIndex = 0;
      let quizScore = 0;
      let quizAnswered = false;

      // Dark mode functionality
      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
        const toggle = document.getElementById("darkModeToggle");
        const icon = toggle.querySelector("i");
        const text = toggle.querySelector("span") || toggle.childNodes[2];

        if (document.body.classList.contains("dark-mode")) {
          icon.className = "fas fa-sun";
          toggle.childNodes[2].textContent = " Light Mode";
          localStorage.setItem("darkMode", "enabled");
        } else {
          icon.className = "fas fa-moon";
          toggle.childNodes[2].textContent = " Dark Mode";
          localStorage.setItem("darkMode", "disabled");
        }
      }

      // Load dark mode preference
      document.addEventListener("DOMContentLoaded", function () {
        if (localStorage.getItem("darkMode") === "enabled") {
          document.body.classList.add("dark-mode");
          const toggle = document.getElementById("darkModeToggle");
          const icon = toggle.querySelector("i");
          icon.className = "fas fa-sun";
          toggle.childNodes[2].textContent = " Light Mode";
        }
      });

      document
        .getElementById("darkModeToggle")
        .addEventListener("click", toggleDarkMode);

      // Toggle example visibility
      function toggleExample(element) {
        const meaning = element.querySelector(".meaning");
        const sentence = element.querySelector(".sentence");

        meaning.classList.toggle("show");
        sentence.classList.toggle("show");

        // Add animation
        element.classList.add("pulse");
        setTimeout(() => element.classList.remove("pulse"), 600);

        // Update progress
        if (meaning.classList.contains("show")) {
          clickedItems++;
        } else {
          clickedItems--;
        }
        updateProgress();
      }

      // Update progress bar
      function updateProgress() {
        const progress = (clickedItems / totalItems) * 100;
        document.getElementById("progressFill").style.width = progress + "%";
      }

      // Highlight conversation starter
      function highlightQuestion(element) {
        // Remove previous highlights
        document.querySelectorAll(".conversation-starters li").forEach((li) => {
          li.style.background = "";
        });

        // Highlight current question
        element.style.background =
          "linear-gradient(135deg, rgba(79, 70, 229, 0.3), rgba(79, 70, 229, 0.5))";
        element.style.color = "white";
        element.style.fontWeight = "bold";

        // Add animation
        element.classList.add("pulse");
        setTimeout(() => element.classList.remove("pulse"), 600);
      }

      // Game functions
      function getRandomTopic() {
        const randomIndex = Math.floor(Math.random() * gameTopics.length);
        currentGameTopic = gameTopics[randomIndex];
        document.getElementById("topicText").textContent = currentGameTopic;

        // Add animation
        const topicElement = document.getElementById("currentTopic");
        topicElement.classList.add("fade-in");
        setTimeout(() => topicElement.classList.remove("fade-in"), 500);

        // Reset timer
        resetTimer();
      }

      function startTimer() {
        if (!isTimerRunning && currentGameTopic) {
          isTimerRunning = true;
          document.getElementById("startBtn").disabled = true;
          document.getElementById("correctBtn").disabled = false;
          document.getElementById("skipBtn").disabled = false;

          timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById("timerDisplay").textContent = timeLeft;

            if (timeLeft <= 0) {
              clearInterval(timerInterval);
              isTimerRunning = false;
              document.getElementById("startBtn").disabled = false;
              document.getElementById("correctBtn").disabled = true;
              document.getElementById("skipBtn").disabled = true;

              // Show time's up message
              showCelebration("⏰ Time's Up! ⏰", "Try the next topic!");
            }
          }, 1000);
        }
      }

      function resetTimer() {
        clearInterval(timerInterval);
        isTimerRunning = false;
        timeLeft = 30;
        document.getElementById("timerDisplay").textContent = timeLeft;
        document.getElementById("startBtn").disabled = false;
        document.getElementById("correctBtn").disabled = true;
        document.getElementById("skipBtn").disabled = true;
      }

      function markCorrect() {
        correctCount++;
        document.getElementById("correctCount").textContent = correctCount;
        showCelebration("🎉 Correct! 🎉", "Great job acting that out!");
        resetTimer();
        setTimeout(() => getRandomTopic(), 1500);
      }

      function skipTopic() {
        skippedCount++;
        document.getElementById("skippedCount").textContent = skippedCount;
        resetTimer();
        getRandomTopic();
      }

      function showCelebration(title, message) {
        const celebration = document.getElementById("celebration");
        celebration.innerHTML = `<h3>${title}</h3><p>${message}</p>`;
        celebration.classList.add("show");

        setTimeout(() => {
          celebration.classList.remove("show");
        }, 3000);
      }

      // Quiz functions
      function toggleQuiz() {
        const quizMode = document.getElementById("quizMode");
        if (quizMode.style.display === "none") {
          quizMode.style.display = "block";
          startQuiz();
        } else {
          quizMode.style.display = "none";
        }
      }

      function startQuiz() {
        currentQuizIndex = 0;
        quizScore = 0;
        quizAnswered = false;
        showQuizQuestion();
      }

      function showQuizQuestion() {
        if (currentQuizIndex < quizQuestions.length) {
          const question = quizQuestions[currentQuizIndex];
          document.getElementById("quizQuestion").textContent =
            question.question;

          const optionsContainer = document.getElementById("quizOptions");
          optionsContainer.innerHTML = "";

          question.options.forEach((option, index) => {
            const button = document.createElement("button");
            button.className = "quiz-option";
            button.textContent = option;
            button.onclick = () => selectQuizAnswer(index);
            optionsContainer.appendChild(button);
          });

          document.getElementById(
            "quizScore"
          ).textContent = `Score: ${quizScore}/${currentQuizIndex}`;
          quizAnswered = false;
        } else {
          // Quiz completed
          showCelebration(
            "🎓 Quiz Complete! 🎓",
            `Final Score: ${quizScore}/${quizQuestions.length}`
          );
          setTimeout(() => toggleQuiz(), 3000);
        }
      }

      function selectQuizAnswer(selectedIndex) {
        if (quizAnswered) return;

        const question = quizQuestions[currentQuizIndex];
        const options = document.querySelectorAll(".quiz-option");

        options.forEach((option, index) => {
          if (index === question.correct) {
            option.classList.add("correct");
          } else if (index === selectedIndex && index !== question.correct) {
            option.classList.add("incorrect");
          }
        });

        if (selectedIndex === question.correct) {
          quizScore++;
        }

        quizAnswered = true;
        document.getElementById(
          "quizScore"
        ).textContent = `Score: ${quizScore}/${currentQuizIndex + 1}`;
      }

      function nextQuizQuestion() {
        if (quizAnswered) {
          currentQuizIndex++;
          showQuizQuestion();
        }
      }

      // Initialize progress
      updateProgress();

      // Add some interactive effects
      document.addEventListener("DOMContentLoaded", function () {
        // Add hover effects to buttons
        document.querySelectorAll(".btn").forEach((button) => {
          button.addEventListener("mouseenter", function () {
            this.style.transform = "translateY(-2px)";
          });

          button.addEventListener("mouseleave", function () {
            this.style.transform = "translateY(0)";
          });
        });

        // Add click effects to example items
        document.querySelectorAll(".example-item").forEach((item) => {
          item.addEventListener("click", function () {
            this.style.transform = "scale(1.02)";
            setTimeout(() => {
              this.style.transform = "scale(1)";
            }, 200);
          });
        });
      });

      // Add keyboard shortcuts
      document.addEventListener("keydown", function (event) {
        if (event.key === "Enter" && isTimerRunning) {
          markCorrect();
        } else if (event.key === " " && isTimerRunning) {
          event.preventDefault();
          skipTopic();
        } else if (event.key === "r" || event.key === "R") {
          if (currentGameTopic) {
            resetTimer();
          }
        }
      });

      // Add touch support for mobile
      let touchStartY = 0;
      document.addEventListener("touchstart", function (event) {
        touchStartY = event.touches[0].clientY;
      });

      document.addEventListener("touchend", function (event) {
        const touchEndY = event.changedTouches[0].clientY;
        const deltaY = touchStartY - touchEndY;

        // Swipe up to get new topic
        if (deltaY > 50 && !isTimerRunning) {
          getRandomTopic();
        }
      });

      // Performance optimization - lazy loading effects
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = "1";
            entry.target.style.transform = "translateY(0)";
          }
        });
      }, observerOptions);

      // Observe all sections for scroll animations
      document
        .querySelectorAll(
          ".language-section, .conversation-starters, .game-section"
        )
        .forEach((section) => {
          section.style.opacity = "0";
          section.style.transform = "translateY(20px)";
          section.style.transition = "opacity 0.6s ease, transform 0.6s ease";
          observer.observe(section);
        });
    </script>
  </body>
</html>
