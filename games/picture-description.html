<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Picture Puzzle Challenge - Fun Visual Learning Game | ESL Fun Online
    </title>
    <meta
      name="description"
      content="Match pictures with descriptions, spot differences, and solve visual puzzles! Interactive picture challenges for ESL learners with no typing required."
    />
    <meta
      name="keywords"
      content="picture puzzle game, visual learning, image matching, spot the difference, ESL visual game, interactive pictures, no typing game"
    />
    <meta name="author" content="ESL Fun Online" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:title"
      content="Picture Puzzle Challenge - Fun Visual Learning Game | ESL Fun Online"
    />
    <meta
      property="og:description"
      content="Match pictures with descriptions, spot differences, and solve visual puzzles! Fun interactive challenges for ESL learners."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://yoursite.com/games/picture-description.html"
    />
    <meta property="og:image" content="../images/picture-game-preview.jpg" />

    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://images.unsplash.com" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Schema.org markup -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Game",
        "name": "Picture Puzzle Challenge",
        "description": "Interactive picture matching and description game for ESL learners with visual recognition challenges",
        "url": "https://yoursite.com/games/picture-description.html",
        "genre": "Educational Game",
        "audience": {
          "@type": "EducationalAudience",
          "educationalRole": "student",
          "name": "ESL Learners"
        },
        "educationalLevel": "Beginner to Advanced",
        "learningResourceType": "Interactive Game",
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "accessibilityFeature": [
          "alternativeText",
          "keyboardNavigation",
          "ariaLabels",
          "timingControl"
        ],
        "educationalUse": [
          "vocabulary building",
          "visual recognition",
          "reading comprehension"
        ],
        "interactivityType": "active",
        "keywords": "picture matching, visual learning, ESL game, vocabulary"
      }
    </script>

    <style>
      :root {
        --primary-color: #4f46e5;
        --primary-hover: #3730a3;
        --secondary-color: #f59e0b;
        --accent-color: #10b981;
        --danger-color: #ef4444;
        --success-color: #22c55e;
        --purple-color: #8b5cf6;
        --pink-color: #ec4899;
        --cyan-color: #06b6d4;
        --orange-color: #f97316;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --bg-primary: #ffffff;
        --bg-secondary: #f8fafc;
        --bg-tertiary: #f1f5f9;
        --border-color: #e2e8f0;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gradient-secondary: linear-gradient(
          135deg,
          #ff9a9e 0%,
          #fecfef 50%,
          #fecfef 100%
        );
        --gradient-success: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        --gradient-danger: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--gradient-primary);
        min-height: 100vh;
        color: var(--text-primary);
        padding: 1rem;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 20% 20%,
            rgba(255, 255, 255, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(255, 255, 255, 0.1) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 1;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .game-container {
        max-width: 1400px;
        margin: 0 auto;
        background: var(--bg-primary);
        border-radius: 24px;
        box-shadow: var(--shadow-lg);
        padding: 2rem;
        position: relative;
        z-index: 2;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        animation: fadeInUp 0.8s ease-out;
      }

      .game-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--gradient-secondary);
        opacity: 0.05;
        border-radius: 24px;
        z-index: -1;
      }

      .game-header {
        text-align: center;
        margin-bottom: 2rem;
        animation: slideInLeft 0.6s ease-out;
      }

      .game-header h1 {
        font-family: "Poppins", sans-serif;
        font-size: clamp(2rem, 4vw, 2.8rem);
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--purple-color)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        animation: bounce 2s ease-in-out infinite;
      }

      .game-header p {
        color: var(--text-secondary);
        font-size: clamp(1rem, 2.5vw, 1.2rem);
        font-weight: 500;
      }

      .game-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
        animation: slideInLeft 1s ease-out;
      }

      .stat-card {
        background: linear-gradient(
          135deg,
          var(--bg-secondary),
          rgba(255, 255, 255, 0.8)
        );
        padding: 1.5rem;
        border-radius: 20px;
        text-align: center;
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .stat-value {
        font-size: 2rem;
        font-weight: bold;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--purple-color)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
      }

      .stat-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .challenge-area {
        background: var(--gradient-success);
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        animation: slideInRight 0.8s ease-out;
        position: relative;
        overflow: hidden;
        margin-bottom: 2rem;
      }

      .challenge-area::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        animation: spin 10s linear infinite;
        border-radius: 50%;
      }

      .challenge-content {
        position: relative;
        z-index: 1;
      }

      .challenge-title {
        font-size: clamp(1.5rem, 3vw, 2rem);
        font-weight: bold;
        color: var(--text-primary);
        margin-bottom: 1rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .progress-bar {
        width: 100%;
        height: 12px;
        background: var(--bg-tertiary);
        border-radius: 6px;
        margin: 1rem 0;
        overflow: hidden;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--success-color),
          var(--accent-color)
        );
        border-radius: 6px;
        transition: width 0.5s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .challenge-timer {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--orange-color);
        text-align: center;
        margin: 1rem 0;
        animation: pulse 2s ease-in-out infinite;
      }

      .challenge-description {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 1.5rem;
        margin: 1.5rem 0;
        font-size: clamp(1rem, 2.5vw, 1.2rem);
        line-height: 1.6;
        color: var(--text-primary);
        text-align: center;
        font-weight: 500;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .images-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
      }

      .image-card {
        background: var(--bg-primary);
        border-radius: 15px;
        padding: 1rem;
        box-shadow: var(--shadow);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        border: 3px solid transparent;
      }

      .image-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        transition: left 0.5s;
      }

      .image-card:hover::before {
        left: 100%;
      }

      .image-card:hover {
        transform: translateY(-10px) scale(1.05);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      .image-card.selected {
        border-color: var(--primary-color);
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 15px 30px rgba(79, 70, 229, 0.3);
      }

      .image-card.correct {
        border-color: var(--success-color);
        animation: correctPulse 0.6s ease-out;
      }

      .image-card.incorrect {
        border-color: var(--danger-color);
        animation: shake 0.5s ease-in-out;
      }

      @keyframes correctPulse {
        0% {
          transform: translateY(-5px) scale(1.02);
        }
        50% {
          transform: translateY(-5px) scale(1.1);
        }
        100% {
          transform: translateY(-5px) scale(1.02);
        }
      }

      .card-image {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 0.75rem;
      }

      .card-label {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.9rem;
      }

      .challenge-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }

      .option-card {
        background: var(--bg-primary);
        border: 3px solid var(--border-color);
        border-radius: 15px;
        padding: 1.5rem;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-align: center;
        font-weight: 600;
        font-size: 1.1rem;
        position: relative;
        overflow: hidden;
      }

      .option-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(79, 70, 229, 0.1),
          transparent
        );
        transition: left 0.5s;
      }

      .option-card:hover::before {
        left: 100%;
      }

      .option-card:hover {
        transform: translateY(-5px) scale(1.02);
        border-color: var(--primary-color);
        box-shadow: 0 10px 25px rgba(79, 70, 229, 0.2);
      }

      .option-card.selected {
        border-color: var(--primary-color);
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--purple-color)
        );
        color: white;
        transform: translateY(-5px) scale(1.02);
      }

      .option-card.correct {
        border-color: var(--success-color);
        background: var(--success-color);
        color: white;
        animation: correctPulse 0.6s ease-out;
      }

      .option-card.incorrect {
        border-color: var(--danger-color);
        background: var(--danger-color);
        color: white;
        animation: shake 0.5s ease-in-out;
      }

      .game-controls {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin: 2rem 0;
        animation: fadeInUp 1.2s ease-out;
      }

      .btn {
        padding: clamp(0.75rem, 2vw, 1rem) clamp(1.5rem, 4vw, 2rem);
        border: none;
        border-radius: 15px;
        font-size: clamp(0.9rem, 2.5vw, 1.1rem);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        position: relative;
        overflow: hidden;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: var(--shadow);
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.6s;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--purple-color)
        );
        color: white;
      }

      .btn-primary:hover {
        background: linear-gradient(135deg, var(--primary-hover), #7c3aed);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(79, 70, 229, 0.4);
      }

      .btn-secondary {
        background: linear-gradient(
          135deg,
          var(--bg-tertiary),
          rgba(255, 255, 255, 0.8)
        );
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .btn-secondary:hover {
        background: linear-gradient(
          135deg,
          var(--secondary-color),
          var(--orange-color)
        );
        color: white;
        border-color: var(--secondary-color);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4);
      }

      .btn-success {
        background: linear-gradient(
          135deg,
          var(--success-color),
          var(--accent-color)
        );
        color: white;
      }

      .btn-success:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(34, 197, 94, 0.4);
      }

      .btn-hint {
        background: linear-gradient(
          135deg,
          var(--secondary-color),
          var(--orange-color)
        );
        color: white;
      }

      .btn-hint:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4);
      }

      .feedback-section {
        background: var(--gradient-success);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        display: none;
        animation: fadeInUp 0.6s ease-out;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .feedback-section.show {
        display: block;
      }

      .feedback-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        text-align: center;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .feedback-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
      }

      .feedback-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 1.5rem;
        border-left: 6px solid var(--primary-color);
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .feedback-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .feedback-card.positive {
        border-left-color: var(--success-color);
      }

      .feedback-card.suggestion {
        border-left-color: var(--secondary-color);
      }

      .feedback-card h5 {
        margin-bottom: 1rem;
        color: var(--text-primary);
        font-size: 1.1rem;
        font-weight: 600;
      }

      .feedback-card p {
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.6;
      }

      .game-message {
        margin: 1.5rem 0;
        padding: 1.5rem;
        border-radius: 15px;
        font-weight: 600;
        text-align: center;
        font-size: 1.2rem;
        animation: fadeInUp 0.5s ease-out;
        backdrop-filter: blur(10px);
        border: 2px solid transparent;
      }

      .message-success {
        background: linear-gradient(
          135deg,
          rgba(34, 197, 94, 0.15),
          rgba(16, 185, 129, 0.15)
        );
        color: var(--success-color);
        border-color: rgba(34, 197, 94, 0.3);
        box-shadow: 0 4px 15px rgba(34, 197, 94, 0.2);
      }

      .message-info {
        background: linear-gradient(
          135deg,
          rgba(79, 70, 229, 0.15),
          rgba(139, 92, 246, 0.15)
        );
        color: var(--primary-color);
        border-color: rgba(79, 70, 229, 0.3);
        box-shadow: 0 4px 15px rgba(79, 70, 229, 0.2);
      }

      .message-danger {
        background: linear-gradient(
          135deg,
          rgba(239, 68, 68, 0.15),
          rgba(248, 113, 113, 0.15)
        );
        color: var(--danger-color);
        border-color: rgba(239, 68, 68, 0.3);
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.2);
      }

      .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        background: var(--success-color);
        animation: confetti-fall 3s linear infinite;
        pointer-events: none;
        z-index: 1000;
      }

      @keyframes confetti-fall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0;
        }
      }

      /* Accessibility Styles */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      /* Focus visible styles for better keyboard navigation */
      .btn:focus-visible,
      .option-card:focus-visible,
      .image-card:focus-visible {
        outline: 3px solid var(--primary-color);
        outline-offset: 3px;
        box-shadow: 0 0 0 6px rgba(79, 70, 229, 0.2);
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .images-grid {
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: 1rem;
        }

        .challenge-options {
          grid-template-columns: 1fr;
          gap: 0.75rem;
        }
      }

      @media (max-width: 768px) {
        .game-container {
          padding: 1.5rem;
          margin: 0.5rem;
          border-radius: 20px;
        }

        .game-header h1 {
          font-size: clamp(1.5rem, 5vw, 2rem);
        }

        .challenge-area {
          padding: 1.5rem;
        }

        .images-grid {
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 0.75rem;
        }

        .game-stats {
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
        }

        .stat-card {
          padding: 1rem;
        }

        .stat-value {
          font-size: 1.5rem;
        }

        .feedback-grid {
          grid-template-columns: 1fr;
        }

        .btn {
          padding: 0.75rem 1.5rem;
          font-size: 0.9rem;
        }
      }

      @media (max-width: 480px) {
        .game-container {
          padding: 1rem;
          margin: 0.25rem;
        }

        .challenge-area {
          padding: 1rem;
        }

        .images-grid {
          grid-template-columns: 1fr;
          gap: 0.5rem;
        }

        .game-stats {
          grid-template-columns: repeat(4, 1fr);
          gap: 0.5rem;
        }

        .stat-card {
          padding: 0.75rem 0.5rem;
        }

        .game-controls {
          gap: 0.5rem;
        }
      }
    </style>
  </head>

  <body>
    <div class="game-container" role="main">
      <header class="game-header">
        <h1>
          <i class="fas fa-puzzle-piece" aria-hidden="true"></i>
          Picture Puzzle Challenge
        </h1>
        <p>
          Match pictures with descriptions, solve visual puzzles, and have fun
          learning!
        </p>
      </header>

      <!-- Game Stats -->
      <div class="game-stats" role="region" aria-label="Game Statistics">
        <div class="stat-card" aria-labelledby="level-label">
          <div class="stat-value" id="currentLevel" aria-live="polite">1</div>
          <div class="stat-label" id="level-label">Level</div>
        </div>
        <div class="stat-card" aria-labelledby="score-label">
          <div class="stat-value" id="totalScore" aria-live="polite">0</div>
          <div class="stat-label" id="score-label">Score</div>
        </div>
        <div class="stat-card" aria-labelledby="correct-label">
          <div class="stat-value" id="correctAnswers" aria-live="polite">0</div>
          <div class="stat-label" id="correct-label">Correct</div>
        </div>
        <div class="stat-card" aria-labelledby="streak-label">
          <div class="stat-value" id="streak" aria-live="polite">0</div>
          <div class="stat-label" id="streak-label">Streak</div>
        </div>
        <div class="stat-card" aria-labelledby="time-label">
          <div class="stat-value" id="timeRemaining" aria-live="polite">60</div>
          <div class="stat-label" id="time-label">Time</div>
        </div>
      </div>

      <!-- Challenge Area -->
      <div
        class="challenge-area"
        role="region"
        aria-label="Game Challenge Area"
      >
        <div class="challenge-content">
          <div
            class="challenge-title"
            id="challengeTitle"
            role="heading"
            aria-level="2"
          >
            <i class="fas fa-star" aria-hidden="true"></i>
            Match the Picture to Its Description!
          </div>

          <div
            class="progress-bar"
            role="progressbar"
            aria-valuenow="0"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-label="Game Progress"
          >
            <div
              class="progress-fill"
              id="progressFill"
              style="width: 0%"
            ></div>
          </div>

          <div
            class="challenge-timer"
            id="challengeTimer"
            style="display: none"
            aria-live="polite"
          >
            ⏰ 60
          </div>

          <div class="challenge-description" id="challengeDescription">
            Click 'Start Challenge' to begin your picture puzzle adventure!
          </div>

          <div
            class="images-grid"
            id="imagesGrid"
            role="list"
            aria-label="Picture options"
          >
            <!-- Images will be populated by JavaScript -->
          </div>

          <div
            class="challenge-options"
            id="challengeOptions"
            style="display: none"
            role="radiogroup"
            aria-label="Answer choices"
          >
            <!-- Options will be populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Game Controls -->
      <div class="game-controls" role="region" aria-label="Game Controls">
        <button
          class="btn btn-primary"
          onclick="startGame()"
          id="startBtn"
          aria-label="Start the picture puzzle challenge"
        >
          <i class="fas fa-play" aria-hidden="true"></i> Start Challenge
        </button>
        <button
          class="btn btn-secondary"
          onclick="nextChallenge()"
          id="nextBtn"
          style="display: none"
          aria-label="Move to next challenge"
        >
          <i class="fas fa-forward" aria-hidden="true"></i> Next Challenge
        </button>
        <button
          class="btn btn-hint"
          onclick="getHint()"
          id="hintBtn"
          style="display: none"
          aria-label="Get a hint for the current challenge"
        >
          <i class="fas fa-lightbulb" aria-hidden="true"></i> Hint (−25 pts)
        </button>
        <button
          class="btn btn-success"
          onclick="resetGame()"
          id="resetBtn"
          aria-label="Reset the game and start over"
        >
          <i class="fas fa-refresh" aria-hidden="true"></i> Reset Game
        </button>
      </div>

      <!-- Feedback Section -->
      <div
        class="feedback-section"
        id="feedbackSection"
        role="region"
        aria-label="Game Results and Feedback"
        aria-live="polite"
      >
        <div class="feedback-title">
          <i class="fas fa-trophy" aria-hidden="true"></i> Challenge Results
        </div>
        <div class="feedback-grid" id="feedbackGrid" role="list">
          <!-- Feedback cards will be populated by JavaScript -->
        </div>
      </div>

      <div
        id="gameMessage"
        class="game-message"
        style="display: none"
        role="alert"
        aria-live="assertive"
      ></div>
    </div>

    <script>
      // Game state
      let gameState = {
        currentLevel: 1,
        totalScore: 0,
        correctAnswers: 0,
        streak: 0,
        bestStreak: 0,
        timeRemaining: 60,
        gameActive: false,
        currentChallenge: null,
        gameTimer: null,
        challenges: [],
        challengeIndex: 0,
        gameMode: "match", // 'match', 'spot', 'describe'
        hintsUsed: 0,
      };

      // Image database for the puzzle game
      const imageDatabase = {
        people: [
          {
            id: "family_picnic",
            name: "Family Picnic",
            src: "https://images.unsplash.com/photo-1527004760525-5e8fac6b3ee1?w=400",
            alt: "Family having a picnic in the park",
            category: "people",
            description:
              "A happy family enjoying a meal outdoors on a checkered blanket",
          },
          {
            id: "business_meeting",
            name: "Business Meeting",
            src: "https://images.unsplash.com/photo-1521737852567-6949f3f9f2b5?w=400",
            alt: "People in a business meeting",
            category: "people",
            description:
              "Professional colleagues discussing work in a modern office setting",
          },
          {
            id: "children_playing",
            name: "Children Playing",
            src: "https://images.unsplash.com/photo-1503454537195-1dcabb73ffb9?w=400",
            alt: "Children playing in playground",
            category: "people",
            description:
              "Young children having fun on playground equipment in a sunny park",
          },
        ],
        nature: [
          {
            id: "mountain_hiker",
            name: "Mountain Hiker",
            src: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400",
            alt: "Hiker on mountain peak",
            category: "nature",
            description:
              "A person with a backpack standing on a mountain peak with a beautiful view",
          },
          {
            id: "beach_sunset",
            name: "Beach Sunset",
            src: "https://images.unsplash.com/photo-1506197603052-3cc9c3a201bd?w=400",
            alt: "Beautiful sunset over ocean",
            category: "nature",
            description:
              "A stunning sunset over the ocean with waves gently reaching the shore",
          },
          {
            id: "forest_path",
            name: "Forest Path",
            src: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400",
            alt: "Path through green forest",
            category: "nature",
            description:
              "A winding path through a dense green forest with tall trees",
          },
        ],
        places: [
          {
            id: "city_street",
            name: "City Street",
            src: "https://images.unsplash.com/photo-1514924013411-cbf25faa35bb?w=400",
            alt: "Busy city street with buildings",
            category: "places",
            description:
              "A busy urban street with tall buildings, cars, and people walking",
          },
          {
            id: "coffee_shop",
            name: "Coffee Shop",
            src: "https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=400",
            alt: "Cozy coffee shop interior",
            category: "places",
            description:
              "A cozy café with people sitting at tables, drinking coffee and reading",
          },
          {
            id: "library_study",
            name: "Library",
            src: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400",
            alt: "Students studying in library",
            category: "places",
            description:
              "Students studying quietly in a library surrounded by books",
          },
        ],
        activities: [
          {
            id: "garden_flowers",
            name: "Gardening",
            src: "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=400",
            alt: "Person gardening with flowers",
            category: "activities",
            description:
              "A colorful garden filled with blooming flowers and butterflies",
          },
          {
            id: "kitchen_cooking",
            name: "Cooking",
            src: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400",
            alt: "Person cooking in kitchen",
            category: "activities",
            description:
              "Someone preparing a delicious meal in a modern, well-equipped kitchen",
          },
          {
            id: "park_playground",
            name: "Playing",
            src: "https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400",
            alt: "Children playing in park",
            category: "activities",
            description:
              "Children playing happily on swings and slides in a sunny park",
          },
        ],
      };

      // Challenge types and data
      const challengeTypes = {
        match: {
          title: "Match the Picture!",
          description: "Select the image that best matches this description:",
          icon: "fas fa-link",
        },
        spot: {
          title: "Spot the Difference!",
          description: "Find what's different in these images:",
          icon: "fas fa-search",
        },
        describe: {
          title: "Quick Description!",
          description: "Choose the best description for this image:",
          icon: "fas fa-comment",
        },
      };

      // Load game state from localStorage
      function loadGameState() {
        const saved = localStorage.getItem("picturePuzzleGame");
        if (saved) {
          const savedState = JSON.parse(saved);
          gameState = { ...gameState, ...savedState };
          updateDisplay();
        }
      }

      // Save game state to localStorage
      function saveGameState() {
        localStorage.setItem(
          "picturePuzzleGame",
          JSON.stringify({
            currentLevel: gameState.currentLevel,
            totalScore: gameState.totalScore,
            correctAnswers: gameState.correctAnswers,
            streak: gameState.streak,
            bestStreak: gameState.bestStreak,
          })
        );
      }

      // Enhanced sound effects with chords
      const playSound = (type) => {
        try {
          const audioContext = new (window.AudioContext ||
            window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();

          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);

          if (type === "success") {
            oscillator.frequency.setValueAtTime(
              523.25,
              audioContext.currentTime
            );
            oscillator.frequency.setValueAtTime(
              659.25,
              audioContext.currentTime + 0.1
            );
            oscillator.frequency.setValueAtTime(
              783.99,
              audioContext.currentTime + 0.2
            );
          } else if (type === "error") {
            oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(
              196,
              audioContext.currentTime + 0.1
            );
          } else if (type === "hint") {
            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
          }

          oscillator.type = "sine";
          gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(
            0.01,
            audioContext.currentTime + 0.3
          );

          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.3);
        } catch (e) {
          // Audio not supported
        }
      };

      // Screen reader announcements
      function announceToScreenReader(message) {
        const announcement = document.createElement("div");
        announcement.setAttribute("role", "status");
        announcement.setAttribute("aria-live", "polite");
        announcement.className = "sr-only";
        announcement.textContent = message;
        document.body.appendChild(announcement);
        setTimeout(() => announcement.remove(), 1000);
      }

      // Timer functions
      function startTimer() {
        gameState.timeRemaining = 60 + gameState.currentLevel * 10;
        updateTimerDisplay();
        gameState.gameTimer = setInterval(() => {
          gameState.timeRemaining--;
          updateTimerDisplay();

          if (gameState.timeRemaining <= 0) {
            endGame();
          }
        }, 1000);
      }

      function stopTimer() {
        if (gameState.gameTimer) {
          clearInterval(gameState.gameTimer);
          gameState.gameTimer = null;
        }
      }

      function updateTimerDisplay() {
        const timerElement = document.getElementById("timeRemaining");
        timerElement.textContent = gameState.timeRemaining;

        if (gameState.timeRemaining <= 10) {
          timerElement.style.color = "var(--danger-color)";
          timerElement.style.animation = "pulse 1s ease-in-out infinite";
        } else {
          timerElement.style.color = "var(--orange-color)";
          timerElement.style.animation = "none";
        }
      }

      // Update display
      function updateDisplay() {
        document.getElementById("currentLevel").textContent =
          gameState.currentLevel;
        document.getElementById("totalScore").textContent =
          gameState.totalScore;
        document.getElementById("correctAnswers").textContent =
          gameState.correctAnswers;
        document.getElementById("streak").textContent = gameState.streak;
        document.getElementById("timeRemaining").textContent =
          gameState.timeRemaining;
      }

      // Generate challenges
      function generateChallenges() {
        gameState.challenges = [];
        const challengesPerLevel = 5;

        for (let i = 0; i < challengesPerLevel; i++) {
          const images = getRandomImages(4);
          const correctImage = images[0];
          const challenge = {
            type: "match",
            description: generateDescription(correctImage),
            images: shuffleArray(images),
            correctAnswer: correctImage.id,
            options: null,
          };
          gameState.challenges.push(challenge);
        }

        // Add some description challenges
        for (let i = 0; i < 2; i++) {
          const image = getRandomImages(1)[0];
          const options = generateDescriptionOptions(image);
          const challenge = {
            type: "describe",
            image: image,
            description: "Choose the best description for this image:",
            images: [image],
            options: options,
            correctAnswer: 0, // First option is always correct
          };
          gameState.challenges.push(challenge);
        }

        gameState.challenges = shuffleArray(gameState.challenges);
      }

      function getRandomImages(count) {
        const availableImages = Object.values(imageDatabase).flat();
        const selected = [];
        const used = new Set();

        while (
          selected.length < count &&
          selected.length < availableImages.length
        ) {
          const randomIndex = Math.floor(
            Math.random() * availableImages.length
          );
          const image = availableImages[randomIndex];

          if (!used.has(image.id)) {
            selected.push(image);
            used.add(image.id);
          }
        }

        return selected;
      }

      function generateDescription(image) {
        const descriptions = {
          family_picnic:
            "A happy family enjoying a meal outdoors on a checkered blanket",
          mountain_hiker:
            "A person with a backpack standing on a mountain peak with a beautiful view",
          beach_sunset:
            "A stunning sunset over the ocean with waves gently reaching the shore",
          city_street:
            "A busy urban street with tall buildings, cars, and people walking",
          forest_path:
            "A winding path through a dense green forest with tall trees",
          coffee_shop:
            "A cozy café with people sitting at tables, drinking coffee and reading",
          library_study:
            "Students studying quietly in a library surrounded by books",
          garden_flowers:
            "A colorful garden filled with blooming flowers and butterflies",
          kitchen_cooking:
            "Someone preparing a delicious meal in a modern, well-equipped kitchen",
          park_playground:
            "Children playing happily on swings and slides in a sunny park",
        };

        return (
          descriptions[image.id] ||
          image.description ||
          "A beautiful and interesting scene"
        );
      }

      function generateDescriptionOptions(image) {
        const correctDescription = generateDescription(image);
        const wrongDescriptions = [
          "A dark and stormy scene with heavy rain",
          "An empty room with no people or objects",
          "A black and white photograph from the 1950s",
          "A cartoon drawing with bright cartoon characters",
        ];

        const options = [correctDescription];
        for (let i = 0; i < 3; i++) {
          options.push(wrongDescriptions[i]);
        }

        return shuffleArray(options);
      }

      function shuffleArray(array) {
        const newArray = [...array];
        for (let i = newArray.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
        }
        return newArray;
      }

      // Start game
      function startGame() {
        gameState.gameActive = true;
        gameState.challengeIndex = 0;
        gameState.totalScore = 0;
        gameState.correctAnswers = 0;
        gameState.streak = 0;
        gameState.hintsUsed = 0;

        generateChallenges();
        startTimer();

        document.getElementById("startBtn").style.display = "none";
        document.getElementById("nextBtn").style.display = "inline-flex";
        document.getElementById("hintBtn").style.display = "inline-flex";

        loadNextChallenge();
        playSound(800, 200);
        showMessage("Game started! Good luck!", "success");
      }

      function resetGame() {
        gameState.gameActive = false;
        gameState.currentLevel = 1;
        gameState.challengeIndex = 0;
        gameState.timeRemaining = 60;

        stopTimer();

        document.getElementById("startBtn").style.display = "inline-flex";
        document.getElementById("nextBtn").style.display = "none";
        document.getElementById("hintBtn").style.display = "none";
        document.getElementById("feedbackSection").classList.remove("show");

        document.getElementById("challengeDescription").textContent =
          "Click 'Start Challenge' to begin your picture puzzle adventure!";
        document.getElementById("imagesGrid").innerHTML = "";
        document.getElementById("challengeOptions").style.display = "none";

        updateDisplay();
        playSound(600, 200);
        showMessage("Game reset! Ready for a new challenge?", "info");
      }

      function endGame() {
        gameState.gameActive = false;
        stopTimer();

        const finalScore = gameState.totalScore;
        const accuracy =
          gameState.challengeIndex > 0
            ? Math.round(
                (gameState.correctAnswers / gameState.challengeIndex) * 100
              )
            : 0;

        let message = `🎉 Game Over! Final Score: ${finalScore}`;
        message += `\n📊 Accuracy: ${accuracy}%`;
        message += `\n🔥 Best Streak: ${gameState.streak}`;

        if (accuracy >= 80) {
          message += "\n🏆 Excellent performance!";
          createConfetti();
        } else if (accuracy >= 60) {
          message += "\n👍 Good job!";
        } else {
          message += "\n💪 Keep practicing!";
        }

        showFeedback([
          {
            title: "Final Results",
            content: message,
            type: "positive",
          },
        ]);

        saveGameState();

        document.getElementById("startBtn").style.display = "inline-flex";
        document.getElementById("nextBtn").style.display = "none";
        document.getElementById("hintBtn").style.display = "none";

        playSound(400, 500);
      }

      // Load next challenge
      function loadNextChallenge() {
        if (gameState.challengeIndex >= gameState.challenges.length) {
          // Level complete
          gameState.currentLevel++;
          gameState.challengeIndex = 0;
          generateChallenges();

          showMessage(
            `🎉 Level ${gameState.currentLevel - 1} Complete! Starting Level ${
              gameState.currentLevel
            }`,
            "success"
          );
          updateDisplay();
        }

        const challenge = gameState.challenges[gameState.challengeIndex];
        gameState.currentChallenge = challenge;

        displayChallenge(challenge);
        updateProgressBar();
      }

      function displayChallenge(challenge) {
        const titleElement = document.getElementById("challengeTitle");
        const descElement = document.getElementById("challengeDescription");
        const imagesGrid = document.getElementById("imagesGrid");
        const optionsGrid = document.getElementById("challengeOptions");

        // Update title and description
        const challengeInfo = challengeTypes[challenge.type];
        titleElement.innerHTML = `<i class="${challengeInfo.icon}"></i> ${challengeInfo.title}`;
        descElement.textContent = challenge.description;

        // Clear previous content
        imagesGrid.innerHTML = "";
        optionsGrid.innerHTML = "";

        if (challenge.type === "match") {
          // Display images for matching
          challenge.images.forEach((image, index) => {
            const imageCard = createImageCard(image, index);
            imagesGrid.appendChild(imageCard);
          });
          optionsGrid.style.display = "none";
        } else if (challenge.type === "describe") {
          // Display single image
          const imageCard = createImageCard(challenge.image, 0);
          imageCard.classList.add("single-image");
          imagesGrid.appendChild(imageCard);

          // Display description options
          challenge.options.forEach((option, index) => {
            const optionCard = createOptionCard(option, index);
            optionsGrid.appendChild(optionCard);
          });
          optionsGrid.style.display = "grid";
        }
      }

      function createImageCard(image, index) {
        const card = document.createElement("div");
        card.className = "image-card";
        card.dataset.index = index;
        card.setAttribute("role", "radio");
        card.setAttribute("aria-checked", "false");
        card.setAttribute("tabindex", "0");
        card.setAttribute("aria-label", `${image.name}: ${image.alt}`);
        card.onclick = () => selectImage(index);
        card.onkeypress = (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            selectImage(index);
          }
        };

        card.innerHTML = `
          <img src="${image.src}" alt="${image.alt}" class="card-image" loading="lazy">
          <div class="card-label">${image.name}</div>
        `;

        return card;
      }

      function createOptionCard(option, index) {
        const card = document.createElement("div");
        card.className = "option-card";
        card.dataset.index = index;
        card.setAttribute("role", "radio");
        card.setAttribute("aria-checked", "false");
        card.setAttribute("tabindex", "0");
        card.onclick = () => selectOption(index);
        card.onkeypress = (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            selectOption(index);
          }
        };
        card.textContent = option;

        return card;
      }

      function selectImage(index) {
        if (!gameState.gameActive) return;

        const cards = document.querySelectorAll(".image-card");
        cards.forEach((card) => {
          card.classList.remove("selected");
          card.setAttribute("aria-checked", "false");
        });
        cards[index].classList.add("selected");
        cards[index].setAttribute("aria-checked", "true");

        setTimeout(() => checkImageAnswer(index), 500);
        playSound("success");
      }

      function selectOption(index) {
        if (!gameState.gameActive) return;

        const cards = document.querySelectorAll(".option-card");
        cards.forEach((card) => {
          card.classList.remove("selected");
          card.setAttribute("aria-checked", "false");
        });
        cards[index].classList.add("selected");
        cards[index].setAttribute("aria-checked", "true");

        setTimeout(() => checkOptionAnswer(index), 500);
        playSound("success");
      }

      function checkImageAnswer(selectedIndex) {
        const challenge = gameState.currentChallenge;
        const selectedImage = challenge.images[selectedIndex];
        const isCorrect = selectedImage.id === challenge.correctAnswer;

        const cards = document.querySelectorAll(".image-card");

        if (isCorrect) {
          cards[selectedIndex].classList.add("correct");
          handleCorrectAnswer();
        } else {
          cards[selectedIndex].classList.add("incorrect");
          // Highlight correct answer
          challenge.images.forEach((image, index) => {
            if (image.id === challenge.correctAnswer) {
              cards[index].classList.add("correct");
            }
          });
          handleIncorrectAnswer();
        }

        setTimeout(() => {
          nextChallenge();
        }, 2000);
      }

      function checkOptionAnswer(selectedIndex) {
        const challenge = gameState.currentChallenge;
        const isCorrect = selectedIndex === challenge.correctAnswer;

        const cards = document.querySelectorAll(".option-card");

        if (isCorrect) {
          cards[selectedIndex].classList.add("correct");
          handleCorrectAnswer();
        } else {
          cards[selectedIndex].classList.add("incorrect");
          cards[challenge.correctAnswer].classList.add("correct");
          handleIncorrectAnswer();
        }

        setTimeout(() => {
          nextChallenge();
        }, 2000);
      }

      function handleCorrectAnswer() {
        gameState.correctAnswers++;
        gameState.streak++;

        if (gameState.streak > gameState.bestStreak) {
          gameState.bestStreak = gameState.streak;
        }

        const basePoints = 100;
        const timeBonus = gameState.timeRemaining * 2;
        const streakBonus = gameState.streak * 50;
        const hintPenalty = gameState.hintsUsed * 25;
        const points = Math.max(
          0,
          basePoints + timeBonus + streakBonus - hintPenalty
        );

        gameState.totalScore += points;

        updateDisplay();
        playSound("success");

        let message = `🎉 Correct! +${points} points`;
        if (gameState.streak > 1) {
          message += ` | 🔥 ${gameState.streak}x Streak!`;
        }
        showMessage(message, "success");
        announceToScreenReader(
          `Correct! You earned ${points} points. Current streak: ${gameState.streak}`
        );

        if (gameState.streak % 5 === 0) {
          createConfetti();
          showMessage(
            `🔥 Amazing ${gameState.streak} streak! Bonus points!`,
            "success"
          );
        }

        saveGameState();
      }

      function handleIncorrectAnswer() {
        gameState.streak = 0;
        updateDisplay();
        playSound("error");
        showMessage(
          "❌ Not quite right. The correct answer is highlighted!",
          "danger"
        );
        announceToScreenReader(
          "Incorrect answer. Streak reset. The correct answer is now highlighted."
        );
        saveGameState();
      }

      function nextChallenge() {
        gameState.challengeIndex++;

        if (gameState.challengeIndex >= gameState.challenges.length) {
          endGame();
          return;
        }

        loadNextChallenge();
      }

      function updateProgressBar() {
        const progress =
          (gameState.challengeIndex / gameState.challenges.length) * 100;
        const progressFill = document.getElementById("progressFill");
        const progressBar = progressFill.parentElement;

        progressFill.style.width = progress + "%";
        if (progressBar) {
          progressBar.setAttribute(
            "aria-valuenow",
            Math.round(progress).toString()
          );
        }
      }

      function getHint() {
        if (!gameState.gameActive || !gameState.currentChallenge) return;

        gameState.hintsUsed++;
        gameState.totalScore = Math.max(0, gameState.totalScore - 25);
        updateDisplay();
        playSound("hint");

        const challenge = gameState.currentChallenge;

        if (challenge.type === "match") {
          // Highlight category or give description clue
          const correctImage = challenge.images.find(
            (img) => img.id === challenge.correctAnswer
          );
          showMessage(
            `💡 Hint: Look for something related to "${correctImage.category}" (−25 pts)`,
            "info"
          );
          announceToScreenReader(
            `Hint: Look for something related to ${correctImage.category}. 25 points deducted.`
          );
        } else if (challenge.type === "describe") {
          // Give partial description
          const options = document.querySelectorAll(".option-card");
          const wrongOptions = Array.from(options).filter(
            (_, index) => index !== challenge.correctAnswer
          );
          if (wrongOptions.length > 0) {
            const randomWrong =
              wrongOptions[Math.floor(Math.random() * wrongOptions.length)];
            randomWrong.style.opacity = "0.5";
            randomWrong.style.pointerEvents = "none";
          }
          showMessage(
            `💡 Hint: One wrong answer has been eliminated! (−25 pts)`,
            "info"
          );
          announceToScreenReader(
            "Hint: One wrong answer has been eliminated. 25 points deducted."
          );
        }

        saveGameState();
      }

      function createConfetti() {
        const colors = [
          "#ff6b6b",
          "#4ecdc4",
          "#45b7d1",
          "#96ceb4",
          "#feca57",
          "#ff9ff3",
          "#54a0ff",
        ];

        for (let i = 0; i < 50; i++) {
          const confetti = document.createElement("div");
          confetti.className = "confetti";
          confetti.style.left = Math.random() * 100 + "vw";
          confetti.style.backgroundColor =
            colors[Math.floor(Math.random() * colors.length)];
          confetti.style.animationDelay = Math.random() * 3 + "s";
          confetti.style.animationDuration = Math.random() * 3 + 2 + "s";

          document.body.appendChild(confetti);

          setTimeout(() => {
            confetti.remove();
          }, 5000);
        }
      }

      // Show feedback section
      function showFeedback(feedbackData) {
        const feedbackSection = document.getElementById("feedbackSection");
        const feedbackGrid = document.getElementById("feedbackGrid");

        feedbackGrid.innerHTML = "";

        feedbackData.forEach((feedback) => {
          const card = document.createElement("div");
          card.className = `feedback-card ${feedback.type}`;
          card.innerHTML = `
            <h5>${feedback.title}</h5>
            <p>${feedback.content}</p>
          `;
          feedbackGrid.appendChild(card);
        });

        feedbackSection.classList.add("show");
      }

      // Message system
      function showMessage(message, type = "info") {
        const messageDiv = document.getElementById("gameMessage");
        messageDiv.textContent = message;
        messageDiv.className = `game-message message-${type}`;
        messageDiv.style.display = "block";

        setTimeout(() => {
          messageDiv.style.display = "none";
        }, 3000);
      }

      // Initialize game
      function initGame() {
        loadGameState();
        updateDisplay();

        // Set initial state
        document.getElementById("challengeDescription").textContent =
          "Click 'Start Challenge' to begin your picture puzzle adventure!";

        playSound(500, 300);
        showMessage(
          "Welcome to Picture Puzzle Challenge! Ready to test your visual skills?",
          "info"
        );
      }

      // Keyboard navigation
      document.addEventListener("keydown", function (e) {
        if (e.key === "h" || e.key === "H") {
          if (gameState.gameActive) {
            e.preventDefault();
            getHint();
          }
        } else if (e.key === " " && !gameState.gameActive) {
          e.preventDefault();
          startGame();
        } else if (
          e.key === "Enter" &&
          document.getElementById("nextBtn").style.display !== "none"
        ) {
          e.preventDefault();
          nextChallenge();
        } else if (e.key >= "1" && e.key <= "4" && gameState.gameActive) {
          e.preventDefault();
          const options = document.querySelectorAll(
            ".option-card, .image-card"
          );
          const index = parseInt(e.key) - 1;
          if (options[index]) {
            options[index].click();
          }
        } else if (e.key === "Escape" && gameState.gameActive) {
          e.preventDefault();
          if (confirm("Are you sure you want to reset the game?")) {
            resetGame();
          }
        }
      });

      // Initialize game on page load
      document.addEventListener("DOMContentLoaded", function () {
        initGame();
      });
    </script>
  </body>
</html>
