<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Picture Description Game - ESL Speaking & Writing Practice | ESL Fun
      Online
    </title>
    <meta
      name="description"
      content="Practice describing images in English! Improve speaking and writing skills with guided prompts, vocabulary hints, and feedback. Perfect for ESL learners."
    />
    <meta
      name="keywords"
      content="picture description game, ESL speaking practice, image description, English writing practice, vocabulary building, language learning"
    />
    <meta name="author" content="ESL Fun Online" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:title"
      content="Picture Description Game - ESL Speaking & Writing Practice | ESL Fun Online"
    />
    <meta
      property="og:description"
      content="Look at images and practice describing what you see! Improve your speaking and writing skills with guided prompts and vocabulary hints."
    />
    <meta
      property="og:image"
      content="https://eslfunonline.com/images/image copy 8.png"
    />
    <meta
      property="og:url"
      content="https://eslfunonline.com/games/picture-description.html"
    />
    <meta property="og:type" content="game" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Picture Description Game - ESL Speaking & Writing Practice"
    />
    <meta
      name="twitter:description"
      content="Practice describing images in English with guided prompts and vocabulary hints!"
    />
    <meta
      name="twitter:image"
      content="https://eslfunonline.com/images/image copy 8.png"
    />
    <link
      rel="canonical"
      href="https://eslfunonline.com/games/picture-description.html"
    />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9G9RD6BHLN");
    </script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary-color: #46bbe5;
        --primary-hover: #05425c;
        --secondary-color: #f59e0b;
        --accent-color: #10b981;
        --danger-color: #ef4444;
        --success-color: #10b981;
        --purple-color: #8b5cf6;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --bg-tertiary: #f3f4f6;
        --border-color: #e5e7eb;
        --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: var(--text-primary);
        padding: 1rem;
      }

      .game-container {
        max-width: 1400px;
        margin: 0 auto;
        background: var(--bg-primary);
        border-radius: 20px;
        box-shadow: var(--shadow-lg);
        padding: 2rem;
      }

      .game-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .game-header h1 {
        font-family: "Poppins", sans-serif;
        font-size: 2.5rem;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .game-header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
      }

      .game-layout {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .picture-section {
        background: var(--bg-secondary);
        border-radius: 15px;
        padding: 1.5rem;
      }

      .picture-container {
        background: var(--bg-primary);
        border-radius: 10px;
        padding: 1rem;
        text-align: center;
        margin-bottom: 1rem;
        min-height: 300px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 3px dashed var(--border-color);
      }

      .picture-image {
        max-width: 100%;
        max-height: 400px;
        border-radius: 10px;
        box-shadow: var(--shadow);
      }

      .picture-placeholder {
        color: var(--text-secondary);
        font-size: 3rem;
      }

      .picture-controls {
        display: flex;
        gap: 0.75rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 1rem;
      }

      .category-btn {
        padding: 0.5rem 1rem;
        border: 2px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.9rem;
        font-weight: 500;
      }

      .category-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .category-btn:hover {
        transform: translateY(-2px);
      }

      .description-section {
        background: var(--bg-secondary);
        border-radius: 15px;
        padding: 1.5rem;
      }

      .description-area {
        background: var(--bg-primary);
        border: 2px solid var(--border-color);
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 1rem;
        min-height: 300px;
        font-size: 1rem;
        line-height: 1.6;
        resize: vertical;
        width: 100%;
        font-family: "Inter", sans-serif;
      }

      .description-area:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(70, 187, 229, 0.1);
      }

      .prompt-section {
        background: var(--bg-tertiary);
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .prompt-text {
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
      }

      .prompt-hints {
        font-size: 0.9rem;
        color: var(--text-secondary);
        font-style: italic;
      }

      .word-bank {
        background: var(--bg-tertiary);
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .word-bank h4 {
        margin-bottom: 0.75rem;
        color: var(--text-primary);
      }

      .helpful-words {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .word-chip {
        background: var(--bg-primary);
        color: var(--text-primary);
        padding: 0.25rem 0.75rem;
        border-radius: 15px;
        font-size: 0.85rem;
        border: 1px solid var(--border-color);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .word-chip:hover {
        background: var(--primary-color);
        color: white;
      }

      .game-stats {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .stat-card {
        background: var(--bg-secondary);
        padding: 1rem 1.5rem;
        border-radius: 15px;
        text-align: center;
        min-width: 120px;
      }

      .stat-value {
        font-size: 1.8rem;
        font-weight: bold;
        color: var(--primary-color);
      }

      .stat-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .game-controls {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 2rem;
      }

      .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: var(--primary-color);
        color: white;
      }

      .btn-primary:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
      }

      .btn-secondary {
        background: var(--bg-tertiary);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .btn-secondary:hover {
        background: var(--bg-secondary);
        border-color: var(--primary-color);
      }

      .btn-success {
        background: var(--success-color);
        color: white;
      }

      .btn-hint {
        background: var(--secondary-color);
        color: white;
      }

      .feedback-section {
        background: var(--bg-secondary);
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        display: none;
      }

      .feedback-section.show {
        display: block;
      }

      .feedback-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 1rem;
      }

      .feedback-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
      }

      .feedback-card {
        background: var(--bg-primary);
        border-radius: 10px;
        padding: 1rem;
        border-left: 4px solid var(--primary-color);
      }

      .feedback-card.positive {
        border-left-color: var(--success-color);
      }

      .feedback-card.suggestion {
        border-left-color: var(--secondary-color);
      }

      .feedback-card h5 {
        margin-bottom: 0.5rem;
        color: var(--text-primary);
      }

      .feedback-card p {
        color: var(--text-secondary);
        font-size: 0.9rem;
        line-height: 1.4;
      }

      .game-message {
        margin: 1rem 0;
        padding: 1rem;
        border-radius: 10px;
        font-weight: 600;
        text-align: center;
        font-size: 1.1rem;
      }

      .message-success {
        background: rgba(16, 185, 129, 0.1);
        color: var(--success-color);
        border: 2px solid rgba(16, 185, 129, 0.3);
      }

      .message-info {
        background: rgba(70, 187, 229, 0.1);
        color: var(--primary-color);
        border: 2px solid rgba(70, 187, 229, 0.3);
      }

      .difficulty-selector {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .difficulty-btn {
        padding: 0.75rem 1.5rem;
        border: 2px solid var(--border-color);
        background: var(--bg-secondary);
        color: var(--text-primary);
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-weight: 600;
      }

      .difficulty-btn.active {
        background: var(--secondary-color);
        color: white;
        border-color: var(--secondary-color);
      }

      .timer {
        text-align: center;
        font-size: 1.2rem;
        font-weight: bold;
        color: var(--danger-color);
        margin-bottom: 1rem;
      }

      @media (max-width: 1024px) {
        .game-layout {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }
      }

      @media (max-width: 768px) {
        .game-container {
          padding: 1rem;
          margin: 0.5rem;
        }

        .game-header h1 {
          font-size: 2rem;
        }

        .picture-container {
          min-height: 200px;
        }

        .description-area {
          min-height: 200px;
        }

        .game-stats {
          gap: 1rem;
        }

        .stat-card {
          min-width: 100px;
          padding: 0.75rem 1rem;
        }

        .feedback-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <div class="game-header">
        <h1><i class="fas fa-image"></i> Picture Description</h1>
        <p>Look at the image and practice describing what you see!</p>
      </div>

      <div class="difficulty-selector">
        <button class="difficulty-btn active" data-difficulty="beginner">
          Beginner
        </button>
        <button class="difficulty-btn" data-difficulty="intermediate">
          Intermediate
        </button>
        <button class="difficulty-btn" data-difficulty="advanced">
          Advanced
        </button>
      </div>

      <div class="game-stats">
        <div class="stat-card">
          <div class="stat-value" id="descriptionsCount">0</div>
          <div class="stat-label">Descriptions</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="wordsUsed">0</div>
          <div class="stat-label">Words Used</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="currentStreak">0</div>
          <div class="stat-label">Streak</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalScore">0</div>
          <div class="stat-label">Score</div>
        </div>
      </div>

      <div class="timer" id="timer" style="display: none">
        Time remaining: <span id="timeLeft">300</span>s
      </div>

      <div class="game-layout">
        <div class="picture-section">
          <h3><i class="fas fa-camera"></i> Image to Describe</h3>

          <div class="picture-container" id="pictureContainer">
            <div class="picture-placeholder">
              <i class="fas fa-image"></i>
            </div>
          </div>

          <div class="picture-controls">
            <button class="category-btn active" data-category="people">
              People
            </button>
            <button class="category-btn" data-category="nature">Nature</button>
            <button class="category-btn" data-category="city">City</button>
            <button class="category-btn" data-category="food">Food</button>
            <button class="category-btn" data-category="activities">
              Activities
            </button>
            <button class="category-btn" data-category="objects">
              Objects
            </button>
          </div>

          <div class="word-bank">
            <h4><i class="fas fa-list"></i> Helpful Words</h4>
            <div class="helpful-words" id="helpfulWords">
              <!-- Words will be populated based on image category -->
            </div>
          </div>
        </div>

        <div class="description-section">
          <h3><i class="fas fa-edit"></i> Your Description</h3>

          <div class="prompt-section" id="promptSection">
            <div class="prompt-text" id="promptText">
              Describe what you see in the image.
            </div>
            <div class="prompt-hints" id="promptHints">
              Include colors, people, objects, and actions.
            </div>
          </div>

          <textarea
            class="description-area"
            id="descriptionArea"
            placeholder="Start describing the image here... Be detailed and creative!"
          ></textarea>

          <div class="game-controls">
            <button class="btn btn-primary" id="submitBtn">
              <i class="fas fa-check"></i> Submit Description
            </button>
            <button class="btn btn-hint" id="hintBtn">
              <i class="fas fa-lightbulb"></i> Get Hint
            </button>
            <button class="btn btn-secondary" id="newImageBtn">
              <i class="fas fa-refresh"></i> New Image
            </button>
          </div>
        </div>
      </div>

      <div class="feedback-section" id="feedbackSection">
        <h3 class="feedback-title">
          <i class="fas fa-comments"></i> Feedback on Your Description
        </h3>
        <div class="feedback-grid" id="feedbackGrid">
          <!-- Feedback cards will be populated by JavaScript -->
        </div>
      </div>

      <div class="game-message" id="gameMessage" style="display: none"></div>

      <div class="game-controls">
        <button class="btn btn-success" id="newGameBtn">
          <i class="fas fa-play"></i> New Game
        </button>
        <button
          class="btn btn-secondary"
          onclick="window.location.href='games.html'"
        >
          <i class="fas fa-arrow-left"></i> Back to Games
        </button>
      </div>
    </div>

    <script>
      class PictureDescriptionGame {
        constructor() {
          this.difficulty = "beginner";
          this.currentCategory = "people";
          this.currentImage = null;
          this.descriptionsCount = 0;
          this.totalScore = 0;
          this.currentStreak = 0;
          this.timeLeft = 300;
          this.timerInterval = null;
          this.isTimedMode = false;

          // Image data with descriptions and vocabulary
          this.imageData = {
            people: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400",
                  alt: "Happy woman smiling",
                  keywords: [
                    "woman",
                    "smile",
                    "happy",
                    "face",
                    "person",
                    "joy",
                  ],
                  prompts: [
                    "Describe the person you see",
                    "What emotions do you notice?",
                  ],
                  vocabulary: [
                    "happy",
                    "smile",
                    "woman",
                    "beautiful",
                    "cheerful",
                    "friendly",
                    "person",
                    "face",
                    "eyes",
                    "hair",
                  ],
                },
                {
                  src: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400",
                  alt: "Man reading a book",
                  keywords: [
                    "man",
                    "reading",
                    "book",
                    "glasses",
                    "concentrated",
                  ],
                  prompts: [
                    "What is the person doing?",
                    "Describe their appearance",
                  ],
                  vocabulary: [
                    "man",
                    "reading",
                    "book",
                    "glasses",
                    "sitting",
                    "thinking",
                    "concentrated",
                    "learning",
                    "studying",
                    "quiet",
                  ],
                },
              ],
              intermediate: [
                {
                  src: "https://images.unsplash.com/photo-1521737852567-6949f3f9f2b5?w=400",
                  alt: "Business meeting",
                  keywords: [
                    "meeting",
                    "business",
                    "people",
                    "discussion",
                    "office",
                  ],
                  prompts: [
                    "Describe the business environment",
                    "What kind of interaction is happening?",
                  ],
                  vocabulary: [
                    "meeting",
                    "business",
                    "colleagues",
                    "discussion",
                    "professional",
                    "office",
                    "teamwork",
                    "presentation",
                    "corporate",
                    "workplace",
                  ],
                },
              ],
              advanced: [
                {
                  src: "https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=400",
                  alt: "Family gathering",
                  keywords: [
                    "family",
                    "gathering",
                    "multiple",
                    "generations",
                    "celebration",
                  ],
                  prompts: [
                    "Analyze the family dynamics",
                    "Describe the emotional atmosphere",
                  ],
                  vocabulary: [
                    "family",
                    "generations",
                    "relationships",
                    "celebration",
                    "togetherness",
                    "bonding",
                    "relatives",
                    "gathering",
                    "joy",
                    "connection",
                  ],
                },
              ],
            },
            nature: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400",
                  alt: "Beautiful mountain landscape",
                  keywords: [
                    "mountain",
                    "landscape",
                    "sky",
                    "nature",
                    "peaceful",
                  ],
                  prompts: [
                    "Describe the natural scenery",
                    "What colors do you see?",
                  ],
                  vocabulary: [
                    "mountain",
                    "sky",
                    "clouds",
                    "green",
                    "blue",
                    "peaceful",
                    "beautiful",
                    "nature",
                    "landscape",
                    "scenery",
                  ],
                },
              ],
              intermediate: [
                {
                  src: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400",
                  alt: "Forest path",
                  keywords: [
                    "forest",
                    "path",
                    "trees",
                    "mysterious",
                    "walking",
                  ],
                  prompts: [
                    "Describe the atmosphere of this forest",
                    "What journey might this path lead to?",
                  ],
                  vocabulary: [
                    "forest",
                    "pathway",
                    "trees",
                    "mysterious",
                    "adventure",
                    "journey",
                    "walking",
                    "exploration",
                    "nature",
                    "wilderness",
                  ],
                },
              ],
              advanced: [
                {
                  src: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400",
                  alt: "Dramatic sunset over mountains",
                  keywords: [
                    "sunset",
                    "dramatic",
                    "mountains",
                    "silhouette",
                    "atmospheric",
                  ],
                  prompts: [
                    "Analyze the lighting and mood",
                    "Describe the atmospheric conditions",
                  ],
                  vocabulary: [
                    "dramatic",
                    "silhouette",
                    "atmospheric",
                    "twilight",
                    "majestic",
                    "serene",
                    "panoramic",
                    "breathtaking",
                    "tranquil",
                    "magnificent",
                  ],
                },
              ],
            },
            city: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1514565131-fce0801e5785?w=400",
                  alt: "City street with cars",
                  keywords: ["street", "cars", "city", "buildings", "busy"],
                  prompts: [
                    "Describe the city scene",
                    "What vehicles do you see?",
                  ],
                  vocabulary: [
                    "street",
                    "cars",
                    "buildings",
                    "busy",
                    "traffic",
                    "city",
                    "urban",
                    "road",
                    "vehicles",
                    "sidewalk",
                  ],
                },
              ],
              intermediate: [
                {
                  src: "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400",
                  alt: "Modern city skyline",
                  keywords: [
                    "skyline",
                    "skyscrapers",
                    "modern",
                    "architecture",
                    "urban",
                  ],
                  prompts: [
                    "Describe the architectural features",
                    "What makes this a modern cityscape?",
                  ],
                  vocabulary: [
                    "skyline",
                    "skyscrapers",
                    "architecture",
                    "modern",
                    "urban",
                    "metropolitan",
                    "contemporary",
                    "impressive",
                    "towering",
                    "development",
                  ],
                },
              ],
            },
            food: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400",
                  alt: "Delicious pizza",
                  keywords: [
                    "pizza",
                    "food",
                    "delicious",
                    "cheese",
                    "toppings",
                  ],
                  prompts: [
                    "Describe this food",
                    "What ingredients can you see?",
                  ],
                  vocabulary: [
                    "pizza",
                    "cheese",
                    "delicious",
                    "food",
                    "toppings",
                    "tasty",
                    "meal",
                    "Italian",
                    "crust",
                    "sauce",
                  ],
                },
              ],
            },
            activities: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400",
                  alt: "People playing sports",
                  keywords: ["sports", "playing", "active", "exercise", "fun"],
                  prompts: [
                    "What activity is happening?",
                    "Describe the physical movements",
                  ],
                  vocabulary: [
                    "sports",
                    "playing",
                    "active",
                    "exercise",
                    "running",
                    "fun",
                    "healthy",
                    "energetic",
                    "competitive",
                    "teamwork",
                  ],
                },
              ],
            },
            objects: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400",
                  alt: "Books on a table",
                  keywords: [
                    "books",
                    "table",
                    "reading",
                    "knowledge",
                    "education",
                  ],
                  prompts: [
                    "Describe these objects",
                    "What purpose do they serve?",
                  ],
                  vocabulary: [
                    "books",
                    "table",
                    "reading",
                    "knowledge",
                    "education",
                    "learning",
                    "studying",
                    "literature",
                    "pages",
                    "information",
                  ],
                },
              ],
            },
          };

          this.prompts = {
            beginner: [
              "Describe what you see in simple words.",
              "What colors do you notice?",
              "Name the objects in the image.",
              "How many people/things are there?",
            ],
            intermediate: [
              "Describe the mood or atmosphere of the image.",
              "What do you think is happening in this scene?",
              "Explain the relationship between different elements.",
              "What emotions does this image make you feel?",
            ],
            advanced: [
              "Analyze the composition and visual elements.",
              "Discuss the cultural or social context.",
              "What story does this image tell?",
              "Compare and contrast different aspects of the scene.",
            ],
          };

          this.init();
        }

        init() {
          this.setupEventListeners();
          this.loadNewImage();
          this.updateStats();
        }

        setupEventListeners() {
          document.getElementById("submitBtn").onclick = () =>
            this.submitDescription();
          document.getElementById("hintBtn").onclick = () => this.showHint();
          document.getElementById("newImageBtn").onclick = () =>
            this.loadNewImage();
          document.getElementById("newGameBtn").onclick = () =>
            this.startNewGame();

          // Difficulty selector
          document.querySelectorAll(".difficulty-btn").forEach((btn) => {
            btn.onclick = () => {
              document
                .querySelectorAll(".difficulty-btn")
                .forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              this.difficulty = btn.dataset.difficulty;
              this.loadNewImage();
            };
          });

          // Category selector
          document.querySelectorAll(".category-btn").forEach((btn) => {
            btn.onclick = () => {
              document
                .querySelectorAll(".category-btn")
                .forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              this.currentCategory = btn.dataset.category;
              this.loadNewImage();
            };
          });

          // Auto-save description
          document
            .getElementById("descriptionArea")
            .addEventListener("input", () => {
              this.saveProgress();
            });

          // Helpful word clicks
          document
            .getElementById("helpfulWords")
            .addEventListener("click", (e) => {
              if (e.target.classList.contains("word-chip")) {
                this.insertWord(e.target.textContent);
              }
            });
        }

        loadNewImage() {
          const categoryData = this.imageData[this.currentCategory];
          const difficultyData = categoryData[this.difficulty];

          if (!difficultyData || difficultyData.length === 0) {
            this.showMessage(
              "No images available for this category and difficulty.",
              "info"
            );
            return;
          }

          const randomIndex = Math.floor(Math.random() * difficultyData.length);
          this.currentImage = difficultyData[randomIndex];

          this.displayImage();
          this.updatePrompt();
          this.updateVocabulary();
          this.clearDescription();
          this.hideFeedback();
        }

        displayImage() {
          const container = document.getElementById("pictureContainer");

          // Create placeholder while loading
          container.innerHTML = `
                    <div class="picture-placeholder">
                        <i class="fas fa-spinner fa-spin"></i>
                        <br>Loading image...
                    </div>
                `;

          const img = document.createElement("img");
          img.className = "picture-image";
          img.alt = this.currentImage.alt;
          img.onload = () => {
            container.innerHTML = "";
            container.appendChild(img);
          };
          img.onerror = () => {
            container.innerHTML = `
                        <div class="picture-placeholder">
                            <i class="fas fa-image"></i>
                            <br>Sample ${this.currentCategory} image
                        </div>
                    `;
          };
          img.src = this.currentImage.src;
        }

        updatePrompt() {
          const promptText = document.getElementById("promptText");
          const promptHints = document.getElementById("promptHints");

          if (
            this.currentImage.prompts &&
            this.currentImage.prompts.length > 0
          ) {
            const randomPrompt =
              this.currentImage.prompts[
                Math.floor(Math.random() * this.currentImage.prompts.length)
              ];
            promptText.textContent = randomPrompt;
          } else {
            const generalPrompts = this.prompts[this.difficulty];
            const randomPrompt =
              generalPrompts[Math.floor(Math.random() * generalPrompts.length)];
            promptText.textContent = randomPrompt;
          }

          const hints = {
            beginner:
              "Use simple sentences. Describe colors, shapes, and basic actions.",
            intermediate: "Include emotions, relationships, and your opinions.",
            advanced:
              "Analyze deeper meanings, cultural context, and artistic elements.",
          };

          promptHints.textContent = hints[this.difficulty];
        }

        updateVocabulary() {
          const container = document.getElementById("helpfulWords");
          container.innerHTML = "";

          if (this.currentImage.vocabulary) {
            this.currentImage.vocabulary.forEach((word) => {
              const chip = document.createElement("span");
              chip.className = "word-chip";
              chip.textContent = word;
              container.appendChild(chip);
            });
          }
        }

        insertWord(word) {
          const textarea = document.getElementById("descriptionArea");
          const cursorPosition = textarea.selectionStart;
          const textBefore = textarea.value.substring(0, cursorPosition);
          const textAfter = textarea.value.substring(cursorPosition);

          // Add space before and after if needed
          const wordToInsert =
            (textBefore && !textBefore.endsWith(" ") ? " " : "") +
            word +
            (textAfter && !textAfter.startsWith(" ") ? " " : "");

          textarea.value = textBefore + wordToInsert + textAfter;
          textarea.focus();
          textarea.selectionStart = textarea.selectionEnd =
            cursorPosition + wordToInsert.length;
        }

        submitDescription() {
          const description = document
            .getElementById("descriptionArea")
            .value.trim();

          if (description.length < 20) {
            this.showMessage(
              "Please write a longer description (at least 20 characters).",
              "info"
            );
            return;
          }

          this.analyzeDescription(description);
          this.showFeedback(description);
          this.updateScore(description);
          this.descriptionsCount++;
          this.updateStats();
        }

        analyzeDescription(description) {
          const words = description.toLowerCase().split(/\s+/);
          const wordCount = words.length;
          const keywordMatches = this.currentImage.keywords
            ? this.currentImage.keywords.filter((keyword) =>
                description.toLowerCase().includes(keyword.toLowerCase())
              ).length
            : 0;

          return {
            wordCount,
            keywordMatches,
            complexity: this.calculateComplexity(description),
            sentiment: this.analyzeSentiment(words),
          };
        }

        calculateComplexity(description) {
          const sentences = description
            .split(/[.!?]+/)
            .filter((s) => s.trim().length > 0);
          const avgWordsPerSentence =
            description.split(/\s+/).length / sentences.length;

          if (avgWordsPerSentence > 15) return "advanced";
          if (avgWordsPerSentence > 8) return "intermediate";
          return "beginner";
        }

        analyzeSentiment(words) {
          const positiveWords = [
            "beautiful",
            "happy",
            "good",
            "nice",
            "amazing",
            "wonderful",
            "great",
            "excellent",
          ];
          const negativeWords = [
            "bad",
            "ugly",
            "sad",
            "terrible",
            "awful",
            "horrible",
          ];

          const positiveCount = words.filter((word) =>
            positiveWords.includes(word)
          ).length;
          const negativeCount = words.filter((word) =>
            negativeWords.includes(word)
          ).length;

          if (positiveCount > negativeCount) return "positive";
          if (negativeCount > positiveCount) return "negative";
          return "neutral";
        }

        showFeedback(description) {
          const analysis = this.analyzeDescription(description);
          const feedbackSection = document.getElementById("feedbackSection");
          const feedbackGrid = document.getElementById("feedbackGrid");

          feedbackGrid.innerHTML = "";

          // Positive feedback
          const positiveCard = this.createFeedbackCard(
            "Great Job! 🎉",
            `You wrote ${analysis.wordCount} words with good detail. Keep practicing to improve even more!`,
            "positive"
          );
          feedbackGrid.appendChild(positiveCard);

          // Vocabulary feedback
          if (analysis.keywordMatches > 0) {
            const vocabCard = this.createFeedbackCard(
              "Vocabulary Usage 📚",
              `You used ${analysis.keywordMatches} relevant keywords from the image. This shows good observation skills!`,
              "positive"
            );
            feedbackGrid.appendChild(vocabCard);
          }

          // Complexity feedback
          const complexityCard = this.createFeedbackCard(
            "Writing Level 📝",
            `Your writing shows ${analysis.complexity} level complexity. Try to vary your sentence length and structure.`,
            "suggestion"
          );
          feedbackGrid.appendChild(complexityCard);

          // Suggestions
          const suggestionCard = this.createFeedbackCard(
            "Next Steps 🎯",
            "Try to include more sensory details (what you see, hear, feel) and emotional descriptions.",
            "suggestion"
          );
          feedbackGrid.appendChild(suggestionCard);

          feedbackSection.classList.add("show");
        }

        createFeedbackCard(title, content, type) {
          const card = document.createElement("div");
          card.className = `feedback-card ${type}`;
          card.innerHTML = `
                    <h5>${title}</h5>
                    <p>${content}</p>
                `;
          return card;
        }

        showHint() {
          if (!this.currentImage) return;

          const hints = [
            `Try describing the colors you see.`,
            `What emotions or mood does this image convey?`,
            `Describe the main subject and background separately.`,
            `Use some of these words: ${this.currentImage.vocabulary
              ?.slice(0, 3)
              .join(", ")}`,
          ];

          const randomHint = hints[Math.floor(Math.random() * hints.length)];
          this.showMessage(`💡 Hint: ${randomHint}`, "info");
        }

        updateScore(description) {
          const analysis = this.analyzeDescription(description);
          let points = 0;

          // Base points for word count
          points += Math.min(analysis.wordCount, 50);

          // Bonus for keyword usage
          points += analysis.keywordMatches * 10;

          // Complexity bonus
          const complexityBonus = {
            beginner: 5,
            intermediate: 15,
            advanced: 25,
          };
          points += complexityBonus[analysis.complexity] || 0;

          this.totalScore += points;
          this.currentStreak++;

          this.showMessage(
            `🎉 Great description! You earned ${points} points!`,
            "success"
          );
        }

        clearDescription() {
          document.getElementById("descriptionArea").value = "";
        }

        hideFeedback() {
          document.getElementById("feedbackSection").classList.remove("show");
        }

        updateStats() {
          document.getElementById("descriptionsCount").textContent =
            this.descriptionsCount;
          document.getElementById("totalScore").textContent = this.totalScore;
          document.getElementById("currentStreak").textContent =
            this.currentStreak;

          const description = document.getElementById("descriptionArea").value;
          const wordCount = description.trim()
            ? description.trim().split(/\s+/).length
            : 0;
          document.getElementById("wordsUsed").textContent = wordCount;
        }

        startNewGame() {
          this.descriptionsCount = 0;
          this.totalScore = 0;
          this.currentStreak = 0;
          this.updateStats();
          this.loadNewImage();
          this.showMessage("🎮 New game started! Good luck!", "info");
        }

        saveProgress() {
          const progress = {
            descriptionsCount: this.descriptionsCount,
            totalScore: this.totalScore,
            currentStreak: this.currentStreak,
            difficulty: this.difficulty,
            category: this.currentCategory,
          };
          localStorage.setItem(
            "pictureDescriptionProgress",
            JSON.stringify(progress)
          );
        }

        showMessage(text, type) {
          const message = document.getElementById("gameMessage");
          message.textContent = text;
          message.className = `game-message message-${type}`;
          message.style.display = "block";

          setTimeout(() => {
            message.style.display = "none";
          }, 4000);
        }
      }

      // Initialize game when page loads
      document.addEventListener("DOMContentLoaded", () => {
        new PictureDescriptionGame();
      });
    </script>
  </body>
</html>
