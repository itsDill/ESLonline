<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <meta name="google-adsense-account" content="ca-pub-2456627863532019" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pictionary ESL - Drawing Word Game | ESL Fun Online</title>

    <!-- Favicon and Icons -->
    <link rel="icon" href="../favicon.ico" sizes="any" />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../images/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../images/favicon-32x32.png"
    />
    <link rel="apple-touch-icon" sizes="180x180" href="../images/1.png" />

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Play Pictionary ESL - Draw and guess English words in this classic drawing game! Improve your vocabulary recognition and creative expression through visual learning."
    />
    <meta
      name="keywords"
      content="ESL pictionary, drawing game, vocabulary game, visual learning, guessing game"
    />

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Game",
        "name": "Pictionary ESL - Drawing Word Game",
        "description": "Draw and guess English words in this classic drawing game! Improve your vocabulary recognition and creative expression through visual learning.",
        "url": "https://eslfunonline.com/games/pictionary.html",
        "author": {
          "@type": "Organization",
          "name": "ESL Fun Online"
        },
        "genre": "Educational Game",
        "educationalUse": "Vocabulary Building",
        "isAccessibleForFree": true,
        "isFamilyFriendly": true
      }
    </script>

    <!-- Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9G9RD6BHLN");
    </script>

    <!-- Fonts and Styles -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/mobile-optimized.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <style>
      :root {
        --canvas-bg: #ffffff;
        --canvas-border: #e5e7eb;
      }

      .game-container {
        max-width: 1400px;
        margin: 2rem auto;
        padding: 2rem;
      }

      .game-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .game-header h1 {
        font-size: 2.5rem;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
      }

      .game-header p {
        font-size: 1.1rem;
        color: var(--text-secondary);
      }

      /* Setup Screen */
      .setup-screen,
      .game-screen {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: 2rem;
        box-shadow: var(--shadow-md);
      }

      .instructions {
        background: var(--bg-light);
        border-left: 4px solid var(--primary-color);
        padding: 1.5rem;
        margin: 1.5rem 0;
        border-radius: var(--radius-md);
        text-align: left;
      }

      .instructions h3 {
        margin-top: 0;
        color: var(--primary-color);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .instructions ul {
        margin: 0.5rem 0;
        padding-left: 1.5rem;
      }

      .instructions li {
        margin: 0.5rem 0;
        color: var(--text-secondary);
      }

      .category-selection {
        margin: 2rem 0;
      }

      .category-selection h3 {
        margin-bottom: 1.5rem;
        color: var(--text-primary);
        text-align: center;
      }

      .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }

      .category-card {
        padding: 1.5rem;
        border: 3px solid var(--border-color);
        background: white;
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: all 0.3s;
        text-align: center;
      }

      .category-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-md);
        border-color: var(--primary-color);
      }

      .category-card.selected {
        border-color: var(--primary-color);
        background: rgba(99, 102, 241, 0.1);
      }

      .category-card i {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        display: block;
      }

      .category-card h4 {
        margin: 0.5rem 0;
        color: var(--text-primary);
      }

      .category-card p {
        margin: 0;
        font-size: 0.85rem;
        color: var(--text-secondary);
      }

      .btn-start {
        margin-top: 2rem;
        padding: 1.25rem 3rem;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        border: none;
        border-radius: var(--radius-md);
        font-size: 1.2rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.3s;
      }

      .btn-start:hover {
        transform: translateY(-2px);
      }

      .btn-start:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Game Screen */
      .game-screen {
        display: none;
      }

      .game-screen.active {
        display: block;
      }

      .game-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .word-display {
        background: var(--primary-color);
        color: white;
        padding: 1rem 2rem;
        border-radius: var(--radius-md);
        font-size: 1.5rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 2px;
        flex: 1;
        min-width: 200px;
        text-align: center;
      }

      .word-display.hidden-word {
        background: var(--text-secondary);
        user-select: none;
      }

      .timer-display {
        background: var(--bg-light);
        padding: 1rem 1.5rem;
        border-radius: var(--radius-md);
        font-size: 1.3rem;
        font-weight: 600;
        min-width: 120px;
        text-align: center;
      }

      .timer-display.warning {
        background: #fef3c7;
        color: #d97706;
      }

      .timer-display.danger {
        background: #fee2e2;
        color: #dc2626;
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .canvas-container {
        background: white;
        border: 4px solid var(--canvas-border);
        border-radius: var(--radius-md);
        padding: 1rem;
        margin: 1rem 0;
      }

      #drawingCanvas {
        display: block;
        margin: 0 auto;
        border: 2px solid var(--border-color);
        border-radius: var(--radius-sm);
        cursor: crosshair;
        touch-action: none;
      }

      .drawing-tools {
        display: flex;
        gap: 1rem;
        justify-content: center;
        align-items: center;
        margin: 1rem 0;
        flex-wrap: wrap;
        padding: 1rem;
        background: var(--bg-light);
        border-radius: var(--radius-md);
      }

      .tool-group {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .tool-label {
        font-weight: 600;
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .tool-btn {
        padding: 0.75rem 1rem;
        border: 2px solid var(--border-color);
        background: white;
        border-radius: var(--radius-sm);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 1rem;
      }

      .tool-btn:hover {
        border-color: var(--primary-color);
        background: rgba(99, 102, 241, 0.1);
      }

      .tool-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .color-btn {
        width: 40px;
        height: 40px;
        border: 3px solid var(--border-color);
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s;
      }

      .color-btn:hover {
        transform: scale(1.1);
      }

      .color-btn.active {
        border-color: var(--text-primary);
        box-shadow: 0 0 0 2px white, 0 0 0 4px var(--text-primary);
      }

      #brushSize {
        width: 120px;
      }

      .game-controls {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-top: 1.5rem;
        flex-wrap: wrap;
      }

      .btn-control {
        padding: 1rem 2rem;
        border: none;
        border-radius: var(--radius-md);
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-reveal {
        background: var(--primary-color);
        color: white;
      }

      .btn-reveal:hover {
        background: var(--secondary-color);
      }

      .btn-new-word {
        background: #10b981;
        color: white;
      }

      .btn-new-word:hover {
        background: #059669;
      }

      .btn-change-category {
        background: var(--bg-light);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .btn-change-category:hover {
        border-color: var(--primary-color);
      }

      .hidden {
        display: none;
      }

      @media (max-width: 768px) {
        .game-container {
          padding: 1rem;
        }

        #drawingCanvas {
          max-width: 100%;
          height: auto;
        }

        .drawing-tools {
          flex-direction: column;
          gap: 0.75rem;
        }

        .tool-group {
          width: 100%;
          justify-content: center;
        }

        .game-info {
          flex-direction: column;
        }

        .word-display,
        .timer-display {
          width: 100%;
        }
      }
    </style>
  </head>

  <body>
    <div class="game-container">
      <header class="game-header">
        <h1><i class="fas fa-paint-brush"></i> Pictionary ESL</h1>
        <p>Draw vocabulary words and let others guess!</p>
      </header>

      <!-- Setup Screen -->
      <div id="setupScreen" class="setup-screen">
        <div class="instructions">
          <h3><i class="fas fa-info-circle"></i> How to Play</h3>
          <ul>
            <li>Choose a category to practice vocabulary</li>
            <li>Click "Start Drawing" to get your first word</li>
            <li>Draw the word on the canvas (no writing letters!)</li>
            <li>Use the drawing tools to create your picture</li>
            <li>Click "Reveal Word" to check your drawing</li>
            <li>Perfect for solo practice or group games!</li>
          </ul>
        </div>

        <div class="category-selection">
          <h3><i class="fas fa-th-large"></i> Choose a Category</h3>
          <div class="category-grid" id="categoryGrid"></div>
        </div>

        <div style="text-align: center">
          <button id="startGameBtn" class="btn-start" disabled>
            <i class="fas fa-play"></i> Start Drawing
          </button>
        </div>
      </div>

      <!-- Game Screen -->
      <div id="gameScreen" class="game-screen">
        <div class="game-info">
          <div class="word-display" id="wordDisplay">
            <span id="currentWord">CLICK TO START</span>
          </div>
          <div class="timer-display" id="timerDisplay">
            <i class="fas fa-clock"></i> <span id="timer">60</span>s
          </div>
        </div>

        <div class="canvas-container">
          <canvas id="drawingCanvas" width="800" height="600"></canvas>
        </div>

        <div class="drawing-tools">
          <div class="tool-group">
            <span class="tool-label">Tool:</span>
            <button class="tool-btn active" data-tool="pen" title="Pen">
              <i class="fas fa-pen"></i>
            </button>
            <button class="tool-btn" data-tool="eraser" title="Eraser">
              <i class="fas fa-eraser"></i>
            </button>
          </div>

          <div class="tool-group">
            <span class="tool-label">Color:</span>
            <button
              class="color-btn active"
              data-color="#000000"
              style="background-color: #000000"
              title="Black"
            ></button>
            <button
              class="color-btn"
              data-color="#ef4444"
              style="background-color: #ef4444"
              title="Red"
            ></button>
            <button
              class="color-btn"
              data-color="#3b82f6"
              style="background-color: #3b82f6"
              title="Blue"
            ></button>
            <button
              class="color-btn"
              data-color="#10b981"
              style="background-color: #10b981"
              title="Green"
            ></button>
            <button
              class="color-btn"
              data-color="#f59e0b"
              style="background-color: #f59e0b"
              title="Orange"
            ></button>
            <button
              class="color-btn"
              data-color="#8b5cf6"
              style="background-color: #8b5cf6"
              title="Purple"
            ></button>
          </div>

          <div class="tool-group">
            <span class="tool-label">Size:</span>
            <input type="range" id="brushSize" min="1" max="20" value="3" />
            <span id="sizeValue">3</span>px
          </div>

          <div class="tool-group">
            <button class="tool-btn" id="clearBtn" title="Clear Canvas">
              <i class="fas fa-trash"></i> Clear
            </button>
          </div>
        </div>

        <div class="game-controls">
          <button id="revealBtn" class="btn-control btn-reveal">
            <i class="fas fa-eye"></i> Reveal Word
          </button>
          <button id="newWordBtn" class="btn-control btn-new-word">
            <i class="fas fa-sync-alt"></i> New Word
          </button>
          <button
            id="changeCategoryBtn"
            class="btn-control btn-change-category"
          >
            <i class="fas fa-exchange-alt"></i> Change Category
          </button>
        </div>
      </div>
    </div>

    <script>
      // Word categories
      const categories = {
        animals: {
          name: "Animals",
          icon: "fa-paw",
          description: "Draw creatures from land, sea, and air",
          words: [
            "cat",
            "dog",
            "elephant",
            "giraffe",
            "lion",
            "tiger",
            "bear",
            "monkey",
            "penguin",
            "dolphin",
            "shark",
            "whale",
            "butterfly",
            "bird",
            "fish",
            "rabbit",
            "horse",
            "cow",
            "pig",
            "sheep",
            "chicken",
            "duck",
            "frog",
            "snake",
            "turtle",
            "crocodile",
            "zebra",
            "kangaroo",
            "panda",
            "koala",
          ],
        },
        food: {
          name: "Food & Drink",
          icon: "fa-utensils",
          description: "Delicious items to draw",
          words: [
            "pizza",
            "hamburger",
            "sandwich",
            "salad",
            "spaghetti",
            "sushi",
            "taco",
            "cake",
            "cookie",
            "ice cream",
            "donut",
            "bread",
            "cheese",
            "apple",
            "banana",
            "orange",
            "strawberry",
            "watermelon",
            "grapes",
            "coffee",
            "tea",
            "juice",
            "milk",
            "water",
            "soup",
            "rice",
            "chicken",
            "fish",
          ],
        },
        objects: {
          name: "Everyday Objects",
          icon: "fa-cube",
          description: "Common items around us",
          words: [
            "phone",
            "computer",
            "book",
            "pen",
            "pencil",
            "chair",
            "table",
            "lamp",
            "clock",
            "key",
            "umbrella",
            "backpack",
            "wallet",
            "glasses",
            "camera",
            "bicycle",
            "car",
            "airplane",
            "train",
            "boat",
            "house",
            "door",
            "window",
            "mirror",
            "shoes",
            "hat",
            "shirt",
            "pants",
            "watch",
            "bottle",
          ],
        },
        nature: {
          name: "Nature",
          icon: "fa-tree",
          description: "Natural world and landscapes",
          words: [
            "tree",
            "flower",
            "sun",
            "moon",
            "star",
            "cloud",
            "mountain",
            "river",
            "ocean",
            "beach",
            "forest",
            "desert",
            "rain",
            "snow",
            "rainbow",
            "volcano",
            "island",
            "waterfall",
            "cave",
            "rock",
            "grass",
            "leaf",
            "branch",
            "seed",
            "sunset",
            "sunrise",
            "lightning",
            "wind",
            "fire",
          ],
        },
        sports: {
          name: "Sports & Activities",
          icon: "fa-football-ball",
          description: "Athletic activities and games",
          words: [
            "soccer",
            "basketball",
            "tennis",
            "baseball",
            "volleyball",
            "golf",
            "swimming",
            "running",
            "jumping",
            "cycling",
            "skiing",
            "skating",
            "boxing",
            "dancing",
            "yoga",
            "surfing",
            "climbing",
            "fishing",
            "camping",
            "hiking",
            "bowling",
            "archery",
            "gymnastics",
            "karate",
          ],
        },
        actions: {
          name: "Actions & Verbs",
          icon: "fa-running",
          description: "Draw people doing things",
          words: [
            "running",
            "walking",
            "jumping",
            "sleeping",
            "eating",
            "drinking",
            "reading",
            "writing",
            "cooking",
            "cleaning",
            "dancing",
            "singing",
            "laughing",
            "crying",
            "thinking",
            "sitting",
            "standing",
            "swimming",
            "flying",
            "driving",
            "painting",
            "drawing",
            "playing",
            "working",
          ],
        },
        places: {
          name: "Places",
          icon: "fa-map-marker-alt",
          description: "Locations and buildings",
          words: [
            "school",
            "hospital",
            "library",
            "restaurant",
            "park",
            "museum",
            "airport",
            "station",
            "hotel",
            "bank",
            "store",
            "market",
            "theater",
            "church",
            "stadium",
            "beach",
            "mountain",
            "farm",
            "zoo",
            "garden",
            "office",
            "factory",
            "bridge",
            "tower",
            "castle",
            "temple",
          ],
        },
        emotions: {
          name: "Emotions & Feelings",
          icon: "fa-smile",
          description: "Express feelings through drawing",
          words: [
            "happy",
            "sad",
            "angry",
            "surprised",
            "scared",
            "excited",
            "tired",
            "bored",
            "worried",
            "confused",
            "proud",
            "shy",
            "jealous",
            "nervous",
            "confident",
            "lonely",
            "grateful",
            "frustrated",
            "relaxed",
            "anxious",
          ],
        },
      };

      // Game state
      let selectedCategory = null;
      let availableWords = [];
      let currentWordIndex = 0;
      let wordRevealed = false;
      let timerInterval = null;
      let timeRemaining = 60;

      // Canvas setup
      const canvas = document.getElementById("drawingCanvas");
      const ctx = canvas.getContext("2d");
      let isDrawing = false;
      let currentTool = "pen";
      let currentColor = "#000000";
      let brushSize = 3;

      // DOM elements
      const setupScreen = document.getElementById("setupScreen");
      const gameScreen = document.getElementById("gameScreen");
      const categoryGrid = document.getElementById("categoryGrid");
      const startGameBtn = document.getElementById("startGameBtn");
      const wordDisplay = document.getElementById("wordDisplay");
      const currentWord = document.getElementById("currentWord");
      const timerDisplay = document.getElementById("timerDisplay");
      const timer = document.getElementById("timer");
      const revealBtn = document.getElementById("revealBtn");
      const newWordBtn = document.getElementById("newWordBtn");
      const changeCategoryBtn = document.getElementById("changeCategoryBtn");
      const clearBtn = document.getElementById("clearBtn");
      const brushSizeInput = document.getElementById("brushSize");
      const sizeValue = document.getElementById("sizeValue");

      // Initialize categories
      function initializeCategories() {
        Object.keys(categories).forEach((key) => {
          const category = categories[key];
          const card = document.createElement("div");
          card.className = "category-card";
          card.innerHTML = `
            <i class="fas ${category.icon}"></i>
            <h4>${category.name}</h4>
            <p>${category.description}</p>
          `;
          card.onclick = () => selectCategory(key, card);
          categoryGrid.appendChild(card);
        });
      }

      // Select category
      function selectCategory(key, element) {
        document.querySelectorAll(".category-card").forEach((card) => {
          card.classList.remove("selected");
        });
        element.classList.add("selected");
        selectedCategory = key;
        startGameBtn.disabled = false;
      }

      // Start game
      startGameBtn.addEventListener("click", () => {
        availableWords = [...categories[selectedCategory].words];
        shuffleArray(availableWords);
        currentWordIndex = 0;

        setupScreen.classList.add("hidden");
        gameScreen.classList.add("active");

        loadNewWord();
        startTimer();
      });

      // Load new word
      function loadNewWord() {
        if (currentWordIndex >= availableWords.length) {
          shuffleArray(availableWords);
          currentWordIndex = 0;
        }

        currentWord.textContent = availableWords[currentWordIndex];
        wordRevealed = false;
        wordDisplay.classList.add("hidden-word");
        currentWord.textContent = "❓ ❓ ❓";
        clearCanvas();
        resetTimer();
        currentWordIndex++;
      }

      // Reveal word
      revealBtn.addEventListener("click", () => {
        if (!wordRevealed) {
          currentWord.textContent =
            availableWords[currentWordIndex - 1].toUpperCase();
          wordDisplay.classList.remove("hidden-word");
          wordRevealed = true;
          stopTimer();
        }
      });

      // New word
      newWordBtn.addEventListener("click", loadNewWord);

      // Change category
      changeCategoryBtn.addEventListener("click", () => {
        stopTimer();
        gameScreen.classList.remove("active");
        setupScreen.classList.remove("hidden");
        document.querySelectorAll(".category-card").forEach((card) => {
          card.classList.remove("selected");
        });
        startGameBtn.disabled = true;
        clearCanvas();
      });

      // Timer functions
      function startTimer() {
        timeRemaining = 60;
        updateTimerDisplay();

        timerInterval = setInterval(() => {
          timeRemaining--;
          updateTimerDisplay();

          if (timeRemaining <= 0) {
            stopTimer();
            if (!wordRevealed) {
              alert(
                "Time's up! The word was: " +
                  availableWords[currentWordIndex - 1]
              );
              revealBtn.click();
            }
          }
        }, 1000);
      }

      function stopTimer() {
        clearInterval(timerInterval);
      }

      function resetTimer() {
        stopTimer();
        startTimer();
      }

      function updateTimerDisplay() {
        timer.textContent = timeRemaining;
        timerDisplay.classList.remove("warning", "danger");

        if (timeRemaining <= 10) {
          timerDisplay.classList.add("danger");
        } else if (timeRemaining <= 20) {
          timerDisplay.classList.add("warning");
        }
      }

      // Canvas drawing
      canvas.addEventListener("mousedown", startDrawing);
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseup", stopDrawing);
      canvas.addEventListener("mouseout", stopDrawing);

      // Touch support
      canvas.addEventListener("touchstart", (e) => {
        e.preventDefault();
        const touch = e.touches[0];
        const mouseEvent = new MouseEvent("mousedown", {
          clientX: touch.clientX,
          clientY: touch.clientY,
        });
        canvas.dispatchEvent(mouseEvent);
      });

      canvas.addEventListener("touchmove", (e) => {
        e.preventDefault();
        const touch = e.touches[0];
        const mouseEvent = new MouseEvent("mousemove", {
          clientX: touch.clientX,
          clientY: touch.clientY,
        });
        canvas.dispatchEvent(mouseEvent);
      });

      canvas.addEventListener("touchend", (e) => {
        e.preventDefault();
        const mouseEvent = new MouseEvent("mouseup", {});
        canvas.dispatchEvent(mouseEvent);
      });

      function startDrawing(e) {
        isDrawing = true;
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        ctx.beginPath();
        ctx.moveTo(x, y);
      }

      function draw(e) {
        if (!isDrawing) return;

        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        ctx.lineTo(x, y);
        ctx.strokeStyle = currentTool === "eraser" ? "#ffffff" : currentColor;
        ctx.lineWidth = currentTool === "eraser" ? brushSize * 3 : brushSize;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";
        ctx.stroke();
      }

      function stopDrawing() {
        isDrawing = false;
        ctx.beginPath();
      }

      function clearCanvas() {
        ctx.fillStyle = "#ffffff";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }

      // Tool selection
      document.querySelectorAll(".tool-btn[data-tool]").forEach((btn) => {
        btn.addEventListener("click", () => {
          document.querySelectorAll(".tool-btn[data-tool]").forEach((b) => {
            b.classList.remove("active");
          });
          btn.classList.add("active");
          currentTool = btn.dataset.tool;
        });
      });

      // Color selection
      document.querySelectorAll(".color-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          document.querySelectorAll(".color-btn").forEach((b) => {
            b.classList.remove("active");
          });
          btn.classList.add("active");
          currentColor = btn.dataset.color;

          // Switch to pen if eraser is active
          if (currentTool === "eraser") {
            document.querySelector(".tool-btn[data-tool='pen']").click();
          }
        });
      });

      // Brush size
      brushSizeInput.addEventListener("input", (e) => {
        brushSize = parseInt(e.target.value);
        sizeValue.textContent = brushSize;
      });

      // Clear button
      clearBtn.addEventListener("click", clearCanvas);

      // Utility
      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      // Initialize
      initializeCategories();
      clearCanvas();
    </script>
  </body>
</html>
