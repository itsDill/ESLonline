<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9G9RD6BHLN");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      English Snakes & Ladders - ESL Learning Adventure Game | ESL Fun Online
    </title>
    <meta
      name="description"
      content="Play the classic Snakes & Ladders with an ESL twist! Answer English questions to climb ladders and avoid snakes. Perfect family-friendly educational board game."
    />
    <meta
      name="keywords"
      content="ESL snakes and ladders, English board game, educational board game, family ESL game, grammar board game, learning game"
    />
    <meta name="author" content="ESL Fun Online" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />

    <!-- Open Graph Tags -->
    <meta
      property="og:title"
      content="English Snakes & Ladders - ESL Learning Adventure Game"
    />
    <meta
      property="og:description"
      content="Play the classic Snakes & Ladders with an ESL twist! Answer English questions to climb ladders and avoid snakes."
    />
    <meta
      property="og:image"
      content="https://eslfunonline.com/images/image.png"
    />
    <meta
      property="og:url"
      content="https://eslfunonline.com/games/snakeslad.html"
    />
    <meta property="og:type" content="game" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="English Snakes & Ladders ESL Game" />
    <meta
      name="twitter:description"
      content="Classic board game with English learning questions!"
    />
    <meta
      name="twitter:image"
      content="https://eslfunonline.com/images/image.png"
    />

    <!-- Canonical URL -->
    <link
      rel="canonical"
      href="https://eslfunonline.com/games/snakeslad.html"
    />

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Game",
        "name": "English Snakes & Ladders ESL Game",
        "description": "Play the classic Snakes & Ladders with an ESL twist! Answer English questions to climb ladders and avoid snakes in this educational adventure.",
        "url": "https://eslfunonline.com/games/snakeslad.html",
        "image": "https://eslfunonline.com/images/image.png",
        "publisher": {
          "@type": "Organization",
          "name": "ESL Fun Online",
          "url": "https://eslfunonline.com"
        },
        "genre": ["Educational", "Board Game", "Grammar"],
        "audience": {
          "@type": "EducationalAudience",
          "educationalRole": "student",
          "audienceType": "ESL Learners of All Ages"
        },
        "educationalLevel": "All Levels",
        "educationalUse": [
          "grammar practice",
          "vocabulary building",
          "family learning"
        ],
        "interactivityType": "active",
        "learningResourceType": "game",
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "accessibilityFeature": [
          "alternativeText",
          "keyboardNavigation",
          "ariaLabels",
          "highContrast"
        ],
        "keywords": "ESL board game, snakes and ladders, English learning, family game"
      }
    </script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&family=Comic+Neue:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/game-ads.css" />

    <style>
      :root {
        --primary-color: #ff6b9d;
        --secondary-color: #4ecdc4;
        --accent-color: #45b7d1;
        --success-color: #96ceb4;
        --danger-color: #ff6b6b;
        --warning-color: #ffeaa7;
        --bg-gradient: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
        --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        --card-hover-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        --text-primary: #2d3748;
        --text-secondary: #4a5568;
        --bg-primary: #ffffff;
        --bg-secondary: #f7fafc;
        --board-cell-size: 35px;
        --snake-color: #e53e3e;
        --ladder-color: #38a169;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Comic Neue", "Inter", sans-serif;
        background: var(--bg-gradient);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        color: var(--text-primary);
        overflow-x: hidden;
        animation: backgroundShift 20s ease-in-out infinite;
      }

      @keyframes backgroundShift {
        0%,
        100% {
          background: linear-gradient(
            135deg,
            #667eea 0%,
            #764ba2 50%,
            #f093fb 100%
          );
        }
        33% {
          background: linear-gradient(
            135deg,
            #ffecd2 0%,
            #fcb69f 50%,
            #667eea 100%
          );
        }
        66% {
          background: linear-gradient(
            135deg,
            #a8edea 0%,
            #fed6e3 50%,
            #764ba2 100%
          );
        }
      }

      /* Particle Animation Background */
      .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
      }

      .particle {
        position: absolute;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        animation: float 20s infinite linear;
      }

      @keyframes float {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-100vh) rotate(360deg);
          opacity: 0;
        }
      }

      /* Header */
      .game-header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(15px);
        padding: 1rem 0;
        box-shadow: var(--card-shadow);
        position: sticky;
        top: 0;
        z-index: 1000;
        border-bottom: 3px solid var(--primary-color);
      }

      .header-content {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .game-title {
        font-family: "Comic Neue", sans-serif;
        font-size: 2rem;
        font-weight: 700;
        background: linear-gradient(135deg, #ff6b9d, #4ecdc4, #45b7d1, #96ceb4);
        -webkit-background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: titleBounce 2s ease-in-out infinite;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      @keyframes titleBounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-5px);
        }
        60% {
          transform: translateY(-3px);
        }
      }

      .game-controls {
        display: flex;
        gap: 0.75rem;
        align-items: center;
      }

      .control-btn {
        padding: 0.75rem 1.25rem;
        border: none;
        border-radius: 25px;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--accent-color)
        );
        color: white;
        cursor: pointer;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: var(--card-shadow);
        position: relative;
        overflow: hidden;
      }

      .control-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s;
      }

      .control-btn:hover::before {
        left: 100%;
      }

      .control-btn:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: var(--card-hover-shadow);
      }

      .control-btn.secondary {
        background: transparent;
        color: var(--primary-color);
        border: 2px solid var(--primary-color);
      }

      /* Setup Screen */
      .setup-screen {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        position: relative;
        z-index: 1;
      }

      .setup-container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(15px);
        border-radius: 25px;
        padding: 2.5rem;
        box-shadow: var(--card-hover-shadow);
        max-width: 900px;
        width: 100%;
        border: 3px solid var(--primary-color);
        position: relative;
        overflow: hidden;
      }

      .setup-container::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent,
          var(--primary-color),
          transparent 30%
        );
        animation: rotate 20s linear infinite;
        opacity: 0.1;
      }

      @keyframes rotate {
        100% {
          transform: rotate(360deg);
        }
      }

      .setup-title {
        text-align: center;
        font-size: 2.5rem;
        font-weight: 700;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--accent-color)
        );
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 2rem;
        position: relative;
        z-index: 1;
      }

      .setup-section {
        margin-bottom: 2.5rem;
        position: relative;
        z-index: 1;
      }

      .setup-section h3 {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: var(--text-primary);
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .board-selection {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1.5rem;
      }

      .board-option {
        aspect-ratio: 1;
        border: 4px solid transparent;
        border-radius: 20px;
        overflow: hidden;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        background: var(--bg-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 0.5rem;
      }

      .board-option:hover {
        transform: scale(1.08) rotate(2deg);
        box-shadow: var(--card-hover-shadow);
      }

      .board-option.selected {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 4px rgba(255, 107, 157, 0.3);
        transform: scale(1.05);
      }

      .board-preview {
        width: 80%;
        height: 60%;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
      }

      .board-label {
        font-weight: 700;
        text-align: center;
        color: var(--text-primary);
        font-size: 1.1rem;
      }

      .player-selection {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        gap: 1.5rem;
      }

      .player-option {
        aspect-ratio: 1;
        border: 4px solid transparent;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        background: var(--bg-primary);
        box-shadow: var(--card-shadow);
        position: relative;
        overflow: hidden;
      }

      .player-option::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, var(--primary-color), transparent);
        transition: all 0.3s ease;
        transform: translate(-50%, -50%);
        opacity: 0.2;
      }

      .player-option:hover::before {
        width: 100%;
        height: 100%;
      }

      .player-option:hover {
        transform: scale(1.15) rotate(5deg);
        box-shadow: var(--card-hover-shadow);
      }

      .player-option.selected {
        border-color: var(--secondary-color);
        box-shadow: 0 0 0 4px rgba(78, 205, 196, 0.4);
        transform: scale(1.1);
      }

      .content-selection {
        display: flex;
        gap: 1.5rem;
        justify-content: center;
        flex-wrap: wrap;
      }

      .content-option {
        padding: 1.25rem 2rem;
        border: 3px solid var(--text-secondary);
        border-radius: 20px;
        background: transparent;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-weight: 700;
        color: var(--text-secondary);
        font-size: 1.1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        position: relative;
        overflow: hidden;
      }

      .content-option::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s;
      }

      .content-option:hover::before {
        left: 100%;
      }

      .content-option:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: var(--card-shadow);
        border-color: var(--primary-color);
      }

      .content-option.selected {
        border-color: var(--accent-color);
        background: linear-gradient(
          135deg,
          var(--accent-color),
          var(--secondary-color)
        );
        color: white;
        transform: scale(1.05);
      }

      .start-game-btn {
        display: block;
        width: 100%;
        padding: 1.5rem 2rem;
        background: linear-gradient(
          135deg,
          var(--secondary-color),
          var(--success-color)
        );
        color: white;
        border: none;
        border-radius: 25px;
        font-size: 1.3rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        margin-top: 2rem;
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .start-game-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transform: translateX(-100%);
        transition: transform 0.6s;
      }

      .start-game-btn:hover:not(:disabled)::before {
        transform: translateX(100%);
      }

      .start-game-btn:hover:not(:disabled) {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 8px 25px rgba(78, 205, 196, 0.4);
      }

      .start-game-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      /* Game Screen */
      .game-screen {
        display: none;
        flex: 1;
        padding: 1rem;
        max-width: 1400px;
        margin: 0 auto;
        width: 100%;
        position: relative;
        z-index: 1;
      }

      .game-screen.active {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      /* Game Status */
      .game-status {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(15px);
        border-radius: 20px;
        padding: 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: var(--card-shadow);
        border: 2px solid var(--primary-color);
      }

      .status-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        font-weight: 600;
      }

      .player-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        border: 3px solid var(--secondary-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        background: var(--bg-primary);
        box-shadow: var(--card-shadow);
      }

      .turn-indicator {
        background: linear-gradient(135deg, var(--warning-color), #fdcb6e);
        padding: 1rem 2rem;
        border-radius: 25px;
        color: var(--text-primary);
        font-weight: 700;
        animation: pulse 2s infinite;
        box-shadow: var(--card-shadow);
        font-size: 1.1rem;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: var(--card-shadow);
        }
        50% {
          transform: scale(1.05);
          box-shadow: var(--card-hover-shadow);
        }
      }

      /* Game Board */
      .game-board-container {
        flex: 1;
        display: flex;
        gap: 1.5rem;
        min-height: 0;
      }

      .board-area {
        flex: 1;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(15px);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: var(--card-shadow);
        position: relative;
        border: 2px solid var(--accent-color);
      }

      .game-board {
        width: 100%;
        height: 100%;
        position: relative;
        min-height: 500px;
        background: var(--bg-secondary);
        border-radius: 15px;
        overflow: hidden;
      }

      .board-grid {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: grid;
        grid-template-columns: repeat(10, 1fr);
        grid-template-rows: repeat(10, 1fr);
        gap: 2px;
        padding: 10px;
      }

      .board-cell {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 0.8rem;
        color: var(--text-primary);
        border-radius: 8px;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid transparent;
        min-height: var(--board-cell-size);
      }

      .board-cell:hover {
        background: rgba(255, 107, 157, 0.1);
        transform: scale(1.1);
        z-index: 10;
      }

      .board-cell.snake-head {
        background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
        color: white;
        animation: wiggle 2s ease-in-out infinite;
      }

      .board-cell.snake-tail {
        background: linear-gradient(135deg, #ff9999, #ffaaaa);
        color: var(--text-primary);
      }

      .board-cell.ladder-top {
        background: linear-gradient(135deg, #4ecdc4, #96ceb4);
        color: white;
        animation: climb 3s ease-in-out infinite;
      }

      .board-cell.ladder-bottom {
        background: linear-gradient(135deg, #96ceb4, #4ecdc4);
        color: white;
      }

      .board-cell.special {
        background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
        animation: sparkle 2s ease-in-out infinite;
      }

      @keyframes wiggle {
        0%,
        100% {
          transform: rotate(0deg);
        }
        25% {
          transform: rotate(2deg);
        }
        75% {
          transform: rotate(-2deg);
        }
      }

      @keyframes climb {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-3px);
        }
      }

      @keyframes sparkle {
        0%,
        100% {
          box-shadow: 0 0 5px rgba(253, 203, 110, 0.5);
        }
        50% {
          box-shadow: 0 0 20px rgba(253, 203, 110, 0.8);
        }
      }

      .snake-path,
      .ladder-path {
        position: absolute;
        pointer-events: none;
        z-index: 5;
      }

      .snake-path {
        background: var(--snake-color);
        border-radius: 10px;
        opacity: 0.7;
      }

      .ladder-path {
        background: var(--ladder-color);
        border-radius: 5px;
        opacity: 0.8;
      }

      .player-piece {
        position: absolute;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: var(--card-shadow);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 20;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        background: var(--bg-primary);
      }

      .player-piece.moving {
        animation: bounce 0.8s ease-in-out;
        z-index: 30;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0) scale(1);
        }
        40% {
          transform: translateY(-15px) scale(1.2);
        }
        60% {
          transform: translateY(-5px) scale(1.1);
        }
      }

      /* Game Controls */
      .game-controls-panel {
        width: 350px;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .control-panel {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(15px);
        border-radius: 20px;
        padding: 1.5rem;
        box-shadow: var(--card-shadow);
        border: 2px solid var(--primary-color);
      }

      .control-panel h4 {
        text-align: center;
        font-size: 1.2rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--primary-color);
      }

      .dice-container {
        text-align: center;
      }

      .dice {
        width: 100px;
        height: 100px;
        background: linear-gradient(135deg, white, #f8f9fa);
        border: 4px solid var(--primary-color);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        font-weight: bold;
        margin: 1rem auto;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: var(--card-shadow);
        position: relative;
        overflow: hidden;
      }

      .dice::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent,
          var(--primary-color),
          transparent 30%
        );
        animation: rotate 3s linear infinite;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .dice:hover::before {
        opacity: 0.1;
      }

      .dice:hover {
        transform: scale(1.1) rotate(5deg);
        box-shadow: var(--card-hover-shadow);
      }

      .dice.rolling {
        animation: roll 1.5s ease-in-out;
      }

      @keyframes roll {
        0% {
          transform: rotate(0deg) scale(1);
        }
        25% {
          transform: rotate(90deg) scale(1.1);
        }
        50% {
          transform: rotate(180deg) scale(1.2);
        }
        75% {
          transform: rotate(270deg) scale(1.1);
        }
        100% {
          transform: rotate(360deg) scale(1);
        }
      }

      .roll-btn {
        padding: 1rem 2rem;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--accent-color)
        );
        color: white;
        border: none;
        border-radius: 15px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        width: 100%;
        font-size: 1.1rem;
        position: relative;
        overflow: hidden;
      }

      .roll-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s;
      }

      .roll-btn:hover:not(:disabled)::before {
        left: 100%;
      }

      .roll-btn:hover:not(:disabled) {
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
      }

      .roll-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      /* Question Panel */
      .question-panel {
        display: none;
        animation: slideIn 0.5s ease-out;
      }

      .question-panel.active {
        display: block;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .question-title {
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        text-align: center;
        color: var(--primary-color);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .question-content {
        background: linear-gradient(135deg, var(--bg-secondary), #edf2f7);
        padding: 1.5rem;
        border-radius: 15px;
        margin-bottom: 1.5rem;
        line-height: 1.6;
        font-size: 1.1rem;
        font-weight: 600;
        text-align: center;
        border: 2px solid var(--accent-color);
        box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .question-options {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .option-btn {
        padding: 1rem 1.5rem;
        border: 3px solid var(--text-secondary);
        border-radius: 15px;
        background: white;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        text-align: left;
        font-weight: 600;
        font-size: 1rem;
        position: relative;
        overflow: hidden;
      }

      .option-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.5),
          transparent
        );
        transition: left 0.3s;
      }

      .option-btn:hover:not(:disabled)::before {
        left: 100%;
      }

      .option-btn:hover:not(:disabled) {
        border-color: var(--primary-color);
        background: rgba(255, 107, 157, 0.1);
        transform: translateY(-2px) scale(1.02);
      }

      .option-btn.correct {
        border-color: var(--success-color);
        background: linear-gradient(
          135deg,
          rgba(150, 206, 180, 0.2),
          rgba(78, 205, 196, 0.2)
        );
        animation: correctAnswer 0.6s ease-out;
      }

      .option-btn.incorrect {
        border-color: var(--danger-color);
        background: linear-gradient(
          135deg,
          rgba(255, 107, 107, 0.2),
          rgba(255, 154, 154, 0.2)
        );
        animation: incorrectAnswer 0.6s ease-out;
      }

      @keyframes correctAnswer {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
          background: rgba(150, 206, 180, 0.4);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes incorrectAnswer {
        0% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
        100% {
          transform: translateX(0);
        }
      }

      .continue-btn {
        padding: 1rem 2rem;
        background: linear-gradient(
          135deg,
          var(--secondary-color),
          var(--success-color)
        );
        color: white;
        border: none;
        border-radius: 15px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        width: 100%;
        margin-top: 1.5rem;
        font-size: 1.1rem;
        position: relative;
        overflow: hidden;
      }

      .continue-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s;
      }

      .continue-btn:hover::before {
        left: 100%;
      }

      .continue-btn:hover {
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4);
      }

      /* Game Info */
      .game-info {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-top: 1rem;
      }

      .info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 1rem;
        background: var(--bg-secondary);
        border-radius: 10px;
        font-weight: 600;
      }

      .info-value {
        color: var(--primary-color);
        font-weight: 700;
      }

      /* Game Message Modal */
      .game-message {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 3000;
        animation: fadeIn 0.3s ease-out;
      }

      .game-message.show {
        display: flex;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .message-content {
        background: white;
        padding: 3rem;
        border-radius: 25px;
        box-shadow: var(--card-hover-shadow);
        text-align: center;
        max-width: 500px;
        width: 90%;
        border: 4px solid var(--primary-color);
        position: relative;
        animation: modalSlide 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }

      @keyframes modalSlide {
        from {
          opacity: 0;
          transform: translateY(-50px) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .message-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--accent-color)
        );
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .message-text {
        color: var(--text-secondary);
        margin-bottom: 2rem;
        line-height: 1.6;
        font-size: 1.1rem;
        white-space: pre-line;
      }

      .message-btn {
        padding: 1rem 2rem;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--accent-color)
        );
        color: white;
        border: none;
        border-radius: 20px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 1.2rem;
        position: relative;
        overflow: hidden;
      }

      .message-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s;
      }

      .message-btn:hover::before {
        left: 100%;
      }

      .message-btn:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 25px rgba(255, 107, 157, 0.4);
      }

      /* Progress Bar */
      .progress-bar {
        width: 100%;
        height: 8px;
        background: var(--bg-secondary);
        border-radius: 4px;
        overflow: hidden;
        margin: 1rem 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--accent-color)
        );
        border-radius: 4px;
        transition: width 0.5s ease;
        position: relative;
      }

      .progress-fill::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: progressShine 2s ease-in-out infinite;
      }

      @keyframes progressShine {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .game-board-container {
          flex-direction: column;
        }

        .game-controls-panel {
          width: 100%;
          flex-direction: row;
          flex-wrap: wrap;
        }

        .control-panel {
          flex: 1;
          min-width: 250px;
        }
      }

      @media (max-width: 768px) {
        .game-title {
          font-size: 1.5rem;
        }

        .setup-title {
          font-size: 2rem;
        }

        .board-selection {
          grid-template-columns: repeat(2, 1fr);
        }

        .player-selection {
          grid-template-columns: repeat(3, 1fr);
        }

        .content-selection {
          flex-direction: column;
        }

        .game-status {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }

        .dice {
          width: 80px;
          height: 80px;
          font-size: 2rem;
        }

        .game-controls-panel {
          flex-direction: column;
        }

        .control-panel {
          min-width: auto;
        }
      }

      @media (max-width: 480px) {
        .setup-container {
          padding: 1.5rem;
          margin: 1rem;
        }

        .board-selection {
          grid-template-columns: 1fr;
        }

        .player-selection {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      /* Accessibility Styles */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      /* Focus visible styles for keyboard navigation */
      button:focus-visible,
      .board-option:focus-visible,
      .player-option:focus-visible,
      .content-option:focus-visible,
      .answer-option:focus-visible {
        outline: 3px solid #4caf50;
        outline-offset: 3px;
        box-shadow: 0 0 0 6px rgba(76, 175, 80, 0.3);
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>
    <link
      rel="canonical"
      href="https://eslfunonline.com/games/snakeslad.html"
    />
  </head>
  <body>
    <div class="particles" id="particles" aria-hidden="true"></div>

    <header class="game-header" role="banner">
      <div class="header-content">
        <h1 class="game-title">🐍🪜 Super Fun English Snakes & Ladders</h1>
        <div class="game-controls" role="navigation" aria-label="Game controls">
          <button
            class="control-btn"
            onclick="newGame()"
            aria-label="Start a new game adventure"
          >
            <i class="fas fa-plus" aria-hidden="true"></i>
            New Adventure
          </button>
          <button
            class="control-btn secondary"
            onclick="showRules()"
            aria-label="Show game rules and instructions"
          >
            <i class="fas fa-question-circle" aria-hidden="true"></i>
            How to Play
          </button>
          <button
            class="control-btn secondary"
            onclick="showStats()"
            aria-label="View your game statistics"
          >
            <i class="fas fa-trophy" aria-hidden="true"></i>
            My Stats
          </button>
        </div>
      </div>
    </header>

    <!-- Setup Screen -->
    <div
      class="setup-screen"
      id="setupScreen"
      role="main"
      aria-label="Game setup"
    >
      <div class="setup-container">
        <h2 class="setup-title">
          🚀 Start Your English Learning Adventure! 🌟
        </h2>

        <!-- Board Selection -->
        <div class="setup-section">
          <h3><i class="fas fa-map"></i> Choose Your Adventure Board</h3>
          <div
            class="board-selection"
            id="boardSelection"
            role="radiogroup"
            aria-label="Board selection"
          >
            <!-- Board options will be populated here -->
          </div>
        </div>

        <!-- Player Selection -->
        <div class="setup-section">
          <h3><i class="fas fa-user-astronaut"></i> Pick Your Character</h3>
          <div
            class="player-selection"
            id="playerSelection"
            role="radiogroup"
            aria-label="Character selection"
          >
            <!-- Player options will be populated here -->
          </div>
        </div>

        <!-- Content Type Selection -->
        <div class="setup-section">
          <h3><i class="fas fa-brain"></i> What Do You Want to Learn?</h3>
          <div
            class="content-selection"
            id="contentSelection"
            role="radiogroup"
            aria-label="Learning topic selection"
          >
            <button
              class="content-option"
              data-content="vocabulary"
              role="radio"
              aria-checked="false"
            >
              <i class="fas fa-book-open"></i> Fun Vocabulary
            </button>
            <button
              class="content-option"
              data-content="conversation"
              role="radio"
              aria-checked="false"
            >
              <i class="fas fa-comments"></i> Cool Conversations
            </button>
            <button
              class="content-option"
              data-content="grammar"
              role="radio"
              aria-checked="false"
            >
              <i class="fas fa-spell-check"></i> Grammar Games
            </button>
          </div>
        </div>

        <button
          class="start-game-btn"
          id="startGameBtn"
          onclick="startGame()"
          disabled
          aria-label="Start the game with selected options"
        >
          <i class="fas fa-rocket"></i> Start My Adventure!
        </button>
      </div>
    </div>

    <!-- Game Screen -->
    <div
      class="game-screen"
      id="gameScreen"
      role="main"
      aria-label="Game board"
    >
      <!-- Game Status -->
      <div class="game-status" role="status" aria-live="polite">
        <div class="status-item">
          <div class="player-avatar" id="playerAvatar" aria-hidden="true"></div>
          <div>
            <div style="font-size: 1.1rem; font-weight: 700">Your Progress</div>
            <div>
              Square:
              <span
                id="playerPosition"
                class="info-value"
                aria-label="Current position"
                >1</span
              >/100
            </div>
            <div
              class="progress-bar"
              role="progressbar"
              aria-valuenow="1"
              aria-valuemin="1"
              aria-valuemax="100"
            >
              <div
                class="progress-fill"
                id="progressFill"
                style="width: 1%"
              ></div>
            </div>
          </div>
        </div>

        <div class="turn-indicator" id="turnIndicator" aria-live="polite">
          🎲 Roll the Magic Dice! ✨
        </div>

        <div class="status-item">
          <div>
            <div style="font-size: 1.1rem; font-weight: 700" id="contentType">
              Vocabulary Fun
            </div>
            <div>
              Stars:
              <span
                id="playerScore"
                class="info-value"
                aria-label="Current score"
                >0</span
              >
              ⭐
            </div>
            <div>
              Streak:
              <span
                id="correctStreak"
                class="info-value"
                aria-label="Current correct streak"
                >0</span
              >
              🔥
            </div>
          </div>
        </div>
      </div>

      <!-- Game Board Container -->
      <div class="game-board-container">
        <!-- Game Board -->
        <div class="board-area">
          <div
            class="game-board"
            id="gameBoard"
            role="region"
            aria-label="Game board"
          >
            <div class="board-grid" id="boardGrid" role="grid">
              <!-- Board cells will be generated here -->
            </div>
            <div class="player-piece" id="playerPiece" aria-hidden="true"></div>
          </div>
        </div>

        <!-- Game Controls -->
        <div
          class="game-controls-panel"
          role="region"
          aria-label="Game controls"
        >
          <!-- Dice Control -->
          <div class="control-panel">
            <h4>🎲 Magic Dice</h4>
            <div class="dice-container">
              <div
                class="dice"
                id="dice"
                role="img"
                aria-label="Dice showing six"
              >
                <i class="fas fa-dice-six"></i>
              </div>
              <button
                class="roll-btn"
                id="rollBtn"
                onclick="rollDice()"
                aria-label="Roll the dice to move forward"
              >
                🎲 Roll the Dice!
              </button>
            </div>
          </div>

          <!-- Question Panel -->
          <div
            class="control-panel question-panel"
            id="questionPanel"
            role="region"
            aria-label="Question panel"
          >
            <div class="question-title" id="questionTitle">
              <i class="fas fa-star"></i> Learning Challenge
              <i class="fas fa-star"></i>
            </div>
            <div
              class="question-content"
              id="questionContent"
              role="heading"
              aria-level="3"
            >
              <!-- Question will be displayed here -->
            </div>
            <div
              class="question-options"
              id="questionOptions"
              role="group"
              aria-label="Answer options"
            >
              <!-- Options will be displayed here -->
            </div>
            <button
              class="continue-btn"
              id="continueBtn"
              onclick="continueGame()"
              style="display: none"
              aria-label="Continue to next turn"
            >
              ✨ Continue Adventure ✨
            </button>
          </div>

          <!-- Game Info -->
          <div class="control-panel">
            <h4>🎯 Your Stats</h4>
            <div class="game-info">
              <div class="info-item">
                <span><i class="fas fa-footsteps"></i> Moves:</span>
                <span
                  id="moveCount"
                  class="info-value"
                  aria-label="Number of moves"
                  >0</span
                >
              </div>
              <div class="info-item">
                <span><i class="fas fa-clock"></i> Time:</span>
                <span id="gameTime" class="info-value" aria-label="Game time"
                  >0:00</span
                >
              </div>
              <div class="info-item">
                <span><i class="fas fa-check-circle"></i> Correct:</span>
                <span id="correctAnswers" class="info-value">0</span>
              </div>
              <div class="info-item">
                <span><i class="fas fa-percentage"></i> Score:</span>
                <span id="accuracyRate" class="info-value">0%</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Message Modal -->
    <div class="game-message" id="gameMessage">
      <div class="message-content">
        <div class="message-title" id="messageTitle">🎉 Amazing!</div>
        <div class="message-text" id="messageText">You're doing great!</div>
        <button class="message-btn" onclick="closeMessage()">
          <i class="fas fa-arrow-right"></i> Continue
        </button>
      </div>
    </div>

    <script>
      // Game State
      let gameState = {
        selectedBoard: null,
        selectedPlayer: null,
        selectedContent: null,
        playerPosition: 1,
        playerScore: 0,
        moveCount: 0,
        correctAnswers: 0,
        gameStartTime: null,
        currentQuestion: null,
        isMoving: false,
        gameOver: false,
        currentStreak: 0,
        bestStreak: parseInt(localStorage.getItem("sl_bestStreak") || "0"),
        stats: {
          gamesPlayed: parseInt(localStorage.getItem("sl_gamesPlayed") || "0"),
          gamesWon: parseInt(localStorage.getItem("sl_gamesWon") || "0"),
          totalTime: parseInt(localStorage.getItem("sl_totalTime") || "0"),
          bestStreak: parseInt(localStorage.getItem("sl_bestStreak") || "0"),
        },
      };

      // Audio Context for sound effects
      let audioContext;
      let soundEnabled = true;

      // Initialize audio on first user interaction
      function initAudio() {
        if (!audioContext) {
          audioContext = new (window.AudioContext ||
            window.webkitAudioContext)();
        }
      }

      // Play sound effect
      function playSound(type) {
        if (!soundEnabled || !audioContext) return;

        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        switch (type) {
          case "success":
            oscillator.frequency.setValueAtTime(
              523.25,
              audioContext.currentTime
            ); // C5
            oscillator.frequency.setValueAtTime(
              659.25,
              audioContext.currentTime + 0.1
            ); // E5
            oscillator.frequency.setValueAtTime(
              783.99,
              audioContext.currentTime + 0.2
            ); // G5
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(
              0.01,
              audioContext.currentTime + 0.3
            );
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
            break;
          case "error":
            oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(
              0.01,
              audioContext.currentTime + 0.2
            );
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
            break;
          case "dice":
            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(
              880,
              audioContext.currentTime + 0.05
            );
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(
              0.01,
              audioContext.currentTime + 0.15
            );
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.15);
            break;
          case "ladder":
            oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(
              600,
              audioContext.currentTime + 0.1
            );
            oscillator.frequency.setValueAtTime(
              800,
              audioContext.currentTime + 0.2
            );
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(
              0.01,
              audioContext.currentTime + 0.3
            );
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
            break;
          case "snake":
            oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(
              400,
              audioContext.currentTime + 0.1
            );
            oscillator.frequency.setValueAtTime(
              200,
              audioContext.currentTime + 0.2
            );
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(
              0.01,
              audioContext.currentTime + 0.3
            );
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
            break;
          case "win":
            oscillator.frequency.setValueAtTime(
              523.25,
              audioContext.currentTime
            ); // C5
            oscillator.frequency.setValueAtTime(
              659.25,
              audioContext.currentTime + 0.15
            ); // E5
            oscillator.frequency.setValueAtTime(
              783.99,
              audioContext.currentTime + 0.3
            ); // G5
            oscillator.frequency.setValueAtTime(
              1046.5,
              audioContext.currentTime + 0.45
            ); // C6
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(
              0.01,
              audioContext.currentTime + 0.6
            );
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.6);
            break;
        }
      }

      // Screen reader announcements
      function announceToScreenReader(message) {
        const announcement = document.createElement("div");
        announcement.className = "sr-only";
        announcement.setAttribute("role", "status");
        announcement.setAttribute("aria-live", "polite");
        announcement.textContent = message;
        document.body.appendChild(announcement);
        setTimeout(() => announcement.remove(), 1000);
      }

      // Load stats from localStorage
      function loadStats() {
        gameState.stats.gamesPlayed = parseInt(
          localStorage.getItem("sl_gamesPlayed") || "0"
        );
        gameState.stats.gamesWon = parseInt(
          localStorage.getItem("sl_gamesWon") || "0"
        );
        gameState.stats.totalTime = parseInt(
          localStorage.getItem("sl_totalTime") || "0"
        );
        gameState.stats.bestStreak = parseInt(
          localStorage.getItem("sl_bestStreak") || "0"
        );
        gameState.bestStreak = gameState.stats.bestStreak;
      }

      // Save stats to localStorage
      function saveStats() {
        localStorage.setItem(
          "sl_gamesPlayed",
          gameState.stats.gamesPlayed.toString()
        );
        localStorage.setItem(
          "sl_gamesWon",
          gameState.stats.gamesWon.toString()
        );
        localStorage.setItem(
          "sl_totalTime",
          gameState.stats.totalTime.toString()
        );
        localStorage.setItem(
          "sl_bestStreak",
          gameState.stats.bestStreak.toString()
        );
      }

      // Update streak tracking
      function updateStreak(correct) {
        if (correct) {
          gameState.currentStreak++;
          if (gameState.currentStreak > gameState.bestStreak) {
            gameState.bestStreak = gameState.currentStreak;
            gameState.stats.bestStreak = gameState.bestStreak;
            saveStats();
          }
        } else {
          gameState.currentStreak = 0;
        }
      }

      // Board configurations
      const boards = [
        {
          id: "classic",
          name: "Classic Board",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><rect width="400" height="400" fill="%23f0f8ff"/><g stroke="%23333" stroke-width="2" fill="none"><rect x="0" y="0" width="400" height="400"/></g><text x="200" y="200" text-anchor="middle" font-size="20" fill="%23333">Classic Board</text></svg>',
          snakes: { 91: 75, 87: 24, 93: 73, 95: 56, 88: 36 },
          ladders: { 4: 56, 12: 50, 14: 55, 22: 58, 41: 79, 54: 88 },
        },
        {
          id: "jungle",
          name: "Jungle Adventure",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><rect width="400" height="400" fill="%2334d399"/><g stroke="%23059669" stroke-width="2" fill="none"><rect x="0" y="0" width="400" height="400"/></g><text x="200" y="200" text-anchor="middle" font-size="20" fill="%23065f46">Jungle Board</text></svg>',
          snakes: { 89: 53, 90: 48, 76: 63, 95: 24, 92: 51 },
          ladders: { 8: 52, 6: 42, 21: 82, 28: 77, 36: 57, 71: 92 },
        },
        {
          id: "ocean",
          name: "Ocean Quest",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><rect width="400" height="400" fill="%2360a5fa"/><g stroke="%232563eb" stroke-width="2" fill="none"><rect x="0" y="0" width="400" height="400"/></g><text x="200" y="200" text-anchor="middle" font-size="20" fill="%231e40af">Ocean Board</text></svg>',
          snakes: { 83: 19, 90: 48, 76: 63, 98: 79, 85: 23 },
          ladders: { 1: 40, 9: 89, 16: 25, 51: 67, 65: 85, 68: 91 },
        },
        {
          id: "space",
          name: "Space Explorer",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><rect width="400" height="400" fill="%23312e81"/><g stroke="%236366f1" stroke-width="2" fill="none"><rect x="0" y="0" width="400" height="400"/></g><text x="200" y="200" text-anchor="middle" font-size="20" fill="%23c7d2fe">Space Board</text></svg>',
          snakes: { 97: 78, 92: 53, 83: 27, 69: 33, 64: 16 },
          ladders: { 3: 39, 10: 12, 27: 53, 40: 62, 43: 84, 74: 92 },
        },
      ];

      // Player options
      const players = [
        {
          id: "boy",
          name: "Boy",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%234ade80"/><circle cx="50" cy="35" r="15" fill="%23fbbf24"/><text x="50" y="60" text-anchor="middle" font-size="20" fill="white">👦</text></svg>',
        },
        {
          id: "girl",
          name: "Girl",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%23f472b6"/><text x="50" y="60" text-anchor="middle" font-size="20" fill="white">👧</text></svg>',
        },
        {
          id: "cat",
          name: "Cat",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%23fbbf24"/><text x="50" y="60" text-anchor="middle" font-size="20" fill="white">🐱</text></svg>',
        },
        {
          id: "dog",
          name: "Dog",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%23fb7185"/><text x="50" y="60" text-anchor="middle" font-size="20" fill="white">🐶</text></svg>',
        },
        {
          id: "robot",
          name: "Robot",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%236366f1"/><text x="50" y="60" text-anchor="middle" font-size="20" fill="white">🤖</text></svg>',
        },
        {
          id: "alien",
          name: "Alien",
          image:
            'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%2334d399"/><text x="50" y="60" text-anchor="middle" font-size="20" fill="white">👽</text></svg>',
        },
      ];

      // Question banks
      const questionBanks = {
        vocabulary: [
          {
            question: "What is the opposite of 'big'?",
            options: ["Small", "Large", "Huge", "Tiny"],
            correct: 0,
          },
          {
            question: "Which word means 'happy'?",
            options: ["Sad", "Angry", "Joyful", "Tired"],
            correct: 2,
          },
          {
            question: "What do you call a young cat?",
            options: ["Puppy", "Kitten", "Cub", "Chick"],
            correct: 1,
          },
          {
            question: "Which is a color?",
            options: ["Chair", "Blue", "Run", "Happy"],
            correct: 1,
          },
          {
            question: "What is the plural of 'child'?",
            options: ["Childs", "Children", "Childes", "Child"],
            correct: 1,
          },
        ],
        conversation: [
          {
            question: "How do you greet someone in the morning?",
            options: ["Good night", "Good morning", "Goodbye", "See you later"],
            correct: 1,
          },
          {
            question: "What do you say when someone helps you?",
            options: ["Sorry", "Please", "Thank you", "Excuse me"],
            correct: 2,
          },
          {
            question: "How do you ask for someone's name?",
            options: [
              "How old are you?",
              "Where are you from?",
              "What's your name?",
              "How are you?",
            ],
            correct: 2,
          },
          {
            question: "What's a polite way to interrupt someone?",
            options: [
              "Stop talking!",
              "Excuse me",
              "Be quiet!",
              "Listen to me!",
            ],
            correct: 1,
          },
          {
            question: "How do you ask for help?",
            options: [
              "Help me now!",
              "Can you help me, please?",
              "You must help me",
              "I need help immediately",
            ],
            correct: 1,
          },
        ],
        grammar: [
          {
            question: "Choose the correct sentence:",
            options: [
              "I am going to school",
              "I are going to school",
              "I is going to school",
              "I be going to school",
            ],
            correct: 0,
          },
          {
            question: "What is the past tense of 'go'?",
            options: ["Goed", "Goes", "Went", "Going"],
            correct: 2,
          },
          {
            question: "Which is correct?",
            options: [
              "She don't like apples",
              "She doesn't like apples",
              "She not like apples",
              "She no like apples",
            ],
            correct: 1,
          },
          {
            question: "Choose the correct article:",
            options: [
              "A elephant",
              "An elephant",
              "The elephants",
              "Some elephant",
            ],
            correct: 1,
          },
          {
            question: "What's the correct question form?",
            options: [
              "You are happy?",
              "Are you happy?",
              "Happy you are?",
              "You happy are?",
            ],
            correct: 1,
          },
        ],
      };

      // Initialize game
      document.addEventListener("DOMContentLoaded", function () {
        loadStats();
        initializeSetup();
        updateStats();

        // Initialize audio on first user interaction
        document.body.addEventListener("click", initAudio, { once: true });
        document.body.addEventListener("keydown", initAudio, { once: true });

        // Keyboard navigation
        document.addEventListener("keydown", function (e) {
          // Space for dice roll
          if (
            e.code === "Space" &&
            !gameState.isMoving &&
            !gameState.gameOver
          ) {
            const rollBtn = document.getElementById("rollBtn");
            if (
              rollBtn &&
              !rollBtn.disabled &&
              document.getElementById("gameScreen").classList.contains("active")
            ) {
              e.preventDefault();
              rollDice();
            }
          }

          // Enter for continue button
          if (e.code === "Enter") {
            const continueBtn = document.getElementById("continueBtn");
            if (continueBtn && continueBtn.style.display === "block") {
              e.preventDefault();
              continueGame();
            }
          }

          // Escape to exit game
          if (
            e.code === "Escape" &&
            document.getElementById("gameScreen").classList.contains("active")
          ) {
            if (confirm("Are you sure you want to exit the game?")) {
              exitGame();
            }
          }

          // Number keys 1-4 for answer selection
          if (e.key >= "1" && e.key <= "4") {
            const questionPanel = document.getElementById("questionPanel");
            if (questionPanel && questionPanel.classList.contains("active")) {
              const optionBtns = document.querySelectorAll(".option-btn");
              const index = parseInt(e.key) - 1;
              if (optionBtns[index] && !optionBtns[index].disabled) {
                e.preventDefault();
                selectAnswer(index);
              }
            }
          }

          // H for help/instructions
          if (e.code === "KeyH") {
            const instructions = document.getElementById("instructions");
            if (instructions) {
              instructions.style.display =
                instructions.style.display === "none" ? "block" : "none";
            }
          }
        });
      });

      function initializeSetup() {
        // Populate board options
        const boardSelection = document.getElementById("boardSelection");
        boards.forEach((board) => {
          const boardOption = document.createElement("div");
          boardOption.className = "board-option";
          boardOption.style.backgroundImage = `url("${board.image}")`;
          boardOption.dataset.board = board.id;
          boardOption.setAttribute("role", "radio");
          boardOption.setAttribute("aria-checked", "false");
          boardOption.setAttribute("aria-label", board.name);
          boardOption.setAttribute("tabindex", "0");
          boardOption.onclick = () => selectBoard(board.id);
          boardOption.onkeypress = (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              selectBoard(board.id);
            }
          };

          const label = document.createElement("div");
          label.className = "board-label";
          label.textContent = board.name;
          boardOption.appendChild(label);

          boardSelection.appendChild(boardOption);
        });

        // Populate player options
        const playerSelection = document.getElementById("playerSelection");
        players.forEach((player) => {
          const playerOption = document.createElement("div");
          playerOption.className = "player-option";
          playerOption.style.backgroundImage = `url("${player.image}")`;
          playerOption.dataset.player = player.id;
          playerOption.setAttribute("role", "radio");
          playerOption.setAttribute("aria-checked", "false");
          playerOption.setAttribute("aria-label", player.name);
          playerOption.setAttribute("tabindex", "0");
          playerOption.onclick = () => selectPlayer(player.id);
          playerOption.onkeypress = (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              selectPlayer(player.id);
            }
          };
          playerSelection.appendChild(playerOption);
        });

        // Content selection handlers
        document.querySelectorAll(".content-option").forEach((btn) => {
          btn.onclick = () => selectContent(btn.dataset.content);
        });
      }

      function selectBoard(boardId) {
        gameState.selectedBoard = boardId;
        document.querySelectorAll(".board-option").forEach((opt) => {
          opt.classList.remove("selected");
          opt.setAttribute("aria-checked", "false");
        });
        const selected = document.querySelector(`[data-board="${boardId}"]`);
        selected.classList.add("selected");
        selected.setAttribute("aria-checked", "true");
        checkCanStart();
        announceToScreenReader(
          `Board selected: ${boards.find((b) => b.id === boardId).name}`
        );
      }

      function selectPlayer(playerId) {
        gameState.selectedPlayer = playerId;
        document.querySelectorAll(".player-option").forEach((opt) => {
          opt.classList.remove("selected");
          opt.setAttribute("aria-checked", "false");
        });
        const selected = document.querySelector(`[data-player="${playerId}"]`);
        selected.classList.add("selected");
        selected.setAttribute("aria-checked", "true");
        checkCanStart();
        announceToScreenReader(
          `Character selected: ${players.find((p) => p.id === playerId).name}`
        );
      }

      function selectContent(contentType) {
        gameState.selectedContent = contentType;
        document.querySelectorAll(".content-option").forEach((opt) => {
          opt.classList.remove("selected");
          opt.setAttribute("aria-checked", "false");
        });
        const selected = document.querySelector(
          `[data-content="${contentType}"]`
        );
        selected.classList.add("selected");
        selected.setAttribute("aria-checked", "true");
        checkCanStart();
        announceToScreenReader(`Learning topic selected: ${contentType}`);
      }

      function checkCanStart() {
        const canStart =
          gameState.selectedBoard &&
          gameState.selectedPlayer &&
          gameState.selectedContent;
        document.getElementById("startGameBtn").disabled = !canStart;
      }

      function startGame() {
        // Hide setup screen, show game screen
        document.getElementById("setupScreen").style.display = "none";
        document.getElementById("gameScreen").classList.add("active");

        // Initialize game state
        gameState.playerPosition = 1;
        gameState.playerScore = 0;
        gameState.moveCount = 0;
        gameState.correctAnswers = 0;
        gameState.currentStreak = 0;
        gameState.gameStartTime = Date.now();
        gameState.gameOver = false;

        // Setup game board
        setupGameBoard();
        updatePlayerPosition();
        updateGameStatus();
        startGameTimer();

        announceToScreenReader("Game started! Press Space to roll the dice.");
        playSound("success");
      }

      function setupGameBoard() {
        const selectedBoard = boards.find(
          (b) => b.id === gameState.selectedBoard
        );
        const selectedPlayer = players.find(
          (p) => p.id === gameState.selectedPlayer
        );

        // Set board background
        document.getElementById(
          "gameBoard"
        ).style.backgroundImage = `url("${selectedBoard.image}")`;

        // Set player avatar
        document.getElementById(
          "playerAvatar"
        ).style.backgroundImage = `url("${selectedPlayer.image}")`;
        document.getElementById(
          "playerPiece"
        ).style.backgroundImage = `url("${selectedPlayer.image}")`;

        // Set content type display
        document.getElementById("contentType").textContent =
          gameState.selectedContent.charAt(0).toUpperCase() +
          gameState.selectedContent.slice(1);

        // Generate board grid
        generateBoardGrid();
      }

      function generateBoardGrid() {
        const boardGrid = document.getElementById("boardGrid");
        boardGrid.innerHTML = "";

        for (let i = 100; i >= 1; i--) {
          const cell = document.createElement("div");
          cell.className = "board-cell";
          cell.dataset.position = i;
          cell.id = `cell-${i}`;

          // Add cell number for reference (can be styled to be invisible)
          const cellNumber = document.createElement("span");
          cellNumber.textContent = i;
          cellNumber.style.fontSize = "0.6rem";
          cellNumber.style.opacity = "0.3";
          cell.appendChild(cellNumber);

          boardGrid.appendChild(cell);
        }
      }

      function rollDice() {
        if (gameState.isMoving || gameState.gameOver) return;

        const dice = document.getElementById("dice");
        const rollBtn = document.getElementById("rollBtn");

        dice.classList.add("rolling");
        rollBtn.disabled = true;
        playSound("dice");

        setTimeout(() => {
          const diceValue = Math.floor(Math.random() * 6) + 1;
          dice.innerHTML = getDiceIcon(diceValue);
          dice.classList.remove("rolling");
          announceToScreenReader(`You rolled a ${diceValue}`);

          movePlayer(diceValue);
        }, 1000);
      }

      function getDiceIcon(value) {
        const icons = [
          '<i class="fas fa-dice-one"></i>',
          '<i class="fas fa-dice-two"></i>',
          '<i class="fas fa-dice-three"></i>',
          '<i class="fas fa-dice-four"></i>',
          '<i class="fas fa-dice-five"></i>',
          '<i class="fas fa-dice-six"></i>',
        ];
        return icons[value - 1];
      }

      function movePlayer(steps) {
        gameState.isMoving = true;
        gameState.moveCount++;

        const newPosition = Math.min(gameState.playerPosition + steps, 100);

        animatePlayerMovement(gameState.playerPosition, newPosition, () => {
          gameState.playerPosition = newPosition;
          updatePlayerPosition();
          updateGameStatus();

          if (newPosition === 100) {
            endGame(true);
            return;
          }

          checkSpecialSquares();
        });
      }

      function animatePlayerMovement(from, to, callback) {
        const piece = document.getElementById("playerPiece");
        piece.classList.add("moving");

        let current = from;
        const interval = setInterval(() => {
          current++;
          positionPlayerPiece(current);

          if (current >= to) {
            clearInterval(interval);
            piece.classList.remove("moving");
            setTimeout(callback, 300);
          }
        }, 200);
      }

      function positionPlayerPiece(position) {
        const cell = document.getElementById(`cell-${position}`);
        const piece = document.getElementById("playerPiece");

        if (cell) {
          const rect = cell.getBoundingClientRect();
          const boardRect = document
            .getElementById("gameBoard")
            .getBoundingClientRect();

          piece.style.left = `${
            rect.left - boardRect.left + rect.width / 2 - 15
          }px`;
          piece.style.top = `${
            rect.top - boardRect.top + rect.height / 2 - 15
          }px`;
        }
      }

      function updatePlayerPosition() {
        document.getElementById("playerPosition").textContent =
          gameState.playerPosition;
        positionPlayerPiece(gameState.playerPosition);
      }

      function updateGameStatus() {
        document.getElementById("playerScore").textContent =
          gameState.playerScore;
        document.getElementById("moveCount").textContent = gameState.moveCount;
        document.getElementById("correctAnswers").textContent =
          gameState.correctAnswers;
        document.getElementById("correctStreak").textContent =
          gameState.currentStreak;

        // Update progress bar
        const progressBar = document.getElementById("progressFill");
        if (progressBar) {
          progressBar.style.width = `${gameState.playerPosition}%`;
          progressBar.parentElement.setAttribute(
            "aria-valuenow",
            gameState.playerPosition
          );
        }
      }

      function checkSpecialSquares() {
        const selectedBoard = boards.find(
          (b) => b.id === gameState.selectedBoard
        );
        const position = gameState.playerPosition;

        if (selectedBoard.snakes[position]) {
          playSound("snake");
          announceToScreenReader(
            `Snake bite! You slid down from ${position} to ${selectedBoard.snakes[position]}`
          );
          showMessage(
            "Snake Bite! 🐍",
            `Oh no! You slid down from ${position} to ${selectedBoard.snakes[position]}!`,
            () => {
              gameState.playerPosition = selectedBoard.snakes[position];
              updatePlayerPosition();
              showQuestion();
            }
          );
        } else if (selectedBoard.ladders[position]) {
          playSound("ladder");
          announceToScreenReader(
            `Ladder climb! You climbed up from ${position} to ${selectedBoard.ladders[position]}`
          );
          showMessage(
            "Ladder Climb! 🪜",
            `Great! You climbed up from ${position} to ${selectedBoard.ladders[position]}!`,
            () => {
              gameState.playerPosition = selectedBoard.ladders[position];
              updatePlayerPosition();
              showQuestion();
            }
          );
        } else {
          showQuestion();
        }
      }

      function showQuestion() {
        const questions = questionBanks[gameState.selectedContent];
        const randomQuestion =
          questions[Math.floor(Math.random() * questions.length)];
        gameState.currentQuestion = randomQuestion;

        document.getElementById("questionTitle").textContent = `${
          gameState.selectedContent.charAt(0).toUpperCase() +
          gameState.selectedContent.slice(1)
        } Challenge`;
        document.getElementById("questionContent").textContent =
          randomQuestion.question;

        const optionsContainer = document.getElementById("questionOptions");
        optionsContainer.innerHTML = "";

        randomQuestion.options.forEach((option, index) => {
          const button = document.createElement("button");
          button.className = "option-btn";
          button.textContent = option;
          button.setAttribute("aria-label", `Option ${index + 1}: ${option}`);
          button.onclick = () => selectAnswer(index);
          optionsContainer.appendChild(button);
        });

        document.getElementById("questionPanel").classList.add("active");
        announceToScreenReader(
          `Question: ${randomQuestion.question}. Press 1 through 4 to select an answer.`
        );
      }

      function selectAnswer(selectedIndex) {
        const buttons = document.querySelectorAll(".option-btn");
        const correct = gameState.currentQuestion.correct;

        buttons.forEach((btn, index) => {
          btn.disabled = true;
          if (index === correct) {
            btn.classList.add("correct");
          } else if (index === selectedIndex && index !== correct) {
            btn.classList.add("incorrect");
          }
        });

        const isCorrect = selectedIndex === correct;

        if (isCorrect) {
          gameState.playerScore += 10;
          gameState.correctAnswers++;
          updateStreak(true);
          playSound("success");
          announceToScreenReader(
            `Correct! Your score is now ${gameState.playerScore}. Current streak: ${gameState.currentStreak}`
          );
          updateGameStatus();
        } else {
          updateStreak(false);
          playSound("error");
          announceToScreenReader(
            "Incorrect answer. Your streak has been reset."
          );
        }

        document.getElementById("continueBtn").style.display = "block";
      }

      function continueGame() {
        document.getElementById("questionPanel").classList.remove("active");
        document.getElementById("continueBtn").style.display = "none";
        document.getElementById("rollBtn").disabled = false;
        gameState.isMoving = false;
      }

      function startGameTimer() {
        setInterval(() => {
          if (!gameState.gameOver && gameState.gameStartTime) {
            const elapsed = Math.floor(
              (Date.now() - gameState.gameStartTime) / 1000
            );
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById(
              "gameTime"
            ).textContent = `${minutes}:${seconds.toString().padStart(2, "0")}`;
          }
        }, 1000);
      }

      function endGame(won) {
        gameState.gameOver = true;
        const gameTime = Math.floor(
          (Date.now() - gameState.gameStartTime) / 1000
        );

        // Update stats
        gameState.stats.gamesPlayed++;
        gameState.stats.totalTime += gameTime;
        if (won) {
          gameState.stats.gamesWon++;
        }

        // Save stats
        saveStats();

        if (won) {
          playSound("win");
          announceToScreenReader(
            `Congratulations! You won the game! Final score: ${gameState.playerScore}. Best streak: ${gameState.bestStreak}`
          );
          showMessage(
            "🎉 Congratulations!",
            `You won the game!\nTime: ${Math.floor(gameTime / 60)}:${(
              gameTime % 60
            )
              .toString()
              .padStart(2, "0")}\nScore: ${
              gameState.playerScore
            }\nCorrect Answers: ${gameState.correctAnswers}/${
              gameState.moveCount
            }\nBest Streak: ${gameState.bestStreak}`,
            () => {
              newGame();
            }
          );
        }

        updateStats();
      }

      function showMessage(title, text, callback) {
        document.getElementById("messageTitle").textContent = title;
        document.getElementById("messageText").textContent = text;
        document.getElementById("gameMessage").classList.add("show");

        document.querySelector(".message-btn").onclick = () => {
          closeMessage();
          if (callback) callback();
        };
      }

      function closeMessage() {
        document.getElementById("gameMessage").classList.remove("show");
      }

      function newGame() {
        // Reset game state
        gameState = {
          selectedBoard: null,
          selectedPlayer: null,
          selectedContent: null,
          playerPosition: 1,
          playerScore: 0,
          moveCount: 0,
          correctAnswers: 0,
          gameStartTime: null,
          currentQuestion: null,
          isMoving: false,
          gameOver: false,
          currentStreak: 0,
          bestStreak: gameState.bestStreak,
          stats: gameState.stats,
        };

        // Reset UI
        document.getElementById("gameScreen").classList.remove("active");
        document.getElementById("setupScreen").style.display = "flex";
        document
          .querySelectorAll(".selected")
          .forEach((el) => el.classList.remove("selected"));
        document.getElementById("startGameBtn").disabled = true;
        document.getElementById("rollBtn").disabled = false;
        document.getElementById("questionPanel").classList.remove("active");
      }

      function exitGame() {
        if (!gameState.gameOver) {
          // Save incomplete game stats
          const gameTime = Math.floor(
            (Date.now() - gameState.gameStartTime) / 1000
          );
          gameState.stats.gamesPlayed++;
          gameState.stats.totalTime += gameTime;
          saveStats();
        }
        newGame();
      }

      function showRules() {
        showMessage(
          "🎯 Game Rules",
          "Roll the dice to move forward. Answer questions correctly to earn points. Climb ladders to go up, avoid snakes that take you down. First to reach square 100 wins!"
        );
      }

      function showStats() {
        const winRate =
          gameState.stats.gamesPlayed > 0
            ? Math.round(
                (gameState.stats.gamesWon / gameState.stats.gamesPlayed) * 100
              )
            : 0;
        const avgTime =
          gameState.stats.gamesPlayed > 0
            ? Math.round(
                gameState.stats.totalTime / gameState.stats.gamesPlayed
              )
            : 0;

        showMessage(
          "📊 Your Stats",
          `Games Played: ${gameState.stats.gamesPlayed}\nGames Won: ${
            gameState.stats.gamesWon
          }\nWin Rate: ${winRate}%\nAverage Time: ${Math.floor(
            avgTime / 60
          )}:${(avgTime % 60).toString().padStart(2, "0")}\nBest Streak: ${
            gameState.stats.bestStreak
          } correct in a row`
        );
      }

      function updateStats() {
        // This function can be called to refresh any stats displays
      }
    </script>
    <script src="../js/game-ads.js"></script>
  </body>
</html>
