<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Word Scramble Challenge - ESL Fun Online</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/game-ads.css" />

    <style>
      :root {
        --primary-color: #46bbe5;
        --primary-hover: #05425c;
        --secondary-color: #f59e0b;
        --accent-color: #10b981;
        --game-red: #ef4444;
        --game-blue: #3b82f6;
        --game-green: #10b981;
        --game-purple: #8b5cf6;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --text-light: #9ca3af;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --bg-tertiary: #f3f4f6;
        --border-color: #e5e7eb;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1),
          0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1),
          0 4px 6px -4px rgb(0 0 0 / 0.1);
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gradient-game: linear-gradient(
          135deg,
          #ff9a9e 0%,
          #fecfef 50%,
          #fecfef 100%
        );
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--gradient-game);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-primary);
        padding: 1rem;
      }

      .game-container {
        background: var(--bg-primary);
        border-radius: 24px;
        padding: 2rem;
        box-shadow: var(--shadow-lg);
        max-width: 600px;
        width: 100%;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .game-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 6px;
        background: var(--gradient-primary);
        z-index: 1;
      }

      .header {
        margin-bottom: 2rem;
      }

      .game-title {
        font-family: "Poppins", sans-serif;
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .game-subtitle {
        color: var(--text-secondary);
        font-size: 1.1rem;
        margin-bottom: 1rem;
      }

      .stats-bar {
        display: flex;
        justify-content: space-between;
        background: var(--bg-secondary);
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 2rem;
      }

      .stat {
        text-align: center;
      }

      .stat-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        display: block;
      }

      .stat-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      .game-area {
        margin-bottom: 2rem;
      }

      .difficulty-selector {
        margin-bottom: 2rem;
      }

      .difficulty-buttons {
        display: flex;
        gap: 0.75rem;
        justify-content: center;
        flex-wrap: wrap;
      }

      .difficulty-btn {
        padding: 0.75rem 1.5rem;
        border: 2px solid var(--border-color);
        background: var(--bg-primary);
        color: var(--text-primary);
        border-radius: 25px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .difficulty-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .difficulty-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
      }

      .word-display {
        background: var(--bg-tertiary);
        padding: 2rem;
        border-radius: 16px;
        margin-bottom: 2rem;
        border: 3px dashed var(--border-color);
      }

      .definition {
        font-size: 1.1rem;
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
        font-style: italic;
      }

      .scrambled-word {
        font-family: "Poppins", sans-serif;
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        letter-spacing: 0.5rem;
        margin-bottom: 1.5rem;
        text-transform: uppercase;
        word-break: break-all;
      }

      .input-area {
        margin-bottom: 2rem;
      }

      .word-input {
        width: 100%;
        padding: 1rem;
        font-size: 1.25rem;
        border: 3px solid var(--border-color);
        border-radius: 12px;
        text-align: center;
        font-weight: 600;
        transition: all 0.3s ease;
        background: var(--bg-primary);
      }

      .word-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
      }

      .game-controls {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 2rem;
      }

      .btn {
        padding: 1rem 2rem;
        border: none;
        border-radius: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: var(--primary-color);
        color: white;
      }

      .btn-primary:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
      }

      .btn-secondary {
        background: var(--bg-secondary);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .btn-secondary:hover {
        background: var(--bg-tertiary);
        transform: translateY(-2px);
      }

      .btn-success {
        background: var(--accent-color);
        color: white;
      }

      .btn-warning {
        background: var(--secondary-color);
        color: white;
      }

      .feedback {
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        font-weight: 600;
        opacity: 0;
        transform: translateY(-10px);
        transition: all 0.3s ease;
      }

      .feedback.show {
        opacity: 1;
        transform: translateY(0);
      }

      .feedback.correct {
        background: rgba(16, 185, 129, 0.1);
        color: var(--accent-color);
        border: 2px solid var(--accent-color);
      }

      .feedback.incorrect {
        background: rgba(239, 68, 68, 0.1);
        color: var(--game-red);
        border: 2px solid var(--game-red);
      }

      .hint {
        background: rgba(245, 158, 11, 0.1);
        color: var(--secondary-color);
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        border: 2px solid var(--secondary-color);
        font-weight: 500;
      }

      .progress-bar {
        background: var(--bg-secondary);
        height: 8px;
        border-radius: 4px;
        margin-bottom: 1rem;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: var(--gradient-primary);
        transition: width 0.3s ease;
        border-radius: 4px;
      }

      .home-btn {
        position: absolute;
        top: 1rem;
        left: 1rem;
        background: var(--bg-secondary);
        border: 2px solid var(--border-color);
        color: var(--text-primary);
        padding: 0.75rem;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .home-btn:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
        transform: translateY(-2px);
      }

      .celebration {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1000;
      }

      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: var(--primary-color);
        animation: confetti-fall 3s linear forwards;
      }

      @keyframes confetti-fall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0;
        }
      }

      @media (max-width: 768px) {
        .game-container {
          margin: 1rem;
          padding: 1.5rem;
        }

        .game-title {
          font-size: 2rem;
        }

        .scrambled-word {
          font-size: 2rem;
          letter-spacing: 0.25rem;
        }

        .stats-bar {
          flex-direction: column;
          gap: 1rem;
        }

        .game-controls {
          flex-direction: column;
        }

        .btn {
          width: 100%;
          justify-content: center;
        }
      }

      @media (max-width: 480px) {
        .scrambled-word {
          font-size: 1.5rem;
          letter-spacing: 0.1rem;
        }

        .difficulty-buttons {
          flex-direction: column;
        }

        .difficulty-btn {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="celebration" id="celebration"></div>

    <div class="game-container">
      <a href="games.html" class="home-btn" title="Back to Games">
        <i class="fas fa-arrow-left"></i>
      </a>

      <div class="header">
        <h1 class="game-title">
          <i class="fas fa-puzzle-piece"></i>
          Word Scramble
        </h1>
        <p class="game-subtitle">Unscramble the letters to find the word!</p>
      </div>

      <div class="stats-bar">
        <div class="stat">
          <span class="stat-value" id="score">0</span>
          <span class="stat-label">Score</span>
        </div>
        <div class="stat">
          <span class="stat-value" id="streak">0</span>
          <span class="stat-label">Streak</span>
        </div>
        <div class="stat">
          <span class="stat-value" id="level">1</span>
          <span class="stat-label">Level</span>
        </div>
        <div class="stat">
          <span class="stat-value" id="timer">60</span>
          <span class="stat-label">Time</span>
        </div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
      </div>

      <div class="difficulty-selector" id="difficultySelector">
        <h3 style="margin-bottom: 1rem; color: var(--text-primary)">
          Choose Difficulty:
        </h3>
        <div class="difficulty-buttons">
          <button class="difficulty-btn active" data-difficulty="easy">
            <i class="fas fa-seedling"></i> Easy (4-5 letters)
          </button>
          <button class="difficulty-btn" data-difficulty="medium">
            <i class="fas fa-star"></i> Medium (6-7 letters)
          </button>
          <button class="difficulty-btn" data-difficulty="hard">
            <i class="fas fa-fire"></i> Hard (8+ letters)
          </button>
        </div>
      </div>

      <div class="game-area" id="gameArea" style="display: none">
        <div class="word-display">
          <div class="definition" id="definition"></div>
          <div class="scrambled-word" id="scrambledWord"></div>
          <div class="hint" id="hint" style="display: none"></div>
        </div>

        <div class="input-area">
          <input
            type="text"
            class="word-input"
            id="wordInput"
            placeholder="Type your answer here..."
            autocomplete="off"
          />
        </div>

        <div class="feedback" id="feedback"></div>

        <div class="game-controls">
          <button class="btn btn-primary" id="submitBtn">
            <i class="fas fa-check"></i> Submit
          </button>
          <button class="btn btn-secondary" id="skipBtn">
            <i class="fas fa-forward"></i> Skip
          </button>
          <button class="btn btn-warning" id="hintBtn">
            <i class="fas fa-lightbulb"></i> Hint
          </button>
          <button
            class="btn btn-secondary"
            id="newGameBtn"
            style="display: none"
          >
            <i class="fas fa-play"></i> New Game
          </button>
        </div>
      </div>
    </div>

    <script>
      class WordScrambleGame {
        constructor() {
          this.score = 0;
          this.streak = 0;
          this.level = 1;
          this.currentWord = "";
          this.currentDefinition = "";
          this.scrambledLetters = "";
          this.difficulty = "easy";
          this.timeLeft = 60;
          this.gameActive = false;
          this.timer = null;
          this.hintsUsed = 0;
          this.wordsCompleted = 0;

          this.words = {
            easy: [
              { word: "HAPPY", definition: "Feeling joy or pleasure" },
              { word: "BOOKS", definition: "Things you read to learn" },
              { word: "WATER", definition: "Clear liquid we drink" },
              { word: "SMILE", definition: "Expression of happiness on face" },
              { word: "HOUSE", definition: "Building where people live" },
              { word: "MUSIC", definition: "Sounds arranged in harmony" },
              { word: "LIGHT", definition: "Brightness that helps us see" },
              { word: "PEACE", definition: "State of calm and quiet" },
              { word: "DREAM", definition: "Images in mind while sleeping" },
              { word: "WORLD", definition: "The planet Earth" },
              { word: "FRESH", definition: "New and clean" },
              { word: "SPORT", definition: "Physical activity or game" },
              { word: "PLANT", definition: "Living thing that grows in soil" },
              { word: "BEACH", definition: "Sandy area by the ocean" },
              { word: "FRONT", definition: "The forward part of something" },
            ],
            medium: [
              {
                word: "RAINBOW",
                definition: "Colorful arc in the sky after rain",
              },
              { word: "KITCHEN", definition: "Room where food is prepared" },
              { word: "MORNING", definition: "Early part of the day" },
              {
                word: "BUTTERFLY",
                definition: "Colorful insect with large wings",
              },
              { word: "HOLIDAY", definition: "Special day of celebration" },
              { word: "FREEDOM", definition: "State of being free" },
              { word: "PICTURE", definition: "Image or photograph" },
              { word: "CHICKEN", definition: "Common farm bird" },
              { word: "SCIENCE", definition: "Study of the natural world" },
              { word: "WEATHER", definition: "Atmospheric conditions" },
              {
                word: "JOURNEY",
                definition: "A trip from one place to another",
              },
              { word: "STUDENT", definition: "Person who studies at school" },
              { word: "TEACHER", definition: "Person who educates others" },
              { word: "MACHINE", definition: "Device that performs work" },
              {
                word: "BETWEEN",
                definition: "In the space separating two things",
              },
            ],
            hard: [
              { word: "BEAUTIFUL", definition: "Very pleasing to look at" },
              {
                word: "ADVENTURE",
                definition: "Exciting and risky experience",
              },
              {
                word: "CHOCOLATE",
                definition: "Sweet brown food made from cocoa",
              },
              {
                word: "KNOWLEDGE",
                definition: "Information and understanding",
              },
              { word: "HAPPINESS", definition: "State of being happy" },
              {
                word: "EDUCATION",
                definition: "Process of learning and teaching",
              },
              { word: "WONDERFUL", definition: "Extremely good or excellent" },
              {
                word: "CELEBRATE",
                definition: "To mark a special occasion with joy",
              },
              { word: "IMPORTANT", definition: "Having great significance" },
              { word: "FANTASTIC", definition: "Extraordinarily good" },
              { word: "DIFFERENT", definition: "Not the same as another" },
              {
                word: "CHALLENGE",
                definition: "Difficult task that requires effort",
              },
              {
                word: "COMMUNITY",
                definition: "Group of people living together",
              },
              {
                word: "TRADITION",
                definition: "Custom passed down through generations",
              },
              { word: "CREATIVITY", definition: "Ability to create new ideas" },
            ],
          };

          this.initializeElements();
          this.bindEvents();
        }

        initializeElements() {
          this.scoreEl = document.getElementById("score");
          this.streakEl = document.getElementById("streak");
          this.levelEl = document.getElementById("level");
          this.timerEl = document.getElementById("timer");
          this.progressEl = document.getElementById("progressFill");
          this.difficultySelector =
            document.getElementById("difficultySelector");
          this.gameArea = document.getElementById("gameArea");
          this.definitionEl = document.getElementById("definition");
          this.scrambledWordEl = document.getElementById("scrambledWord");
          this.wordInput = document.getElementById("wordInput");
          this.feedback = document.getElementById("feedback");
          this.hintEl = document.getElementById("hint");
          this.submitBtn = document.getElementById("submitBtn");
          this.skipBtn = document.getElementById("skipBtn");
          this.hintBtn = document.getElementById("hintBtn");
          this.newGameBtn = document.getElementById("newGameBtn");
          this.celebration = document.getElementById("celebration");
        }

        bindEvents() {
          // Difficulty selection
          document.querySelectorAll(".difficulty-btn").forEach((btn) => {
            btn.addEventListener("click", () => {
              document
                .querySelectorAll(".difficulty-btn")
                .forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              this.difficulty = btn.dataset.difficulty;
              this.startGame();
            });
          });

          // Game controls
          this.submitBtn.addEventListener("click", () => this.checkAnswer());
          this.skipBtn.addEventListener("click", () => this.skipWord());
          this.hintBtn.addEventListener("click", () => this.showHint());
          this.newGameBtn.addEventListener("click", () => this.resetGame());

          // Input handling
          this.wordInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
              this.checkAnswer();
            }
          });

          this.wordInput.addEventListener("input", () => {
            this.hideFeedback();
          });
        }

        startGame() {
          this.gameActive = true;
          this.difficultySelector.style.display = "none";
          this.gameArea.style.display = "block";
          this.wordInput.focus();
          this.nextWord();
          this.startTimer();
        }

        startTimer() {
          this.timer = setInterval(() => {
            this.timeLeft--;
            this.timerEl.textContent = this.timeLeft;

            if (this.timeLeft <= 0) {
              this.endGame();
            }
          }, 1000);
        }

        nextWord() {
          const wordList = this.words[this.difficulty];
          const randomWord =
            wordList[Math.floor(Math.random() * wordList.length)];

          this.currentWord = randomWord.word;
          this.currentDefinition = randomWord.definition;
          this.scrambledLetters = this.scrambleWord(this.currentWord);

          this.definitionEl.textContent = this.currentDefinition;
          this.scrambledWordEl.textContent = this.scrambledLetters;
          this.wordInput.value = "";
          this.hideFeedback();
          this.hintEl.style.display = "none";

          // Update progress
          this.updateProgress();
        }

        scrambleWord(word) {
          const letters = word.split("");
          for (let i = letters.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [letters[i], letters[j]] = [letters[j], letters[i]];
          }
          return letters.join("");
        }

        checkAnswer() {
          const userAnswer = this.wordInput.value.trim().toUpperCase();

          if (!userAnswer) {
            this.showFeedback("Please enter an answer!", "incorrect");
            return;
          }

          if (userAnswer === this.currentWord) {
            this.correctAnswer();
          } else {
            this.incorrectAnswer();
          }
        }

        correctAnswer() {
          const points = this.calculatePoints();
          this.score += points;
          this.streak++;
          this.wordsCompleted++;

          if (this.wordsCompleted % 5 === 0) {
            this.level++;
            this.timeLeft += 10; // Bonus time for level up
          }

          this.updateDisplay();
          this.showFeedback(`Correct! +${points} points`, "correct");
          this.createConfetti();

          setTimeout(() => {
            this.nextWord();
          }, 1500);
        }

        incorrectAnswer() {
          this.streak = 0;
          this.showFeedback(
            `Incorrect! The answer was "${this.currentWord}"`,
            "incorrect"
          );

          setTimeout(() => {
            this.nextWord();
          }, 2000);
        }

        calculatePoints() {
          let basePoints = 10;

          // Difficulty multiplier
          if (this.difficulty === "medium") basePoints *= 1.5;
          if (this.difficulty === "hard") basePoints *= 2;

          // Streak bonus
          basePoints += this.streak * 2;

          // Time bonus (faster answers get more points)
          const timeBonus = Math.max(0, Math.floor(this.timeLeft / 10));
          basePoints += timeBonus;

          return Math.floor(basePoints);
        }

        skipWord() {
          this.streak = 0;
          this.showFeedback(
            `Skipped! The answer was "${this.currentWord}"`,
            "incorrect"
          );

          setTimeout(() => {
            this.nextWord();
          }, 1500);
        }

        showHint() {
          if (this.currentWord.length > 0) {
            const hintText = `First letter: ${this.currentWord[0]} | Length: ${this.currentWord.length} letters`;
            this.hintEl.textContent = hintText;
            this.hintEl.style.display = "block";
            this.hintsUsed++;
          }
        }

        showFeedback(message, type) {
          this.feedback.textContent = message;
          this.feedback.className = `feedback ${type} show`;
        }

        hideFeedback() {
          this.feedback.classList.remove("show");
        }

        updateDisplay() {
          this.scoreEl.textContent = this.score;
          this.streakEl.textContent = this.streak;
          this.levelEl.textContent = this.level;
        }

        updateProgress() {
          const progress = (this.wordsCompleted % 5) * 20;
          this.progressEl.style.width = `${progress}%`;
        }

        createConfetti() {
          const colors = [
            "#4f46e5",
            "#10b981",
            "#f59e0b",
            "#ef4444",
            "#8b5cf6",
          ];

          for (let i = 0; i < 50; i++) {
            const confetti = document.createElement("div");
            confetti.className = "confetti";
            confetti.style.left = Math.random() * 100 + "%";
            confetti.style.background =
              colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDelay = Math.random() * 3 + "s";

            this.celebration.appendChild(confetti);

            setTimeout(() => {
              confetti.remove();
            }, 3000);
          }
        }

        endGame() {
          this.gameActive = false;
          clearInterval(this.timer);

          this.showFeedback(
            `Game Over! Final Score: ${this.score}`,
            "incorrect"
          );
          this.newGameBtn.style.display = "inline-flex";
          this.submitBtn.style.display = "none";
          this.skipBtn.style.display = "none";
          this.hintBtn.style.display = "none";
          this.wordInput.disabled = true;
        }

        resetGame() {
          this.score = 0;
          this.streak = 0;
          this.level = 1;
          this.timeLeft = 60;
          this.wordsCompleted = 0;
          this.hintsUsed = 0;

          clearInterval(this.timer);

          this.updateDisplay();
          this.updateProgress();

          this.newGameBtn.style.display = "none";
          this.submitBtn.style.display = "inline-flex";
          this.skipBtn.style.display = "inline-flex";
          this.hintBtn.style.display = "inline-flex";
          this.wordInput.disabled = false;

          this.gameArea.style.display = "none";
          this.difficultySelector.style.display = "block";
          this.hideFeedback();
        }
      }

      // Initialize the game when page loads
      document.addEventListener("DOMContentLoaded", () => {
        new WordScrambleGame();
      });
    </script>
    <script src="../js/game-ads.js"></script>
  </body>
</html>
