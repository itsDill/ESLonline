<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Memory Match ESL - Vocabulary Matching Game | ESL Fun Online</title>
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="../images/1.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../images/1.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="../images/1.png" />
    <link rel="shortcut icon" href="../images/1.png" />
    <link rel="icon" href="../images/1.png" />


    <meta
      name="description"
      content="Play Memory Match ESL - match vocabulary words with definitions! Improve memory and learn new English words with 5 categories and 3 difficulty levels."
    />
    <meta
      name="keywords"
      content="memory match game, ESL vocabulary game, word matching, memory training, English learning game, vocabulary practice"
    />
    <meta name="author" content="ESL Fun Online" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:title"
      content="Memory Match ESL - Vocabulary Matching Game | ESL Fun Online"
    />
    <meta
      property="og:description"
      content="Match vocabulary words with their definitions or images! Improve your memory and learn new words in this classic matching game."
    />
    <meta
      property="og:image"
      content="https://eslfunonline.com/images/image copy 13.png"
    />
    <meta
      property="og:url"
      content="https://eslfunonline.com/games/memory-match.html"
    />
    <meta property="og:type" content="game" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Memory Match ESL - Vocabulary Matching Game"
    />
    <meta
      name="twitter:description"
      content="Match vocabulary words with definitions and improve your memory!"
    />
    <meta
      name="twitter:image"
      content="https://eslfunonline.com/images/image copy 13.png"
    />
    <link
      rel="canonical"
      href="https://eslfunonline.com/games/memory-match.html"
    />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9G9RD6BHLN");
    </script>

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Game",
        "name": "Memory Match ESL - Vocabulary Matching Game",
        "description": "Match vocabulary words with definitions and improve your memory! ESL learning game with multiple categories and difficulty levels.",
        "url": "https://eslfunonline.com/games/memory-match.html",
        "image": "https://eslfunonline.com/images/image copy 13.png",
        "author": {
          "@type": "Organization",
          "name": "ESL Fun Online"
        },
        "publisher": {
          "@type": "Organization",
          "name": "ESL Fun Online",
          "url": "https://eslfunonline.com"
        },
        "genre": ["Educational", "Memory", "Vocabulary"],
        "audience": {
          "@type": "EducationalAudience",
          "educationalRole": "student",
          "audienceType": "ESL Learners"
        },
        "educationalUse": "Vocabulary Building and Memory Training",
        "interactivityType": "active",
        "learningResourceType": "game",
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "isFamilyFriendly": true
      }
    </script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/game-ads.css" />

    <style>
      :root {
        --primary-color: #46bbe5;
        --primary-hover: #05425c;
        --secondary-color: #f59e0b;
        --accent-color: #10b981;
        --danger-color: #ef4444;
        --success-color: #10b981;
        --purple-color: #8b5cf6;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --bg-tertiary: #f3f4f6;
        --border-color: #e5e7eb;
        --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: var(--text-primary);
        padding: 1rem;
      }

      .game-container {
        max-width: 1200px;
        margin: 0 auto;
        background: var(--bg-primary);
        border-radius: 20px;
        box-shadow: var(--shadow-lg);
        padding: 2rem;
      }

      .game-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .game-header h1 {
        font-family: "Poppins", sans-serif;
        font-size: 2.5rem;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .game-header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
      }

      .game-controls {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .control-group {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .control-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
        font-weight: 600;
      }

      .difficulty-selector,
      .category-selector {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }

      .selector-btn {
        padding: 0.5rem 1rem;
        border: 2px solid var(--border-color);
        background: var(--bg-secondary);
        color: var(--text-primary);
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .selector-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .selector-btn:hover {
        transform: translateY(-2px);
      }

      .game-stats {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .stat-card {
        background: var(--bg-secondary);
        padding: 1rem 1.5rem;
        border-radius: 15px;
        text-align: center;
        min-width: 120px;
      }

      .stat-value {
        font-size: 1.8rem;
        font-weight: bold;
        color: var(--primary-color);
      }

      .stat-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .timer {
        color: var(--secondary-color);
      }

      .moves {
        color: var(--purple-color);
      }

      .matches {
        color: var(--success-color);
      }

      .accuracy {
        color: var(--accent-color);
      }

      .game-board {
        display: grid;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 2rem;
        padding: 1rem;
        background: var(--bg-secondary);
        border-radius: 15px;
      }

      .board-easy {
        grid-template-columns: repeat(4, 1fr);
        max-width: 600px;
        margin: 0 auto;
      }

      .board-medium {
        grid-template-columns: repeat(6, 1fr);
        max-width: 800px;
        margin: 0 auto;
      }

      .board-hard {
        grid-template-columns: repeat(8, 1fr);
        max-width: 1000px;
        margin: 0 auto;
      }

      .memory-card {
        aspect-ratio: 1;
        background: var(--bg-primary);
        border: 3px solid var(--border-color);
        border-radius: 15px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        font-weight: 600;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        min-height: 100px;
      }

      .memory-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow);
      }

      .memory-card.flipped {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
        transform: rotateY(180deg);
      }

      .memory-card.matched {
        background: var(--success-color);
        color: white;
        border-color: var(--success-color);
        cursor: default;
        transform: scale(0.95);
      }

      .card-back {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: var(--primary-color);
      }

      .card-front {
        display: none;
        text-align: center;
        padding: 0.5rem;
        line-height: 1.2;
      }

      .memory-card.flipped .card-back {
        display: none;
      }

      .memory-card.flipped .card-front {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .card-emoji {
        font-size: 2rem;
        margin-bottom: 0.25rem;
      }

      .card-text {
        font-size: 0.8rem;
        font-weight: 600;
        text-align: center;
      }

      .game-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 2rem;
      }

      .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: var(--primary-color);
        color: white;
      }

      .btn-primary:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
      }

      .btn-success {
        background: var(--success-color);
        color: white;
      }

      .btn-secondary {
        background: var(--bg-tertiary);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .btn-secondary:hover {
        background: var(--bg-secondary);
        border-color: var(--primary-color);
      }

      .btn-hint {
        background: var(--secondary-color);
        color: white;
      }

      .game-message {
        margin: 1rem 0;
        padding: 1rem;
        border-radius: 10px;
        font-weight: 600;
        text-align: center;
        font-size: 1.1rem;
        display: none;
      }

      .message-success {
        background: rgba(16, 185, 129, 0.1);
        color: var(--success-color);
        border: 2px solid rgba(16, 185, 129, 0.3);
      }

      .message-info {
        background: rgba(70, 187, 229, 0.1);
        color: var(--primary-color);
        border: 2px solid rgba(70, 187, 229, 0.3);
      }

      .completion-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }

      .completion-modal.show {
        display: flex;
      }

      .modal-content {
        background: var(--bg-primary);
        padding: 2rem;
        border-radius: 20px;
        text-align: center;
        max-width: 500px;
        margin: 1rem;
        box-shadow: var(--shadow-lg);
      }

      .modal-title {
        font-size: 2rem;
        color: var(--success-color);
        margin-bottom: 1rem;
      }

      .modal-stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin: 1.5rem 0;
      }

      .modal-stat {
        background: var(--bg-secondary);
        padding: 1rem;
        border-radius: 10px;
      }

      .modal-stat-value {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--primary-color);
      }

      .modal-stat-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .star-rating {
        display: flex;
        justify-content: center;
        gap: 0.25rem;
        margin: 1rem 0;
        font-size: 2rem;
      }

      .star {
        color: var(--border-color);
      }

      .star.filled {
        color: var(--secondary-color);
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: var(--bg-tertiary);
        border-radius: 4px;
        margin: 1rem 0;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: var(--success-color);
        transition: width 0.3s ease;
        border-radius: 4px;
      }

      /* Focus states for keyboard navigation */
      .selector-btn:focus,
      .btn:focus,
      .memory-card:focus {
        outline: 3px solid var(--primary-color);
        outline-offset: 2px;
      }

      /* Screen reader only class */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }

      /* Animations */
      @keyframes cardFlip {
        0% {
          transform: perspective(600px) rotateY(0deg);
        }
        100% {
          transform: perspective(600px) rotateY(180deg);
        }
      }

      @keyframes matchPulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(0.95);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .memory-card {
        animation: fadeIn 0.3s ease-out;
        transform-style: preserve-3d;
        transition: transform 0.6s;
      }

      .memory-card.flipped {
        animation: cardFlip 0.6s ease-out forwards;
      }

      .memory-card.matched {
        animation: matchPulse 0.6s ease-out forwards;
      }

      /* Combo indicator */
      .combo-indicator {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 3rem;
        font-weight: bold;
        color: var(--secondary-color);
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        opacity: 0;
        pointer-events: none;
        z-index: 2000;
        animation: comboAppear 1s ease-out;
      }

      @keyframes comboAppear {
        0% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.5);
        }
        50% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.2);
        }
        100% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(1);
        }
      }

      /* Improved card back design */
      .card-back {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--purple-color)
        );
        border-radius: 15px;
        width: 100%;
        height: 100%;
        position: absolute;
        backface-visibility: hidden;
      }

      .card-front {
        transform: rotateY(180deg);
        backface-visibility: hidden;
        width: 100%;
        height: 100%;
        position: absolute;
        border-radius: 15px;
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      @media (max-width: 768px) {
        .game-container {
          padding: 1rem;
          margin: 0.5rem;
        }

        .game-header h1 {
          font-size: 2rem;
        }

        .game-stats {
          gap: 1rem;
        }

        .stat-card {
          min-width: 100px;
          padding: 0.75rem 1rem;
        }

        .board-easy {
          grid-template-columns: repeat(3, 1fr);
        }

        .board-medium {
          grid-template-columns: repeat(4, 1fr);
        }

        .board-hard {
          grid-template-columns: repeat(5, 1fr);
        }

        .memory-card {
          min-height: 80px;
          font-size: 1rem;
        }

        .card-emoji {
          font-size: 1.5rem;
        }

        .card-text {
          font-size: 0.7rem;
        }

        .game-controls {
          flex-direction: column;
          align-items: center;
        }

        .difficulty-selector,
        .category-selector {
          justify-content: center;
        }
      }
    </style>
      <link rel="stylesheet" href="../css/mobile-optimized.css" />

  <body>
    <div
      class="game-container"
      role="main"
      aria-label="Memory Match ESL game container"
    >
      <header class="game-header">
        <h1>
          <i class="fas fa-brain" aria-hidden="true"></i> Memory Match ESL
        </h1>
        <p>Match pairs of words and definitions to improve your vocabulary!</p>
      </header>

    <!-- Immediate Mobile Menu Script - Inline for guaranteed execution -->
    <script>
      (function () {
        "use strict";

        function initMobileMenu() {
          const mobileToggle = document.getElementById("mobileToggle");
          const navLinks = document.getElementById("navLinks");
          const body = document.body;

          if (!mobileToggle || !navLinks) {
            console.warn("Mobile menu elements not found");
            return;
          }

          console.log("Immediate mobile menu initialized");

          let isMenuOpen = false;

          function toggleMenu(e) {
            if (e && e.preventDefault) e.preventDefault();
            if (e && e.stopPropagation) e.stopPropagation();

            isMenuOpen = !isMenuOpen;
            const icon = mobileToggle.querySelector("i");

            if (isMenuOpen) {
              navLinks.classList.add("active");
              body.classList.add("mobile-menu-open");
              body.style.overflow = "hidden";
              if (icon) icon.className = "fas fa-times";
              console.log("Menu opened");
            } else {
              navLinks.classList.remove("active");
              body.classList.remove("mobile-menu-open");
              body.style.overflow = "";
              if (icon) icon.className = "fas fa-bars";
              console.log("Menu closed");

              // Close all dropdowns
              document.querySelectorAll(".nav-item").forEach((item) => {
                item.classList.remove("mobile-open", "mobile-dropdown-open");
                const chevron = item.querySelector(".fa-chevron-down");
                if (chevron) chevron.style.transform = "rotate(0deg)";
              });
            }
          }

          // Simple unified handler - works for both touch and click
          let lastToggleTime = 0;
          
          function handleToggleClick(e) {
            const now = Date.now();
            // Prevent double-firing within 300ms
            if (now - lastToggleTime < 300) {
              console.log("Toggle ignored - too fast");
              return;
            }
            lastToggleTime = now;
            
            e.preventDefault();
            e.stopPropagation();
            console.log("Hamburger clicked/tapped");
            toggleMenu(e);
          }

          mobileToggle.addEventListener("click", handleToggleClick);
          mobileToggle.addEventListener("touchend", handleToggleClick);

          // Handle dropdown toggles on mobile
          document.querySelectorAll(".nav-item").forEach((item) => {
            const link = item.querySelector(".nav-link");
            const dropdown = item.querySelector(".dropdown");
            const chevron = link?.querySelector(".fa-chevron-down");

            // Only add special handling for links WITH dropdowns
            if (link && dropdown && chevron) {
              // Simple unified dropdown handler
              let lastDropdownToggle = 0;
              
              function handleDropdownClick(e) {
                if (window.innerWidth > 768) return; // Only on mobile
                
                const now = Date.now();
                // Prevent double-firing within 300ms
                if (now - lastDropdownToggle < 300) {
                  console.log("Dropdown toggle ignored - too fast");
                  return;
                }
                lastDropdownToggle = now;
                
                e.preventDefault();
                e.stopPropagation();

                const isOpen = item.classList.contains("mobile-open");
                console.log("Dropdown clicked:", isOpen ? "closing" : "opening");

                // Close other dropdowns
                document.querySelectorAll(".nav-item").forEach((otherItem) => {
                  if (otherItem !== item) {
                    otherItem.classList.remove("mobile-open", "mobile-dropdown-open");
                    const otherChevron = otherItem.querySelector(".fa-chevron-down");
                    if (otherChevron) otherChevron.style.transform = "rotate(0deg)";
                  }
                });

                // Toggle current dropdown
                if (isOpen) {
                  item.classList.remove("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(0deg)";
                  link.setAttribute("aria-expanded", "false");
                } else {
                  item.classList.add("mobile-open", "mobile-dropdown-open");
                  chevron.style.transform = "rotate(180deg)";
                  link.setAttribute("aria-expanded", "true");
                }
              }

              // Remove href="#" behavior on mobile
              if (link.getAttribute("href") === "#") {
                link.style.cursor = "pointer";
              }

              // Attach handlers for both click and touch
              link.addEventListener("click", handleDropdownClick);
              link.addEventListener("touchend", handleDropdownClick);
            }
          });

          // Close menu when clicking outside
          document.addEventListener("click", function (e) {
            if (window.innerWidth <= 768 && isMenuOpen) {
              if (
                !mobileToggle.contains(e.target) &&
                !navLinks.contains(e.target)
              ) {
                toggleMenu(null);
              }
            }
          });

          // Close menu on escape key
          document.addEventListener("keydown", function (e) {
            if (e.key === "Escape" && isMenuOpen) {
              toggleMenu(null);
              mobileToggle.focus();
            }
          });

          // Close menu on window resize to desktop
          window.addEventListener("resize", function () {
            if (window.innerWidth > 768 && isMenuOpen) {
              toggleMenu(null);
            }
          });

          // Close menu after dropdown link click
          document.querySelectorAll(".dropdown a").forEach((link) => {
            link.addEventListener("click", function () {
              if (window.innerWidth <= 768 && isMenuOpen) {
                setTimeout(() => {
                  toggleMenu(null);
                }, 100);
              }
            });
          });
        }

        // Initialize immediately if DOM is ready, otherwise wait
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initMobileMenu);
        } else {
          initMobileMenu();
        }
      })();
    </script>

    <!-- Additional Mobile Dropdown Fixes -->
    <style>
      /* Ensure mobile dropdowns work properly */
      @media (max-width: 768px) {
        /* FORCE mobile menu to display full width */
        .nav-links,
        #navLinks,
        ul.nav-links {
          display: flex !important;
          position: fixed !important;
          top: 70px !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          width: 100vw !important;
          height: auto !important;
          min-height: calc(100vh - 70px) !important;
        }

        .nav-links.active,
        #navLinks.active,
        ul.nav-links.active {
          display: flex !important;
          max-height: calc(100vh - 70px) !important;
          height: auto !important;
        }

        /* Make sure nav links with dropdowns are clearly tappable */
        .nav-item .nav-link {
          position: relative;
          user-select: none;
          -webkit-user-select: none;
          -webkit-tap-highlight-color: rgba(70, 187, 229, 0.2);
          cursor: pointer;
        }

        /* Ensure chevron is visible and clickable */
        .nav-link .fa-chevron-down {
          transition: transform 0.3s ease !important;
          opacity: 1 !important;
          pointer-events: none; /* Let clicks go through to parent link */
        }

        /* Visual feedback when dropdown is open */
        .nav-item.mobile-open > .nav-link,
        .nav-item.mobile-dropdown-open > .nav-link {
          background: rgba(70, 187, 229, 0.15) !important;
          border-color: var(--primary-color, #46bbe5) !important;
        }

        /* Make dropdowns smoother */
        .dropdown {
          transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
            padding 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        /* Ensure dropdown items are visible when parent is open */
        .nav-item.mobile-open .dropdown,
        .nav-item.mobile-dropdown-open .dropdown {
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
          pointer-events: auto !important;
        }

        /* Override any conflicting hover states */
        .nav-item:hover .dropdown {
          max-height: 0 !important;
          padding: 0 !important;
        }

        .nav-item.mobile-open:hover .dropdown,
        .nav-item.mobile-dropdown-open:hover .dropdown {
          max-height: 600px !important;
          padding: 0.75rem 0.5rem !important;
        }
      }
    </style>




    <!-- Google AdSense -->
    <div class="ad-container" style="margin: 2rem auto; max-width: 100%; text-align: center;">
      <ins class="adsbygoogle"
           style="display: block; text-align: center;"
           data-ad-client="ca-pub-2456627863532019"
           data-ad-slot="1718707782"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
      <div class="game-controls" role="region" aria-label="Game settings">
        <div class="control-group">
          <div class="control-label" id="difficulty-label">Difficulty</div>
          <div
            class="difficulty-selector"
            role="radiogroup"
            aria-labelledby="difficulty-label"
          >
            <button
              class="selector-btn active"
              data-difficulty="easy"
              role="radio"
              aria-checked="true"
            >
              Easy (8 pairs)
            </button>
            <button
              class="selector-btn"
              data-difficulty="medium"
              role="radio"
              aria-checked="false"
            >
              Medium (18 pairs)
            </button>
            <button
              class="selector-btn"
              data-difficulty="hard"
              role="radio"
              aria-checked="false"
            >
              Hard (32 pairs)
            </button>
          </div>
        </div>

        <div class="control-group">
          <div class="control-label" id="category-label">Category</div>
          <div
            class="category-selector"
            role="radiogroup"
            aria-labelledby="category-label"
          >
            <button
              class="selector-btn active"
              data-category="animals"
              role="radio"
              aria-checked="true"
            >
              Animals
            </button>
            <button
              class="selector-btn"
              data-category="food"
              role="radio"
              aria-checked="false"
            >
              Food
            </button>
            <button
              class="selector-btn"
              data-category="objects"
              role="radio"
              aria-checked="false"
            >
              Objects
            </button>
            <button
              class="selector-btn"
              data-category="actions"
              role="radio"
              aria-checked="false"
            >
              Actions
            </button>
            <button
              class="selector-btn"
              data-category="emotions"
              role="radio"
              aria-checked="false"
            >
              Emotions
            </button>
          </div>
        </div>
      </div>

      <div class="game-stats" role="region" aria-label="Game statistics">
        <div class="stat-card">
          <div
            class="stat-value timer"
            id="timeValue"
            aria-label="Time elapsed"
          >
            00:00
          </div>
          <div class="stat-label">Time</div>
        </div>
        <div class="stat-card">
          <div
            class="stat-value moves"
            id="movesValue"
            aria-label="Number of moves"
          >
            0
          </div>
          <div class="stat-label">Moves</div>
        </div>
        <div class="stat-card">
          <div
            class="stat-value matches"
            id="matchesValue"
            aria-label="Matched pairs"
          >
            0
          </div>
          <div class="stat-label">Matches</div>
        </div>
        <div class="stat-card">
          <div
            class="stat-value accuracy"
            id="accuracyValue"
            aria-label="Accuracy percentage"
          >
            100%
          </div>
          <div class="stat-label">Accuracy</div>
        </div>
        <div class="stat-card">
          <div
            class="stat-value"
            id="scoreValue"
            aria-label="Current score"
            style="color: var(--secondary-color)"
          >
            0
          </div>
          <div class="stat-label">Score</div>
        </div>
        <div class="stat-card">
          <div
            class="stat-value"
            id="streakValue"
            aria-label="Current streak"
            style="color: var(--primary-color)"
          >
            0
          </div>
          <div class="stat-label">Streak</div>
        </div>
      </div>

      <div
        class="progress-bar"
        role="progressbar"
        aria-label="Game progress"
        aria-valuemin="0"
        aria-valuemax="100"
        aria-valuenow="0"
      >
        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
      </div>

      <div
        class="game-board"
        id="gameBoard"
        role="grid"
        aria-label="Memory card game board"
      >
        <!-- Cards will be generated by JavaScript -->
      </div>

      <div class="game-actions" role="region" aria-label="Game actions">
        <button
          class="btn btn-primary"
          id="newGameBtn"
          aria-label="Start a new game"
        >
          <i class="fas fa-refresh" aria-hidden="true"></i> New Game
        </button>
        <button
          class="btn btn-hint"
          id="hintBtn"
          aria-label="Get a hint to reveal a card"
        >
          <i class="fas fa-lightbulb" aria-hidden="true"></i> Hint
        </button>
        <button
          class="btn btn-secondary"
          id="pauseBtn"
          aria-label="Pause or resume the game"
        >
          <i class="fas fa-pause" aria-hidden="true"></i> Pause
        </button>
        <button
          class="btn btn-secondary"
          onclick="window.location.href='games.html'"
          aria-label="Return to games page"
        >
          <i class="fas fa-arrow-left" aria-hidden="true"></i> Back to Games
        </button>
      </div>

      <div
        class="game-message"
        id="gameMessage"
        role="alert"
        aria-live="polite"
      ></div>
    </div>

    <div class="completion-modal" id="completionModal">
      <div class="modal-content">
        <div class="modal-title">üéâ Congratulations!</div>
        <p>You completed the memory game!</p>

        <div class="star-rating" id="starRating">
          <span class="star">‚≠ê</span>
          <span class="star">‚≠ê</span>
          <span class="star">‚≠ê</span>
        </div>

        <div class="modal-stats">
          <div class="modal-stat">
            <div class="modal-stat-value" id="finalTime">00:00</div>
            <div class="modal-stat-label">Time</div>
          </div>
          <div class="modal-stat">
            <div class="modal-stat-value" id="finalMoves">0</div>
            <div class="modal-stat-label">Moves</div>
          </div>
          <div class="modal-stat">
            <div class="modal-stat-value" id="finalAccuracy">100%</div>
            <div class="modal-stat-label">Accuracy</div>
          </div>
          <div class="modal-stat">
            <div class="modal-stat-value" id="finalScore">0</div>
            <div class="modal-stat-label">Score</div>
          </div>
        </div>

        <div
          style="
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
          "
        >
          <button class="btn btn-primary" onclick="memoryGame.startNewGame()">
            <i class="fas fa-play"></i> Play Again
          </button>
          <button
            class="btn btn-secondary"
            onclick="document.getElementById('completionModal').classList.remove('show')"
          >
            <i class="fas fa-times"></i> Close
          </button>
        </div>
      </div>
    </div>

    <script>
      class MemoryMatchGame {
        constructor() {
          this.difficulty = "easy";
          this.category = "animals";
          this.cards = [];
          this.flippedCards = [];
          this.matchedPairs = 0;
          this.moves = 0;
          this.startTime = null;
          this.timerInterval = null;
          this.gameActive = false;
          this.hints = 0;
          this.currentStreak = 0;
          this.bestStreak = 0;
          this.score = 0;
          this.isPaused = false;
          this.pausedTime = 0;

          this.vocabularyData = {
            animals: [
              {
                word: "Cat",
                emoji: "üê±",
                definition: "A small furry pet that says meow",
              },
              {
                word: "Dog",
                emoji: "üê∂",
                definition: "A loyal pet that barks and wags its tail",
              },
              {
                word: "Elephant",
                emoji: "üêò",
                definition: "A large gray animal with a long trunk",
              },
              {
                word: "Lion",
                emoji: "ü¶Å",
                definition: "The king of the jungle with a mane",
              },
              {
                word: "Butterfly",
                emoji: "ü¶ã",
                definition:
                  "A colorful insect that flies from flower to flower",
              },
              {
                word: "Fish",
                emoji: "üê†",
                definition: "An animal that swims in water",
              },
              {
                word: "Bird",
                emoji: "üê¶",
                definition: "An animal that flies in the sky",
              },
              {
                word: "Rabbit",
                emoji: "üê∞",
                definition: "A small animal that hops and has long ears",
              },
              {
                word: "Turtle",
                emoji: "üê¢",
                definition: "A slow animal that carries its house on its back",
              },
              {
                word: "Monkey",
                emoji: "üêµ",
                definition: "A playful animal that swings from trees",
              },
              {
                word: "Penguin",
                emoji: "üêß",
                definition: "A black and white bird that cannot fly but swims",
              },
              {
                word: "Bee",
                emoji: "üêù",
                definition: "A small insect that makes honey",
              },
              {
                word: "Spider",
                emoji: "üï∑Ô∏è",
                definition: "An eight-legged creature that spins webs",
              },
              {
                word: "Frog",
                emoji: "üê∏",
                definition: "A green animal that jumps and lives near water",
              },
              {
                word: "Horse",
                emoji: "üê¥",
                definition: "A large animal people can ride",
              },
              {
                word: "Cow",
                emoji: "üêÑ",
                definition: "A farm animal that gives milk",
              },
              {
                word: "Pig",
                emoji: "üê∑",
                definition: "A pink farm animal that rolls in mud",
              },
              {
                word: "Chicken",
                emoji: "üêî",
                definition: "A farm bird that lays eggs",
              },
              {
                word: "Duck",
                emoji: "ü¶Ü",
                definition: "A water bird that quacks",
              },
              {
                word: "Owl",
                emoji: "ü¶â",
                definition: "A night bird that hoots and has big eyes",
              },
              {
                word: "Tiger",
                emoji: "üêÖ",
                definition: "A large striped cat from the jungle",
              },
              {
                word: "Bear",
                emoji: "üêª",
                definition: "A large furry animal that hibernates in winter",
              },
              {
                word: "Wolf",
                emoji: "üê∫",
                definition: "A wild animal that howls at the moon",
              },
              {
                word: "Fox",
                emoji: "ü¶ä",
                definition: "A clever animal with a bushy tail",
              },
              {
                word: "Giraffe",
                emoji: "ü¶í",
                definition: "The tallest animal with a very long neck",
              },
              {
                word: "Zebra",
                emoji: "ü¶ì",
                definition:
                  "An animal like a horse with black and white stripes",
              },
              {
                word: "Hippo",
                emoji: "ü¶õ",
                definition: "A large water animal with a big mouth",
              },
              {
                word: "Rhino",
                emoji: "ü¶è",
                definition: "A gray animal with a horn on its nose",
              },
              {
                word: "Koala",
                emoji: "üê®",
                definition: "A sleepy animal from Australia that eats leaves",
              },
              {
                word: "Panda",
                emoji: "üêº",
                definition: "A black and white bear that eats bamboo",
              },
              {
                word: "Kangaroo",
                emoji: "ü¶ò",
                definition:
                  "An animal from Australia that hops and has a pouch",
              },
              {
                word: "Octopus",
                emoji: "üêô",
                definition: "A sea creature with eight arms",
              },
            ],
            food: [
              {
                word: "Apple",
                emoji: "üçé",
                definition: "A red or green fruit that keeps the doctor away",
              },
              {
                word: "Banana",
                emoji: "üçå",
                definition: "A yellow curved fruit that monkeys love",
              },
              {
                word: "Pizza",
                emoji: "üçï",
                definition: "A round food with cheese and toppings",
              },
              {
                word: "Burger",
                emoji: "üçî",
                definition: "A sandwich with meat, cheese, and vegetables",
              },
              {
                word: "Ice Cream",
                emoji: "üç¶",
                definition: "A cold sweet treat that melts quickly",
              },
              {
                word: "Cookie",
                emoji: "üç™",
                definition: "A sweet baked treat, often with chocolate chips",
              },
              {
                word: "Cake",
                emoji: "üéÇ",
                definition: "A sweet dessert often eaten at birthdays",
              },
              {
                word: "Bread",
                emoji: "üçû",
                definition: "A basic food made from flour and water",
              },
              {
                word: "Egg",
                emoji: "ü•ö",
                definition: "A oval white food that chickens lay",
              },
              {
                word: "Milk",
                emoji: "ü•õ",
                definition: "A white drink that comes from cows",
              },
              {
                word: "Cheese",
                emoji: "üßÄ",
                definition: "A yellow food made from milk",
              },
              {
                word: "Carrot",
                emoji: "ü•ï",
                definition: "An orange vegetable that helps your eyes",
              },
              {
                word: "Tomato",
                emoji: "üçÖ",
                definition: "A red fruit used in salads and sauces",
              },
              {
                word: "Orange",
                emoji: "üçä",
                definition: "A round citrus fruit full of vitamin C",
              },
              {
                word: "Strawberry",
                emoji: "üçì",
                definition: "A small red berry with seeds on the outside",
              },
              {
                word: "Grapes",
                emoji: "üçá",
                definition: "Small round fruits that grow in bunches",
              },
              {
                word: "Watermelon",
                emoji: "üçâ",
                definition: "A large green fruit that is pink inside",
              },
              {
                word: "Pineapple",
                emoji: "üçç",
                definition: "A tropical fruit with a spiky outside",
              },
              {
                word: "Hot Dog",
                emoji: "üå≠",
                definition: "A sausage in a long bun",
              },
              {
                word: "Sandwich",
                emoji: "ü•™",
                definition: "Food between two pieces of bread",
              },
              {
                word: "Salad",
                emoji: "ü•ó",
                definition: "A healthy mix of vegetables and greens",
              },
              {
                word: "Soup",
                emoji: "üç≤",
                definition: "A warm liquid food with vegetables or meat",
              },
              {
                word: "Rice",
                emoji: "üçö",
                definition: "Small white grains that are a staple food",
              },
              {
                word: "Noodles",
                emoji: "üçú",
                definition: "Long thin strips of pasta in soup",
              },
              {
                word: "Sushi",
                emoji: "üç£",
                definition: "Japanese food with rice and raw fish",
              },
              {
                word: "Taco",
                emoji: "üåÆ",
                definition: "Mexican food with meat and vegetables in a shell",
              },
              {
                word: "Donut",
                emoji: "üç©",
                definition: "A sweet round cake with a hole in the middle",
              },
              {
                word: "Popcorn",
                emoji: "üçø",
                definition: "Corn kernels that pop when heated",
              },
              {
                word: "Honey",
                emoji: "üçØ",
                definition: "A sweet golden liquid made by bees",
              },
              {
                word: "Lemon",
                emoji: "üçã",
                definition: "A sour yellow citrus fruit",
              },
              {
                word: "Avocado",
                emoji: "ü•ë",
                definition: "A green fruit that is creamy inside",
              },
              {
                word: "Pretzel",
                emoji: "ü•®",
                definition: "A twisted salty snack",
              },
            ],
            objects: [
              {
                word: "Car",
                emoji: "üöó",
                definition: "A vehicle with four wheels for transportation",
              },
              {
                word: "House",
                emoji: "üè†",
                definition: "A building where people live",
              },
              {
                word: "Book",
                emoji: "üìö",
                definition: "Pages with words and stories bound together",
              },
              {
                word: "Phone",
                emoji: "üì±",
                definition: "A device for making calls and sending messages",
              },
              {
                word: "Computer",
                emoji: "üíª",
                definition: "An electronic device for work and entertainment",
              },
              {
                word: "Chair",
                emoji: "ü™ë",
                definition: "Furniture you sit on",
              },
              {
                word: "Table",
                emoji: "ü™ë",
                definition: "A flat surface with legs for eating or working",
              },
              {
                word: "Bed",
                emoji: "üõèÔ∏è",
                definition: "Furniture you sleep on",
              },
              {
                word: "Clock",
                emoji: "üïê",
                definition: "A device that shows the time",
              },
              {
                word: "Key",
                emoji: "üóùÔ∏è",
                definition: "A metal object that opens locks",
              },
              {
                word: "Lamp",
                emoji: "üí°",
                definition: "A device that gives light",
              },
              {
                word: "Mirror",
                emoji: "ü™û",
                definition: "A glass surface that shows your reflection",
              },
              {
                word: "Window",
                emoji: "ü™ü",
                definition: "An opening in a wall that lets in light",
              },
              {
                word: "Door",
                emoji: "üö™",
                definition: "An entrance to a room or building",
              },
              {
                word: "Umbrella",
                emoji: "‚òÇÔ∏è",
                definition: "A tool to protect you from rain",
              },
              {
                word: "Scissors",
                emoji: "‚úÇÔ∏è",
                definition: "A tool with two blades for cutting",
              },
              {
                word: "Pen",
                emoji: "üñäÔ∏è",
                definition: "A writing tool with ink",
              },
              {
                word: "Pencil",
                emoji: "‚úèÔ∏è",
                definition: "A writing tool with graphite",
              },
              {
                word: "Bag",
                emoji: "üëú",
                definition: "A container for carrying things",
              },
              {
                word: "Hat",
                emoji: "üëí",
                definition: "Something you wear on your head",
              },
              {
                word: "Shoes",
                emoji: "üëü",
                definition: "Things you wear on your feet",
              },
              {
                word: "Glasses",
                emoji: "üëì",
                definition: "Things you wear to help you see better",
              },
              {
                word: "Watch",
                emoji: "‚åö",
                definition: "A timepiece you wear on your wrist",
              },
              {
                word: "Camera",
                emoji: "üì∑",
                definition: "A device for taking pictures",
              },
              {
                word: "Bicycle",
                emoji: "üö≤",
                definition: "A two-wheeled vehicle you pedal",
              },
              {
                word: "Ball",
                emoji: "‚öΩ",
                definition: "A round object used in sports",
              },
              {
                word: "Guitar",
                emoji: "üé∏",
                definition: "A musical instrument with strings",
              },
              {
                word: "Television",
                emoji: "üì∫",
                definition: "A screen that shows programs and movies",
              },
              {
                word: "Refrigerator",
                emoji: "üßä",
                definition: "An appliance that keeps food cold",
              },
              {
                word: "Stove",
                emoji: "üî•",
                definition: "An appliance for cooking food",
              },
              {
                word: "Toothbrush",
                emoji: "ü™•",
                definition: "A tool for cleaning your teeth",
              },
              {
                word: "Towel",
                emoji: "üèñÔ∏è",
                definition: "A cloth for drying yourself",
              },
            ],
            actions: [
              {
                word: "Run",
                emoji: "üèÉ",
                definition: "To move quickly with your legs",
              },
              {
                word: "Jump",
                emoji: "ü¶ò",
                definition: "To push yourself up into the air",
              },
              {
                word: "Swim",
                emoji: "üèä",
                definition: "To move through water",
              },
              {
                word: "Dance",
                emoji: "üíÉ",
                definition: "To move your body to music",
              },
              {
                word: "Sing",
                emoji: "üé§",
                definition: "To make music with your voice",
              },
              {
                word: "Read",
                emoji: "üìñ",
                definition: "To look at words and understand them",
              },
              {
                word: "Write",
                emoji: "‚úçÔ∏è",
                definition: "To make words with a pen or pencil",
              },
              {
                word: "Cook",
                emoji: "üë®‚Äçüç≥",
                definition: "To prepare food by heating it",
              },
              {
                word: "Eat",
                emoji: "üçΩÔ∏è",
                definition: "To put food in your mouth and swallow",
              },
              { word: "Drink", emoji: "ü•§", definition: "To swallow liquid" },
              {
                word: "Sleep",
                emoji: "üò¥",
                definition: "To rest with your eyes closed",
              },
              {
                word: "Walk",
                emoji: "üö∂",
                definition: "To move by putting one foot in front of the other",
              },
              {
                word: "Talk",
                emoji: "üó£Ô∏è",
                definition: "To say words out loud",
              },
              {
                word: "Listen",
                emoji: "üëÇ",
                definition: "To pay attention to sounds",
              },
              {
                word: "Look",
                emoji: "üëÄ",
                definition: "To use your eyes to see something",
              },
              {
                word: "Think",
                emoji: "ü§î",
                definition: "To use your mind to consider ideas",
              },
              {
                word: "Laugh",
                emoji: "üòÇ",
                definition: "To make happy sounds when something is funny",
              },
              {
                word: "Cry",
                emoji: "üò¢",
                definition: "To have tears come from your eyes when sad",
              },
              {
                word: "Smile",
                emoji: "üòä",
                definition: "To curve your mouth up when happy",
              },
              {
                word: "Work",
                emoji: "üíº",
                definition: "To do your job or tasks",
              },
              {
                word: "Play",
                emoji: "üéÆ",
                definition: "To have fun with games or activities",
              },
              {
                word: "Study",
                emoji: "üìö",
                definition: "To learn about something by reading or practicing",
              },
              {
                word: "Drive",
                emoji: "üöó",
                definition: "To operate a car or vehicle",
              },
              {
                word: "Fly",
                emoji: "‚úàÔ∏è",
                definition: "To move through the air",
              },
              {
                word: "Clean",
                emoji: "üßπ",
                definition: "To make something neat and tidy",
              },
              {
                word: "Paint",
                emoji: "üé®",
                definition: "To make pictures with colors",
              },
              {
                word: "Build",
                emoji: "üèóÔ∏è",
                definition: "To construct or make something",
              },
              {
                word: "Fix",
                emoji: "üîß",
                definition: "To repair something that is broken",
              },
              {
                word: "Open",
                emoji: "üìÇ",
                definition: "To make something not closed",
              },
              { word: "Close", emoji: "‚ùå", definition: "To shut something" },
              {
                word: "Push",
                emoji: "üëê",
                definition: "To move something away from you",
              },
              {
                word: "Pull",
                emoji: "ü§è",
                definition: "To move something toward you",
              },
            ],
            emotions: [
              {
                word: "Happy",
                emoji: "üòä",
                definition: "Feeling good and cheerful",
              },
              {
                word: "Sad",
                emoji: "üò¢",
                definition: "Feeling unhappy or down",
              },
              {
                word: "Angry",
                emoji: "üò†",
                definition: "Feeling mad or upset",
              },
              {
                word: "Excited",
                emoji: "ü§©",
                definition: "Feeling very happy and energetic",
              },
              {
                word: "Scared",
                emoji: "üò®",
                definition: "Feeling afraid or frightened",
              },
              {
                word: "Surprised",
                emoji: "üò≤",
                definition: "Feeling shocked by something unexpected",
              },
              {
                word: "Confused",
                emoji: "üòï",
                definition: "Not understanding something",
              },
              {
                word: "Tired",
                emoji: "üò¥",
                definition: "Feeling sleepy or needing rest",
              },
              {
                word: "Bored",
                emoji: "üòë",
                definition: "Feeling uninterested or dull",
              },
              {
                word: "Nervous",
                emoji: "üò∞",
                definition: "Feeling worried or anxious",
              },
              {
                word: "Proud",
                emoji: "üò§",
                definition: "Feeling good about an achievement",
              },
              {
                word: "Jealous",
                emoji: "üòí",
                definition: "Wanting what someone else has",
              },
              {
                word: "Grateful",
                emoji: "üôè",
                definition: "Feeling thankful for something",
              },
              {
                word: "Lonely",
                emoji: "üòû",
                definition: "Feeling alone or without friends",
              },
              {
                word: "Peaceful",
                emoji: "üòå",
                definition: "Feeling calm and relaxed",
              },
              {
                word: "Worried",
                emoji: "üòü",
                definition: "Feeling concerned about something",
              },
              {
                word: "Curious",
                emoji: "ü§î",
                definition: "Wanting to know or learn about something",
              },
              {
                word: "Embarrassed",
                emoji: "üò≥",
                definition: "Feeling ashamed or uncomfortable",
              },
              {
                word: "Frustrated",
                emoji: "üò§",
                definition: "Feeling annoyed because you cannot do something",
              },
              {
                word: "Hopeful",
                emoji: "ü§û",
                definition: "Expecting good things to happen",
              },
              {
                word: "Disappointed",
                emoji: "üòî",
                definition:
                  "Feeling let down when things do not go as expected",
              },
              {
                word: "Confident",
                emoji: "üòé",
                definition: "Feeling sure about yourself and your abilities",
              },
              {
                word: "Shy",
                emoji: "üòä",
                definition: "Feeling quiet and not wanting attention",
              },
              {
                word: "Amazed",
                emoji: "ü§Ø",
                definition: "Feeling very surprised and impressed",
              },
              {
                word: "Relaxed",
                emoji: "üòå",
                definition: "Feeling calm and without stress",
              },
              {
                word: "Stressed",
                emoji: "üò´",
                definition: "Feeling pressure and tension",
              },
              {
                word: "Cheerful",
                emoji: "üòÑ",
                definition: "Feeling happy and positive",
              },
              {
                word: "Grumpy",
                emoji: "üò†",
                definition: "Feeling bad-tempered and irritable",
              },
              {
                word: "Content",
                emoji: "üòä",
                definition: "Feeling satisfied and happy with what you have",
              },
              {
                word: "Enthusiastic",
                emoji: "ü§ó",
                definition: "Feeling very interested and excited",
              },
              {
                word: "Overwhelmed",
                emoji: "üòµ",
                definition: "Feeling like there is too much to handle",
              },
              {
                word: "Motivated",
                emoji: "üí™",
                definition: "Feeling driven to do something",
              },
            ],
          };

          this.difficultySettings = {
            easy: { pairs: 8, timeBonus: 300 },
            medium: { pairs: 18, timeBonus: 600 },
            hard: { pairs: 32, timeBonus: 900 },
          };

          this.init();
        }

        init() {
          this.setupEventListeners();
          this.loadStats();
          this.startNewGame();
        }

        setupEventListeners() {
          // Difficulty selection
          document
            .querySelectorAll(".difficulty-selector .selector-btn")
            .forEach((btn) => {
              btn.onclick = () => {
                document
                  .querySelectorAll(".difficulty-selector .selector-btn")
                  .forEach((b) => {
                    b.classList.remove("active");
                    b.setAttribute("aria-checked", "false");
                  });
                btn.classList.add("active");
                btn.setAttribute("aria-checked", "true");
                this.difficulty = btn.dataset.difficulty;
                this.startNewGame();
              };
            });

          // Category selection
          document
            .querySelectorAll(".category-selector .selector-btn")
            .forEach((btn) => {
              btn.onclick = () => {
                document
                  .querySelectorAll(".category-selector .selector-btn")
                  .forEach((b) => {
                    b.classList.remove("active");
                    b.setAttribute("aria-checked", "false");
                  });
                btn.classList.add("active");
                btn.setAttribute("aria-checked", "true");
                this.category = btn.dataset.category;
                this.startNewGame();
              };
            });

          // Game controls
          document.getElementById("newGameBtn").onclick = () =>
            this.startNewGame();
          document.getElementById("hintBtn").onclick = () => this.showHint();
          document.getElementById("pauseBtn").onclick = () =>
            this.togglePause();

          // Keyboard support
          document.addEventListener("keydown", (e) => {
            if (e.key === "h" || e.key === "H") {
              e.preventDefault();
              this.showHint();
            } else if (e.key === " " || e.key === "p" || e.key === "P") {
              e.preventDefault();
              this.togglePause();
            } else if (e.key === "n" || e.key === "N") {
              e.preventDefault();
              if (confirm("Start a new game? Current progress will be lost.")) {
                this.startNewGame();
              }
            } else if (e.key === "Escape") {
              e.preventDefault();
              if (this.gameActive && !this.isPaused) {
                this.togglePause();
              }
            }
          });
        }

        startNewGame() {
          this.resetGame();
          this.generateCards();
          this.shuffleCards();
          this.renderBoard();
          this.startTimer();
          this.gameActive = true;
          this.showMessage("üéÆ New game started! Find matching pairs!", "info");
        }

        resetGame() {
          this.cards = [];
          this.flippedCards = [];
          this.matchedPairs = 0;
          this.moves = 0;
          this.hints = 0;
          this.currentStreak = 0;
          this.score = 0;
          this.isPaused = false;
          this.pausedTime = 0;
          this.startTime = Date.now();

          if (this.timerInterval) {
            clearInterval(this.timerInterval);
          }

          this.updateStats();
          const progressBar = document.querySelector(".progress-bar");
          if (progressBar) {
            progressBar.setAttribute("aria-valuenow", "0");
          }
          document.getElementById("progressFill").style.width = "0%";

          const pauseBtn = document.getElementById("pauseBtn");
          pauseBtn.innerHTML =
            '<i class="fas fa-pause" aria-hidden="true"></i> Pause';
        }

        generateCards() {
          const categoryData = this.vocabularyData[this.category];
          const pairsNeeded = this.difficultySettings[this.difficulty].pairs;

          // Select random words from category
          const selectedWords = categoryData
            .sort(() => 0.5 - Math.random())
            .slice(0, pairsNeeded);

          // Create pairs (word and definition)
          selectedWords.forEach((item, index) => {
            // Word card
            this.cards.push({
              id: index * 2,
              pairId: index,
              type: "word",
              content: item.word,
              emoji: item.emoji,
              display: item.word,
              matched: false,
              flipped: false,
            });

            // Definition card
            this.cards.push({
              id: index * 2 + 1,
              pairId: index,
              type: "definition",
              content: item.definition,
              emoji: "‚ùì",
              display: item.definition,
              matched: false,
              flipped: false,
            });
          });
        }

        shuffleCards() {
          for (let i = this.cards.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
          }
        }

        renderBoard() {
          const board = document.getElementById("gameBoard");
          const boardClass = `board-${this.difficulty}`;

          // Update board class
          board.className = `game-board ${boardClass}`;

          // Clear and populate board
          board.innerHTML = "";

          this.cards.forEach((card, index) => {
            const cardElement = document.createElement("div");
            cardElement.className = "memory-card";
            cardElement.dataset.index = index;
            cardElement.setAttribute("role", "button");
            cardElement.setAttribute("aria-label", `Card ${index + 1}, hidden`);
            cardElement.setAttribute("tabindex", "0");

            cardElement.innerHTML = `
                        <div class="card-back">
                            <i class="fas fa-question"></i>
                        </div>
                        <div class="card-front">
                            <div class="card-emoji">${card.emoji}</div>
                            <div class="card-text">${card.display}</div>
                        </div>
                    `;

            cardElement.onclick = () => this.flipCard(index);
            cardElement.onkeypress = (e) => {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                this.flipCard(index);
              }
            };
            board.appendChild(cardElement);
          });
        }

        flipCard(index) {
          if (!this.gameActive || this.isPaused) return;

          const card = this.cards[index];
          const cardElement = document.querySelector(`[data-index="${index}"]`);

          // Prevent flipping already flipped or matched cards
          if (card.flipped || card.matched || this.flippedCards.length >= 2) {
            return;
          }

          // Flip the card
          card.flipped = true;
          cardElement.classList.add("flipped");
          cardElement.setAttribute(
            "aria-label",
            `Card ${index + 1}, showing ${
              card.type === "word" ? card.content : "definition"
            }`
          );
          this.flippedCards.push(index);

          // Play flip sound
          this.playSound("flip");

          // Check for matches when 2 cards are flipped
          if (this.flippedCards.length === 2) {
            this.moves++;
            this.updateStats();

            setTimeout(() => {
              this.checkMatch();
            }, 1000);
          }
        }

        playSound(type) {
          try {
            const audioContext = new (window.AudioContext ||
              window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            if (type === "flip") {
              oscillator.frequency.setValueAtTime(
                523.25,
                audioContext.currentTime
              );
            } else if (type === "match") {
              oscillator.frequency.setValueAtTime(
                659.25,
                audioContext.currentTime
              );
              oscillator.frequency.setValueAtTime(
                783.99,
                audioContext.currentTime + 0.1
              );
            } else if (type === "nomatch") {
              oscillator.frequency.setValueAtTime(
                220,
                audioContext.currentTime
              );
            }

            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(
              0.01,
              audioContext.currentTime + 0.2
            );

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
          } catch (e) {
            // Audio not supported
          }
        }

        announceToScreenReader(message) {
          const announcement = document.createElement("div");
          announcement.setAttribute("role", "status");
          announcement.setAttribute("aria-live", "polite");
          announcement.className = "sr-only";
          announcement.textContent = message;
          document.body.appendChild(announcement);
          setTimeout(() => announcement.remove(), 1000);
        }

        checkMatch() {
          const [firstIndex, secondIndex] = this.flippedCards;
          const firstCard = this.cards[firstIndex];
          const secondCard = this.cards[secondIndex];

          if (firstCard.pairId === secondCard.pairId) {
            // Match found
            this.handleMatch(firstIndex, secondIndex);
          } else {
            // No match
            this.handleNoMatch(firstIndex, secondIndex);
          }

          this.flippedCards = [];
        }

        handleMatch(firstIndex, secondIndex) {
          const firstCard = this.cards[firstIndex];
          const secondCard = this.cards[secondIndex];
          const firstElement = document.querySelector(
            `[data-index="${firstIndex}"]`
          );
          const secondElement = document.querySelector(
            `[data-index="${secondIndex}"]`
          );

          // Mark as matched
          firstCard.matched = true;
          secondCard.matched = true;
          firstElement.classList.add("matched");
          secondElement.classList.add("matched");
          firstElement.setAttribute(
            "aria-label",
            `Card ${firstIndex + 1}, matched`
          );
          secondElement.setAttribute(
            "aria-label",
            `Card ${secondIndex + 1}, matched`
          );

          this.matchedPairs++;
          this.currentStreak++;

          // Update best streak
          if (this.currentStreak > this.bestStreak) {
            this.bestStreak = this.currentStreak;
          }

          // Calculate score with streak bonus
          const basePoints = 100;
          const streakBonus = this.currentStreak * 10;
          this.score += basePoints + streakBonus;

          this.updateStats();
          this.updateProgress();

          // Play match sound
          this.playSound("match");

          // Show combo if streak >= 3
          if (this.currentStreak >= 3) {
            this.showCombo(this.currentStreak);
          }

          this.showMessage(
            `‚úÖ Great match! ${
              this.currentStreak > 1
                ? `üî• ${this.currentStreak}x Streak! +${streakBonus} bonus`
                : ""
            }`,
            "success"
          );
          this.announceToScreenReader(
            `Match found! Current streak: ${this.currentStreak}`
          );

          // Check if game is complete
          if (
            this.matchedPairs === this.difficultySettings[this.difficulty].pairs
          ) {
            setTimeout(() => {
              this.completeGame();
            }, 1000);
          }
        }

        showCombo(streak) {
          const combo = document.createElement("div");
          combo.className = "combo-indicator";
          combo.textContent = `üî• ${streak}x COMBO!`;
          document.body.appendChild(combo);

          setTimeout(() => {
            combo.remove();
          }, 1000);
        }

        handleNoMatch(firstIndex, secondIndex) {
          const firstCard = this.cards[firstIndex];
          const secondCard = this.cards[secondIndex];
          const firstElement = document.querySelector(
            `[data-index="${firstIndex}"]`
          );
          const secondElement = document.querySelector(
            `[data-index="${secondIndex}"]`
          );

          // Flip cards back
          firstCard.flipped = false;
          secondCard.flipped = false;
          firstElement.classList.remove("flipped");
          secondElement.classList.remove("flipped");
          firstElement.setAttribute(
            "aria-label",
            `Card ${firstIndex + 1}, hidden`
          );
          secondElement.setAttribute(
            "aria-label",
            `Card ${secondIndex + 1}, hidden`
          );

          // Reset streak
          this.currentStreak = 0;

          // Play no match sound
          this.playSound("nomatch");

          this.updateStats();
          this.announceToScreenReader("No match. Streak reset.");
        }

        showHint() {
          if (this.hints >= 3) {
            this.showMessage("üí° No more hints available!", "info");
            return;
          }

          // Find an unmatched card and briefly show it
          const unmatchedCards = this.cards
            .map((card, index) => ({ card, index }))
            .filter(({ card }) => !card.matched && !card.flipped);

          if (unmatchedCards.length > 0) {
            const randomCard =
              unmatchedCards[Math.floor(Math.random() * unmatchedCards.length)];
            const cardElement = document.querySelector(
              `[data-index="${randomCard.index}"]`
            );

            cardElement.classList.add("flipped");
            this.hints++;

            setTimeout(() => {
              if (!this.cards[randomCard.index].matched) {
                cardElement.classList.remove("flipped");
              }
            }, 2000);

            this.showMessage(
              `üí° Hint used! (${3 - this.hints} remaining)`,
              "info"
            );
          }
        }

        togglePause() {
          const pauseBtn = document.getElementById("pauseBtn");

          if (this.gameActive && !this.isPaused) {
            this.isPaused = true;
            this.pausedTime = Date.now();
            clearInterval(this.timerInterval);
            pauseBtn.innerHTML =
              '<i class="fas fa-play" aria-hidden="true"></i> Resume';
            pauseBtn.setAttribute("aria-label", "Resume the game");
            this.showMessage("‚è∏Ô∏è Game paused", "info");
            this.announceToScreenReader("Game paused");
          } else if (this.gameActive && this.isPaused) {
            this.isPaused = false;
            // Adjust start time to account for pause duration
            const pauseDuration = Date.now() - this.pausedTime;
            this.startTime += pauseDuration;
            this.startTimer();
            pauseBtn.innerHTML =
              '<i class="fas fa-pause" aria-hidden="true"></i> Pause';
            pauseBtn.setAttribute("aria-label", "Pause the game");
            this.showMessage("‚ñ∂Ô∏è Game resumed", "info");
            this.announceToScreenReader("Game resumed");
          }
        }

        startTimer() {
          this.timerInterval = setInterval(() => {
            this.updateTimer();
          }, 1000);
        }

        updateTimer() {
          const elapsed = Math.floor((Date.now() - this.startTime) / 1000);
          const minutes = Math.floor(elapsed / 60);
          const seconds = elapsed % 60;
          document.getElementById("timeValue").textContent = `${minutes
            .toString()
            .padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;
        }

        updateStats() {
          document.getElementById("movesValue").textContent = this.moves;
          document.getElementById("matchesValue").textContent =
            this.matchedPairs;

          const accuracy =
            this.moves > 0
              ? Math.round((this.matchedPairs / this.moves) * 100)
              : 100;
          document.getElementById("accuracyValue").textContent = `${accuracy}%`;

          document.getElementById("scoreValue").textContent = this.score;
          document.getElementById("streakValue").textContent =
            this.currentStreak;
        }

        updateProgress() {
          const totalPairs = this.difficultySettings[this.difficulty].pairs;
          const progress = (this.matchedPairs / totalPairs) * 100;
          document.getElementById("progressFill").style.width = `${progress}%`;

          const progressBar = document.querySelector(".progress-bar");
          if (progressBar) {
            progressBar.setAttribute(
              "aria-valuenow",
              Math.round(progress).toString()
            );
          }
        }

        completeGame() {
          this.gameActive = false;
          clearInterval(this.timerInterval);

          const timeElapsed = Math.floor((Date.now() - this.startTime) / 1000);
          const accuracy = Math.round((this.matchedPairs / this.moves) * 100);
          const timeBonus = Math.max(
            0,
            this.difficultySettings[this.difficulty].timeBonus - timeElapsed
          );
          const accuracyBonus = accuracy * 10;
          const hintPenalty = this.hints * 50;
          const streakBonus = this.bestStreak * 50;
          const finalScore = Math.max(
            0,
            this.score + timeBonus + accuracyBonus - hintPenalty + streakBonus
          );

          // Update modal
          const minutes = Math.floor(timeElapsed / 60);
          const seconds = timeElapsed % 60;
          document.getElementById("finalTime").textContent = `${minutes
            .toString()
            .padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;
          document.getElementById("finalMoves").textContent = this.moves;
          document.getElementById("finalAccuracy").textContent = `${accuracy}%`;
          document.getElementById("finalScore").textContent = finalScore;

          // Update star rating
          this.updateStarRating(accuracy, timeElapsed);

          // Show completion modal
          document.getElementById("completionModal").classList.add("show");

          // Save stats
          this.saveGameStats(timeElapsed, accuracy, finalScore);

          // Announce completion
          this.announceToScreenReader(
            `Congratulations! Game completed in ${minutes} minutes and ${seconds} seconds with ${accuracy}% accuracy. Final score: ${finalScore}`
          );
        }

        updateStarRating(accuracy, timeElapsed) {
          const stars = document.querySelectorAll("#starRating .star");
          const timeLimit = this.difficultySettings[this.difficulty].timeBonus;

          // Reset stars
          stars.forEach((star) => star.classList.remove("filled"));

          // Award stars based on performance
          let starCount = 0;

          if (accuracy >= 50) starCount = 1;
          if (accuracy >= 70 && timeElapsed <= timeLimit) starCount = 2;
          if (accuracy >= 90 && timeElapsed <= timeLimit * 0.7) starCount = 3;

          for (let i = 0; i < starCount; i++) {
            stars[i].classList.add("filled");
          }
        }

        saveGameStats(time, accuracy, score) {
          const stats = JSON.parse(
            localStorage.getItem("memoryMatchStats") || "{}"
          );

          if (!stats[this.difficulty]) {
            stats[this.difficulty] = {
              gamesPlayed: 0,
              bestTime: Infinity,
              bestAccuracy: 0,
              bestScore: 0,
              totalScore: 0,
            };
          }

          const diffStats = stats[this.difficulty];
          diffStats.gamesPlayed++;
          diffStats.bestTime = Math.min(diffStats.bestTime, time);
          diffStats.bestAccuracy = Math.max(diffStats.bestAccuracy, accuracy);
          diffStats.bestScore = Math.max(diffStats.bestScore, score);
          diffStats.totalScore += score;

          localStorage.setItem("memoryMatchStats", JSON.stringify(stats));
        }

        loadStats() {
          // Load and display saved statistics if needed
          const stats = JSON.parse(
            localStorage.getItem("memoryMatchStats") || "{}"
          );
          // Stats could be displayed in a separate stats section if desired
        }

        showMessage(text, type) {
          const message = document.getElementById("gameMessage");
          message.textContent = text;
          message.className = `game-message message-${type}`;
          message.style.display = "block";

          setTimeout(() => {
            message.style.display = "none";
          }, 3000);
        }
      }

      // Initialize game when page loads
      let memoryGame;
      document.addEventListener("DOMContentLoaded", () => {
        memoryGame = new MemoryMatchGame();
      });
    </script>
    <script src="../js/game-ads.js"></script>
  
    <!-- Google AdSense -->
    <div class="ad-container" style="margin: 2rem auto; max-width: 100%; text-align: center; padding: 0 1rem;">
      <ins class="adsbygoogle"
           style="display: block; text-align: center;"
           data-ad-client="ca-pub-2456627863532019"
           data-ad-slot="1718707782"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>

  </body>
</html>
