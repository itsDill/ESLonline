<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grammar Slingshot Game</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Comic Sans MS", cursive;
        background: linear-gradient(135deg, #87ceeb 0%, #98fb98 100%);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .game-container {
        width: 100%;
        height: 100vh;
        position: relative;
        overflow: hidden;
      }

      .ui-panel {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.9);
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        z-index: 100;
      }

      .score {
        font-size: 24px;
        font-weight: bold;
        color: #2e8b57;
        margin-bottom: 10px;
      }

      .question-panel {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        max-width: 300px;
        z-index: 100;
      }

      .question {
        font-size: 18px;
        margin-bottom: 15px;
        color: #333;
      }

      .options {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .option {
        padding: 10px;
        background: #f0f8ff;
        border: 2px solid #ddd;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .option:hover {
        background: #e6f3ff;
        border-color: #4169e1;
      }

      .option.selected {
        background: #4169e1;
        color: white;
        border-color: #4169e1;
      }

      .slingshot {
        position: absolute;
        bottom: 100px;
        left: 100px;
        width: 80px;
        height: 120px;
        z-index: 50;
      }

      .slingshot-frame {
        width: 100%;
        height: 100%;
        background: #8b4513;
        clip-path: polygon(20% 100%, 45% 0%, 55% 0%, 80% 100%);
        position: relative;
      }

      .slingshot-band {
        position: absolute;
        top: 0;
        left: 45%;
        width: 3px;
        height: 60px;
        background: #654321;
        transform-origin: bottom;
      }

      .projectile {
        position: absolute;
        width: 20px;
        height: 20px;
        background: radial-gradient(circle, #ff6347 0%, #dc143c 100%);
        border-radius: 50%;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        transition: all 0.1s ease;
      }

      .target {
        position: absolute;
        width: 100px;
        height: 100px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .target-circle {
        width: 100%;
        height: 100%;
        background: radial-gradient(
          circle,
          #ff6b6b 0%,
          #ff4757 50%,
          #ff3742 100%
        );
        border-radius: 50%;
        border: 4px solid white;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 14px;
        text-align: center;
      }

      .target:hover .target-circle {
        transform: scale(1.1);
      }

      .clouds {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .cloud {
        position: absolute;
        background: white;
        border-radius: 50px;
        opacity: 0.8;
        animation: float 20s infinite linear;
      }

      .cloud:before {
        content: "";
        position: absolute;
        background: white;
        border-radius: 50px;
      }

      .cloud1 {
        width: 80px;
        height: 40px;
        top: 20%;
        left: -80px;
      }

      .cloud1:before {
        width: 50px;
        height: 50px;
        top: -25px;
        left: 10px;
      }

      .cloud2 {
        width: 60px;
        height: 30px;
        top: 40%;
        left: -60px;
        animation-delay: -10s;
      }

      .cloud2:before {
        width: 40px;
        height: 40px;
        top: -20px;
        left: 8px;
      }

      @keyframes float {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(calc(100vw + 100px));
        }
      }

      .fire-button {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        padding: 15px 30px;
        font-size: 20px;
        font-weight: bold;
        background: linear-gradient(45deg, #ff6347, #ff4500);
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        z-index: 100;
      }

      .fire-button:hover {
        transform: translateX(-50%) scale(1.05);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      }

      .fire-button:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: translateX(-50%) scale(1);
      }

      .feedback {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 36px;
        font-weight: bold;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        z-index: 200;
        opacity: 0;
        transition: all 0.5s ease;
      }

      .feedback.correct {
        background: #28a745;
        color: white;
      }

      .feedback.incorrect {
        background: #dc3545;
        color: white;
      }

      .feedback.show {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <div class="clouds">
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
      </div>

      <div class="ui-panel">
        <div class="score">Score: <span id="score">0</span></div>
        <div class="level">Level: <span id="level">1</span></div>
      </div>

      <div class="question-panel">
        <div class="question" id="question">
          Choose the correct word to complete the sentence:
        </div>
        <div class="options" id="options"></div>
      </div>

      <div class="slingshot">
        <div class="slingshot-frame">
          <div class="slingshot-band"></div>
        </div>
        <div class="projectile" id="projectile"></div>
      </div>

      <div id="targets-container"></div>

      <button class="fire-button" id="fire-button" onclick="fireProjectile()">
        FIRE!
      </button>

      <div class="feedback" id="feedback"></div>
    </div>

    <script>
      let score = 0;
      let level = 1;
      let currentQuestion = 0;
      let selectedAnswer = null;
      let targets = [];
      let isAnimating = false;

      const questions = [
        {
          question: "She _____ to the store yesterday.",
          options: ["go", "goes", "went", "going"],
          correct: 2,
        },
        {
          question: "The cat is _____ the table.",
          options: ["under", "above", "between", "through"],
          correct: 0,
        },
        {
          question: "I have _____ books than you.",
          options: ["less", "fewer", "least", "few"],
          correct: 1,
        },
        {
          question: "He _____ his homework every day.",
          options: ["do", "does", "did", "done"],
          correct: 1,
        },
        {
          question: "The weather is _____ today.",
          options: ["good", "well", "better", "best"],
          correct: 0,
        },
        {
          question: "They _____ playing in the park.",
          options: ["is", "are", "was", "be"],
          correct: 1,
        },
        {
          question: "I _____ seen that movie before.",
          options: ["has", "have", "had", "having"],
          correct: 1,
        },
        {
          question: "The dog ran _____ the yard.",
          options: ["across", "between", "through", "around"],
          correct: 0,
        },
      ];

      function initGame() {
        loadQuestion();
        createTargets();
        positionProjectile();
      }

      function loadQuestion() {
        const q = questions[currentQuestion];
        document.getElementById("question").textContent = q.question;

        const optionsContainer = document.getElementById("options");
        optionsContainer.innerHTML = "";

        q.options.forEach((option, index) => {
          const div = document.createElement("div");
          div.className = "option";
          div.textContent = option;
          div.onclick = () => selectOption(index);
          optionsContainer.appendChild(div);
        });

        selectedAnswer = null;
        updateFireButton();
      }

      function selectOption(index) {
        selectedAnswer = index;
        const options = document.querySelectorAll(".option");
        options.forEach((opt) => opt.classList.remove("selected"));
        options[index].classList.add("selected");
        updateFireButton();
      }

      function updateFireButton() {
        const button = document.getElementById("fire-button");
        button.disabled = selectedAnswer === null || isAnimating;
      }

      function createTargets() {
        const container = document.getElementById("targets-container");
        container.innerHTML = "";
        targets = [];

        const numTargets = Math.min(4, level + 2);
        const q = questions[currentQuestion];

        for (let i = 0; i < numTargets; i++) {
          const target = document.createElement("div");
          target.className = "target";
          target.innerHTML = `<div class="target-circle">${
            q.options[i] || "Empty"
          }</div>`;

          // Position targets randomly
          const x = 300 + Math.random() * (window.innerWidth - 500);
          const y = 100 + Math.random() * (window.innerHeight - 300);

          target.style.left = x + "px";
          target.style.top = y + "px";

          targets.push({ element: target, x, y, optionIndex: i });
          container.appendChild(target);
        }
      }

      function positionProjectile() {
        const projectile = document.getElementById("projectile");
        projectile.style.left = "135px";
        projectile.style.bottom = "160px";
        projectile.style.transform = "scale(1)";
      }

      function fireProjectile() {
        if (selectedAnswer === null || isAnimating) return;

        isAnimating = true;
        updateFireButton();

        const projectile = document.getElementById("projectile");
        const targetIndex = selectedAnswer;

        if (targets[targetIndex]) {
          const target = targets[targetIndex];
          const targetX = target.x + 50; // Center of target
          const targetY = target.y + 50;

          // Animate projectile to target
          projectile.style.transition =
            "all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94)";
          projectile.style.left = targetX + "px";
          projectile.style.bottom = window.innerHeight - targetY + "px";
          projectile.style.transform = "scale(1.5) rotate(360deg)";

          setTimeout(() => {
            checkAnswer();
          }, 1000);
        }
      }

      function checkAnswer() {
        const q = questions[currentQuestion];
        const isCorrect = selectedAnswer === q.correct;

        showFeedback(isCorrect);

        if (isCorrect) {
          score += 10 * level;
          document.getElementById("score").textContent = score;

          // Remove hit target with explosion effect
          const hitTarget = targets[selectedAnswer];
          if (hitTarget) {
            hitTarget.element.style.transform = "scale(0) rotate(180deg)";
            hitTarget.element.style.opacity = "0";
          }
        }

        setTimeout(() => {
          nextQuestion();
        }, 2000);
      }

      function showFeedback(isCorrect) {
        const feedback = document.getElementById("feedback");
        feedback.textContent = isCorrect ? "CORRECT! 🎯" : "TRY AGAIN! 💥";
        feedback.className = `feedback ${
          isCorrect ? "correct" : "incorrect"
        } show`;

        setTimeout(() => {
          feedback.classList.remove("show");
        }, 1500);
      }

      function nextQuestion() {
        currentQuestion = (currentQuestion + 1) % questions.length;

        if (currentQuestion === 0) {
          level++;
          document.getElementById("level").textContent = level;
        }

        loadQuestion();
        createTargets();
        positionProjectile();
        isAnimating = false;
        updateFireButton();
      }

      // Initialize game when page loads
      window.onload = function () {
        initGame();
      };

      // Handle window resize
      window.onresize = function () {
        createTargets();
      };
    </script>
  </body>
</html>
