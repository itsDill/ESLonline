<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Enhanced Soccer Vocabulary Challenge</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow-x: hidden;
      }

      .game-container {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 20px;
        max-width: 900px;
        width: 90%;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
      }

      .game-header {
        text-align: center;
        margin-bottom: 30px;
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .game-header h1 {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .score-board {
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
        padding: 15px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        border-radius: 15px;
        color: white;
        font-weight: bold;
      }

      .score-item {
        text-align: center;
      }

      .score-number {
        font-size: 2rem;
        display: block;
      }

      .question-section {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .question-text {
        font-size: 1.3rem;
        margin-bottom: 20px;
        color: #2c3e50;
        text-align: center;
        font-weight: 600;
      }

      .answers-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .answer-btn {
        padding: 15px 20px;
        background: linear-gradient(45deg, #3498db, #2980b9);
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .answer-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
      }

      .answer-btn.correct {
        background: linear-gradient(45deg, #27ae60, #2ecc71);
        animation: correctAnswer 0.5s ease;
      }

      .answer-btn.incorrect {
        background: linear-gradient(45deg, #e74c3c, #c0392b);
        animation: incorrectAnswer 0.5s ease;
      }

      @keyframes correctAnswer {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes incorrectAnswer {
        0% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
        100% {
          transform: translateX(0);
        }
      }

      .game-field {
        position: relative;
        height: 500px;
        background: linear-gradient(
          to bottom,
          #2ecc71 0%,
          #27ae60 50%,
          #239954 100%
        );
        border-radius: 15px;
        margin: 20px 0;
        overflow: hidden;
        display: none;
        border: 3px solid #fff;
      }

      /* Field markings */
      .penalty-area {
        position: absolute;
        top: 30px;
        left: 50%;
        transform: translateX(-50%);
        width: 300px;
        height: 150px;
        border: 3px solid rgba(255, 255, 255, 0.8);
        border-bottom: none;
        border-radius: 10px 10px 0 0;
      }

      .goal-area {
        position: absolute;
        top: 30px;
        left: 50%;
        transform: translateX(-50%);
        width: 200px;
        height: 80px;
        border: 3px solid rgba(255, 255, 255, 0.8);
        border-bottom: none;
        border-radius: 5px 5px 0 0;
      }

      .goal {
        position: absolute;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        width: 160px;
        height: 60px;
        background: rgba(0, 0, 0, 0.1);
        border: 4px solid white;
        border-bottom: none;
        border-radius: 10px 10px 0 0;
        z-index: 1;
      }

      .goal::before {
        content: "";
        position: absolute;
        top: -4px;
        left: -4px;
        right: -4px;
        bottom: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.3),
          rgba(0, 0, 0, 0.1)
        );
        border-radius: 10px 10px 0 0;
        z-index: -1;
      }

      /* Goal net effect */
      .goal-net {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
            90deg,
            rgba(0, 0, 0, 0.1) 1px,
            transparent 1px
          ),
          linear-gradient(0deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
        background-size: 10px 10px;
        border-radius: 10px 10px 0 0;
        display: none;
      }

      .goal-net.active {
        display: block;
        animation: netShake 0.5s ease;
      }

      @keyframes netShake {
        0% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-3px);
        }
        50% {
          transform: translateX(3px);
        }
        75% {
          transform: translateX(-2px);
        }
        100% {
          transform: translateX(0);
        }
      }

      .goalkeeper {
        position: absolute;
        top: 60px;
        left: 50%;
        transform: translateX(-50%);
        width: 30px;
        height: 50px;
        background: linear-gradient(to bottom, #ff6b6b, #e74c3c);
        border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        z-index: 10;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      }

      .goalkeeper::before {
        content: "";
        position: absolute;
        top: 5px;
        left: 50%;
        transform: translateX(-50%);
        width: 15px;
        height: 15px;
        background: #fdbcb4;
        border-radius: 50%;
      }

      .goalkeeper.diving-left {
        transform: translateX(-120px) rotate(-45deg) scaleX(1.2);
        transition: all 0.4s ease-out;
      }

      .goalkeeper.diving-right {
        transform: translateX(20px) rotate(45deg) scaleX(1.2);
        transition: all 0.4s ease-out;
      }

      .goalkeeper.diving-center {
        transform: translateX(-50%) scaleY(0.7) scaleX(1.1);
        top: 80px;
        transition: all 0.4s ease-out;
      }

      .goalkeeper.diving-top-left {
        transform: translateX(-100px) translateY(-20px) rotate(-30deg)
          scaleX(1.1);
      }

      .goalkeeper.diving-top-right {
        transform: translateX(0px) translateY(-20px) rotate(30deg) scaleX(1.1);
      }

      .goalkeeper.diving-bottom-left {
        transform: translateX(-140px) translateY(20px) rotate(-60deg)
          scaleX(1.3);
      }

      .goalkeeper.diving-bottom-right {
        transform: translateX(40px) translateY(20px) rotate(60deg) scaleX(1.3);
      }

      .ball {
        position: absolute;
        bottom: 80px;
        left: 50%;
        transform: translateX(-50%);
        width: 25px;
        height: 25px;
        background: radial-gradient(
          circle at 30% 30%,
          #fff 10%,
          #ddd 40%,
          #999 100%
        );
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 5;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
      }

      .ball::before {
        content: "";
        position: absolute;
        top: 2px;
        left: 2px;
        width: 4px;
        height: 4px;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
      }

      .ball.shooting-left {
        animation: shootBallLeft 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .ball.shooting-right {
        animation: shootBallRight 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .ball.shooting-center {
        animation: shootBallCenter 0.9s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .ball.shooting-top-left {
        animation: shootBallTopLeft 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .ball.shooting-top-right {
        animation: shootBallTopRight 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .ball.shooting-bottom-left {
        animation: shootBallBottomLeft 1.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .ball.shooting-bottom-right {
        animation: shootBallBottomRight 1.1s
          cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      @keyframes shootBallLeft {
        0% {
          bottom: 80px;
          left: 50%;
          transform: translateX(-50%) scale(1) rotate(0deg);
        }
        30% {
          bottom: 250px;
          left: 30%;
          transform: translateX(-50%) scale(0.8) rotate(-180deg);
        }
        70% {
          bottom: 150px;
          left: 25%;
          transform: translateX(-50%) scale(0.6) rotate(-360deg);
        }
        100% {
          bottom: 75px;
          left: 22%;
          transform: translateX(-50%) scale(0.5) rotate(-540deg);
        }
      }

      @keyframes shootBallRight {
        0% {
          bottom: 80px;
          left: 50%;
          transform: translateX(-50%) scale(1) rotate(0deg);
        }
        30% {
          bottom: 250px;
          left: 70%;
          transform: translateX(-50%) scale(0.8) rotate(180deg);
        }
        70% {
          bottom: 150px;
          left: 75%;
          transform: translateX(-50%) scale(0.6) rotate(360deg);
        }
        100% {
          bottom: 75px;
          left: 78%;
          transform: translateX(-50%) scale(0.5) rotate(540deg);
        }
      }

      @keyframes shootBallCenter {
        0% {
          bottom: 80px;
          left: 50%;
          transform: translateX(-50%) scale(1) rotate(0deg);
        }
        40% {
          bottom: 280px;
          left: 50%;
          transform: translateX(-50%) scale(0.7) rotate(-270deg);
        }
        80% {
          bottom: 120px;
          left: 50%;
          transform: translateX(-50%) scale(0.5) rotate(-450deg);
        }
        100% {
          bottom: 75px;
          left: 50%;
          transform: translateX(-50%) scale(0.4) rotate(-540deg);
        }
      }

      @keyframes shootBallTopLeft {
        0% {
          bottom: 80px;
          left: 50%;
          transform: translateX(-50%) scale(1) rotate(0deg);
        }
        30% {
          bottom: 300px;
          left: 30%;
          transform: translateX(-50%) scale(0.8) rotate(-180deg);
        }
        70% {
          bottom: 180px;
          left: 25%;
          transform: translateX(-50%) scale(0.6) rotate(-360deg);
        }
        100% {
          bottom: 50px;
          left: 22%;
          transform: translateX(-50%) scale(0.5) rotate(-540deg);
        }
      }

      @keyframes shootBallTopRight {
        0% {
          bottom: 80px;
          left: 50%;
          transform: translateX(-50%) scale(1) rotate(0deg);
        }
        30% {
          bottom: 300px;
          left: 70%;
          transform: translateX(-50%) scale(0.8) rotate(180deg);
        }
        70% {
          bottom: 180px;
          left: 75%;
          transform: translateX(-50%) scale(0.6) rotate(360deg);
        }
        100% {
          bottom: 50px;
          left: 78%;
          transform: translateX(-50%) scale(0.5) rotate(540deg);
        }
      }

      @keyframes shootBallBottomLeft {
        0% {
          bottom: 80px;
          left: 50%;
          transform: translateX(-50%) scale(1) rotate(0deg);
        }
        30% {
          bottom: 220px;
          left: 30%;
          transform: translateX(-50%) scale(0.8) rotate(-180deg);
        }
        70% {
          bottom: 120px;
          left: 25%;
          transform: translateX(-50%) scale(0.6) rotate(-360deg);
        }
        100% {
          bottom: 90px;
          left: 22%;
          transform: translateX(-50%) scale(0.5) rotate(-540deg);
        }
      }

      @keyframes shootBallBottomRight {
        0% {
          bottom: 80px;
          left: 50%;
          transform: translateX(-50%) scale(1) rotate(0deg);
        }
        30% {
          bottom: 220px;
          left: 70%;
          transform: translateX(-50%) scale(0.8) rotate(180deg);
        }
        70% {
          bottom: 120px;
          left: 75%;
          transform: translateX(-50%) scale(0.6) rotate(360deg);
        }
        100% {
          bottom: 90px;
          left: 78%;
          transform: translateX(-50%) scale(0.5) rotate(540deg);
        }
      }

      .ball.goal {
        animation: goalCelebration 2s ease-out;
      }

      @keyframes goalCelebration {
        0% {
          transform: translateX(-50%) scale(0.4);
        }
        20% {
          transform: translateX(-50%) scale(0.6) rotate(180deg);
        }
        40% {
          bottom: 40px;
          transform: translateX(-50%) scale(0.3) rotate(360deg);
        }
        60% {
          bottom: 30px;
          transform: translateX(-50%) scale(0.2) rotate(540deg);
        }
        100% {
          bottom: -30px;
          transform: translateX(-50%) scale(0.1) rotate(720deg);
          opacity: 0;
        }
      }

      .shoot-controls {
        text-align: center;
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        margin-top: 20px;
      }

      .penalty-indicator {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 15px;
        font-weight: bold;
        color: #2c3e50;
      }

      .power-meter-container {
        width: 100%;
        max-width: 300px;
        margin: 20px auto;
        text-align: center;
      }

      .power-meter {
        width: 100%;
        height: 25px;
        background: #ecf0f1;
        border-radius: 12px;
        overflow: hidden;
        position: relative;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
      }

      .power-fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #27ae60, #f39c12, #e74c3c);
        border-radius: 12px;
        transition: width 0.05s linear;
      }

      .power-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 5px;
        font-size: 0.8rem;
        color: #2c3e50;
      }

      .shoot-direction-buttons {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin: 20px 0;
      }

      .shoot-btn {
        padding: 12px 15px;
        background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: bold;
        transition: all 0.2s ease;
      }

      .shoot-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 10px rgba(255, 107, 107, 0.3);
      }

      .shoot-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .shoot-btn.top {
        grid-column: 2;
        background: linear-gradient(45deg, #3498db, #2980b9);
      }

      .shoot-btn.bottom {
        grid-column: 2;
        background: linear-gradient(45deg, #9b59b6, #8e44ad);
      }

      .shoot-btn.left {
        background: linear-gradient(45deg, #2ecc71, #27ae60);
      }

      .shoot-btn.right {
        background: linear-gradient(45deg, #e74c3c, #c0392b);
      }

      .back-btn {
        padding: 10px 20px;
        background: linear-gradient(45deg, #95a5a6, #7f8c8d);
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: bold;
        margin-top: 15px;
        transition: all 0.3s ease;
      }

      .back-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(149, 165, 166, 0.4);
      }

      .feedback {
        text-align: center;
        padding: 20px;
        border-radius: 15px;
        margin: 20px 0;
        font-weight: bold;
        font-size: 1.1rem;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .feedback.show {
        opacity: 1;
      }

      .feedback.correct {
        background: linear-gradient(45deg, #2ecc71, #27ae60);
        color: white;
      }

      .feedback.incorrect {
        background: linear-gradient(45deg, #e74c3c, #c0392b);
        color: white;
      }

      .feedback.goal {
        background: linear-gradient(45deg, #f39c12, #e67e22);
        color: white;
        animation: goalFeedback 0.5s ease;
      }

      .feedback.save {
        background: linear-gradient(45deg, #3498db, #2980b9);
        color: white;
      }

      @keyframes goalFeedback {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .progress-bar {
        width: 100%;
        height: 10px;
        background: #ecf0f1;
        border-radius: 5px;
        overflow: hidden;
        margin-bottom: 20px;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(45deg, #2ecc71, #27ae60);
        width: 0%;
        transition: width 0.3s ease;
      }

      .next-btn {
        background: linear-gradient(45deg, #9b59b6, #8e44ad);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: bold;
        float: right;
        transition: all 0.3s ease;
      }

      .next-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(155, 89, 182, 0.4);
      }

      .game-complete {
        text-align: center;
        padding: 40px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        border-radius: 15px;
        display: none;
      }

      .final-score {
        font-size: 3rem;
        margin: 20px 0;
        font-weight: bold;
      }

      .restart-btn {
        background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1.2rem;
        font-weight: bold;
        margin-top: 20px;
        transition: all 0.3s ease;
      }

      .restart-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
      }

      .difficulty-selector {
        text-align: center;
        margin-bottom: 20px;
      }

      .difficulty-btn {
        padding: 10px 20px;
        margin: 0 5px;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .difficulty-btn.easy {
        background: linear-gradient(45deg, #2ecc71, #27ae60);
        color: white;
      }

      .difficulty-btn.medium {
        background: linear-gradient(45deg, #f39c12, #e67e22);
        color: white;
      }

      .difficulty-btn.hard {
        background: linear-gradient(45deg, #e74c3c, #c0392b);
        color: white;
      }

      .difficulty-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
      }

      .timer {
        text-align: center;
        font-size: 1.2rem;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 15px;
      }

      .timer-value {
        color: #e74c3c;
      }

      @media (max-width: 768px) {
        .game-container {
          padding: 15px;
          width: 95%;
        }

        .game-header h1 {
          font-size: 2rem;
        }

        .answers-grid {
          grid-template-columns: 1fr;
        }

        .game-field {
          height: 400px;
        }

        .score-board {
          flex-direction: column;
          gap: 10px;
        }

        .shoot-direction-buttons {
          grid-template-columns: 1fr 1fr;
        }

        .shoot-btn.top,
        .shoot-btn.bottom {
          grid-column: span 2;
        }
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <div class="game-header">
        <h1>⚽ Enhanced Soccer Vocabulary Challenge</h1>
        <p>Answer questions correctly to earn penalty shots!</p>
      </div>

      <div class="difficulty-selector" id="difficulty-selector">
        <h3>Select Difficulty:</h3>
        <button class="difficulty-btn easy" onclick="setDifficulty('easy')">
          Easy
        </button>
        <button class="difficulty-btn medium" onclick="setDifficulty('medium')">
          Medium
        </button>
        <button class="difficulty-btn hard" onclick="setDifficulty('hard')">
          Hard
        </button>
      </div>

      <div class="score-board">
        <div class="score-item">
          <span class="score-number" id="score">0</span>
          <span>Score</span>
        </div>
        <div class="score-item">
          <span class="score-number" id="goals">0</span>
          <span>Goals</span>
        </div>
        <div class="score-item">
          <span class="score-number" id="question-num">1</span>
          <span>Question</span>
        </div>
        <div class="score-item">
          <span class="score-number" id="penalties">0</span>
          <span>Penalties</span>
        </div>
      </div>

      <div class="timer" id="timer" style="display: none">
        Time left: <span class="timer-value" id="timer-value">30</span>s
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
      </div>

      <div class="question-section" id="question-section">
        <div class="question-text" id="question-text">Loading question...</div>
        <div class="answers-grid" id="answers-grid">
          <!-- Answers will be populated by JavaScript -->
        </div>
        <button class="next-btn" id="next-btn" style="display: none">
          Next Question
        </button>
      </div>

      <div class="feedback" id="feedback"></div>

      <div class="game-field" id="game-field">
        <div class="penalty-area"></div>
        <div class="goal-area"></div>
        <div class="goal">
          <div class="goal-net" id="goal-net"></div>
        </div>
        <div class="goalkeeper" id="goalkeeper"></div>
        <div class="ball" id="ball"></div>
      </div>

      <div class="shoot-controls" id="shoot-controls" style="display: none">
        <div class="penalty-indicator">
          <span>🥅 Penalty Kick Ready! Choose your direction and power!</span>
        </div>

        <div class="power-meter-container">
          <div class="power-meter">
            <div class="power-fill" id="power-fill"></div>
          </div>
          <div class="power-labels">
            <span>Low</span>
            <span>Medium</span>
            <span>High</span>
          </div>
        </div>

        <div class="shoot-direction-buttons">
          <button class="shoot-btn top" onclick="shootBall('top-center')">
            ⬆️ Top Center
          </button>
          <button class="shoot-btn left" onclick="shootBall('left')">
            ⬅️ Left Corner
          </button>
          <button class="shoot-btn right" onclick="shootBall('right')">
            Right Corner ➡️
          </button>
          <button class="shoot-btn bottom" onclick="shootBall('bottom-center')">
            ⬇️ Bottom Center
          </button>
          <button class="shoot-btn" onclick="shootBall('top-left')">
            ↖️ Top Left
          </button>
          <button class="shoot-btn" onclick="shootBall('top-right')">
            Top Right ↗️
          </button>
          <button class="shoot-btn" onclick="shootBall('bottom-left')">
            ↙️ Bottom Left
          </button>
          <button class="shoot-btn" onclick="shootBall('bottom-right')">
            Bottom Right ↘️
          </button>
        </div>

        <button class="back-btn" onclick="returnToQuestion()">
          ↩️ Back to Question
        </button>
      </div>

      <div class="game-complete" id="game-complete">
        <h2>🎉 Game Complete! 🎉</h2>
        <div class="final-score" id="final-score">0</div>
        <p>
          Well done! You've completed the Enhanced Soccer Vocabulary Challenge!
        </p>
        <button class="restart-btn" onclick="restartGame()">Play Again</button>
      </div>
    </div>

    <script>
      // Game state
      let currentQuestion = 0;
      let score = 0;
      let goals = 0;
      let penalties = 0;
      let correctAnswers = 0;
      let gamePhase = "question";
      let difficulty = "medium";
      let timerInterval;
      let timeLeft = 30;
      let powerLevel = 0;
      let powerDirection = 1;
      let powerInterval;

      // Enhanced soccer vocabulary questions with more variety
      const questions = {
        easy: [
          {
            question: "What do you call the person who guards the goal?",
            answers: ["Goalkeeper", "Defender", "Midfielder", "Striker"],
            correct: 0,
          },
          {
            question: "How many players are on a soccer team during a match?",
            answers: ["10", "11", "12", "9"],
            correct: 1,
          },
          {
            question:
              "What is it called when you kick the ball with your head?",
            answers: ["Header", "Volley", "Tackle", "Dribble"],
            correct: 0,
          },
          {
            question:
              "Which famous Argentine soccer player is known as 'The GOAT'?",
            answers: ["Ronaldo", "Messi", "Neymar", "Mbappé"],
            correct: 1,
          },
          {
            question: "What color card means a player is sent off the field?",
            answers: ["Yellow", "Red", "Green", "Blue"],
            correct: 1,
          },
          {
            question: "What do you call the official who controls the game?",
            answers: ["Coach", "Referee", "Manager", "Captain"],
            correct: 1,
          },
          {
            question: "What is the shape of a soccer ball?",
            answers: ["Square", "Triangle", "Round", "Oval"],
            correct: 2,
          },
          {
            question: "Where do soccer players change their clothes?",
            answers: ["Kitchen", "Bedroom", "Locker room", "Library"],
            correct: 2,
          },
          {
            question: "What do you wear on your feet to play soccer?",
            answers: ["Sneakers", "Boots", "Sandals", "Socks"],
            correct: 1,
          },
          {
            question: "What is the grass area where soccer is played called?",
            answers: ["Court", "Ring", "Field", "Track"],
            correct: 2,
          },
        ],
        medium: [
          {
            question:
              "What do you call it when you move the ball skillfully with your feet?",
            answers: ["Passing", "Shooting", "Dribbling", "Heading"],
            correct: 2,
          },
          {
            question: "How long is a standard soccer match?",
            answers: ["80 minutes", "90 minutes", "100 minutes", "120 minutes"],
            correct: 1,
          },
          {
            question: "What is the most important tournament in soccer?",
            answers: [
              "Olympics",
              "World Cup",
              "Champions League",
              "Copa America",
            ],
            correct: 1,
          },
          {
            question: "What do you call the area in front of the goal?",
            answers: ["Corner", "Penalty box", "Midfield", "Sideline"],
            correct: 1,
          },
          {
            question:
              "Which body part CANNOT touch the ball (except for goalkeepers)?",
            answers: ["Chest", "Head", "Hands", "Legs"],
            correct: 2,
          },
          {
            question: "What is it called when you pass the ball to a teammate?",
            answers: ["Assist", "Goal", "Save", "Tackle"],
            correct: 0,
          },
          {
            question:
              "What happens when the ball completely crosses the goal line?",
            answers: ["Corner kick", "Goal", "Throw-in", "Free kick"],
            correct: 1,
          },
          {
            question: "How many substitutions can a team make in a match?",
            answers: ["3", "5", "7", "Unlimited"],
            correct: 1,
          },
          {
            question:
              "What is it called when a player kicks the ball while it's in the air?",
            answers: ["Header", "Volley", "Tackle", "Dribble"],
            correct: 1,
          },
          {
            question:
              "What do you call the player who leads the team on the field?",
            answers: ["Coach", "Manager", "Captain", "Referee"],
            correct: 2,
          },
          {
            question:
              "What happens when the ball goes out of bounds on the sideline?",
            answers: ["Corner kick", "Goal kick", "Throw-in", "Free kick"],
            correct: 2,
          },
          {
            question: "What is the term for stopping an opponent's attack?",
            answers: ["Passing", "Shooting", "Defending", "Scoring"],
            correct: 2,
          },
        ],
        hard: [
          {
            question:
              "What is the name of the international soccer governing body?",
            answers: ["FIFA", "UEFA", "CONMEBOL", "Premier League"],
            correct: 0,
          },
          {
            question:
              "What is the term for a goal scored directly from a corner kick?",
            answers: ["Volley", "Bicycle kick", "Olympico", "Header"],
            correct: 2,
          },
          {
            question: "Which country has won the most World Cup titles?",
            answers: ["Germany", "Argentina", "Brazil", "Italy"],
            correct: 2,
          },
          {
            question:
              "What is the term for when a player is behind the last defender?",
            answers: ["Handball", "Offside", "Foul", "Penalty"],
            correct: 1,
          },
          {
            question:
              "What is the minimum number of players a team needs to continue?",
            answers: ["5", "6", "7", "8"],
            correct: 2,
          },
          {
            question: "What is the 'Golden Boot' awarded for?",
            answers: [
              "Best goalkeeper",
              "Most goals",
              "Best player",
              "Fair play",
            ],
            correct: 1,
          },
          {
            question: "What is the term for extra time added to each half?",
            answers: ["Overtime", "Extra time", "Stoppage time", "Added time"],
            correct: 2,
          },
          {
            question: "What is a 'hat-trick' in soccer?",
            answers: [
              "3 assists",
              "3 goals by one player",
              "3 saves",
              "3 cards",
            ],
            correct: 1,
          },
          {
            question:
              "What is the maximum number of players on the field for one team?",
            answers: ["10", "11", "12", "9"],
            correct: 1,
          },
          {
            question:
              "What is the term for a kick awarded after a serious foul?",
            answers: ["Corner kick", "Throw-in", "Free kick", "Goal kick"],
            correct: 2,
          },
          {
            question: "What does VAR stand for in modern soccer?",
            answers: [
              "Video Assistant Referee",
              "Virtual Audio Recording",
              "Visual Aid Reference",
              "Variable Action Review",
            ],
            correct: 0,
          },
          {
            question:
              "What is the term for a defensive strategy where players mark specific opponents?",
            answers: [
              "Zone defense",
              "Man-to-man marking",
              "Pressing",
              "Counter-attack",
            ],
            correct: 1,
          },
        ],
      };

      // Timer functionality
      function startTimer() {
        if (difficulty === "hard") {
          timeLeft = 30;
          document.getElementById("timer").style.display = "block";
          timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById("timer-value").textContent = timeLeft;
            if (timeLeft <= 0) {
              clearInterval(timerInterval);
              handleTimeout();
            }
          }, 1000);
        } else {
          document.getElementById("timer").style.display = "none";
        }
      }

      function stopTimer() {
        clearInterval(timerInterval);
        document.getElementById("timer").style.display = "none";
      }

      function handleTimeout() {
        showFeedback("Time's up! ⏰", "incorrect");
        disableAnswers();
        document.getElementById("next-btn").style.display = "block";
      }

      // Power meter for penalty kicks
      function startPowerMeter() {
        powerLevel = 0;
        powerDirection = 1;
        powerInterval = setInterval(() => {
          powerLevel += powerDirection * 3; // Faster power meter
          if (powerLevel >= 100) {
            powerLevel = 100;
            powerDirection = -1;
          } else if (powerLevel <= 0) {
            powerLevel = 0;
            powerDirection = 1;
          }
          document.getElementById("power-fill").style.width = powerLevel + "%";
        }, 30); // Faster update interval
      }

      function stopPowerMeter() {
        clearInterval(powerInterval);
        return powerLevel;
      }

      // Game initialization
      function setDifficulty(selectedDifficulty) {
        difficulty = selectedDifficulty;
        document.getElementById("difficulty-selector").style.display = "none";
        startGame();
      }

      function startGame() {
        currentQuestion = 0;
        score = 0;
        goals = 0;
        penalties = 0;
        correctAnswers = 0;
        gamePhase = "question";
        updateDisplay();
        loadQuestion();
        startTimer();
      }

      function loadQuestion() {
        const questionData = questions[difficulty][currentQuestion];
        document.getElementById("question-text").textContent =
          questionData.question;

        const answersGrid = document.getElementById("answers-grid");
        answersGrid.innerHTML = "";

        questionData.answers.forEach((answer, index) => {
          const button = document.createElement("button");
          button.className = "answer-btn";
          button.textContent = answer;
          button.onclick = () => selectAnswer(index);
          answersGrid.appendChild(button);
        });

        document.getElementById("next-btn").style.display = "none";
        document.getElementById("feedback").classList.remove("show");
        gamePhase = "question";
      }

      function selectAnswer(selectedIndex) {
        if (gamePhase !== "question") return;

        stopTimer();
        const questionData = questions[difficulty][currentQuestion];
        const buttons = document.querySelectorAll(".answer-btn");

        buttons.forEach((btn, index) => {
          btn.onclick = null;
          if (index === questionData.correct) {
            btn.classList.add("correct");
          } else if (
            index === selectedIndex &&
            index !== questionData.correct
          ) {
            btn.classList.add("incorrect");
          }
        });

        if (selectedIndex === questionData.correct) {
          score +=
            difficulty === "easy" ? 10 : difficulty === "medium" ? 15 : 20;
          correctAnswers++;
          penalties++;
          showFeedback("Correct! 🎉 You earned a penalty kick!", "correct");
        } else {
          showFeedback(
            `Wrong! The correct answer was: ${
              questionData.answers[questionData.correct]
            }`,
            "incorrect"
          );
        }

        updateDisplay();
        document.getElementById("next-btn").style.display = "block";
        gamePhase = "answered";
      }

      function showFeedback(message, type) {
        const feedback = document.getElementById("feedback");
        feedback.textContent = message;
        feedback.className = `feedback ${type} show`;
      }

      function nextQuestion() {
        if (correctAnswers > 0 && penalties > goals) {
          showPenaltyPhase();
        } else {
          currentQuestion++;
          if (currentQuestion >= questions[difficulty].length) {
            endGame();
          } else {
            loadQuestion();
            startTimer();
          }
        }
      }

      function showPenaltyPhase() {
        document.getElementById("question-section").style.display = "none";
        document.getElementById("game-field").style.display = "block";
        document.getElementById("shoot-controls").style.display = "block";
        gamePhase = "penalty";
        startPowerMeter();
        resetFieldPositions();
      }

      function resetFieldPositions() {
        const goalkeeper = document.getElementById("goalkeeper");
        const ball = document.getElementById("ball");
        const goalNet = document.getElementById("goal-net");

        goalkeeper.className = "goalkeeper";
        ball.className = "ball";
        goalNet.classList.remove("active");

        // Remove any previous animation classes
        ball.classList.remove(
          "shooting-left",
          "shooting-right",
          "shooting-center",
          "shooting-top-left",
          "shooting-top-right",
          "shooting-bottom-left",
          "shooting-bottom-right",
          "shooting-top-center",
          "shooting-bottom-center",
          "goal"
        );
      }

      function shootBall(direction) {
        if (gamePhase !== "penalty") return;

        const currentPower = stopPowerMeter();
        const ball = document.getElementById("ball");
        const goalkeeper = document.getElementById("goalkeeper");
        const goalNet = document.getElementById("goal-net");
        const shootButtons = document.querySelectorAll(".shoot-btn");

        // Disable shoot buttons
        shootButtons.forEach((btn) => (btn.disabled = true));

        // Goalkeeper reaction based on difficulty and randomness
        let keeperDirection = getKeeperDirection(direction, currentPower);

        // Apply animations
        ball.classList.add(`shooting-${direction}`);
        if (keeperDirection) {
          goalkeeper.classList.add(`diving-${keeperDirection}`);
        }

        // Determine if it's a goal
        setTimeout(() => {
          const isGoal = determineGoal(
            direction,
            keeperDirection,
            currentPower
          );

          if (isGoal) {
            goals++;
            ball.classList.add("goal");
            goalNet.classList.add("active");
            showFeedback("GOAL! ⚽🎉", "goal");
            score += 25;
          } else {
            showFeedback("Saved! 🧤 Great keeping!", "save");
          }

          updateDisplay();

          setTimeout(() => {
            returnToQuestion();
          }, 2500);
        }, 1000);
      }

      function getKeeperDirection(shotDirection, power) {
        const rand = Math.random();
        let difficultyFactor;

        // Adjust difficulty based on shot power
        const powerFactor = power / 100;

        if (difficulty === "easy") {
          difficultyFactor = 0.3 + 0.2 * powerFactor; // 30-50% chance to dive
        } else if (difficulty === "medium") {
          difficultyFactor = 0.5 + 0.3 * powerFactor; // 50-80% chance to dive
        } else {
          difficultyFactor = 0.7 + 0.2 * powerFactor; // 70-90% chance to dive
        }

        if (rand < difficultyFactor) {
          // More likely to dive in the correct direction
          if (rand < difficultyFactor * 0.7) {
            // 70% chance to dive in the correct general direction
            if (shotDirection.includes("left")) {
              return shotDirection.includes("top")
                ? "top-left"
                : shotDirection.includes("bottom")
                ? "bottom-left"
                : "left";
            } else if (shotDirection.includes("right")) {
              return shotDirection.includes("top")
                ? "top-right"
                : shotDirection.includes("bottom")
                ? "bottom-right"
                : "right";
            } else if (shotDirection.includes("center")) {
              return shotDirection.includes("top")
                ? "top-left"
                : shotDirection.includes("bottom")
                ? "bottom-right"
                : "center";
            }
          } else {
            // 30% chance to dive in a random direction
            const directions = [
              "left",
              "right",
              "center",
              "top-left",
              "top-right",
              "bottom-left",
              "bottom-right",
            ];
            return directions[Math.floor(Math.random() * directions.length)];
          }
        }
        return null; // Keeper doesn't move
      }

      function determineGoal(ballDirection, keeperDirection, power) {
        // Minimum power required to score
        if (power < 20) return false; // Too weak

        // If keeper doesn't move
        if (!keeperDirection) {
          return power > 30; // Need some power to score
        }

        // Check if keeper went the wrong way
        const isWrongDirection =
          (ballDirection.includes("left") &&
            !keeperDirection.includes("left")) ||
          (ballDirection.includes("right") &&
            !keeperDirection.includes("right")) ||
          (ballDirection.includes("center") &&
            !keeperDirection.includes("center"));

        if (isWrongDirection) {
          return power > 40; // Easier to score if keeper goes wrong way
        }

        // Keeper went the right way - check if shot was powerful enough
        const isTopShot = ballDirection.includes("top");
        const isBottomShot = ballDirection.includes("bottom");

        // Top shots are harder to save
        if (isTopShot) {
          return (
            power >
            80 - (difficulty === "easy" ? 20 : difficulty === "medium" ? 10 : 0)
          );
        }
        // Bottom shots are easier to save
        else if (isBottomShot) {
          return (
            power >
            90 - (difficulty === "easy" ? 20 : difficulty === "medium" ? 10 : 0)
          );
        }
        // Middle shots
        else {
          return (
            power >
            85 - (difficulty === "easy" ? 20 : difficulty === "medium" ? 10 : 0)
          );
        }
      }

      function returnToQuestion() {
        document.getElementById("question-section").style.display = "block";
        document.getElementById("game-field").style.display = "none";
        document.getElementById("shoot-controls").style.display = "none";

        // Re-enable shoot buttons
        const shootButtons = document.querySelectorAll(".shoot-btn");
        shootButtons.forEach((btn) => (btn.disabled = false));

        currentQuestion++;
        if (currentQuestion >= questions[difficulty].length) {
          endGame();
        } else {
          loadQuestion();
          startTimer();
        }
      }

      function updateDisplay() {
        document.getElementById("score").textContent = score;
        document.getElementById("goals").textContent = goals;
        document.getElementById("question-num").textContent =
          currentQuestion + 1;
        document.getElementById("penalties").textContent = penalties;

        const progress =
          ((currentQuestion + 1) / questions[difficulty].length) * 100;
        document.getElementById("progress").style.width = progress + "%";
      }

      function disableAnswers() {
        const buttons = document.querySelectorAll(".answer-btn");
        buttons.forEach((btn) => (btn.onclick = null));
      }

      function endGame() {
        document.getElementById("question-section").style.display = "none";
        document.getElementById("game-field").style.display = "none";
        document.getElementById("shoot-controls").style.display = "none";
        document.getElementById("game-complete").style.display = "block";
        document.getElementById("final-score").textContent = score;
        stopTimer();
      }

      function restartGame() {
        document.getElementById("game-complete").style.display = "none";
        document.getElementById("difficulty-selector").style.display = "block";
        document.getElementById("question-section").style.display = "block";

        // Reset all displays
        updateDisplay();
      }

      // Event listeners
      document
        .getElementById("next-btn")
        .addEventListener("click", nextQuestion);

      // Initialize the game
      document.addEventListener("DOMContentLoaded", function () {
        updateDisplay();
      });
    </script>
  </body>
</html>
