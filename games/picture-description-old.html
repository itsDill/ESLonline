<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Picture Puzzle Challenge - Fun Visual Learning Game | ESL Fun Online
    </title>
    <meta
      name="description"
      content="Match pictures with descriptions, spot differences, and solve visual puzzles! Interactive picture challenges for ESL learners with no typing required."
    />
    <meta
      name="keywords"
      content="picture puzzle game, visual learning, image matching, spot the difference, ESL visual game, interactive pictures, no typing game"
    />
    <meta name="author" content="ESL Fun Online" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:title"
      content="Picture Puzzle Challenge - Fun Visual Learning Game | ESL Fun Online"
    />
    <meta
      property="og:description"
      content="Match pictures with descriptions, spot differences, and solve visual puzzles! Fun interactive challenges for ESL learners."
    />
    <meta
      property="og:image"
      content="https://eslfunonline.com/images/image copy 8.png"
    />
    <meta
      property="og:url"
      content="https://eslfunonline.com/games/picture-description.html"
    />
    <meta property="og:type" content="game" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Picture Description Game - ESL Speaking & Writing Practice"
    />
    <meta
      name="twitter:description"
      content="Practice describing images in English with guided prompts and vocabulary hints!"
    />
    <meta
      name="twitter:image"
      content="https://eslfunonline.com/images/image copy 8.png"
    />
    <link
      rel="canonical"
      href="https://eslfunonline.com/games/picture-description-old.html"
    />
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Game",
      "name": "Picture Puzzle Challenge - Visual Learning Game",
      "description": "Match pictures with descriptions, spot differences, and solve visual puzzles! Interactive picture challenges for ESL learners with no typing required.",
      "url": "https://eslfunonline.com/games/picture-description-old.html",
      "image": "https://eslfunonline.com/images/image copy 8.png",
      "author": {
        "@type": "Organization",
        "name": "ESL Fun Online"
      },
      "publisher": {
        "@type": "Organization",
        "name": "ESL Fun Online",
        "url": "https://eslfunonline.com"
      },
      "genre": ["Educational", "Puzzle", "Visual Learning"],
      "audience": {
        "@type": "EducationalAudience",
        "educationalRole": "student",
        "audienceType": "ESL Learners"
      },
      "educationalUse": "Visual Recognition and Vocabulary Building",
      "interactivityType": "active",
      "learningResourceType": "game",
      "inLanguage": "en",
      "isAccessibleForFree": true,
      "isFamilyFriendly": true
    }
    </script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-9G9RD6BHLN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-9G9RD6BHLN");
    </script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary-color: #4f46e5;
        --primary-hover: #3730a3;
        --secondary-color: #f59e0b;
        --accent-color: #10b981;
        --danger-color: #ef4444;
        --success-color: #22c55e;
        --purple-color: #8b5cf6;
        --pink-color: #ec4899;
        --cyan-color: #06b6d4;
        --orange-color: #f97316;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --bg-primary: #ffffff;
        --bg-secondary: #f8fafc;
        --bg-tertiary: #f1f5f9;
        --border-color: #e2e8f0;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gradient-secondary: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
        --gradient-success: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        --gradient-danger: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--gradient-primary);
        min-height: 100vh;
        color: var(--text-primary);
        padding: 1rem;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
        pointer-events: none;
        z-index: 1;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes shake {
        0%, 100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }

      .game-container {
        max-width: 1400px;
        margin: 0 auto;
        background: var(--bg-primary);
        border-radius: 24px;
        box-shadow: var(--shadow-lg);
        padding: 2rem;
        position: relative;
        z-index: 2;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        animation: fadeInUp 0.8s ease-out;
      }

      .game-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--gradient-secondary);
        opacity: 0.05;
        border-radius: 24px;
        z-index: -1;
      }

      .game-header {
        text-align: center;
        margin-bottom: 2rem;
        animation: slideInLeft 0.6s ease-out;
      }

      .game-header h1 {
        font-family: "Poppins", sans-serif;
        font-size: clamp(2rem, 4vw, 2.8rem);
        background: linear-gradient(135deg, var(--primary-color), var(--purple-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        animation: bounce 2s ease-in-out infinite;
      }

      .game-header p {
        color: var(--text-secondary);
        font-size: clamp(1rem, 2.5vw, 1.2rem);
        font-weight: 500;
      }

      .game-layout {
        display: grid;
        grid-template-columns: 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .challenge-area {
        background: var(--gradient-success);
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        animation: slideInRight 0.8s ease-out;
        position: relative;
        overflow: hidden;
      }

      .challenge-area::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        animation: spin 10s linear infinite;
        border-radius: 50%;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .challenge-content {
        position: relative;
        z-index: 1;
      }

      .challenge-title {
        font-size: clamp(1.5rem, 3vw, 2rem);
        font-weight: bold;
        color: var(--text-primary);
        margin-bottom: 1rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .images-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
      }

      .image-card {
        background: var(--bg-primary);
        border-radius: 15px;
        padding: 1rem;
        box-shadow: var(--shadow);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        border: 3px solid transparent;
      }

      .image-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
        transition: left 0.5s;
      }

      .image-card:hover::before {
        left: 100%;
      }

      .image-card:hover {
        transform: translateY(-10px) scale(1.05);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      .image-card.selected {
        border-color: var(--primary-color);
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 15px 30px rgba(79, 70, 229, 0.3);
      }

      .image-card.correct {
        border-color: var(--success-color);
        animation: correctPulse 0.6s ease-out;
      }

      .image-card.incorrect {
        border-color: var(--danger-color);
        animation: shake 0.5s ease-in-out;
      }

      @keyframes correctPulse {
        0% {
          transform: translateY(-5px) scale(1.02);
        }
        50% {
          transform: translateY(-5px) scale(1.1);
        }
        100% {
          transform: translateY(-5px) scale(1.02);
        }
      }

      .card-image {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 0.75rem;
      }

      .card-label {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.9rem;
      }

      .challenge-description {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 1.5rem;
        margin: 1.5rem 0;
        font-size: clamp(1rem, 2.5vw, 1.2rem);
        line-height: 1.6;
        color: var(--text-primary);
        text-align: center;
        font-weight: 500;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .challenge-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }

      .option-card {
        background: var(--bg-primary);
        border: 3px solid var(--border-color);
        border-radius: 15px;
        padding: 1.5rem;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-align: center;
        font-weight: 600;
        font-size: 1.1rem;
        position: relative;
        overflow: hidden;
      }

      .option-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(79, 70, 229, 0.1), transparent);
        transition: left 0.5s;
      }

      .option-card:hover::before {
        left: 100%;
      }

      .option-card:hover {
        transform: translateY(-5px) scale(1.02);
        border-color: var(--primary-color);
        box-shadow: 0 10px 25px rgba(79, 70, 229, 0.2);
      }

      .option-card.selected {
        border-color: var(--primary-color);
        background: linear-gradient(135deg, var(--primary-color), var(--purple-color));
        color: white;
        transform: translateY(-5px) scale(1.02);
      }

      .option-card.correct {
        border-color: var(--success-color);
        background: var(--success-color);
        color: white;
        animation: correctPulse 0.6s ease-out;
      }

      .option-card.incorrect {
        border-color: var(--danger-color);
        background: var(--danger-color);
        color: white;
        animation: shake 0.5s ease-in-out;
      }

      .progress-bar {
        width: 100%;
        height: 12px;
        background: var(--bg-tertiary);
        border-radius: 6px;
        margin: 1rem 0;
        overflow: hidden;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--success-color), var(--accent-color));
        border-radius: 6px;
        transition: width 0.5s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .challenge-timer {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--orange-color);
        text-align: center;
        margin: 1rem 0;
        animation: pulse 2s ease-in-out infinite;
      }

      .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        background: var(--success-color);
        animation: confetti-fall 3s linear infinite;
        pointer-events: none;
        z-index: 1000;
      }

      @keyframes confetti-fall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0;
        }
      }

      .game-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
        animation: slideInLeft 1s ease-out;
      }

      .stat-card {
        background: linear-gradient(135deg, var(--bg-secondary), rgba(255, 255, 255, 0.8));
        padding: 1.5rem;
        border-radius: 20px;
        text-align: center;
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .stat-value {
        font-size: 2rem;
        font-weight: bold;
        background: linear-gradient(135deg, var(--primary-color), var(--purple-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
      }

      .stat-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .game-controls {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin: 2rem 0;
        animation: fadeInUp 1.2s ease-out;
      }

      .btn {
        padding: clamp(0.75rem, 2vw, 1rem) clamp(1.5rem, 4vw, 2rem);
        border: none;
        border-radius: 15px;
        font-size: clamp(0.9rem, 2.5vw, 1.1rem);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        position: relative;
        overflow: hidden;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: var(--shadow);
      }

      .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.6s;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary-color), var(--purple-color));
        color: white;
      }

      .btn-primary:hover {
        background: linear-gradient(135deg, var(--primary-hover), #7c3aed);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(79, 70, 229, 0.4);
      }

      .btn-secondary {
        background: linear-gradient(135deg, var(--bg-tertiary), rgba(255, 255, 255, 0.8));
        color: var(--text-primary);
        border: 2px solid var(--border-color);
      }

      .btn-secondary:hover {
        background: linear-gradient(135deg, var(--secondary-color), var(--orange-color));
        color: white;
        border-color: var(--secondary-color);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4);
      }

      .btn-success {
        background: linear-gradient(135deg, var(--success-color), var(--accent-color));
        color: white;
      }

      .btn-success:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(34, 197, 94, 0.4);
      }

      .btn-hint {
        background: linear-gradient(135deg, var(--secondary-color), var(--orange-color));
        color: white;
      }

      .btn-hint:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4);
      }

      .feedback-section {
        background: var(--gradient-success);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        display: none;
        animation: fadeInUp 0.6s ease-out;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .feedback-section.show {
        display: block;
      }

      .feedback-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        text-align: center;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .feedback-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
      }

      .feedback-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 1.5rem;
        border-left: 6px solid var(--primary-color);
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .feedback-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }

      .feedback-card.positive {
        border-left-color: var(--success-color);
      }

      .feedback-card.suggestion {
        border-left-color: var(--secondary-color);
      }

      .feedback-card h5 {
        margin-bottom: 1rem;
        color: var(--text-primary);
        font-size: 1.1rem;
        font-weight: 600;
      }

      .feedback-card p {
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.6;
      }

      .game-message {
        margin: 1.5rem 0;
        padding: 1.5rem;
        border-radius: 15px;
        font-weight: 600;
        text-align: center;
        font-size: 1.2rem;
        animation: fadeInUp 0.5s ease-out;
        backdrop-filter: blur(10px);
        border: 2px solid transparent;
      }

      .message-success {
        background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(16, 185, 129, 0.15));
        color: var(--success-color);
        border-color: rgba(34, 197, 94, 0.3);
        box-shadow: 0 4px 15px rgba(34, 197, 94, 0.2);
      }

      .message-info {
        background: linear-gradient(135deg, rgba(79, 70, 229, 0.15), rgba(139, 92, 246, 0.15));
        color: var(--primary-color);
        border-color: rgba(79, 70, 229, 0.3);
        box-shadow: 0 4px 15px rgba(79, 70, 229, 0.2);
      }

      .message-danger {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(248, 113, 113, 0.15));
        color: var(--danger-color);
        border-color: rgba(239, 68, 68, 0.3);
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.2);
      }

      .difficulty-selector {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }

      .difficulty-btn {
        padding: 0.75rem 1.5rem;
        border: 2px solid var(--border-color);
        background: var(--bg-secondary);
        color: var(--text-primary);
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .difficulty-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow);
      }

      .difficulty-btn.active {
        background: linear-gradient(135deg, var(--secondary-color), var(--orange-color));
        color: white;
        border-color: var(--secondary-color);
        box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
      }
      
      /* Focus states for keyboard navigation */
      .difficulty-btn:focus,
      .btn:focus,
      .image-card:focus,
      .option-card:focus {
        outline: 3px solid var(--primary-color);
        outline-offset: 2px;
      }

      /* Screen reader only class */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }
      
      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      .timer {
        text-align: center;
        font-size: 1.2rem;
        font-weight: bold;
        color: var(--danger-color);
        margin-bottom: 1rem;
      }

      @media (max-width: 1024px) {
        .game-layout {
          gap: 1.5rem;
        }
        
        .images-grid {
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: 1rem;
        }
        
        .challenge-options {
          grid-template-columns: 1fr;
          gap: 0.75rem;
        }
      }

      @media (max-width: 768px) {
        .game-container {
          padding: 1.5rem;
          margin: 0.5rem;
          border-radius: 20px;
        }

        .game-header h1 {
          font-size: clamp(1.5rem, 5vw, 2rem);
        }

        .challenge-area {
          padding: 1.5rem;
        }

        .images-grid {
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 0.75rem;
        }

        .game-stats {
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
        }

        .stat-card {
          padding: 1rem;
        }

        .stat-value {
          font-size: 1.5rem;
        }

        .feedback-grid {
          grid-template-columns: 1fr;
        }
        
        .btn {
          padding: 0.75rem 1.5rem;
          font-size: 0.9rem;
        }
      }

      @media (max-width: 480px) {
        .game-container {
          padding: 1rem;
          margin: 0.25rem;
        }
        
        .challenge-area {
          padding: 1rem;
        }
        
        .images-grid {
          grid-template-columns: 1fr;
          gap: 0.5rem;
        }
        
        .game-stats {
          grid-template-columns: repeat(4, 1fr);
          gap: 0.5rem;
        }
        
        .stat-card {
          padding: 0.75rem 0.5rem;
        }
        
        .game-controls {
          gap: 0.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="game-container" role="main" aria-label="Picture Puzzle Challenge game">
      <header class="game-header">
        <h1>
          <i class="fas fa-puzzle-piece" aria-hidden="true"></i>
          Picture Puzzle Challenge
        </h1>
        <p>
          Match pictures with descriptions, solve visual puzzles, and have fun learning!
        </p>
      </header>

      <!-- Difficulty Selector -->
      <div class="difficulty-selector" role="radiogroup" aria-label="Select difficulty level">
        <button class="difficulty-btn active" data-difficulty="beginner" role="radio" aria-checked="true">
          <i class="fas fa-seedling" aria-hidden="true"></i> Beginner
        </button>
        <button class="difficulty-btn" data-difficulty="intermediate" role="radio" aria-checked="false">
          <i class="fas fa-star" aria-hidden="true"></i> Intermediate
        </button>
        <button class="difficulty-btn" data-difficulty="advanced" role="radio" aria-checked="false">
          <i class="fas fa-trophy" aria-hidden="true"></i> Advanced
        </button>
      </div>

      <!-- Game Stats -->
      <div class="game-stats" role="region" aria-label="Game statistics">
        <div class="stat-card">
          <div class="stat-value" id="currentLevel" aria-label="Current level">1</div>
          <div class="stat-label">Level</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalScore" aria-label="Total score">0</div>
          <div class="stat-label">Score</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="correctAnswers" aria-label="Correct answers">0</div>
          <div class="stat-label">Correct</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="streak" aria-label="Current streak">0</div>
          <div class="stat-label">Streak</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="timeRemaining" aria-label="Time remaining">60</div>
          <div class="stat-label">Time</div>
        </div>
      </div>

      <!-- Challenge Area -->
      <div class="challenge-area" role="region" aria-label="Game challenge area">
        <div class="challenge-content">
          <div class="challenge-title" id="challengeTitle">
            <i class="fas fa-star" aria-hidden="true"></i>
            Match the Picture to Its Description!
          </div>
          
          <div class="progress-bar" role="progressbar" aria-label="Game progress" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
          </div>
          
          <div class="challenge-timer" id="challengeTimer" role="timer" aria-live="polite" style="display: none;">⏰ 60</div>
          
          <div class="challenge-description" id="challengeDescription">
            Click 'Start Challenge' to begin your picture puzzle adventure!
          </div>
          
          <div class="images-grid" id="imagesGrid" role="group" aria-label="Picture options">
            <!-- Images will be populated by JavaScript -->
          </div>
          
          <div class="challenge-options" id="challengeOptions" role="radiogroup" aria-label="Description options" style="display: none;">
            <!-- Options will be populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Game Controls -->
      <div class="game-controls" role="region" aria-label="Game controls">
        <button class="btn btn-primary" onclick="window.picturePuzzle && window.picturePuzzle.startGame()" id="startBtn" aria-label="Start a new challenge">
          <i class="fas fa-play" aria-hidden="true"></i> Start Challenge
        </button>
        <button class="btn btn-secondary" onclick="window.picturePuzzle && window.picturePuzzle.nextChallenge()" id="nextBtn" style="display: none;" aria-label="Go to next challenge">
          <i class="fas fa-forward" aria-hidden="true"></i> Next Challenge
        </button>
        <button class="btn btn-hint" onclick="window.picturePuzzle && window.picturePuzzle.getHint()" id="hintBtn" style="display: none;" aria-label="Get a hint">
          <i class="fas fa-lightbulb" aria-hidden="true"></i> Hint
        </button>
        <button class="btn btn-success" onclick="window.picturePuzzle && window.picturePuzzle.resetGame()" id="resetBtn" aria-label="Reset the game">
          <i class="fas fa-refresh" aria-hidden="true"></i> Reset Game
        </button>
        <button class="btn btn-secondary" onclick="window.location.href='../games.html'" aria-label="Return to games page">
          <i class="fas fa-arrow-left" aria-hidden="true"></i> Back to Games
        </button>
      </div>

      <!-- Feedback Section -->
      <div class="feedback-section" id="feedbackSection" role="region" aria-label="Challenge results">
        <div class="feedback-title">
          <i class="fas fa-trophy" aria-hidden="true"></i> Challenge Results
        </div>
        <div class="feedback-grid" id="feedbackGrid">
          <!-- Feedback cards will be populated by JavaScript -->
        </div>
      </div>

      <!-- Game Messages -->
      <div id="gameMessage" class="game-message" role="alert" aria-live="assertive" style="display: none"></div>
    </div>

    <script>
      class PicturePuzzleGame {
        constructor() {
          this.difficulty = "beginner";
          this.currentLevel = 1;
          this.totalScore = 0;
          this.correctAnswers = 0;
          this.currentStreak = 0;
          this.bestStreak = 0;
          this.timeLeft = 60;
          this.timerInterval = null;
          this.isPlaying = false;
          this.currentChallenge = null;
          this.hintsUsed = 0;

          // Game data with emoji-based images
          this.challenges = {
            beginner: [
              {
                title: "What food is this?",
                description: "A round Italian dish with cheese and toppings",
                options: ["🍕 Pizza", "🍔 Burger", "🌮 Taco", "🍰 Cake"],
                correct: 0,
                emoji: "🍕",
                hint: "It's round and has cheese on top!"
              },
              {
                title: "What animal is this?",
                description: "A pet that says meow and likes to chase mice",
                options: ["🐕 Dog", "🐱 Cat", "🐦 Bird", "🐭 Mouse"],
                correct: 1,
                emoji: "🐱",
                hint: "It purrs when happy!"
              },
              {
                title: "What weather is this?",
                description: "Water falling from clouds in the sky",
                options: ["☀️ Sunny", "🌧️ Rain", "❄️ Snow", "⛈️ Storm"],
                correct: 1,
                emoji: "🌧️",
                hint: "You need an umbrella for this!"
              },
              {
                title: "What fruit is this?",
                description: "A yellow curved fruit that monkeys love",
                options: ["🍎 Apple", "🍌 Banana", "🍊 Orange", "🍇 Grapes"],
                correct: 1,
                emoji: "🍌",
                hint: "Monkeys love to eat this!"
              },
              {
                title: "What vehicle is this?",
                description: "A vehicle with four wheels that people drive",
                options: ["🚗 Car", "✈️ Airplane", "🚲 Bicycle", "🚂 Train"],
                correct: 0,
                emoji: "🚗",
                hint: "It has four wheels and drives on roads!"
              },
            ],
            intermediate: [
              {
                title: "What emotion is this?",
                description: "Feeling joyful and cheerful, showing teeth",
                options: ["😢 Sad", "😊 Happy", "😠 Angry", "😴 Tired"],
                correct: 1,
                emoji: "😊",
                hint: "People do this when they're in a good mood!"
              },
              {
                title: "What activity is this?",
                description: "Looking at words in a book to learn or enjoy stories",
                options: ["✍️ Writing", "📖 Reading", "🎨 Painting", "🎵 Singing"],
                correct: 1,
                emoji: "📖",
                hint: "You do this with books!"
              },
              {
                title: "What place is this?",
                description: "A building where people learn and study",
                options: ["🏠 House", "🏫 School", "🏥 Hospital", "🏪 Store"],
                correct: 1,
                emoji: "🏫",
                hint: "Students and teachers go here!"
              },
              {
                title: "What time of day?",
                description: "When the sun goes down and the sky gets dark",
                options: ["🌅 Morning", "☀️ Noon", "🌆 Evening", "🌃 Night"],
                correct: 2,
                emoji: "🌆",
                hint: "Between afternoon and night!"
              },
              {
                title: "What sport is this?",
                description: "Kicking a round ball into a goal",
                options: ["🏀 Basketball", "⚽ Soccer", "🏈 Football", "🎾 Tennis"],
                correct: 1,
                emoji: "⚽",
                hint: "The most popular sport in the world!"
              },
            ],
            advanced: [
              {
                title: "What profession?",
                description: "Someone who treats sick people and works in hospitals",
                options: ["👨‍🏫 Teacher", "👨‍⚕️ Doctor", "👨‍🍳 Chef", "👨‍💼 Businessman"],
                correct: 1,
                emoji: "👨‍⚕️",
                hint: "They wear white coats and help heal people!"
              },
              {
                title: "What celebration?",
                description: "Annual celebration of the day you were born",
                options: ["🎄 Christmas", "🎃 Halloween", "🎂 Birthday", "🎆 New Year"],
                correct: 2,
                emoji: "🎂",
                hint: "You get older every year on this day!"
              },
              {
                title: "What natural phenomenon?",
                description: "Arc of colors appearing in the sky after rain",
                options: ["⚡ Lightning", "🌈 Rainbow", "🌪️ Tornado", "🌊 Tsunami"],
                correct: 1,
                emoji: "🌈",
                hint: "It has seven colors!"
              },
              {
                title: "What musical instrument?",
                description: "String instrument played with a bow",
                options: ["🎸 Guitar", "🎹 Piano", "🎻 Violin", "🎺 Trumpet"],
                correct: 2,
                emoji: "🎻",
                hint: "It's held under the chin!"
              },
              {
                title: "What season?",
                description: "Cold season when snow falls and trees are bare",
                options: ["🌸 Spring", "☀️ Summer", "🍂 Autumn", "❄️ Winter"],
                correct: 3,
                emoji: "❄️",
                hint: "You need warm clothes in this season!"
              },
            ],
          };

          this.init();
        }

        init() {
          this.setupEventListeners();
          this.loadStats();
          this.updateStatsDisplay();
        }

        setupEventListeners() {
          // Difficulty buttons
          document.querySelectorAll(".difficulty-btn").forEach((btn) => {
            btn.onclick = () => {
              document.querySelectorAll(".difficulty-btn").forEach((b) => {
                b.classList.remove("active");
                b.setAttribute('aria-checked', 'false');
              });
              btn.classList.add("active");
              btn.setAttribute('aria-checked', 'true');
              this.difficulty = btn.dataset.difficulty;
              if (this.isPlaying) {
                this.resetGame();
              }
            };
          });

          // Keyboard support
          document.addEventListener("keydown", (e) => {
            if (e.key === "h" || e.key === "H") {
              if (this.isPlaying) {
                e.preventDefault();
                this.getHint();
              }
            } else if (e.key === " " && !this.isPlaying) {
              e.preventDefault();
              this.startGame();
            } else if (e.key >= "1" && e.key <= "4" && this.isPlaying) {
              e.preventDefault();
              this.selectOption(parseInt(e.key) - 1);
            }
          });
        }

        startGame() {
          this.isPlaying = true;
          this.currentLevel = 1;
          this.timeLeft = 60;
          this.correctAnswers = 0;
          this.currentStreak = 0;
          this.hintsUsed = 0;

          document.getElementById("startBtn").style.display = "none";
          document.getElementById("nextBtn").style.display = "none";
          document.getElementById("hintBtn").style.display = "inline-flex";
          document.getElementById("feedbackSection").classList.remove("show");

          this.loadChallenge();
          this.startTimer();
          this.showMessage("🎮 Game started! Good luck!", "info");
          this.announceToScreenReader("Game started. Select the correct answer.");
        }

        loadChallenge() {
          const challenges = this.challenges[this.difficulty];
          const randomIndex = Math.floor(Math.random() * challenges.length);
          this.currentChallenge = challenges[randomIndex];

          // Update title and description
          document.getElementById("challengeTitle").innerHTML = `
            <i class="fas fa-star" aria-hidden="true"></i> 
            ${this.currentChallenge.title}
          `;
          document.getElementById("challengeDescription").textContent =
            this.currentChallenge.description;

          // Display emoji
          const imagesGrid = document.getElementById("imagesGrid");
          imagesGrid.innerHTML = `
            <div class="image-card" style="text-align: center; padding: 2rem; pointer-events: none;">
              <div style="font-size: 8rem; margin-bottom: 1rem;">${this.currentChallenge.emoji}</div>
              <div class="card-label">${this.currentChallenge.title}</div>
            </div>
          `;

          // Display options
          const optionsContainer = document.getElementById("challengeOptions");
          optionsContainer.style.display = "grid";
          optionsContainer.innerHTML = "";

          this.currentChallenge.options.forEach((option, index) => {
            const optionCard = document.createElement("div");
            optionCard.className = "option-card";
            optionCard.textContent = option;
            optionCard.setAttribute('role', 'radio');
            optionCard.setAttribute('aria-checked', 'false');
            optionCard.setAttribute('tabindex', '0');
            optionCard.onclick = () => this.selectOption(index);
            optionCard.onkeypress = (e) => {
              if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.selectOption(index);
              }
            };
            optionsContainer.appendChild(optionCard);
          });

          this.updateProgress();
        }

        selectOption(index) {
          if (!this.isPlaying) return;

          const options = document.querySelectorAll(".option-card");
          const selectedOption = options[index];

          // Disable all options
          options.forEach((opt) => {
            opt.style.pointerEvents = "none";
          });

          if (index === this.currentChallenge.correct) {
            // Correct answer
            selectedOption.classList.add("correct");
            this.handleCorrectAnswer();
          } else {
            // Incorrect answer
            selectedOption.classList.add("incorrect");
            options[this.currentChallenge.correct].classList.add("correct");
            this.handleIncorrectAnswer();
          }

          // Show next button after 1.5 seconds
          setTimeout(() => {
            document.getElementById("nextBtn").style.display = "inline-flex";
          }, 1500);
        }

        handleCorrectAnswer() {
          this.correctAnswers++;
          this.currentStreak++;
          
          if (this.currentStreak > this.bestStreak) {
            this.bestStreak = this.currentStreak;
          }

          const basePoints = 100;
          const timeBonus = this.timeLeft * 2;
          const streakBonus = this.currentStreak * 50;
          const hintPenalty = this.hintsUsed * 25;
          const points = Math.max(0, basePoints + timeBonus + streakBonus - hintPenalty);

          this.totalScore += points;
          this.currentLevel++;

          this.playSound('success');
          let message = `🎉 Correct! +${points} points`;
          if (this.currentStreak > 1) {
            message += ` | 🔥 ${this.currentStreak}x Streak!`;
          }
          this.showMessage(message, "success");
          this.announceToScreenReader(`Correct! You earned ${points} points. Current streak: ${this.currentStreak}`);
          this.updateStatsDisplay();
        }

        handleIncorrectAnswer() {
          this.currentStreak = 0;
          this.playSound('error');
          this.showMessage("❌ Incorrect! Try the next challenge!", "danger");
          this.announceToScreenReader(`Incorrect. The correct answer was ${this.currentChallenge.options[this.currentChallenge.correct]}. Streak reset.`);
          this.updateStatsDisplay();
        }

        nextChallenge() {
          document.getElementById("nextBtn").style.display = "none";
          this.hintsUsed = 0;
          this.loadChallenge();
        }

        getHint() {
          if (!this.isPlaying || !this.currentChallenge) return;

          this.hintsUsed++;
          const hint = this.currentChallenge.hint;
          this.showMessage(`💡 Hint: ${hint}`, "info");
          this.announceToScreenReader(`Hint: ${hint}`);
          
          // Deduct points for hint
          this.totalScore = Math.max(0, this.totalScore - 25);
          this.updateStatsDisplay();
        }

        startTimer() {
          if (this.timerInterval) {
            clearInterval(this.timerInterval);
          }

          const timerDisplay = document.getElementById("challengeTimer");
          timerDisplay.style.display = "block";

          this.timerInterval = setInterval(() => {
            this.timeLeft--;
            const timeElement = document.getElementById("timeRemaining");
            timeElement.textContent = this.timeLeft;
            timerDisplay.textContent = `⏰ ${this.timeLeft}`;

            if (this.timeLeft <= 10) {
              timeElement.style.color = "var(--danger-color)";
              timerDisplay.style.animation = "pulse 1s ease-in-out infinite";
            }

            if (this.timeLeft <= 0) {
              this.endGame();
            }
          }, 1000);
        }

        endGame() {
          this.isPlaying = false;
          clearInterval(this.timerInterval);

          document.getElementById("startBtn").style.display = "inline-flex";
          document.getElementById("nextBtn").style.display = "none";
          document.getElementById("hintBtn").style.display = "none";
          document.getElementById("challengeTimer").style.display = "none";

          this.showFeedback();
          this.saveStats();
          this.announceToScreenReader(`Game over! Final score: ${this.totalScore}. Correct answers: ${this.correctAnswers}`);
        }

        resetGame() {
          clearInterval(this.timerInterval);
          this.isPlaying = false;
          this.currentLevel = 1;
          this.timeLeft = 60;
          this.hintsUsed = 0;
          
          document.getElementById("startBtn").style.display = "inline-flex";
          document.getElementById("nextBtn").style.display = "none";
          document.getElementById("hintBtn").style.display = "none";
          document.getElementById("challengeTimer").style.display = "none";
          document.getElementById("challengeOptions").style.display = "none";
          document.getElementById("feedbackSection").classList.remove("show");
          document.getElementById("timeRemaining").textContent = "60";
          document.getElementById("timeRemaining").style.color = "";

          document.getElementById("imagesGrid").innerHTML = "";
          document.getElementById("challengeDescription").textContent =
            "Click 'Start Challenge' to begin your picture puzzle adventure!";

          this.updateStatsDisplay();
          this.showMessage("🔄 Game reset! Ready to start again?", "info");
        }

        showFeedback() {
          const feedbackSection = document.getElementById("feedbackSection");
          const feedbackGrid = document.getElementById("feedbackGrid");

          feedbackGrid.innerHTML = "";

          const accuracy = this.correctAnswers > 0 ? Math.round((this.correctAnswers / this.currentLevel) * 100) : 0;

          // Score card
          const scoreCard = this.createFeedbackCard(
            "Final Score 🏆",
            `You earned ${this.totalScore} points! Great job!`,
            "positive"
          );
          feedbackGrid.appendChild(scoreCard);

          // Accuracy card
          const accuracyCard = this.createFeedbackCard(
            "Accuracy 🎯",
            `You got ${this.correctAnswers} out of ${this.currentLevel - 1} correct (${accuracy}%)`,
            accuracy >= 70 ? "positive" : "suggestion"
          );
          feedbackGrid.appendChild(accuracyCard);

          // Streak card
          if (this.bestStreak > 1) {
            const streakCard = this.createFeedbackCard(
              "Best Streak 🔥",
              `Your longest streak was ${this.bestStreak} in a row! Excellent!`,
              "positive"
            );
            feedbackGrid.appendChild(streakCard);
          }

          // Suggestions
          const suggestionCard = this.createFeedbackCard(
            "Next Steps 💡",
            `Try ${this.difficulty === 'beginner' ? 'intermediate' : this.difficulty === 'intermediate' ? 'advanced' : 'beginner'} difficulty for a new challenge!`,
            "suggestion"
          );
          feedbackGrid.appendChild(suggestionCard);

          feedbackSection.classList.add("show");
        }

        createFeedbackCard(title, content, type) {
          const card = document.createElement("div");
          card.className = `feedback-card ${type}`;
          card.innerHTML = `
            <h5>${title}</h5>
            <p>${content}</p>
          `;
          return card;
        }

        updateStatsDisplay() {
          document.getElementById("currentLevel").textContent = this.currentLevel;
          document.getElementById("totalScore").textContent = this.totalScore;
          document.getElementById("correctAnswers").textContent = this.correctAnswers;
          document.getElementById("streak").textContent = this.currentStreak;
        }

        updateProgress() {
          const progress = (this.correctAnswers / 10) * 100;
          document.getElementById("progressFill").style.width = `${Math.min(progress, 100)}%`;
          
          const progressBar = document.querySelector('.progress-bar');
          if (progressBar) {
            progressBar.setAttribute('aria-valuenow', Math.round(progress).toString());
          }
        }

        playSound(type) {
          try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            if (type === 'success') {
              oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
              oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
              oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
            } else if (type === 'error') {
              oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
              oscillator.frequency.setValueAtTime(196, audioContext.currentTime + 0.1);
            }

            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
          } catch (e) {
            // Audio not supported
          }
        }

        announceToScreenReader(message) {
          const announcement = document.createElement('div');
          announcement.setAttribute('role', 'status');
          announcement.setAttribute('aria-live', 'polite');
          announcement.className = 'sr-only';
          announcement.textContent = message;
          document.body.appendChild(announcement);
          setTimeout(() => announcement.remove(), 1000);
        }

        showMessage(text, type) {
          const message = document.getElementById("gameMessage");
          message.textContent = text;
          message.className = `game-message message-${type}`;
          message.style.display = "block";

          setTimeout(() => {
            message.style.display = "none";
          }, 3000);
        }

        saveStats() {
          try {
            const stats = {
              totalScore: this.totalScore,
              bestStreak: this.bestStreak,
              correctAnswers: this.correctAnswers,
              lastPlayed: new Date().toISOString()
            };
            localStorage.setItem('picturePuzzleStats', JSON.stringify(stats));
          } catch (e) {
            console.warn('Could not save stats', e);
          }
        }

        loadStats() {
          try {
            const saved = localStorage.getItem('picturePuzzleStats');
            if (saved) {
              const stats = JSON.parse(saved);
              this.bestStreak = stats.bestStreak || 0;
            }
          } catch (e) {
            console.warn('Could not load stats', e);
          }
        }
      }

      // Initialize game
      window.addEventListener("DOMContentLoaded", () => {
        window.picturePuzzle = new PicturePuzzleGame();
      });
    </script>
  </body>
</html>
          this.currentCategory = "people";
          this.currentImage = null;
          this.descriptionsCount = 0;
          this.totalScore = 0;
          this.currentStreak = 0;
          this.timeLeft = 300;
          this.timerInterval = null;
          this.isTimedMode = false;

          // Image data with descriptions and vocabulary
          this.imageData = {
            people: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400",
                  alt: "Happy woman smiling",
                  keywords: [
                    "woman",
                    "smile",
                    "happy",
                    "face",
                    "person",
                    "joy",
                  ],
                  prompts: [
                    "Describe the person you see",
                    "What emotions do you notice?",
                  ],
                  vocabulary: [
                    "happy",
                    "smile",
                    "woman",
                    "beautiful",
                    "cheerful",
                    "friendly",
                    "person",
                    "face",
                    "eyes",
                    "hair",
                  ],
                },
                {
                  src: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400",
                  alt: "Man reading a book",
                  keywords: [
                    "man",
                    "reading",
                    "book",
                    "glasses",
                    "concentrated",
                  ],
                  prompts: [
                    "What is the person doing?",
                    "Describe their appearance",
                  ],
                  vocabulary: [
                    "man",
                    "reading",
                    "book",
                    "glasses",
                    "sitting",
                    "thinking",
                    "concentrated",
                    "learning",
                    "studying",
                    "quiet",
                  ],
                },
              ],
              intermediate: [
                {
                  src: "https://images.unsplash.com/photo-1521737852567-6949f3f9f2b5?w=400",
                  alt: "Business meeting",
                  keywords: [
                    "meeting",
                    "business",
                    "people",
                    "discussion",
                    "office",
                  ],
                  prompts: [
                    "Describe the business environment",
                    "What kind of interaction is happening?",
                  ],
                  vocabulary: [
                    "meeting",
                    "business",
                    "colleagues",
                    "discussion",
                    "professional",
                    "office",
                    "teamwork",
                    "presentation",
                    "corporate",
                    "workplace",
                  ],
                },
              ],
              advanced: [
                {
                  src: "https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=400",
                  alt: "Family gathering",
                  keywords: [
                    "family",
                    "gathering",
                    "multiple",
                    "generations",
                    "celebration",
                  ],
                  prompts: [
                    "Analyze the family dynamics",
                    "Describe the emotional atmosphere",
                  ],
                  vocabulary: [
                    "family",
                    "generations",
                    "relationships",
                    "celebration",
                    "togetherness",
                    "bonding",
                    "relatives",
                    "gathering",
                    "joy",
                    "connection",
                  ],
                },
              ],
            },
            nature: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400",
                  alt: "Beautiful mountain landscape",
                  keywords: [
                    "mountain",
                    "landscape",
                    "sky",
                    "nature",
                    "peaceful",
                  ],
                  prompts: [
                    "Describe the natural scenery",
                    "What colors do you see?",
                  ],
                  vocabulary: [
                    "mountain",
                    "sky",
                    "clouds",
                    "green",
                    "blue",
                    "peaceful",
                    "beautiful",
                    "nature",
                    "landscape",
                    "scenery",
                  ],
                },
              ],
              intermediate: [
                {
                  src: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400",
                  alt: "Forest path",
                  keywords: [
                    "forest",
                    "path",
                    "trees",
                    "mysterious",
                    "walking",
                  ],
                  prompts: [
                    "Describe the atmosphere of this forest",
                    "What journey might this path lead to?",
                  ],
                  vocabulary: [
                    "forest",
                    "pathway",
                    "trees",
                    "mysterious",
                    "adventure",
                    "journey",
                    "walking",
                    "exploration",
                    "nature",
                    "wilderness",
                  ],
                },
              ],
              advanced: [
                {
                  src: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400",
                  alt: "Dramatic sunset over mountains",
                  keywords: [
                    "sunset",
                    "dramatic",
                    "mountains",
                    "silhouette",
                    "atmospheric",
                  ],
                  prompts: [
                    "Analyze the lighting and mood",
                    "Describe the atmospheric conditions",
                  ],
                  vocabulary: [
                    "dramatic",
                    "silhouette",
                    "atmospheric",
                    "twilight",
                    "majestic",
                    "serene",
                    "panoramic",
                    "breathtaking",
                    "tranquil",
                    "magnificent",
                  ],
                },
              ],
            },
            city: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1514565131-fce0801e5785?w=400",
                  alt: "City street with cars",
                  keywords: ["street", "cars", "city", "buildings", "busy"],
                  prompts: [
                    "Describe the city scene",
                    "What vehicles do you see?",
                  ],
                  vocabulary: [
                    "street",
                    "cars",
                    "buildings",
                    "busy",
                    "traffic",
                    "city",
                    "urban",
                    "road",
                    "vehicles",
                    "sidewalk",
                  ],
                },
              ],
              intermediate: [
                {
                  src: "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400",
                  alt: "Modern city skyline",
                  keywords: [
                    "skyline",
                    "skyscrapers",
                    "modern",
                    "architecture",
                    "urban",
                  ],
                  prompts: [
                    "Describe the architectural features",
                    "What makes this a modern cityscape?",
                  ],
                  vocabulary: [
                    "skyline",
                    "skyscrapers",
                    "architecture",
                    "modern",
                    "urban",
                    "metropolitan",
                    "contemporary",
                    "impressive",
                    "towering",
                    "development",
                  ],
                },
              ],
            },
            food: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400",
                  alt: "Delicious pizza",
                  keywords: [
                    "pizza",
                    "food",
                    "delicious",
                    "cheese",
                    "toppings",
                  ],
                  prompts: [
                    "Describe this food",
                    "What ingredients can you see?",
                  ],
                  vocabulary: [
                    "pizza",
                    "cheese",
                    "delicious",
                    "food",
                    "toppings",
                    "tasty",
                    "meal",
                    "Italian",
                    "crust",
                    "sauce",
                  ],
                },
              ],
            },
            activities: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400",
                  alt: "People playing sports",
                  keywords: ["sports", "playing", "active", "exercise", "fun"],
                  prompts: [
                    "What activity is happening?",
                    "Describe the physical movements",
                  ],
                  vocabulary: [
                    "sports",
                    "playing",
                    "active",
                    "exercise",
                    "running",
                    "fun",
                    "healthy",
                    "energetic",
                    "competitive",
                    "teamwork",
                  ],
                },
              ],
            },
            objects: {
              beginner: [
                {
                  src: "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400",
                  alt: "Books on a table",
                  keywords: [
                    "books",
                    "table",
                    "reading",
                    "knowledge",
                    "education",
                  ],
                  prompts: [
                    "Describe these objects",
                    "What purpose do they serve?",
                  ],
                  vocabulary: [
                    "books",
                    "table",
                    "reading",
                    "knowledge",
                    "education",
                    "learning",
                    "studying",
                    "literature",
                    "pages",
                    "information",
                  ],
                },
              ],
            },
          };

          this.prompts = {
            beginner: [
              "Describe what you see in simple words.",
              "What colors do you notice?",
              "Name the objects in the image.",
              "How many people/things are there?",
            ],
            intermediate: [
              "Describe the mood or atmosphere of the image.",
              "What do you think is happening in this scene?",
              "Explain the relationship between different elements.",
              "What emotions does this image make you feel?",
            ],
            advanced: [
              "Analyze the composition and visual elements.",
              "Discuss the cultural or social context.",
              "What story does this image tell?",
              "Compare and contrast different aspects of the scene.",
            ],
          };

          this.init();
        }

        init() {
          this.setupEventListeners();
          this.loadNewImage();
          this.updateStats();
        }

        setupEventListeners() {
          document.getElementById("submitBtn").onclick = () =>
            this.submitDescription();
          document.getElementById("hintBtn").onclick = () => this.showHint();
          document.getElementById("newImageBtn").onclick = () =>
            this.loadNewImage();
          document.getElementById("newGameBtn").onclick = () =>
            this.startNewGame();

          // Difficulty selector
          document.querySelectorAll(".difficulty-btn").forEach((btn) => {
            btn.onclick = () => {
              document
                .querySelectorAll(".difficulty-btn")
                .forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              this.difficulty = btn.dataset.difficulty;
              this.loadNewImage();
            };
          });

          // Category selector
          document.querySelectorAll(".category-btn").forEach((btn) => {
            btn.onclick = () => {
              document
                .querySelectorAll(".category-btn")
                .forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");
              this.currentCategory = btn.dataset.category;
              this.loadNewImage();
            };
          });

          // Auto-save description
          document
            .getElementById("descriptionArea")
            .addEventListener("input", () => {
              this.saveProgress();
            });

          // Helpful word clicks
          document
            .getElementById("helpfulWords")
            .addEventListener("click", (e) => {
              if (e.target.classList.contains("word-chip")) {
                this.insertWord(e.target.textContent);
              }
            });
        }

        loadNewImage() {
          const categoryData = this.imageData[this.currentCategory];
          const difficultyData = categoryData[this.difficulty];

          if (!difficultyData || difficultyData.length === 0) {
            this.showMessage(
              "No images available for this category and difficulty.",
              "info"
            );
            return;
          }

          const randomIndex = Math.floor(Math.random() * difficultyData.length);
          this.currentImage = difficultyData[randomIndex];

          this.displayImage();
          this.updatePrompt();
          this.updateVocabulary();
          this.clearDescription();
          this.hideFeedback();
        }

        displayImage() {
          const container = document.getElementById("pictureContainer");

          // Create placeholder while loading
          container.innerHTML = `
                    <div class="picture-placeholder">
                        <i class="fas fa-spinner fa-spin"></i>
                        <br>Loading image...
                    </div>
                `;

          const img = document.createElement("img");
          img.className = "picture-image";
          img.alt = this.currentImage.alt;
          img.onload = () => {
            container.innerHTML = "";
            container.appendChild(img);
          };
          img.onerror = () => {
            container.innerHTML = `
                        <div class="picture-placeholder">
                            <i class="fas fa-image"></i>
                            <br>Sample ${this.currentCategory} image
                        </div>
                    `;
          };
          img.src = this.currentImage.src;
        }

        updatePrompt() {
          const promptText = document.getElementById("promptText");
          const promptHints = document.getElementById("promptHints");

          if (
            this.currentImage.prompts &&
            this.currentImage.prompts.length > 0
          ) {
            const randomPrompt =
              this.currentImage.prompts[
                Math.floor(Math.random() * this.currentImage.prompts.length)
              ];
            promptText.textContent = randomPrompt;
          } else {
            const generalPrompts = this.prompts[this.difficulty];
            const randomPrompt =
              generalPrompts[Math.floor(Math.random() * generalPrompts.length)];
            promptText.textContent = randomPrompt;
          }

          const hints = {
            beginner:
              "Use simple sentences. Describe colors, shapes, and basic actions.",
            intermediate: "Include emotions, relationships, and your opinions.",
            advanced:
              "Analyze deeper meanings, cultural context, and artistic elements.",
          };

          promptHints.textContent = hints[this.difficulty];
        }

        updateVocabulary() {
          const container = document.getElementById("helpfulWords");
          container.innerHTML = "";

          if (this.currentImage.vocabulary) {
            this.currentImage.vocabulary.forEach((word) => {
              const chip = document.createElement("span");
              chip.className = "word-chip";
              chip.textContent = word;
              container.appendChild(chip);
            });
          }
        }

        insertWord(word) {
          const textarea = document.getElementById("descriptionArea");
          const cursorPosition = textarea.selectionStart;
          const textBefore = textarea.value.substring(0, cursorPosition);
          const textAfter = textarea.value.substring(cursorPosition);

          // Add space before and after if needed
          const wordToInsert =
            (textBefore && !textBefore.endsWith(" ") ? " " : "") +
            word +
            (textAfter && !textAfter.startsWith(" ") ? " " : "");

          textarea.value = textBefore + wordToInsert + textAfter;
          textarea.focus();
          textarea.selectionStart = textarea.selectionEnd =
            cursorPosition + wordToInsert.length;
        }

        submitDescription() {
          const description = document
            .getElementById("descriptionArea")
            .value.trim();

          if (description.length < 20) {
            this.showMessage(
              "Please write a longer description (at least 20 characters).",
              "info"
            );
            return;
          }

          this.analyzeDescription(description);
          this.showFeedback(description);
          this.updateScore(description);
          this.descriptionsCount++;
          this.updateStats();
        }

        analyzeDescription(description) {
          const words = description.toLowerCase().split(/\s+/);
          const wordCount = words.length;
          const keywordMatches = this.currentImage.keywords
            ? this.currentImage.keywords.filter((keyword) =>
                description.toLowerCase().includes(keyword.toLowerCase())
              ).length
            : 0;

          return {
            wordCount,
            keywordMatches,
            complexity: this.calculateComplexity(description),
            sentiment: this.analyzeSentiment(words),
          };
        }

        calculateComplexity(description) {
          const sentences = description
            .split(/[.!?]+/)
            .filter((s) => s.trim().length > 0);
          const avgWordsPerSentence =
            description.split(/\s+/).length / sentences.length;

          if (avgWordsPerSentence > 15) return "advanced";
          if (avgWordsPerSentence > 8) return "intermediate";
          return "beginner";
        }

        analyzeSentiment(words) {
          const positiveWords = [
            "beautiful",
            "happy",
            "good",
            "nice",
            "amazing",
            "wonderful",
            "great",
            "excellent",
          ];
          const negativeWords = [
            "bad",
            "ugly",
            "sad",
            "terrible",
            "awful",
            "horrible",
          ];

          const positiveCount = words.filter((word) =>
            positiveWords.includes(word)
          ).length;
          const negativeCount = words.filter((word) =>
            negativeWords.includes(word)
          ).length;

          if (positiveCount > negativeCount) return "positive";
          if (negativeCount > positiveCount) return "negative";
          return "neutral";
        }

        showFeedback(description) {
          const analysis = this.analyzeDescription(description);
          const feedbackSection = document.getElementById("feedbackSection");
          const feedbackGrid = document.getElementById("feedbackGrid");

          feedbackGrid.innerHTML = "";

          // Positive feedback
          const positiveCard = this.createFeedbackCard(
            "Great Job! 🎉",
            `You wrote ${analysis.wordCount} words with good detail. Keep practicing to improve even more!`,
            "positive"
          );
          feedbackGrid.appendChild(positiveCard);

          // Vocabulary feedback
          if (analysis.keywordMatches > 0) {
            const vocabCard = this.createFeedbackCard(
              "Vocabulary Usage 📚",
              `You used ${analysis.keywordMatches} relevant keywords from the image. This shows good observation skills!`,
              "positive"
            );
            feedbackGrid.appendChild(vocabCard);
          }

          // Complexity feedback
          const complexityCard = this.createFeedbackCard(
            "Writing Level 📝",
            `Your writing shows ${analysis.complexity} level complexity. Try to vary your sentence length and structure.`,
            "suggestion"
          );
          feedbackGrid.appendChild(complexityCard);

          // Suggestions
          const suggestionCard = this.createFeedbackCard(
            "Next Steps 🎯",
            "Try to include more sensory details (what you see, hear, feel) and emotional descriptions.",
            "suggestion"
          );
          feedbackGrid.appendChild(suggestionCard);

          feedbackSection.classList.add("show");
        }

        createFeedbackCard(title, content, type) {
          const card = document.createElement("div");
          card.className = `feedback-card ${type}`;
          card.innerHTML = `
                    <h5>${title}</h5>
                    <p>${content}</p>
                `;
          return card;
        }

        showHint() {
          if (!this.currentImage) return;

          const hints = [
            `Try describing the colors you see.`,
            `What emotions or mood does this image convey?`,
            `Describe the main subject and background separately.`,
            `Use some of these words: ${this.currentImage.vocabulary
              ?.slice(0, 3)
              .join(", ")}`,
          ];

          const randomHint = hints[Math.floor(Math.random() * hints.length)];
          this.showMessage(`💡 Hint: ${randomHint}`, "info");
        }

        updateScore(description) {
          const analysis = this.analyzeDescription(description);
          let points = 0;

          // Base points for word count
          points += Math.min(analysis.wordCount, 50);

          // Bonus for keyword usage
          points += analysis.keywordMatches * 10;

          // Complexity bonus
          const complexityBonus = {
            beginner: 5,
            intermediate: 15,
            advanced: 25,
          };
          points += complexityBonus[analysis.complexity] || 0;

          this.totalScore += points;
          this.currentStreak++;

          this.showMessage(
            `🎉 Great description! You earned ${points} points!`,
            "success"
          );
        }

        clearDescription() {
          document.getElementById("descriptionArea").value = "";
        }

        hideFeedback() {
          document.getElementById("feedbackSection").classList.remove("show");
        }

        updateStats() {
          document.getElementById("descriptionsCount").textContent =
            this.descriptionsCount;
          document.getElementById("totalScore").textContent = this.totalScore;
          document.getElementById("currentStreak").textContent =
            this.currentStreak;

          const description = document.getElementById("descriptionArea").value;
          const wordCount = description.trim()
            ? description.trim().split(/\s+/).length
            : 0;
          document.getElementById("wordsUsed").textContent = wordCount;
        }

        startNewGame() {
          this.descriptionsCount = 0;
          this.totalScore = 0;
          this.currentStreak = 0;
          this.updateStats();
          this.loadNewImage();
          this.showMessage("🎮 New game started! Good luck!", "info");
        }

        saveProgress() {
          const progress = {
            descriptionsCount: this.descriptionsCount,
            totalScore: this.totalScore,
            currentStreak: this.currentStreak,
            difficulty: this.difficulty,
            category: this.currentCategory,
          };
          localStorage.setItem(
            "pictureDescriptionProgress",
            JSON.stringify(progress)
          );
        }

        showMessage(text, type) {
          const message = document.getElementById("gameMessage");
          message.textContent = text;
          message.className = `game-message message-${type}`;
          message.style.display = "block";

          setTimeout(() => {
            message.style.display = "none";
          }, 4000);
        }
      }

      // Initialize game when page loads
      document.addEventListener("DOMContentLoaded", () => {
        new PictureDescriptionGame();
      });
    </script>
  </body>
</html>
