<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Three.js Learning Adventure | ESL Fun Online</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        line-height: 1.6;
        color: #333;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header */
      header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
      }

      .logo-container {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo-text {
        font-size: 1.5rem;
        font-weight: 700;
        color: #667eea;
        text-decoration: none;
      }

      .back-btn {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 25px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
      }

      .back-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
      }

      /* Hero Section */
      .hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 120px 0 80px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .hero h1 {
        font-size: 3.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        animation: fadeInUp 1s ease;
      }

      .hero p {
        font-size: 1.3rem;
        margin-bottom: 2rem;
        opacity: 0.9;
        animation: fadeInUp 1s ease 0.2s both;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Learning Content */
      .learning-content {
        background: white;
        padding: 80px 0;
      }

      .lesson-nav {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 40px;
        flex-wrap: wrap;
      }

      .lesson-btn {
        background: #f8f9ff;
        border: 2px solid #e0e0e0;
        padding: 12px 24px;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .lesson-btn.active {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-color: transparent;
      }

      .lesson-btn:hover:not(.active) {
        border-color: #667eea;
        color: #667eea;
      }

      .lesson {
        display: none;
        animation: fadeIn 0.5s ease;
      }

      .lesson.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .lesson-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
        margin-bottom: 40px;
      }

      .theory-panel {
        background: #f8f9ff;
        padding: 30px;
        border-radius: 15px;
        border-left: 4px solid #667eea;
      }

      .theory-panel h3 {
        color: #667eea;
        margin-bottom: 20px;
        font-size: 1.5rem;
      }

      .theory-panel p {
        margin-bottom: 15px;
        color: #666;
      }

      .code-example {
        background: #2d3748;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 10px;
        font-family: "Courier New", monospace;
        font-size: 14px;
        margin: 20px 0;
        overflow-x: auto;
      }

      .demo-panel {
        position: relative;
      }

      .demo-canvas {
        width: 100%;
        height: 400px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .controls {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
      }

      .control-group {
        margin-bottom: 15px;
      }

      .control-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
        color: #333;
      }

      .slider {
        width: 100%;
        height: 8px;
        border-radius: 4px;
        background: #e0e0e0;
        outline: none;
        -webkit-appearance: none;
      }

      .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        cursor: pointer;
      }

      .color-picker {
        width: 100%;
        height: 40px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }

      .btn {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: 25px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 5px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
      }

      .vocabulary-section {
        background: #f8f9ff;
        padding: 40px;
        border-radius: 15px;
        margin-top: 40px;
      }

      .vocab-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .vocab-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .vocab-term {
        font-size: 1.2rem;
        font-weight: 600;
        color: #667eea;
        margin-bottom: 10px;
      }

      .vocab-definition {
        color: #666;
        margin-bottom: 10px;
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #e0e0e0;
        border-radius: 10px;
        overflow: hidden;
        margin: 20px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 10px;
        transition: width 0.5s ease;
      }

      .achievement {
        background: linear-gradient(135deg, #ffd700, #ffa500);
        color: white;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        margin: 20px 0;
        animation: bounce 0.5s ease;
      }

      @keyframes bounce {
        0%,
        20%,
        60%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        80% {
          transform: translateY(-5px);
        }
      }

      /* Mobile Responsiveness */
      @media (max-width: 768px) {
        .lesson-content {
          grid-template-columns: 1fr;
        }

        .hero h1 {
          font-size: 2.5rem;
        }

        .lesson-nav {
          gap: 10px;
        }

        .lesson-btn {
          padding: 8px 16px;
          font-size: 14px;
        }
      }

      .floating-shapes {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
      }

      .shape {
        position: absolute;
        opacity: 0.1;
        animation: float 6s ease-in-out infinite;
      }

      .shape:nth-child(1) {
        top: 20%;
        left: 10%;
        animation-delay: 0s;
      }
      .shape:nth-child(2) {
        top: 40%;
        right: 15%;
        animation-delay: 2s;
      }
      .shape:nth-child(3) {
        bottom: 30%;
        left: 20%;
        animation-delay: 4s;
      }
      .shape:nth-child(4) {
        bottom: 20%;
        right: 10%;
        animation-delay: 1s;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-20px) rotate(180deg);
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="navbar">
          <div class="logo-container">
            <a href="#" class="logo-text">üåü 3D Adventure</a>
          </div>
          <a href="#" class="back-btn">‚Üê Back to JavaScript</a>
        </div>
      </div>
    </header>

    <section class="hero">
      <div class="container">
        <h1>Three.js 3D Graphics Adventure! üöÄ</h1>
        <p>
          Create amazing 3D worlds, animations, and interactive experiences with
          JavaScript!
        </p>
        <div class="floating-shapes">
          <div class="shape">üî∫</div>
          <div class="shape">üî∑</div>
          <div class="shape">‚≠ê</div>
          <div class="shape">üéØ</div>
        </div>
      </div>
    </section>

    <main class="learning-content">
      <div class="container">
        <div class="lesson-nav">
          <button class="lesson-btn active" data-lesson="basics">
            3D Basics
          </button>
          <button class="lesson-btn" data-lesson="shapes">3D Shapes</button>
          <button class="lesson-btn" data-lesson="materials">
            Colors & Materials
          </button>
          <button class="lesson-btn" data-lesson="animation">Animation</button>
          <button class="lesson-btn" data-lesson="interaction">
            User Interaction
          </button>
          <button class="lesson-btn" data-lesson="scene">3D Scene</button>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" style="width: 16.6%"></div>
        </div>

        <!-- Lesson 1: 3D Basics -->
        <div class="lesson active" id="lesson-basics">
          <div class="lesson-content">
            <div class="theory-panel">
              <h3>üåü Welcome to 3D World!</h3>
              <p>
                Three.js is like a magic paintbrush for creating 3D worlds on
                websites! Just like how we use crayons to draw on paper, we use
                Three.js to create 3D objects that we can see and move around.
              </p>

              <p><strong>What do we need for 3D magic? üé≠</strong></p>
              <ul style="margin-left: 20px; color: #666">
                <li><strong>Scene:</strong> Like a stage for our 3D show</li>
                <li><strong>Camera:</strong> Our eyes to see the 3D world</li>
                <li>
                  <strong>Renderer:</strong> The magic that draws everything
                </li>
              </ul>

              <div class="code-example">
                // Create our 3D world ingredients const scene = new
                THREE.Scene(); const camera = new THREE.PerspectiveCamera(75,
                400/400, 0.1, 1000); const renderer = new THREE.WebGLRenderer();
                // Set up our magic drawing area renderer.setSize(400, 400);
              </div>

              <p>
                Think of it like setting up a puppet show - we need the stage
                (scene), someone to watch (camera), and the person operating the
                puppets (renderer)!
              </p>
            </div>

            <div class="demo-panel">
              <canvas class="demo-canvas" id="canvas-basics"></canvas>
              <div class="controls">
                <h4>üéÆ Try This:</h4>
                <p>
                  Look at your first 3D scene! The spinning cube shows you're
                  ready for 3D adventures!
                </p>
                <button class="btn" onclick="resetBasicsDemo()">
                  üîÑ Restart
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Lesson 2: 3D Shapes -->
        <div class="lesson" id="lesson-shapes">
          <div class="lesson-content">
            <div class="theory-panel">
              <h3>üî∑ Building 3D Shapes</h3>
              <p>
                In 3D, we can create amazing shapes called "geometries". It's
                like having magical building blocks!
              </p>

              <div class="code-example">
                // Create different 3D shapes const cubeGeometry = new
                THREE.BoxGeometry(1, 1, 1); const sphereGeometry = new
                THREE.SphereGeometry(0.7, 32, 32); const cylinderGeometry = new
                THREE.CylinderGeometry(0.5, 0.5, 1, 32); // Make them visible
                with materials const material = new
                THREE.MeshBasicMaterial({color: 0x00ff00}); const cube = new
                THREE.Mesh(cubeGeometry, material);
              </div>

              <p><strong>Cool 3D Shapes You Can Make:</strong></p>
              <ul style="margin-left: 20px; color: #666">
                <li>üì¶ <strong>Cube:</strong> Like dice or boxes</li>
                <li>‚öΩ <strong>Sphere:</strong> Like balls or planets</li>
                <li>ü•§ <strong>Cylinder:</strong> Like cans or tubes</li>
                <li>üî∫ <strong>Pyramid:</strong> Like Egyptian pyramids</li>
              </ul>
            </div>

            <div class="demo-panel">
              <canvas class="demo-canvas" id="canvas-shapes"></canvas>
              <div class="controls">
                <div class="control-group">
                  <label>Choose Your Shape:</label>
                  <button class="btn" onclick="changeShape('cube')">
                    üì¶ Cube
                  </button>
                  <button class="btn" onclick="changeShape('sphere')">
                    ‚öΩ Sphere
                  </button>
                  <button class="btn" onclick="changeShape('cylinder')">
                    ü•§ Cylinder
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Lesson 3: Colors & Materials -->
        <div class="lesson" id="lesson-materials">
          <div class="lesson-content">
            <div class="theory-panel">
              <h3>üé® Colors & Materials</h3>
              <p>
                Materials are like the "skin" of our 3D objects. We can make
                them shiny like metal, colorful like rainbows, or even make them
                glow!
              </p>

              <div class="code-example">
                // Different types of materials const basicMaterial = new
                THREE.MeshBasicMaterial({color: 0xff0000}); const
                lambertMaterial = new THREE.MeshLambertMaterial({color:
                0x00ff00}); const phongMaterial = new THREE.MeshPhongMaterial({
                color: 0x0000ff, shininess: 100 }); // Add some light to see
                shiny materials const light = new
                THREE.DirectionalLight(0xffffff, 1); scene.add(light);
              </div>

              <p><strong>Types of Materials:</strong></p>
              <ul style="margin-left: 20px; color: #666">
                <li>üéØ <strong>Basic:</strong> Simple, flat colors</li>
                <li>
                  üåô <strong>Lambert:</strong> Responds to light naturally
                </li>
                <li>‚ú® <strong>Phong:</strong> Shiny and reflective</li>
              </ul>
            </div>

            <div class="demo-panel">
              <canvas class="demo-canvas" id="canvas-materials"></canvas>
              <div class="controls">
                <div class="control-group">
                  <label>Pick a Color:</label>
                  <input
                    type="color"
                    class="color-picker"
                    id="colorPicker"
                    value="#ff0000"
                    onchange="changeMaterialColor(this.value)"
                  />
                </div>
                <div class="control-group">
                  <label>Material Type:</label>
                  <button class="btn" onclick="changeMaterialType('basic')">
                    üéØ Basic
                  </button>
                  <button class="btn" onclick="changeMaterialType('lambert')">
                    üåô Lambert
                  </button>
                  <button class="btn" onclick="changeMaterialType('phong')">
                    ‚ú® Phong
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Lesson 4: Animation -->
        <div class="lesson" id="lesson-animation">
          <div class="lesson-content">
            <div class="theory-panel">
              <h3>üé¨ Making Things Move</h3>
              <p>
                Animation brings our 3D world to life! We can make objects spin,
                bounce, grow, and dance around the screen!
              </p>

              <div class="code-example">
                // Animation loop - this runs many times per second function
                animate() { requestAnimationFrame(animate); // Make the cube
                spin cube.rotation.x += 0.01; cube.rotation.y += 0.01; // Make
                it bounce up and down cube.position.y = Math.sin(Date.now() *
                0.005) * 0.5; renderer.render(scene, camera); } animate(); //
                Start the animation!
              </div>

              <p><strong>Cool Animation Ideas:</strong></p>
              <ul style="margin-left: 20px; color: #666">
                <li>üåÄ <strong>Rotation:</strong> Spinning like a top</li>
                <li>‚¨ÜÔ∏è <strong>Position:</strong> Moving around in space</li>
                <li>üìè <strong>Scale:</strong> Growing bigger or smaller</li>
                <li>üåà <strong>Color:</strong> Changing colors over time</li>
              </ul>
            </div>

            <div class="demo-panel">
              <canvas class="demo-canvas" id="canvas-animation"></canvas>
              <div class="controls">
                <div class="control-group">
                  <label>Animation Speed:</label>
                  <input
                    type="range"
                    class="slider"
                    min="0"
                    max="5"
                    value="1"
                    step="0.1"
                    id="speedSlider"
                    oninput="changeAnimationSpeed(this.value)"
                  />
                </div>
                <div class="control-group">
                  <button class="btn" onclick="toggleAnimation()">
                    ‚èØÔ∏è Play/Pause
                  </button>
                  <button class="btn" onclick="addBouncyBall()">
                    ‚öΩ Add Bouncy Ball
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Lesson 5: User Interaction -->
        <div class="lesson" id="lesson-interaction">
          <div class="lesson-content">
            <div class="theory-panel">
              <h3>üñ±Ô∏è Click and Drag Fun</h3>
              <p>
                Make your 3D world interactive! Users can click on objects, drag
                them around, and even change them with keyboard presses!
              </p>

              <div class="code-example">
                // Detect mouse clicks on 3D objects const raycaster = new
                THREE.Raycaster(); const mouse = new THREE.Vector2();
                canvas.addEventListener('click', (event) => { // Convert mouse
                position to 3D coordinates mouse.x = (event.clientX /
                canvas.width) * 2 - 1; mouse.y = -(event.clientY /
                canvas.height) * 2 + 1; // Check what we clicked
                raycaster.setFromCamera(mouse, camera); const intersects =
                raycaster.intersectObjects(scene.children); if
                (intersects.length > 0) { // We clicked something! Make it
                bigger intersects[0].object.scale.multiplyScalar(1.2); } });
              </div>

              <p><strong>Interactive Ideas:</strong></p>
              <ul style="margin-left: 20px; color: #666">
                <li>üëÜ <strong>Click:</strong> Change colors or size</li>
                <li>üñ±Ô∏è <strong>Drag:</strong> Move objects around</li>
                <li>‚å®Ô∏è <strong>Keyboard:</strong> Control with arrow keys</li>
                <li>üì± <strong>Touch:</strong> Works on phones too!</li>
              </ul>
            </div>

            <div class="demo-panel">
              <canvas class="demo-canvas" id="canvas-interaction"></canvas>
              <div class="controls">
                <h4>üéÆ Try This:</h4>
                <p>
                  Click on the 3D objects to make them grow and change colors!
                </p>
                <button class="btn" onclick="resetInteractionDemo()">
                  üîÑ Reset Objects
                </button>
                <button class="btn" onclick="addClickableObject()">
                  ‚ûï Add Object
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Lesson 6: 3D Scene -->
        <div class="lesson" id="lesson-scene">
          <div class="lesson-content">
            <div class="theory-panel">
              <h3>üåç Building a 3D World</h3>
              <p>
                Now let's put everything together and build an amazing 3D scene
                with multiple objects, lights, and effects!
              </p>

              <div class="code-example">
                // Create a complete 3D world const scene = new THREE.Scene();
                scene.background = new THREE.Color(0x87CEEB); // Sky blue // Add
                multiple lights const ambientLight = new
                THREE.AmbientLight(0x404040, 0.6); const directionalLight = new
                THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(10, 10, 5); // Create a ground
                plane const groundGeometry = new THREE.PlaneGeometry(20, 20);
                const groundMaterial = new THREE.MeshLambertMaterial({color:
                0x90EE90}); const ground = new THREE.Mesh(groundGeometry,
                groundMaterial); ground.rotation.x = -Math.PI / 2;
                scene.add(ambientLight, directionalLight, ground);
              </div>

              <p><strong>Your 3D World Includes:</strong></p>
              <ul style="margin-left: 20px; color: #666">
                <li>üåÖ <strong>Background:</strong> Beautiful sky</li>
                <li>üí° <strong>Lighting:</strong> Realistic shadows</li>
                <li>üèîÔ∏è <strong>Ground:</strong> Surface to stand on</li>
                <li>üè† <strong>Objects:</strong> Buildings and decorations</li>
              </ul>
            </div>

            <div class="demo-panel">
              <canvas class="demo-canvas" id="canvas-scene"></canvas>
              <div class="controls">
                <div class="control-group">
                  <label>Camera Angle:</label>
                  <input
                    type="range"
                    class="slider"
                    min="0"
                    max="360"
                    value="0"
                    id="cameraAngle"
                    oninput="changeCameraAngle(this.value)"
                  />
                </div>
                <button class="btn" onclick="addHouse()">üè† Add House</button>
                <button class="btn" onclick="addTree()">üå≥ Add Tree</button>
                <button class="btn" onclick="changeTimeOfDay()">
                  üåÖ Change Time
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Vocabulary Section -->
        <div class="vocabulary-section">
          <h3>üéì 3D Graphics Vocabulary</h3>
          <div class="vocab-grid">
            <div class="vocab-card">
              <div class="vocab-term">Scene</div>
              <div class="vocab-definition">
                The 3D world where all objects live, like a stage for a play
              </div>
            </div>
            <div class="vocab-card">
              <div class="vocab-term">Camera</div>
              <div class="vocab-definition">
                Your viewpoint into the 3D world, like your eyes
              </div>
            </div>
            <div class="vocab-card">
              <div class="vocab-term">Renderer</div>
              <div class="vocab-definition">
                The magical painter that draws the 3D world on your screen
              </div>
            </div>
            <div class="vocab-card">
              <div class="vocab-term">Geometry</div>
              <div class="vocab-definition">
                The shape of 3D objects, like cubes, spheres, or pyramids
              </div>
            </div>
            <div class="vocab-card">
              <div class="vocab-term">Material</div>
              <div class="vocab-definition">
                The "skin" of objects - their color, shininess, and texture
              </div>
            </div>
            <div class="vocab-card">
              <div class="vocab-term">Mesh</div>
              <div class="vocab-definition">
                A geometry + material combined to make a visible 3D object
              </div>
            </div>
          </div>
        </div>

        <div id="achievement" class="achievement" style="display: none">
          <h3>üèÜ Congratulations!</h3>
          <p>
            You've completed a lesson and earned a 3D Graphics badge! Keep
            exploring to unlock more achievements!
          </p>
        </div>
      </div>
    </main>

    <script>
      // Global variables for 3D scenes
      let scenes = {};
      let cameras = {};
      let renderers = {};
      let objects = {};
      let animationStates = {};

      // Initialize all lessons
      document.addEventListener("DOMContentLoaded", function () {
        initBasicsLesson();
        initShapesLesson();
        initMaterialsLesson();
        initAnimationLesson();
        initInteractionLesson();
        initSceneLesson();
      });

      // Lesson navigation
      document.querySelectorAll(".lesson-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          const lesson = this.dataset.lesson;
          showLesson(lesson);
          updateProgress();
        });
      });

      function showLesson(lessonId) {
        // Hide all lessons
        document.querySelectorAll(".lesson").forEach((lesson) => {
          lesson.classList.remove("active");
        });
        document.querySelectorAll(".lesson-btn").forEach((btn) => {
          btn.classList.remove("active");
        });

        // Show selected lesson
        document.getElementById("lesson-" + lessonId).classList.add("active");
        document
          .querySelector(`[data-lesson="${lessonId}"]`)
          .classList.add("active");

        // Show achievement
        showAchievement();
      }

      function updateProgress() {
        const activeLesson = document.querySelector(".lesson-btn.active");
        const allLessons = document.querySelectorAll(".lesson-btn");
        const currentIndex = Array.from(allLessons).indexOf(activeLesson);
        const progress = ((currentIndex + 1) / allLessons.length) * 100;
        document.querySelector(".progress-fill").style.width = progress + "%";
      }

      function showAchievement() {
        const achievement = document.getElementById("achievement");
        achievement.style.display = "block";
        setTimeout(() => {
          achievement.style.display = "none";
        }, 3000);
      }

      // Lesson 1: Basics
      function initBasicsLesson() {
        const canvas = document.getElementById("canvas-basics");
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(
          75,
          canvas.width / canvas.height,
          0.1,
          1000
        );
        const renderer = new THREE.WebGLRenderer({ canvas: canvas });

        renderer.setSize(canvas.clientWidth, canvas.clientHeight);

        // Create a spinning cube
        const geometry = new THREE.BoxGeometry(1, 1, 1);
        const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube);

        camera.position.z = 5;

        // Store references
        scenes.basics = scene;
        cameras.basics = camera;
        renderers.basics = renderer;
        objects.basics = cube;
        animationStates.basics = true;

        function animate() {
          if (animationStates.basics) {
            requestAnimationFrame(animate);
            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;
            renderer.render(scene, camera);
          }
        }
        animate();
      }

      function resetBasicsDemo() {
        if (objects.basics) {
          objects.basics.rotation.set(0, 0, 0);
        }
      }

      // Lesson 2: Shapes
      function initShapesLesson() {
        const canvas = document.getElementById("canvas-shapes");
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(
          75,
          canvas.width / canvas.height,
          0.1,
          1000
        );
        const renderer = new THREE.WebGLRenderer({ canvas: canvas });

        renderer.setSize(canvas.clientWidth, canvas.clientHeight);

        // Start with a cube
        const geometry = new THREE.BoxGeometry(1, 1, 1);
        const material = new THREE.MeshBasicMaterial({ color: 0x0077ff });
        const shape = new THREE.Mesh(geometry, material);
        scene.add(shape);

        camera.position.z = 5;

        // Store references
        scenes.shapes = scene;
        cameras.shapes = camera;
        renderers.shapes = renderer;
        objects.shapes = shape;
        animationStates.shapes = true;

        function animate() {
          if (animationStates.shapes) {
            requestAnimationFrame(animate);
            shape.rotation.x += 0.005;
            shape.rotation.y += 0.01;
            renderer.render(scene, camera);
          }
        }
        animate();
      }

      function changeShape(shapeType) {
        const scene = scenes.shapes;
        const shape = objects.shapes;

        // Remove current shape
        scene.remove(shape);

        let geometry;
        switch (shapeType) {
          case "cube":
            geometry = new THREE.BoxGeometry(1, 1, 1);
            break;
          case "sphere":
            geometry = new THREE.SphereGeometry(0.7, 32, 32);
            break;
          case "cylinder":
            geometry = new THREE.CylinderGeometry(0.5, 0.5, 1, 32);
            break;
        }

        const material = new THREE.MeshBasicMaterial({ color: 0x0077ff });
        const newShape = new THREE.Mesh(geometry, material);
        scene.add(newShape);
        objects.shapes = newShape;
      }

      // Lesson 3: Materials
      function initMaterialsLesson() {
        const canvas = document.getElementById("canvas-materials");
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(
          75,
          canvas.width / canvas.height,
          0.1,
          1000
        );
        const renderer = new THREE.WebGLRenderer({ canvas: canvas });

        renderer.setSize(canvas.clientWidth, canvas.clientHeight);

        // Add lights for material effects
        const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 5, 5);
        scene.add(ambientLight, directionalLight);

        // Create object with material
        const geometry = new THREE.BoxGeometry(1, 1, 1);
        const material = new THREE.MeshLambertMaterial({ color: 0xff0000 });
        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube);

        camera.position.z = 5;

        // Store references
        scenes.materials = scene;
        cameras.materials = camera;
        renderers.materials = renderer;
        objects.materials = cube;
        animationStates.materials = true;

        function animate() {
          if (animationStates.materials) {
            requestAnimationFrame(animate);
            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;
            renderer.render(scene, camera);
          }
        }
        animate();
      }

      function changeMaterialColor(color) {
        const cube = objects.materials;
        if (cube && cube.material) {
          cube.material.color.setHex(color.replace("#", "0x"));
        }
      }

      function changeMaterialType(type) {
        const cube = objects.materials;
        if (!cube) return;

        const currentColor = cube.material.color.getHex();
        let newMaterial;

        switch (type) {
          case "basic":
            newMaterial = new THREE.MeshBasicMaterial({ color: currentColor });
            break;
          case "lambert":
            newMaterial = new THREE.MeshLambertMaterial({
              color: currentColor,
            });
            break;
          case "phong":
            newMaterial = new THREE.MeshPhongMaterial({
              color: currentColor,
              shininess: 100,
            });
            break;
        }

        cube.material = newMaterial;
      }

      // Lesson 4: Animation
      function initAnimationLesson() {
        const canvas = document.getElementById("canvas-animation");
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(
          75,
          canvas.width / canvas.height,
          0.1,
          1000
        );
        const renderer = new THREE.WebGLRenderer({ canvas: canvas });

        renderer.setSize(canvas.clientWidth, canvas.clientHeight);

        // Create animated objects
        const geometry = new THREE.BoxGeometry(1, 1, 1);
        const material = new THREE.MeshBasicMaterial({ color: 0xff6b6b });
        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube);

        camera.position.z = 5;

        // Store references
        scenes.animation = scene;
        cameras.animation = camera;
        renderers.animation = renderer;
        objects.animation = { main: cube, extras: [] };
        animationStates.animation = { running: true, speed: 1 };

        function animate() {
          if (animationStates.animation.running) {
            requestAnimationFrame(animate);

            const speed = animationStates.animation.speed;
            const time = Date.now() * 0.001 * speed;

            // Animate main cube
            cube.rotation.x += 0.01 * speed;
            cube.rotation.y += 0.01 * speed;
            cube.position.y = Math.sin(time * 2) * 0.5;

            // Animate extra objects
            objects.animation.extras.forEach((obj, index) => {
              obj.position.y = Math.sin(time * 2 + index) * 0.8;
              obj.rotation.z += 0.02 * speed;
            });

            renderer.render(scene, camera);
          }
        }
        animate();
      }

      function changeAnimationSpeed(speed) {
        animationStates.animation.speed = parseFloat(speed);
      }

      function toggleAnimation() {
        animationStates.animation.running = !animationStates.animation.running;
        if (animationStates.animation.running) {
          initAnimationLesson(); // Restart animation loop
        }
      }

      function addBouncyBall() {
        const scene = scenes.animation;
        const geometry = new THREE.SphereGeometry(0.3, 32, 32);
        const material = new THREE.MeshBasicMaterial({
          color: Math.random() * 0xffffff,
        });
        const ball = new THREE.Mesh(geometry, material);
        ball.position.x = (Math.random() - 0.5) * 4;
        ball.position.z = (Math.random() - 0.5) * 2;
        scene.add(ball);
        objects.animation.extras.push(ball);
      }

      // Lesson 5: Interaction
      function initInteractionLesson() {
        const canvas = document.getElementById("canvas-interaction");
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(
          75,
          canvas.width / canvas.height,
          0.1,
          1000
        );
        const renderer = new THREE.WebGLRenderer({ canvas: canvas });

        renderer.setSize(canvas.clientWidth, canvas.clientWidth);

        // Create interactive objects
        const objects = [];
        for (let i = 0; i < 3; i++) {
          const geometry = new THREE.BoxGeometry(0.8, 0.8, 0.8);
          const material = new THREE.MeshBasicMaterial({
            color: Math.random() * 0xffffff,
          });
          const cube = new THREE.Mesh(geometry, material);
          cube.position.x = (i - 1) * 2;
          cube.userData = {
            originalScale: 1,
            originalColor: material.color.getHex(),
          };
          scene.add(cube);
          objects.push(cube);
        }

        camera.position.z = 5;

        // Mouse interaction
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        canvas.addEventListener("click", (event) => {
          const rect = canvas.getBoundingClientRect();
          mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
          mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

          raycaster.setFromCamera(mouse, camera);
          const intersects = raycaster.intersectObjects(objects);

          if (intersects.length > 0) {
            const object = intersects[0].object;
            object.scale.multiplyScalar(1.2);
            object.material.color.setHex(Math.random() * 0xffffff);
          }
        });

        // Store references
        scenes.interaction = scene;
        cameras.interaction = camera;
        renderers.interaction = renderer;
        objects.interaction = objects;
        animationStates.interaction = true;

        function animate() {
          if (animationStates.interaction) {
            requestAnimationFrame(animate);
            objects.forEach((obj) => {
              obj.rotation.y += 0.005;
            });
            renderer.render(scene, camera);
          }
        }
        animate();
      }

      function resetInteractionDemo() {
        const objects = objects.interaction;
        objects.forEach((obj) => {
          obj.scale.set(1, 1, 1);
          obj.material.color.setHex(obj.userData.originalColor);
        });
      }

      function addClickableObject() {
        const scene = scenes.interaction;
        const geometry = new THREE.SphereGeometry(0.4, 32, 32);
        const material = new THREE.MeshBasicMaterial({
          color: Math.random() * 0xffffff,
        });
        const sphere = new THREE.Mesh(geometry, material);
        sphere.position.set(
          (Math.random() - 0.5) * 4,
          (Math.random() - 0.5) * 2,
          (Math.random() - 0.5) * 2
        );
        sphere.userData = {
          originalScale: 1,
          originalColor: material.color.getHex(),
        };
        scene.add(sphere);
        objects.interaction.push(sphere);
      }

      // Lesson 6: Scene
      function initSceneLesson() {
        const canvas = document.getElementById("canvas-scene");
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x87ceeb);

        const camera = new THREE.PerspectiveCamera(
          75,
          canvas.width / canvas.height,
          0.1,
          1000
        );
        const renderer = new THREE.WebGLRenderer({ canvas: canvas });

        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;

        // Lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(10, 10, 5);
        directionalLight.castShadow = true;
        scene.add(ambientLight, directionalLight);

        // Ground
        const groundGeometry = new THREE.PlaneGeometry(20, 20);
        const groundMaterial = new THREE.MeshLambertMaterial({
          color: 0x90ee90,
        });
        const ground = new THREE.Mesh(groundGeometry, groundMaterial);
        ground.rotation.x = -Math.PI / 2;
        ground.receiveShadow = true;
        scene.add(ground);

        // Initial objects
        const cubeGeometry = new THREE.BoxGeometry(1, 1, 1);
        const cubeMaterial = new THREE.MeshLambertMaterial({ color: 0xff6b6b });
        const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
        cube.position.set(0, 0.5, 0);
        cube.castShadow = true;
        scene.add(cube);

        camera.position.set(5, 5, 5);
        camera.lookAt(0, 0, 0);

        // Store references
        scenes.scene = scene;
        cameras.scene = camera;
        renderers.scene = renderer;
        objects.scene = { ground: ground, main: cube, extras: [] };
        animationStates.scene = {
          running: true,
          cameraAngle: 0,
          timeOfDay: "day",
        };

        function animate() {
          if (animationStates.scene.running) {
            requestAnimationFrame(animate);
            cube.rotation.y += 0.005;
            renderer.render(scene, camera);
          }
        }
        animate();
      }

      function changeCameraAngle(angle) {
        const camera = cameras.scene;
        const angleRad = (angle * Math.PI) / 180;
        camera.position.x = Math.cos(angleRad) * 8;
        camera.position.z = Math.sin(angleRad) * 8;
        camera.lookAt(0, 0, 0);
        animationStates.scene.cameraAngle = angle;
      }

      function addHouse() {
        const scene = scenes.scene;

        // House base
        const baseGeometry = new THREE.BoxGeometry(2, 1.5, 2);
        const baseMaterial = new THREE.MeshLambertMaterial({ color: 0x8b4513 });
        const base = new THREE.Mesh(baseGeometry, baseMaterial);
        base.position.set(
          (Math.random() - 0.5) * 6,
          0.75,
          (Math.random() - 0.5) * 6
        );
        base.castShadow = true;

        // Roof
        const roofGeometry = new THREE.ConeGeometry(1.5, 1, 4);
        const roofMaterial = new THREE.MeshLambertMaterial({ color: 0x654321 });
        const roof = new THREE.Mesh(roofGeometry, roofMaterial);
        roof.position.copy(base.position);
        roof.position.y += 1.25;
        roof.rotation.y = Math.PI / 4;
        roof.castShadow = true;

        scene.add(base, roof);
        objects.scene.extras.push(base, roof);
      }

      function addTree() {
        const scene = scenes.scene;

        // Trunk
        const trunkGeometry = new THREE.CylinderGeometry(0.1, 0.15, 1, 8);
        const trunkMaterial = new THREE.MeshLambertMaterial({
          color: 0x8b4513,
        });
        const trunk = new THREE.Mesh(trunkGeometry, trunkMaterial);
        trunk.position.set(
          (Math.random() - 0.5) * 8,
          0.5,
          (Math.random() - 0.5) * 8
        );
        trunk.castShadow = true;

        // Leaves
        const leavesGeometry = new THREE.SphereGeometry(0.8, 8, 8);
        const leavesMaterial = new THREE.MeshLambertMaterial({
          color: 0x228b22,
        });
        const leaves = new THREE.Mesh(leavesGeometry, leavesMaterial);
        leaves.position.copy(trunk.position);
        leaves.position.y += 1.3;
        leaves.castShadow = true;

        scene.add(trunk, leaves);
        objects.scene.extras.push(trunk, leaves);
      }

      function changeTimeOfDay() {
        const scene = scenes.scene;
        const state = animationStates.scene;

        if (state.timeOfDay === "day") {
          // Change to night
          scene.background = new THREE.Color(0x191970);
          state.timeOfDay = "night";
        } else {
          // Change to day
          scene.background = new THREE.Color(0x87ceeb);
          state.timeOfDay = "day";
        }
      }

      // Handle window resize
      window.addEventListener("resize", () => {
        Object.keys(cameras).forEach((key) => {
          const canvas = document.getElementById(`canvas-${key}`);
          const camera = cameras[key];
          const renderer = renderers[key];

          if (canvas && camera && renderer) {
            camera.aspect = canvas.clientWidth / canvas.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
          }
        });
      });
    </script>
  </body>
</html>
